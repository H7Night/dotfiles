"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8828],{10311:(t,e,a)=>{a.d(e,{d:()=>l});var o=a(97500),n=a.n(o),r=a(41985),i=a(70330);const s="UyzJidwrGk3awngSGIwv";var c=a(86070);const l=({durationMs:t,className:e,displaySeconds:a})=>{const{hours:o,minutes:l,seconds:u}=(0,r.S)(t);return a=!1!==a&&!o&&u,(0,c.jsx)("span",{className:n()(s,e),children:(0,i.j)({h:o,m:l,s:a?u:0})})}},42283:(t,e,a)=>{a.d(e,{A:()=>o});const o={Heading:"playlist-playlist-heading",HTMLDescription:"playlist-playlist-playlistDescription",List:"playlist-playlist-list",ListItem:"playlist-playlist-listItem",Paragraph:"playlist-playlist-paragraph"}},44063:(t,e,a)=>{a.r(e),a.d(e,{default:()=>Wt});var o=a(30758),n=a(62411),r=a(85387),i=a(65012),s=a(93960);const c="music",l="1.3.0",u="default",h="15.1.0";function p(t){return new d(t)}class d{constructor(t){this._path=[{name:"desktop-liked-songs",...t.data}],t?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=t.parentAbsoluteLocation)}headerFactory(){return new d.HeaderEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}actionBarFactory(){return new d.ActionBarEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}tracklistFactory(){return new d.TracklistEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}!function(t){t.HeaderEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"header"}),e&&(this._parentAbsoluteLocation=e)}ownerFactory(){return new t.HeaderEventFactory.OwnerEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}}(d||(d={})),function(t){t.ActionBarEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"action_bar"}),e&&(this._parentAbsoluteLocation=e)}playButtonFactory(){return new t.ActionBarEventFactory.PlayButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}shuffleButtonContainerFactory(){return new t.ActionBarEventFactory.ShuffleButtonContainerEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}downloadButtonFactory(){return new t.ActionBarEventFactory.DownloadButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}filtersFactory(){return new t.ActionBarEventFactory.FiltersEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}}(d||(d={})),function(t){t.TracklistEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"tracklist"}),e&&(this._parentAbsoluteLocation=e)}columnHeaderFactory(e){return new t.TracklistEventFactory.ColumnHeaderEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}}(d||(d={})),function(t){!function(t){t.OwnerEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"owner"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:c,generatorVersion:h,interactionType:"hit",specificationMode:u,specificationVersion:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(t.HeaderEventFactory||(t.HeaderEventFactory={}))}(d||(d={})),function(t){!function(t){t.PlayButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"play_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitPlay({itemToBePlayed:t}){return{actionParameterNames:["item_to_be_played"],actionParameterValues:[t.toString()],actionName:"play",actionVersion:1,app:c,generatorVersion:h,interactionType:"hit",specificationMode:u,specificationVersion:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitResume({itemToBeResumed:t}){return{actionParameterNames:["item_to_be_resumed"],actionParameterValues:[t.toString()],actionName:"resume",actionVersion:1,app:c,generatorVersion:h,interactionType:"hit",specificationMode:u,specificationVersion:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitPause({itemToBePaused:t}){return{actionParameterNames:["item_to_be_paused"],actionParameterValues:[t.toString()],actionName:"pause",actionVersion:1,app:c,generatorVersion:h,interactionType:"hit",specificationMode:u,specificationVersion:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(t.ActionBarEventFactory||(t.ActionBarEventFactory={}))}(d||(d={})),function(t){!function(t){t.ShuffleButtonContainerEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"shuffle_button_container"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}}(t.ActionBarEventFactory||(t.ActionBarEventFactory={}))}(d||(d={})),function(t){!function(t){t.DownloadButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"download_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitDownload({itemToDownload:t}){return{actionParameterNames:["item_to_download"],actionParameterValues:[t.toString()],actionName:"download",actionVersion:1,app:c,generatorVersion:h,interactionType:"hit",specificationMode:u,specificationVersion:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitRemoveDownload({itemToRemoveFromDownloads:t}){return{actionParameterNames:["item_to_remove_from_downloads"],actionParameterValues:[t.toString()],actionName:"remove_download",actionVersion:1,app:c,generatorVersion:h,interactionType:"hit",specificationMode:u,specificationVersion:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:c,generatorVersion:h,interactionType:"hit",specificationMode:u,specificationVersion:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(t.ActionBarEventFactory||(t.ActionBarEventFactory={}))}(d||(d={})),function(t){!function(e){e.FiltersEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"filters"}),e&&(this._parentAbsoluteLocation=e)}clearButtonFactory(){return new t.ActionBarEventFactory.FiltersEventFactory.ClearButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}filterChipFactory(e){return new t.ActionBarEventFactory.FiltersEventFactory.FilterChipEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}}(t.ActionBarEventFactory||(t.ActionBarEventFactory={}))}(d||(d={})),function(t){!function(t){t.ColumnHeaderEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({...a,name:"column_header"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitSort(){return{actionName:"sort",actionVersion:1,app:c,generatorVersion:h,interactionType:"hit",specificationMode:u,specificationVersion:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(t.TracklistEventFactory||(t.TracklistEventFactory={}))}(d||(d={})),function(t){!function(t){!function(t){t.ClearButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"clear_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitClearFilter(){return{actionName:"clear_filter",actionVersion:1,app:c,generatorVersion:h,interactionType:"hit",specificationMode:u,specificationVersion:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(t.FiltersEventFactory||(t.FiltersEventFactory={}))}(t.ActionBarEventFactory||(t.ActionBarEventFactory={}))}(d||(d={})),function(t){!function(t){!function(t){t.FilterChipEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({...a,name:"filter_chip"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[u,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[l,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitFilter(){return{actionName:"filter",actionVersion:1,app:c,generatorVersion:h,interactionType:"hit",specificationMode:u,specificationVersion:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitClearFilter(){return{actionName:"clear_filter",actionVersion:1,app:c,generatorVersion:h,interactionType:"hit",specificationMode:u,specificationVersion:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(t.FiltersEventFactory||(t.FiltersEventFactory={}))}(t.ActionBarEventFactory||(t.ActionBarEventFactory={}))}(d||(d={}));var m=a(31014),g=a(79252),y=a(11936),f=a(63496),A=a(89339),_=a(93495),L=a(93354),b=a(18786),C=a(20494),F=a(44558),T=a(55784),v=a(19730),x=a(45619),E=a(87144),k=a(2384),j=a(46717),V=a(47413),S=a(66396),N=a(38230),w=a(3161),I=a(90513),M=a(86070);const P=o.memo((({tracklistDomRef:t,columns:e})=>{const{spec:a,logger:n}=(0,w.r)(V.E,{}),r=(0,o.useCallback)((()=>{n.logInteraction(a.filterFieldFactory().keyStrokeFilter())}),[n,a]),i=(0,o.useCallback)((()=>{n.logInteraction(a.filterFieldFactory().hitClearFilter())}),[n,a]),s=e.filter((t=>L.gc.includes(t))).map((t=>t));return(0,M.jsxs)("div",{className:I.A.searchBoxContainer,children:[(0,M.jsx)(o.Suspense,{fallback:null,children:(0,M.jsx)(S.S,{placeholder:g.Ru.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:t,onFilter:r,onClear:i})}),(0,M.jsx)(N.d,{columns:s})]})}));var D=a(97500),B=a.n(D),R=a(96314),$=a(5305),U=a(16318),O=a(83441),H=a(17145),z=a(19636),X=a(48540),q=a(43444),K=a(76137);const Q="liked-songs-tags";function G(){const t=(0,s.NC)(H.cLA),[e,a]=(0,K.x)("liked-songs-current-tag-filter",null);return[t?e:null,a]}var W=a(15845);const Z="q_yjkS1y6URH4Xm7gZfw",J=t=>({id:t.filter,getName:()=>t.name,ubiId:t.name}),Y=(0,o.memo)((({spec:t,nrTracks:e})=>{const{tags:a,currentTag:n,setCurrentTag:r}=function({nrTracks:t}){const e=(0,X.f)(),a=(0,$.jE)(),[n,r]=G(),[i,s]=(0,o.useState)([]),{data:c}=(0,U.I)({queryKey:[Q],queryFn:()=>e?.getTracksFilterTags(),staleTime:0,gcTime:864e5,placeholderData:O.rX,refetchOnWindowFocus:!1});(0,o.useLayoutEffect)((()=>{const e=c?.find((t=>t.filter===n));if(!e&&n){if(t>0&&c?.length)return;r(null)}s(c??[])}),[n,r,t,c]);const l=(0,o.useCallback)((({data:{list:t}})=>{t===z.Ir.TRACKS&&a.invalidateQueries({queryKey:[Q]})}),[a]);(0,q.l)(z.UV.UPDATE,l);const u=(0,o.useMemo)((()=>i.find((t=>t.filter===n))),[n,i]),h=(0,o.useCallback)((t=>{r(t?.filter??null)}),[r]);return{tags:n||t?i:[],currentTag:u,setCurrentTag:h}}({nrTracks:e}),i=(0,W.s)(),s=(0,o.useCallback)(((e,o,n)=>{let s;if(!e)return s=t.clearButtonFactory().hitClearFilter(),void i.logInteraction(s);const c=a.find((({filter:t})=>t===e));if(!c)return;const l=t.filterChipFactory({identifier:c.name,position:n});o?(s=l.hitClearFilter(),r(null)):(s=l.hitFilter(),c&&r(c)),i.logInteraction(s)}),[i,r,t,a]),c=n?[]:a.map(J),l=n?[J(n)]:[];return a.length?(0,M.jsx)(v.S,{children:(0,M.jsx)(R.s,{availableFilters:c,selectedFilters:l,toggleFilterId:()=>{},resetFilterIds:()=>r(null),onFilterClick:s,ariaLabel:g.Ru.get("web-player.liked-songs.liked-songs-filter-tags"),clearBtnAriaLabel:g.Ru.get("web-player.liked-songs.clear-filter"),className:B()(Z),applyLightThemeControls:!0})}):null}));var tt=a(93284),et=a(20109),at=a(49873),ot=a(33796),nt=a(15727),rt=a(41807),it=a(16859),st=a(34645);const ct="ivuDaTbfBpBewwr39aDQ",lt=o.memo((function({metadata:t,onClickTogglePlay:e,isPlaying:a,spec:n,logger:r,backgroundColor:i,canSort:c,canFilter:l,columns:u}){const{uri:h,name:p,totalLength:d}=t,m=(0,o.useRef)(null),y=(0,o.useMemo)((()=>n.actionBarFactory()),[n]),f=(0,o.useMemo)((()=>y.shuffleButtonContainerFactory()),[y]),A=(0,o.useMemo)((()=>y.filtersFactory()),[y]),_=d>0,L=d>0,b=c&&l,C=(0,at.X)(),F=(0,o.useCallback)(((t,e)=>{const a=y.downloadButtonFactory();e===nt.NV.ADD?r.logInteraction(a.hitDownload({itemToDownload:h})):e===nt.NV.REMOVE?r.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:h})):e===nt.NV.NO_PERMISSION&&r.logInteraction(a.hitUiReveal())}),[y,r,h]),V=(0,ot.j)(),S=(0,s.NC)(H.cLA);return(0,M.jsxs)(T.E,{backgroundColor:i,children:[(0,M.jsxs)(v.S,{children:[L?(0,M.jsx)(k.D,{onClick:e,isPlaying:a,size:V,uri:h,ariaPauseLabel:g.Ru.get("playlist.a11y.pause",p),ariaPlayLabel:g.Ru.get("playlist.a11y.play",p)}):null,C&&(0,M.jsx)(it.r,{spec:f,children:(0,M.jsx)(et.Y,{entityName:p,contextUri:h,activationPlacement:"bottomEnd",size:V})}),(0,M.jsx)(x.f,{uri:h,canDownload:_,isFollowing:!0,onFollow:()=>{},size:V,onClick:F,condensed:!0}),b?(0,M.jsx)(it.r,{spec:y,children:(0,M.jsx)(E.u,{property:H.IZ_,renderNewExperience:()=>(0,M.jsx)("div",{className:ct,children:(0,M.jsx)(tt.d,{sortOptions:[rt.nw.TITLE,rt.nw.ADDED_AT,rt.nw.ARTIST,rt.nw.ALBUM,rt.nw.DURATION],defaultSortField:rt.nw.ADDED_AT,filterPlaceholder:g.Ru.get("playlist.search_in_playlist"),enableViewModeMenu:!0})}),renderOldExperience:()=>(0,M.jsx)(P,{tracklistDomRef:m,columns:u})})}):(0,M.jsx)("div",{className:ct,children:(0,M.jsx)(E.u,{property:st.mA,renderNewExperience:()=>(0,M.jsx)(j.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),S&&(0,M.jsx)(Y,{spec:A,nrTracks:d})]})}));var ut=a(44133),ht=a(28660),pt=a(2336);var dt=a(27894),mt=a(26192);var gt=a(41726),yt=a(52663),ft=a(6159),At=a(14910);const _t=({ariaLabel:t,columns:e,columnPersistenceKey:a,renderItem:n,defaultSortField:i})=>{const{playlist:s}=(0,yt.g)(),c=(0,At.m)(),{canFetchAllTracks:l}=c.getCapabilities(),u=(0,gt.K)(),h=(0,o.useRef)(null),{isCompactMode:p}=(0,ft.a)(),d="custom-order"===i;(t=>{const e=(0,r.wQ)(),a=(0,r.zy)(),n="POP"!==e?new URLSearchParams(a.search).get("uid"):null;(0,o.useLayoutEffect)((()=>{t.current&&n&&t.current.scrollToItem({uid:n})}),[n,t])})(h);const{trackListSortState:m,onSort:g}=((t,e)=>{const{sortState:a,setSortState:n}=(0,dt.k)(),r=(0,o.useMemo)((()=>(0,mt.Ap)(t,a)),[t,a]),i=(0,o.useCallback)((t=>{n((0,mt.hK)(t,r,e))}),[e,n,r]);return{trackListSortState:r,onSort:i}})(e,d),y=(0,o.useCallback)((t=>({uri:t.uri,uid:t.uid,type:t.type})),[]),f=(0,o.useMemo)((()=>new Set((0,mt.g6)(e))),[e]);return(0,M.jsx)(C.a,{columns:e,children:(0,M.jsx)(pt.g0,{ariaLabel:t,hasHeaderRow:!0,columns:e,sortableColumns:f,sortState:m,onSort:g,renderRow:n,resolveItem:y,itemsCache:u,canFetchAllTracks:l,isCompactMode:p,columnPersistenceKey:a,outerRef:h},s.metadata.uri+p)})};var Lt=a(72308),bt=a(92675),Ct=a(61828);const Ft=[F.$.INDEX,F.$.TITLE_AND_ARTIST,F.$.ALBUM,F.$.ADDED_AT,F.$.DURATION],Tt=o.memo((function({usePlayContextItem:t}){const{isCompactMode:e}=(0,ft.a)(),a=(({isCompactMode:t=!1})=>{const e=[...Ft];return t&&e.splice(e.indexOf(F.$.TITLE_AND_ARTIST),1,F.$.TITLE,F.$.ARTIST),e})({isCompactMode:e}),{playlist:{metadata:n}}=(0,yt.g)(),r=(0,o.useCallback)(((a,o)=>{if(!(0,bt.Jy)(a))return(0,M.jsx)(M.Fragment,{});const r=(0,Ct.g)(a.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,M.jsx)(ht.W,{index:o,contextUri:n.uri,uri:a.uri,isPlayable:a.isPlayable,duration_ms:a.duration.milliseconds,name:a.name,artists:a.artists,albumOrShow:a.album,isExplicit:a.isExplicit,isMixedMedia:!1,isPaywalled:!1,isUserSubscribed:!1,isLocal:a.isLocal,addedBy:[],dateAdded:a.addedAt,hasDecoratedAddedBy:!1,release_date:"",isMOGEFRestricted:a.is19PlusOnly,type:a.type,imgUrl:r?.url||"",onMove:()=>{},onInsert:()=>{},usePlayContextItem:t,allowedDropTypes:[],isDisliked:!1,playlistName:g.Ru.get("sidebar.liked_songs"),isOwnedBySelf:!0,isCompactMode:e,hasAssociatedVideo:a.hasAssociatedVideo},o+a.uri)}),[n.uri,t,e]);return(0,M.jsx)(Lt.pZ,{value:"liked-songs-tracklist",children:(0,M.jsx)(_t,{ariaLabel:g.Ru.get("sidebar.liked_songs"),columns:a,renderItem:r,columnPersistenceKey:"liked-songs-tracklist",defaultSortField:rt.nw.ADDED_AT})})}));var vt=a(14833),xt=a(90335),Et=a(95961),kt=a(24848),jt=a(20254);const Vt=[F.$.INDEX,F.$.TITLE_AND_ARTIST,F.$.ALBUM,F.$.ADDED_AT,F.$.DURATION],St=()=>{const{playlist:{metadata:t},contentsOptions:e}=(0,yt.g)(),a=(0,At.m)(),{canSort:n,canFilter:r}=a.getCapabilities(),{uri:s,name:c,totalLength:l}=t,u=(0,xt.z)("#5038a0"),{spec:h,logger:d}=(0,w.r)(p,{data:{uri:s}}),m=o.useMemo((()=>h.headerFactory()),[h]),A=o.useMemo((()=>h.tracklistFactory()),[h]),{isPlaying:_,togglePlay:L,usePlayContextItem:C,isActive:F}=(0,kt.P)((0,jt.A)(t.uri,e),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),T=()=>{const t=(0,Et.$I)({isPlaying:_,isActive:F,spec:h.actionBarFactory().playButtonFactory(),logger:d,uri:s});L({loggingParams:t})},[v]=(0,b.z)();return(0,M.jsxs)("section",{role:"presentation","data-testid":"playlist-page",children:[(0,M.jsx)(y.Q,{children:g.Ru.get("playlist.page-title",c)}),(0,M.jsx)(vt.x,{metadata:{...t,hasSpotifyTracks:!0},totalItems:v,isPlaying:_,togglePlay:T,backgroundColor:u,specLikedSongs:m}),(0,M.jsx)(lt,{metadata:t,onClickTogglePlay:T,isPlaying:_,spec:h,logger:d,backgroundColor:u,canSort:n,canFilter:r,columns:Vt}),(0,M.jsx)("div",{className:"contentSpacing",children:l>0?(0,M.jsx)(it.r,{spec:A,children:(0,M.jsx)(Tt,{usePlayContextItem:C})}):(0,M.jsx)(f.p,{message:g.Ru.get("collection.empty-page.songs-subtitle"),title:g.Ru.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:g.Ru.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,M.jsx)(i.v,{"aria-hidden":"true"})})})]})};var Nt=a(61679),wt=a(88308),It=a(46485),Mt=a(92565);var Pt=a(2355),Dt=a(94705),Bt=a(87720),Rt=a(30319),$t=a(88251),Ut=a(55017),Ot=a(58151),Ht=a(59858);function zt(t,e){if(void 0===e||0===e.length)return;const a=function(t){return t.map((t=>{const{field:e,operator:a,value:o}=t;if(e!==Rt.Hh.TEXT&&e!==Rt.Hh.TAGS||a!==Rt.tl.CONTAINS)throw new Error("Invalid filter params!");return`${Xt[e]} ${qt[a]} "${o}"`})).join(",")}(e),o=(0,Ht.t)(e);t.url=`context://${t.uri}?filter=${encodeURIComponent(o)}`,t.metadata=t.metadata??{},t.metadata[Ot.W.FILTERING_PREDICATE]=a,t.metadata[Ot.W.LIST_UTIL_FILTER]=o}const Xt={[Rt.Hh.TEXT]:"text",[Rt.Hh.TAGS]:"tags"},qt={[Rt.tl.CONTAINS]:"=^#"};const Kt=[F.$.INDEX,F.$.TITLE_AND_ARTIST,F.$.ALBUM,F.$.ADDED_AT,F.$.DURATION],Qt=({data:t,canFilter:e,canSort:a})=>{const{uri:n,name:s,totalLength:c}=t.metadata,l=(0,o.useRef)(null),u=(0,xt.z)("#5038a0"),[h]=G(),{filter:d}=(0,o.useContext)(_.g),{sortState:m,setSortState:T}=(0,o.useContext)(L.cL),{spec:v,logger:x}=(0,w.r)(p,{data:{uri:n}}),E=o.useMemo((()=>v.headerFactory()),[v]),k=o.useMemo((()=>v.tracklistFactory()),[v]);(0,o.useEffect)((()=>{null===m.column&&T({column:F.$.ADDED_AT,order:F.H.DESC})}),[m,T]);const j=(0,r.wQ)(),V=(0,r.zy)(),S="POP"!==j?new URLSearchParams(V.search).get("uri"):null,{isPlaying:N,togglePlay:I,usePlayContextItem:P,isActive:D}=(0,kt.P)(function(t,e,a){const o={uri:t};return(0,Ut.q)(o,e),zt(o,a?.map((t=>(0,Rt.HI)(t)??null)).filter($t.P)),o}(n,(0,ut.c)(m),[d,h].filter($t.P)),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),B=()=>{const t=(0,Et.$I)({isPlaying:N,isActive:D,spec:v.actionBarFactory().playButtonFactory(),logger:x,uri:n});I({loggingParams:t})},[R]=(0,b.z)(),{isCompactMode:$}=(0,ft.a)(),U=(0,o.useMemo)((()=>(({isCompactMode:t=!1})=>{const e=[...Kt];return t&&e.splice(e.indexOf(F.$.TITLE_AND_ARTIST),1,F.$.TITLE,F.$.ARTIST),e})({isCompactMode:$})),[$]);return(0,M.jsxs)("section",{role:"presentation","data-testid":"playlist-page",children:[(0,M.jsx)(y.Q,{children:g.Ru.get("playlist.page-title",s)}),(0,M.jsx)(vt.x,{metadata:{...t.metadata,hasSpotifyTracks:!0},totalItems:R,isPlaying:N,togglePlay:B,backgroundColor:u,specLikedSongs:E}),(0,M.jsx)(lt,{metadata:t.metadata,onClickTogglePlay:B,isPlaying:N,spec:v,logger:x,backgroundColor:u,canSort:a,canFilter:e,columns:U}),(0,M.jsx)("div",{className:"contentSpacing",children:c>0?(0,M.jsx)(o.Suspense,{fallback:(0,M.jsx)(A.LoadingPage,{hasError:!1,errorMessage:g.Ru.get("error.request-collection-tracks-failure")}),children:(0,M.jsx)(it.r,{spec:k,children:(0,M.jsx)(C.a,{columns:U,children:(0,M.jsx)(Nt.b,{nrTracks:c,collectionUri:n,scrollToUri:S,usePlayContextItem:P,outerDomRef:l,spec:k,initialItems:t.contents.items,isCompactMode:$,tagFilter:h})})})}):(0,M.jsx)(f.p,{message:g.Ru.get("collection.empty-page.songs-subtitle"),title:g.Ru.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:g.Ru.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,M.jsx)(i.v,{"aria-hidden":"true"})})})]})},Gt=o.memo((function({user:t,uri:e}){const{filter:a}=(0,o.useContext)(_.g),{sortState:n}=(0,o.useContext)(L.cL),[r]=G(),i=function(t,e,a){const n=(0,X.f)(),r=(0,$.jE)(),i=(0,wt.U0)((()=>["useLikedSongs",t,a]),[t,a]),{data:s}=(0,U.I)({queryKey:i(),queryFn:()=>n.getTracks(a),gcTime:18e5,placeholderData:O.rX,refetchOnWindowFocus:!1}),c=(0,o.useCallback)((()=>{r.invalidateQueries({queryKey:i()})}),[r,i]);(0,q.l)(z.UV.UPDATE,c);const l=(0,It.$R)(e.id);return l&&s?{metadata:{uri:t,name:l.name,images:l.images,totalLength:s?.totalLength,unfilteredTotalLength:s.unfilteredTotalLength,owner:(0,Mt.w)(e)},contents:s}:null}(e,t,{offset:0,limit:25,sort:(0,ut.c)(n),filters:[a,r].filter($t.P)}),s=(0,X.f)().getCapabilities();return i?(0,M.jsx)(Qt,{data:i,canFilter:s.canFilterTracks&&i.metadata.unfilteredTotalLength>0,canSort:s.canSortTracks&&i.metadata.unfilteredTotalLength>0}):(0,M.jsx)(A.LoadingPage,{hasError:!1,errorMessage:g.Ru.get("error.not_found.title.playlist"),loadOffline:s.canModifyOffline})})),Wt=()=>{const{user:t}=(0,n.d4)(Dt.Ht);if((0,s.NC)(H.IZ_,{loadingValue:!1}))return(0,M.jsx)(Pt.W,{uri:Bt.DK,children:(0,M.jsx)(St,{})});if(null===t)return null;const e=(0,m.fHB)(t.id).toURI();return(0,M.jsx)(L.sn,{uri:e,children:(0,M.jsx)(_.s,{uri:e,children:(0,M.jsx)(b.S,{children:(0,M.jsx)(Gt,{uri:e,user:t})})})})}},67182:(t,e,a)=>{a.d(e,{v:()=>y});var o=a(30758),n=a(6936),r=a.n(n),i=a(77812);const s=/(\((?:[0-9]{1,3}:){1,2}[0-9]{2}\))/g;var c=a(58206),l=a(86070);const u=/((?:(?:https?:\/\/)|www\.)(?:(?:(?:[a-z\u00a1-\uffff0-9][-_]*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?:[/?#][^\s"]*)?)/gi,h=/^https?:\/\//;function p(t){return"string"==typeof t?(0,l.jsx)(l.Fragment,{children:t.split(u).map(((t,e)=>e%2?(0,l.jsx)(c.N,{to:`${h.test(t)?"":"https://"}${t}`,rel:"nofollow",children:t},e):t))}):t}var d=a(24280),m=a(42283);const g=(t=()=>{},e,a,n)=>{let r=0;const s={_:(t,e,i)=>{const s=void 0===e?t:i;return(0,l.jsx)(o.Fragment,{children:a&&!n?p(s):s},"fragment"+r++)}};if(n)return s;return{...s,p:t=>(0,l.jsx)(i.E,{as:"p",variant:"bodyMedium",semanticColor:e,className:m.A.Paragraph,children:a?p(t.children):t.children}),a:e=>e.href?.startsWith("#t=")?(0,l.jsx)(d.D,{onClick:t,children:e.children}):e.href?(0,l.jsx)(c.N,{to:e.href,rel:e.rel,children:e.children}):(0,l.jsx)(l.Fragment,{children:e.children}),ul:t=>(0,l.jsx)("ul",{className:m.A.List,children:t.children}),ol:t=>(0,l.jsx)("ol",{className:m.A.List,children:t.children}),li:t=>(0,l.jsx)(i.E,{as:"li",variant:"bodyMedium",semanticColor:e,className:m.A.ListItem,children:a?p(t.children):t.children}),br:()=>(0,l.jsx)("br",{}),h1:t=>(0,l.jsx)(i.E,{as:"h1",variant:"bodyMediumBold",semanticColor:e,className:m.A.Heading,children:t.children}),h2:t=>(0,l.jsx)(i.E,{as:"h2",variant:"bodyMediumBold",semanticColor:e,className:m.A.Heading,children:t.children}),h3:t=>(0,l.jsx)(i.E,{as:"h3",variant:"bodyMediumBold",semanticColor:e,className:m.A.Heading,children:t.children}),h4:t=>(0,l.jsx)(i.E,{as:"h4",variant:"bodyMediumBold",semanticColor:e,className:m.A.Heading,children:t.children}),h5:t=>(0,l.jsx)(i.E,{as:"h5",variant:"bodyMediumBold",semanticColor:e,className:m.A.Heading,children:t.children}),h6:t=>(0,l.jsx)(i.E,{as:"h6",variant:"bodyMediumBold",semanticColor:e,className:m.A.Heading,children:t.children}),time:e=>(0,l.jsx)(d.D,{onClick:t,children:e.children})}},y=(t,e=()=>{},a=!1,o="textSubdued",n=!1,i=!1)=>{const c=a?t.split(s).map((t=>t.match(s)?`(<time>${t.replace("(","").replace(")","")}</time>)`:t)).join(""):t;let l;try{l=r()(c,{transform:g(e,o,n,i),dangerouslySetChildren:[]})}catch{l=t}return l}},76151:(t,e,a)=>{a.d(e,{q:()=>l});var o=a(30758),n=a(97500),r=a.n(n),i=a(67182),s=a(42283),c=a(86070);const l=o.memo(o.forwardRef((function({html:t,onTimeStampClick:e,enableTimestamps:a=!1,enableAutomaticLinkification:n=!1,semanticColor:l="textSubdued",className:u,asTextContent:h=!1},p){const d=(0,o.useMemo)((()=>(0,i.v)(t,e,a,l,n,h)),[a,n,t,e,l,h]);return(0,c.jsx)("div",{ref:p,className:r()(s.A.HTMLDescription,u),children:d})})))}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map