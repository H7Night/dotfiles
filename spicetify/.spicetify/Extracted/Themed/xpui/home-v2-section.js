"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1621],{26650:(e,t,a)=>{a.d(t,{Uk:()=>d,b1:()=>_,f0:()=>m,o8:()=>p,wA:()=>f,yr:()=>g});var o=a(12599),n=a(4833),i=a(99885),r=a(81637),s=a(62055),c=a(91563),u=a(38720);function l(e){return{url:e.url,width:e.width,height:e.height}}function p(e){if("Episode"===e.__typename){const t=e.podcastV2.data;return"Podcast"!==t.__typename?[]:t.coverArt?.sources.map(l)??[]}return[]}function m(e){switch(e.__typename){case"Artist":return e.visuals.avatarImage?.sources.map(l)??[];case"Album":case"Audiobook":case"Podcast":case"Episode":case"Chapter":return e.coverArt?.sources.map(l)??[];case"Track":return e.albumOfTrack?.coverArt?.sources.map(l)??[];case"Playlist":return e.images.items[0]?.sources.map(l)??[];case"User":return e.avatar?.sources.map(l)??[];case"GenericError":case"NotFound":case"RestrictedContent":case"DiscoveryFeed":return[];default:return(0,c.k)(e),[]}}function d(e){switch(e.__typename){case"Artist":return(0,i.m)(e.visuals.avatarImage?.extractedColors);case"Album":case"Audiobook":case"Podcast":case"Episode":case"Chapter":return(0,i.m)(e.coverArt?.extractedColors);case"Track":return(0,i.m)(e.albumOfTrack?.coverArt?.extractedColors);case"Playlist":return(0,i.m)(e.images.items[0]?.extractedColors);case"User":return(0,i.m)(e.avatar?.extractedColors);case"GenericError":case"NotFound":case"RestrictedContent":case"DiscoveryFeed":return;default:return void(0,c.k)(e)}}function h(e){return{uri:e??"",name:"",images:[],error:!0}}function _(e){const t=function(e){if("UnknownType"===e.content.__typename){const t=(0,o.o_h)(e.uri);if((0,o.Z0m)(e.uri)||t?.id===o.NQG.COLLECTION)return e.uri.endsWith("your-episodes")?(0,n.n5)(t?.username):e.uri.endsWith("local-files")?(0,n.Iu)():(0,n.$R)(t?.username)}return null}(e);return null!==t?t:function(e){if(null===e||"UnknownType"===e.content.__typename||"PromotionResponseWrapper"===e.content.__typename||"ConcertV2ResponseWrapper"===e.content.__typename)return h(e?.uri??null);const t=e.content.data;if(!t)return h(e?.uri??null);switch(t.__typename){case"Artist":return{uri:e.uri,name:t.profile.name??"",images:m(t)};case"Album":case"Podcast":case"Track":case"User":return{uri:e.uri,name:t.name??"",images:m(t)};case"Audiobook":return{uri:e.uri,name:t.name??"",images:m(t),isBook:!0,isPlayable:t.accessInfo?.isUserMemberOfAtLeastOneGroup??!1,consumptionCapExplanation:(0,s.e)(t.accessInfo)};case"Playlist":return{uri:e.uri,name:t.name??"",images:m(t),formatListAttributes:t.attributes??[]};case"Episode":return{uri:e.uri,name:t.name??"",images:m(t),release_date:t.releaseDate?.isoString,resume_point:{resume_position_ms:t.playedState.playPositionMilliseconds,fully_played:t.playedState.state===r._w.Completed},podcast:"Podcast"===t.podcastV2.data.__typename?{uri:t.podcastV2.data.uri,name:t.podcastV2.data.name,images:m(t.podcastV2.data)}:void 0,duration_ms:t.duration.totalMilliseconds};case"Chapter":return"Audiobook"===t.audiobookV2.data.__typename?{uri:t.audiobookV2.data.uri,name:t.audiobookV2.data.name??"",images:m(t.audiobookV2.data)}:{uri:e.uri,name:t.name??"",images:m(t)};case"GenericError":case"NotFound":case"RestrictedContent":case"DiscoveryFeed":return h(e.uri);default:return(0,c.k)(t),h(e?.uri??null)}}(e)}function g(e){return function(e){if(!e||"UnknownTypeWrapper"===e.__typename)return h(e?._uri??null);if("GenreResponseWrapper"===e.__typename||"ConcertResponseWrapper"===e.__typename||"MerchResponseWrapper"===e.__typename||"PreReleaseResponseWrapper"===e.__typename||"AuthorResponseWrapper"===e.__typename)return h(null);const t=e?.data;switch(t.__typename){case"Artist":return{uri:t.uri,name:t.profile.name??"",images:m(t)};case"Album":case"Audiobook":case"Podcast":case"Track":case"User":return{uri:t.uri,name:t.name??"",images:m(t)};case"Playlist":return{uri:t.uri,name:t.name??"",images:m(t),formatListAttributes:t.attributes??[]};case"Episode":return{uri:t.uri,name:t.name??"",images:m(t),release_date:t.releaseDate?.isoString,resume_point:{resume_position_ms:t.playedState.playPositionMilliseconds,fully_played:t.playedState.state===r._w.Completed},podcast:"Podcast"===t.podcastV2.data.__typename?{uri:t.podcastV2.data.uri,name:t.podcastV2.data.name,images:m(t.podcastV2.data)}:void 0,duration_ms:t.duration.totalMilliseconds};case"Chapter":return"Audiobook"===t.audiobookV2.data.__typename?{uri:t.audiobookV2.data.uri,name:t.audiobookV2.data.name??"",images:m(t.audiobookV2.data)}:{uri:t.uri,name:t.name??"",images:m(t)};case"GenericError":case"NotFound":case"RestrictedContent":return h(null);default:return(0,c.k)(t),h(null)}}(e)}const y=(e,t)=>{const a=e?.translatedBaseText?.includes("{0}")?e.translatedBaseText.split("{0}")[0]:t?.transformedLabel??null;return{pretitle:a,title:a&&e?.transformedLabel?.includes(a)?e?.transformedLabel?.split(a)[1]:e?.transformedLabel??""}},f=(e,t,a)=>{if(e){if("ArtistResponseWrapper"===e.__typename&&"Artist"===e.data.__typename)return((e,t,a)=>{const o=(0,u.g)(e.visuals.avatarImage?.sources,{desiredSize:48})?.url??null,n=e.uri,{pretitle:i,title:r}=y(t,a);return{titleUri:n,titleMedia:o,titleMediaCircle:!0,title:r,pretitle:i}})(e.data,t,a);if(!("PodcastOrAudiobookResponseWrapper"!==e.__typename&&"EpisodeOrChapterResponseWrapper"!==e.__typename||"Podcast"!==e.data.__typename&&"Audiobook"!==e.data.__typename&&"Episode"!==e.data.__typename&&"Chapter"!==e.data.__typename))return((e,t,a)=>{const o=(0,u.g)(e.coverArt?.sources,{desiredSize:48})?.url??null,n=e.uri,{pretitle:i,title:r}=y(t,a);return{titleUri:n,titleMedia:o,titleMediaCircle:!1,title:r,pretitle:i}})(e.data,t,a);if("GenreResponseWrapper"===e.__typename&&"Genre"===e.data.__typename)return((e,t,a)=>{const o=(0,u.g)(e.image?.sources,{desiredSize:48})?.url??null,n=e.uri,{title:i,pretitle:r}=y(t,a);return{titleUri:n,titleMedia:o,titleMediaCircle:!1,title:i,pretitle:r}})(e.data,t,a)}return{title:t?.transformedLabel??""}}},30749:(e,t,a)=>{a.d(t,{E:()=>s});const o="music",n="1.0.0",i="default",r="16.0.1";function s(e){return new c(e)}class c{constructor(e){this._path=[{name:"desktop-home-list-row",...e.data}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}titleFactory(){return new c.TitleEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}saveButtonFactory(){return new c.SaveButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}downloadButtonFactory(){return new c.DownloadButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}playButtonFactory(){return new c.PlayButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[i,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[n,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}impression(){return{app:o,generatorVersion:r,specificationVersion:n,specificationMode:i,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}!function(e){e.TitleEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({name:"title"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[i,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[n,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:o,generatorVersion:r,interactionType:"hit",specificationMode:i,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(c||(c={})),function(e){e.SaveButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({name:"save_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[i,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[n,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitLike({itemToBeLiked:e}){return{actionParameterNames:["item_to_be_liked"],actionParameterValues:[e.toString()],actionName:"like",actionVersion:1,app:o,generatorVersion:r,interactionType:"hit",specificationMode:i,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitRemoveLike({itemNoLongerLiked:e}){return{actionParameterNames:["item_no_longer_liked"],actionParameterValues:[e.toString()],actionName:"remove_like",actionVersion:1,app:o,generatorVersion:r,interactionType:"hit",specificationMode:i,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(c||(c={})),function(e){e.DownloadButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({name:"download_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[i,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[n,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitDownload({itemToDownload:e}){return{actionParameterNames:["item_to_download"],actionParameterValues:[e.toString()],actionName:"download",actionVersion:1,app:o,generatorVersion:r,interactionType:"hit",specificationMode:i,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:o,generatorVersion:r,interactionType:"hit",specificationMode:i,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(c||(c={})),function(e){e.PlayButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({name:"play_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[i,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[n,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitPlay({itemToBePlayed:e}){return{actionParameterNames:["item_to_be_played"],actionParameterValues:[e.toString()],actionName:"play",actionVersion:1,app:o,generatorVersion:r,interactionType:"hit",specificationMode:i,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitPause({itemToBePaused:e}){return{actionParameterNames:["item_to_be_paused"],actionParameterValues:[e.toString()],actionName:"pause",actionVersion:1,app:o,generatorVersion:r,interactionType:"hit",specificationMode:i,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitResume({itemToBeResumed:e}){return{actionParameterNames:["item_to_be_resumed"],actionParameterValues:[e.toString()],actionName:"resume",actionVersion:1,app:o,generatorVersion:r,interactionType:"hit",specificationMode:i,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(c||(c={}))},71891:(e,t,a)=>{a.d(t,{h:()=>o});a(11195),a(88646);function o(e){return"object"!=typeof e||null===e?e:window.structuredClone?window.structuredClone(e):JSON.parse(JSON.stringify(e))}},98143:(e,t,a)=>{a.r(t),a.d(t,{HomeV2FullPageSection:()=>G,SKELETON_CARDS_COUNT:()=>H,default:()=>U});var o=a(30758),n=a(59798),i=a(97500),r=a.n(i),s=a(75044),c=a(17640),u=a(80478),l=a(83467),p=a(1704),m=a(43808),d=a(54852),h=a(44178),_=a(67464),g=a(82483),y=a(86070);const f=({section:e})=>(0,y.jsx)(_.p,{id:e.uri,title:e.data.title?.transformedLabel??"",showAll:!0,index:0,rowGap:h.lT,fullPage:!0,children:e.sectionItems.items.map(g.Gx)});var b=a(44850),A=a(42578),L=a(41905),V=a(24211);const C=({section:e})=>(0,y.jsx)(L.x,{config:(0,V.s1)(V.yV.HOME_LOW_DENSITY),children:(0,y.jsx)(_.p,{id:e.uri,title:e.data.title?.transformedLabel??"",showAll:!0,index:0,rowGap:(0,b.po)("looser"),fullPage:!0,children:e.sectionItems.items.map(A.G)})});var S=a(36672),v=a(85310);const k=({section:e})=>(0,y.jsx)(L.x,{config:(0,V.s1)(V.yV.MUSIC_VIDEOS),children:(0,y.jsx)(_.p,{id:e.uri,title:c.Ru.get("music_videos"),showAll:!0,index:0,rowGap:(0,b.po)("looser"),fullPage:!0,children:e.sectionItems.items.map(((e,t)=>{if("TrackResponseWrapper"!==e.content.__typename||"Track"!==e.content.data.__typename)return null;const a=e.content.data;return(0,y.jsx)(S.O,{title:a.name,trackUri:a.uri,audioAssociationUris:(0,v.$)(a.associationsV3),artists:a.artists.items,album:a.albumOfTrack,contentRating:a.contentRating,referrerIdentifier:"other",index:t},a.uri)}))})});var P=a(55405),w=a(91563);const x=({section:e})=>{const t=(0,s.NC)(P.hWV);switch("spotify:section:0JQ5DAnM3wGh0gz1MXnu3K"===e.uri&&t&&e.data&&(e.data.__typename="HomeGridSectionData"),e.data?.__typename){case"HomeGenericSectionData":return(0,y.jsx)(f,{section:(0,d.M)(e,e.data)});case"HomeMusicVideosSectionData":return(0,y.jsx)(k,{section:(0,d.M)(e,e.data)});case"HomeShortsSectionData":case"HomeRecentlyPlayedSectionData":case"HomeFeedBaselineSectionData":case"HomeNativeAdsSectionData":case"HomeOnboardingSectionData":return null;case"HomeGridSectionData":return t?(0,y.jsx)(C,{section:(0,d.M)(e,e.data)}):null;case"HomeSpotlightSectionData":case"HomePromotionSectionData":case null:case void 0:case"HomeFeatureActivationSectionData":case"HomeWatchFeedSectionData":case"HomeOnboardingSectionDataV2":case"HomeYourDJSectionData":return null;case"HomeFeatureActivationSectionDataV2":return(0,y.jsx)(m.G,{sectionItems:e.sectionItems.items,showAll:!0,uri:e.uri,localStorageKey:e.data.localStorageKey});default:return(0,w.k)(e.data),null}};var N=a(44519),M=a(24739);const T=(0,o.memo)((({cardCount:e})=>(0,y.jsx)(M._,{isLoading:!0,showAll:!0,withTitle:!0,children:[...new Array(e).keys()].map(((e,t)=>(0,y.jsx)(N.u,{isLoading:!0},t)))})));var E=a(27440),D=a(29471),R=a(23426),j=a(99667),F=a(71891),O=a(77395);const H=10,I=({uri:e})=>{const{request:t}=(0,o.useContext)(R.j),a=(0,s.NC)(P.uEj),{data:i,isLoading:u,error:m}=(0,n.q)({queryKey:["homeV2","section",e,{numberOfItems:20}],queryFn:async({pageParam:o})=>(0,j.c)(t,p.U3,{uri:e,timeZone:(0,E.Ff)(),sp_t:(0,D.v8)("sp_t")??"",sectionItemsOffset:o,sectionItemsLimit:a??20}),initialPageParam:0,getNextPageParam:e=>{if("HomeSectionCollection"===e?.data?.homeSections?.__typename&&"HomeSection"===e.data.homeSections.sections[0]?.__typename){const t=e.data.homeSections.sections[0]?.sectionItems.pagingInfo;return t.nextOffset&&t.nextOffset>0?t.nextOffset:void 0}},gcTime:E.gO,staleTime:E.jl}),d=(0,o.useMemo)((()=>i?.pages?i.pages.reduce(((e,t)=>{if(!t?.data?.homeSections||"HomeSectionCollection"!==t?.data?.homeSections.__typename||0===t.data.homeSections.sections.length)return e;switch(t.data.homeSections.sections[0]?.__typename){case"HomeSection":return null===e?(0,F.h)(t.data.homeSections.sections[0]):(e.sectionItems.items=[...e.sectionItems.items,...t.data.homeSections.sections[0].sectionItems.items],e);case"GenericError":case"NotFound":return e;default:return(0,w.k)(t.data.homeSections.sections[0]),e}}),null):null),[i?.pages]);if(u)return(0,y.jsx)("section",{"data-testid":"home-page",children:(0,y.jsx)("div",{className:O.A.home,children:(0,y.jsx)("div",{className:r()(O.A.homepageContent,"contentSpacing"),children:(0,y.jsx)(T,{cardCount:H})})})});if(null!==m)return(0,y.jsx)(l.LoadingPage,{hasError:!0,errorMessage:c.Ru.get("error.generic")});const h=i?.pages[0]?.data?.homeSections;return"HomeSectionCollection"!==h?.__typename||0===h.sections.length||"HomeSection"!==h.sections[0]?.__typename||null===d?(0,y.jsx)(l.LoadingPage,{hasError:!0,errorMessage:c.Ru.get("error.generic")}):(0,y.jsx)("section",{"data-testid":"home-section-page",children:(0,y.jsx)("div",{className:O.A.home,children:(0,y.jsx)("div",{className:r()(O.A.homepageContent,"contentSpacing"),children:(0,y.jsx)(x,{section:d})})})})},G=({uri:e})=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.Q,{children:c.Ru.get("page.generic-title")}),(0,y.jsx)(I,{uri:e})]}),U=G}}]);
//# sourceMappingURL=home-v2-section.js.map