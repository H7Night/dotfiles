"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2377],{16658:(e,t,s)=>{s.d(t,{TopCommentsCard:()=>E});var n=s(30758),i=s(97500),o=s.n(i),a=s(85387),c=s(60749),l=s(46462),r=s(80366),m=s(12599),d=s(17640),u=s(1185),p=s(94647),h=s(50177),b=s(16318),g=s(95358),y=s(55928);var C=s(26085),f=s(79976),j=s(3160),w=s(95351),R=s(20493),v=s(70830),x=s(7840);const k="jmVy04VnzhcDZbU5PDSR",S="dkV2Y3wOToyBbzjsYFDE",T="Art4GUNuIb1DIs1FlRRq",N="b6RGiXPTMf_W4zGongcw",U="cTMTF6fQBMbj8gVHfp5t",I="WWXdDi6SRZBkgybtn0aT",z="h50EccTAA0QcuIc6J2FU";var V=s(86070);const D=({topCommentsResponse:e,entityUri:t})=>{const s=(0,x.g)(),i=(0,a.zy)(),[b]=(0,c.ok)(),{mainContentRef:g}=(0,p.JT)(),{logCommentsNPVCardImpression:y}=(0,w._)();(0,n.useEffect)((()=>{y(t)}),[]);const D=(0,n.useCallback)((e=>{const n=(0,m.o_h)(t)?.toURLPath(!0);n&&(i.pathname===n&&b.get("id")===e?g.current?.querySelector(`[data-comment-id="${e}"]`)?.scrollIntoView({block:"start",behavior:"smooth"}):s({pathname:n,search:(0,c.PI)({id:e}).toString()}))}),[i.pathname,g,s,b,t]),{isRestricted:E}=(0,v.K)(e.eligibilityStatus),F=(0,n.useMemo)((()=>e.comments.filter((e=>!e.isSensitive))),[e]),K=(0,n.useMemo)((()=>e.comments.filter((e=>e.isSensitive))),[e]),M=(0,R.n)(t);return(0,V.jsxs)(h.w,{className:k,children:[(0,V.jsx)(h.X,{className:S,action:(0,V.jsx)(l.H,{size:"small",condensed:!0,semanticColor:"textSubdued",onClick:()=>D("top"),children:d.Ru.get("web-player.user-comments.top-comment-card-header.count",e.totalCount)}),children:d.Ru.get("web-player.user-comments.comments")}),e.totalCount>0&&(0,V.jsx)(u.a,{className:U,children:(0,V.jsxs)("div",{className:I,children:[F.map(((e,s)=>(0,V.jsx)("div",{className:z,children:(0,V.jsx)(f.c,{comment:e,entityUri:t,showSeparator:s>0,lineClamp:2,onClickNavigate:D,creatorReactionName:M,condensed:!0})},`${e.uri}-${s}`))),(0,V.jsx)(j.U,{sensitiveComments:K,entityUri:t,navigateOnShowAll:D})]})}),(0,V.jsx)("div",{className:o()(T,{[N]:E}),children:E?(0,V.jsx)(C.K,{eligibility:e.eligibilityStatus}):(0,V.jsx)(r.n,{size:"small",onClick:()=>D("new"),children:d.Ru.get("web-player.user-comments.comment-input.leave-comment")})})]})},E=({uri:e})=>{const{data:t}=(e=>{const t=(0,y.n)(),{data:s,isLoading:n,isError:i}=(0,b.I)({queryKey:g.K.topComments(e),queryFn:async()=>await t.getTopComments(e),gcTime:36e5,staleTime:3e4});return{data:s,isLoading:n,isError:i}})(e);if(!t||0===t.totalCount)return null;const{isHidden:s}=(0,v.K)(t.eligibilityStatus);return s?null:(0,V.jsx)(D,{topCommentsResponse:t,entityUri:e})}}}]);
//# sourceMappingURL=2377.js.map