"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8606],{760:(e,a,s)=>{function t(e){const a=new Date;return(e instanceof Date?e:new Date(e)).getTime()-a.getTime()}s.d(a,{u:()=>t})},1590:(e,a,s)=>{s.d(a,{K:()=>x});var t=s(30758),i=s(4882),r=s(87579),n=s(80656),o=s(80652),l=s(23580);const c="bhvAemcPYUmxOdBe1mVi",d="hmgHdasWrZaA9tiXVw_u",u="RmbxUFLb4j9KmgftJyk1",m="boNCdFnbh9y0PBweIDUt",h="LfQtKa295FPgk8VuZRfD",p="Oytey9nANMtSDKSmZpJ6";var g=s(86070);const x=t.memo((function(e){const{images:a,title:s,isOpen:x,onClose:y}=e,b=(0,t.useMemo)((()=>(0,l.g)(a,{desiredSize:1e4})),[a]);return b?(0,g.jsx)(n.A,{className:c,isOpen:x,onRequestClose:y,animation:{modal:{base:m,afterOpen:h,beforeClose:p}},animated:!0,children:(0,g.jsxs)("div",{style:{"--image-width":`${b.width}px`,"--image-height":`${b.height}px`},className:d,children:[(0,g.jsx)(o._,{loading:"eager",alt:s,src:b.url,className:u}),(0,g.jsx)(i.H,{onClick:y,semanticColor:"textBase",children:r.Ru.get("web-player.cover-art-modal.close")})]})}):null}))},3572:(e,a,s)=>{s.d(a,{a:()=>t});const t=e=>(e||[]).filter((e=>(e=>{return a=e,"NotFound"!==a?.__typename&&"GenericError"!==a?.__typename&&"Audiobook"===e.__typename;var a})(e.data)))},9383:(e,a,s)=>{s.d(a,{W:()=>i});var t=s(30758);const i=()=>{const[e,a]=(0,t.useState)(!1);return{isOpen:e,openModal:(0,t.useCallback)((()=>a(!0)),[]),closeModal:(0,t.useCallback)((()=>a(!1)),[])}}},12031:(e,a,s)=>{s.d(a,{s:()=>c});var t=s(85387),i=s(33100),r=s(51034),n=s(74929),o=s(32408),l=s(75875);const c=()=>{const e=(0,o.o)(l.P.SimilarAudiobooksComponent,(0,t.zy)()),a=(()=>{const e=(0,r.c)(),a=(0,i.NC)(n.S$t);return!!e&&a===n.LR0.Enabled})();return e||a}},13467:(e,a,s)=>{s.d(a,{o:()=>h});var t=s(87579),i=s(5882),r=s(8419),n=s(21905),o=s(8463),l=s(38231),c=s(42738),d=s(555),u=s(89905),m=s(86070);const h=({images:e,name:a,uri:s,publisher:h,sharingInfo:p,mediaType:g,isHero:x=!1,onClick:y,testId:b,index:v,requestId:j,color:f,variant:C,logCardImpressions:k=!1})=>{let P;const w=g===u.Q.MIXED?t.Ru.get("type.show"):t.Ru.get("card.tag.show");return P=x?(0,m.jsx)(o.A,{index:v,onClick:y,delegatePlayback:!0,headerText:a,featureIdentifier:"show",uri:s,isPlayable:!1,renderCardImage:()=>(0,m.jsx)(r.M,{isHero:!0,images:e,color:f}),renderSubHeaderContent:()=>(0,m.jsxs)(n.c,{isHero:!0,children:[(0,m.jsx)(l.t,{children:w}),h&&(0,m.jsx)("span",{children:h})]}),testId:b,requestId:j,logCardImpressions:k}):(0,m.jsx)(i.Z,{variant:C,onClick:y,isPlayable:!1,delegatePlayback:!0,headerText:a,featureIdentifier:"show",uri:s,index:v,renderCardImage:()=>(0,m.jsx)(r.M,{isHero:x,images:e,color:f}),renderSubHeaderContent:()=>(0,m.jsx)(n.c,{children:h&&(0,m.jsx)("span",{children:h})}),testId:b,requestId:j,logCardImpressions:k}),(0,m.jsx)(c.h,{menu:(0,m.jsx)(d.H,{uri:s,sharingInfo:p}),children:P})}},15056:(e,a,s)=>{s.d(a,{d:()=>c});var t=s(97500),i=s.n(t),r=s(36665),n=s(33586);const o="UyzJidwrGk3awngSGIwv";var l=s(86070);const c=({durationMs:e,className:a,displaySeconds:s})=>{const{hours:t,minutes:c,seconds:d}=(0,r.S)(e);return s=!1!==s&&!t&&d,(0,l.jsx)("span",{className:i()(o,a),children:(0,n.j)({h:t,m:c,s:s?d:0})})}},19852:(e,a,s)=>{s.d(a,{I:()=>l});var t=s(30758),i=s(42772),r=s(1997),n=s(73737),o=s(86070);const l=t.memo((function({uri:e,size:a=i.M.md,className:s,onClick:l,canDownload:c,condensedAll:d}){const[u,m]=(0,n.A)(e),h=(0,r.W)(),p=(0,t.useCallback)((()=>{h({targetUri:e,intent:u?"unsave":"save",type:"click"}),m(!u)}),[h,e,u,m]);return(0,o.jsx)(i.f,{className:s,isFollowing:u,onFollow:p,onClick:l,uri:e,size:a,canDownload:c,condensedAll:d,condensed:!0})}))},35354:(e,a,s)=>{s.d(a,{r:()=>n});var t=s(48692),i=s(37007);const r=Spicetify.GraphQL.Definitions["similarAudiobooks"]=new t.l("similarAudiobooks","query","d62da1bbf5859e5a156da1f52ce21a73a642f925db717a179fd89626b27a80b8",null),n=(e,a)=>(0,i.I)(r,e,a)},37611:(e,a,s)=>{s.d(a,{K:()=>t});const t=e=>{return a=e,"NotFound"!==a?.__typename&&"GenericError"!==a?.__typename&&"Podcast"===e.__typename;var a}},38343:(e,a,s)=>{s.d(a,{v:()=>n});var t=s(48692),i=s(37007);const r=Spicetify.GraphQL.Definitions["internalLinkRecommenderShow"]=new t.l("internalLinkRecommenderShow","query","6c369ff272a666b31fef1629c169925a1bd80f372195396c82304142cacd89e8",null),n=(e,a)=>(0,i.I)(r,e,a)},43375:(e,a,s)=>{s.d(a,{Z:()=>n});var t=s(67064);const i="rTMkDBDp47Eo12ZEQv4U";var r=s(86070);const n=({copyrights:e,courtesyLine:a})=>{const s=(e||[]).map(((e,a)=>{if(e.untyped)return(0,r.jsx)(t.Z,{as:"p",variant:"finale",dir:"auto",children:e.text},a);const s=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let i;return i="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,r.jsx)(t.Z,{as:"p",variant:"finale",dir:"auto",children:`${i} ${s}`},a)}));return a&&s.unshift((0,r.jsx)(t.Z,{as:"p",variant:"finale",dir:"auto",children:a},s.length)),(0,r.jsx)("div",{className:i,children:s})}},47425:(e,a,s)=>{s.d(a,{w:()=>d});var t=s(30758),i=s(94703),r=s(87579),n=s(11273),o=s(1540),l=s(59197),c=s(85105);const d=({uri:e,isBook:a})=>{const{add:s,remove:d}=(0,l.p)("prerelease"),u=(0,o.o)("prerelease",[e]).at(0),{enqueueSnackbar:m}=(0,n.d)(),{spec:h,logger:p}=(0,c.r)(i.k,{data:{uri:e}});return{isPreSaved:u,addPresave:(0,t.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await s(e),m(a?r.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):r.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[s,m,a,p,h,e]),removePresave:(0,t.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await d(e)}),[p,d,h,e])}}},48635:(e,a,s)=>{s.d(a,{M:()=>E});var t=s(30758),i=s(97500),r=s.n(i),n=s(62411),o=s(39629),l=s(68253),c=s(74020),d=s(33100),u=s(87579),m=s(42993),h=s(5882),p=s(8419),g=s(21905),x=s(8463),y=s(38231),b=s(42738),v=s(77024),j=s(63663),f=s(79918),C=s(5638),k=s(74929),P=s(61469);const w="udGpsOceE80fzjUaGxkU",S="wMX24UZ671wvuRJkkUOC";var R=s(86070);const N=({isPreRelease:e,publishDate:a})=>e&&a?("string"==typeof a&&(a=new Date(a)),(0,R.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",children:(0,R.jsx)("span",{children:u.Ru.get("web-player.prerelease.releases_on",{date:u.Ru.formatDate((0,P.ad)(a.toISOString()),(0,P.s7)({month:"long",day:"numeric",year:"numeric"}))})})})):null,I=({signifierText:e})=>e?(0,R.jsx)(o.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:e}):null,E=({name:e,uri:a,images:s,authorName:i,authors:P,isHero:E,className:A,onClick:_,testId:B,index:M,requestId:F,isLocked:T=!1,isPlayable:D=!1,color:L,signifierText:U,isPreRelease:O=!1,publishDate:z,variant:V,consumptionCapExplanation:H,logCardImpressions:q=!1})=>{const{playUri:G,playOptions:W}=(0,C.J)(a),$=(0,n.wA)(),K=(0,d.NC)(k.HJU),Q=!!H,X=(0,R.jsx)(f.O,{authorName:i,authors:P}),Y=(0,t.useCallback)((()=>{Q&&$((0,m._3)(H))}),[H,$,Q]);let J;return J=E?(0,R.jsx)(x.A,{className:A,index:M,onClick:_,headerText:e,featureIdentifier:"audiobook",uri:a,playOptions:W,onPlay:Q?Y:void 0,delegatePlayback:Q,isPlayable:(D||Q)&&K,ariaPauseLabel:u.Ru.get("tracklist.a11y.pause",e,i),ariaPlayLabel:u.Ru.get("tracklist.a11y.play",e,i),dragMimeType:j.fl.AUDIOBOOKS,renderCardImage:()=>(0,R.jsx)(p.M,{isHero:!0,images:s,color:L,FallbackComponent:e=>(0,R.jsx)(l.l,{size:"xxlarge",...e})}),renderSubHeaderContent:()=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(y.t,{children:u.Ru.get("card.tag.audiobook")}),(0,R.jsx)(o.E,{variant:"bodySmall",children:X})]}),getSignifierContent:()=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(N,{isPreRelease:O,publishDate:z}),(0,R.jsx)(I,{signifierText:U})]}),testId:B,requestId:F,logCardImpressions:q}):(0,R.jsx)(h.Z,{className:A,variant:V,index:M,onClick:_,headerText:e,featureIdentifier:"audiobook",uri:a,playUri:G,onPlay:Q?Y:void 0,delegatePlayback:Q,playOptions:W,isPlayable:(D||Q)&&K,ariaPauseLabel:u.Ru.get("tracklist.a11y.pause",e,i),ariaPlayLabel:u.Ru.get("tracklist.a11y.play",e,i),dragMimeType:j.fl.AUDIOBOOKS,renderCardImage:()=>(0,R.jsx)(p.M,{images:s,color:L,FallbackComponent:e=>(0,R.jsx)(l.l,{size:"xxlarge",...e})}),renderSubHeaderContent:()=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(g.c,{lineClamp:U?1:2,children:[T&&(0,R.jsx)(c.y,{size:"small",className:w}),(0,R.jsx)(N,{isPreRelease:O,publishDate:z}),(0,R.jsx)(o.E,{as:"span",variant:"bodySmall",className:r()({[S]:O&&i}),children:X})]}),(0,R.jsx)(I,{signifierText:U})]}),testId:B,requestId:F,logCardImpressions:q}),(0,R.jsx)(b.h,{menu:(0,R.jsx)(v.p,{uri:a}),children:J})}},49038:(e,a,s)=>{s.d(a,{B:()=>I,q:()=>A});var t=s(30758),i=s(62411),r=s(86855),n=s(76082),o=s(71581),l=s(75756),c=s(42738),d=s(45806),u=s(82832),m=s(52662),h=s(97135),p=s(1046),g=s(95172),x=s(29398),y=s(97304),b=s(51034),v=s(26698),j=s(18940),f=s(64254),C=s(61647),k=s(70171),P=s(54843),w=s(85105),S=s(67721),R=s(29618),N=s(86070);function I(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const E=e=>`activation-trigger-mme-${e}`,A=t.memo((function({index:e=-1,showMetadata:a,episode:s,usePlayContextItem:A}){const _=(0,b.c)(),B=s.playedState.playPositionMilliseconds,M=s.uri,F=(0,t.useRef)(null),T=(0,g.N)(a.uri),{draggable:D,onDragStart:L}=(0,x.P)(),U=(0,y.V)(),O=(0,f.y)(),z=(0,i.wA)(),{UBIFragment:V,spec:H,logger:q}=(0,w.r)(r.d,{data:{uri:M,reason:s.requestId||"",position:e}}),G=(0,P.t)(H),{isActive:W,isPlaying:$,togglePlay:K}=A({uri:M}),[Q]=(0,C.S)(1e4,(e=>e?.item?.uri===M)),{isFullyPlayed:X,setIsFullyPlayed:Y}=(0,k.e)({uri:M,durationMs:s.duration.milliseconds,episodePlaybackState:s.playedState?.state,isPlaying:$});(0,t.useEffect)((()=>{$&&(F.current=Q)}),[$,Q]),(0,t.useEffect)((()=>{!$&&F.current&&s.duration.milliseconds<=F.current&&Y(!0)}),[$,s.duration.milliseconds,Y]);const J=(0,t.useCallback)((e=>{e||(F.current=0),Y(e)}),[Y]),Z=I(a),ee=(0,v.C)({...s,coverArt:{sources:s.coverArt}},Z),ae=(0,t.useCallback)((()=>{if(s.episodeType===S.I_.Episode&&_)m.h.set((()=>({triggerId:E(s.uri),triggerAction:null})));else if(U)ee();else{let e;e=$?H.playButtonFactory().hitPause({itemToBePaused:M}):W?H.playButtonFactory().hitResume({itemToBeResumed:M}):H.playButtonFactory().hitPlay({itemToBePlayed:M});const a=q.logInteraction(e);K({loggingParams:a})}}),[W,ee,K,M,$,U,s,_,q,H]),se=(0,t.useCallback)((()=>{q.logInteraction(H.hitUiNavigate({destination:M}))}),[M,q,H]),te=s.podcastSubscription?.isPaywalled??!1,ie=s.podcastSubscription?.isUserSubscribed??!1,re=te&&!ie,ne=te&&U,{badges:oe}=(0,R.b)({contentRating:s.contentRating?.label,isPaywalled:te}),le=(0,t.useCallback)((()=>z((0,o.Tf)(a.uri))),[a.uri,z]),ce=(0,t.useCallback)((e=>{let t=e;return(re||ne)&&(t=(0,N.jsx)(h.N,{enabled:!0,showUri:s.podcast?.uri||a.uri,renderInline:!1,children:t})),!s.playability.playable&&oe.nineteen&&(t=(0,N.jsx)("div",{onClick:e=>{e.stopPropagation(),le()},children:e})),t=(0,N.jsx)(l.k,{id:E(M),targetURI:(0,n.o_h)(M),children:t}),t}),[M,re,ne,a.uri,oe.nineteen,s.playability.playable,le,s.podcast?.uri]);return(0,N.jsx)(V,{spec:H,children:(0,N.jsx)(j.pZ,{value:"row",index:e,children:(0,N.jsx)(c.h,{onShow:()=>{q.logInteraction(H.secondaryHitUiReveal())},menu:(0,N.jsx)(d.b,{uri:M,showUri:a.uri,sharingInfo:s.sharingInfo,isPlayed:X,onMarkAsPlayed:J}),children:(0,N.jsx)(u.k,{ref:G,requestId:s.requestId,index:e,uri:M,size:O,images:s.coverArt||[],name:s.name,showName:s.podcast?.name||a.name,description:s.description,isPlayable:s.playability.playable||re,fullyPlayed:X,durationMs:s.duration.milliseconds,releaseDate:s.releaseDate,resumePositionMs:F.current??B,draggable:D,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const t=`${s.name} • ${a.name}`;L(e,{itemUris:[M],dragLabelText:t,contextUri:a.uri})},handlePlaybackClick:ae,handleClick:se,isCurrentlyPlaying:W,isPaywalled:te,isUserSubscribed:ie,isCourseLesson:T,isPlaying:$,position:$?Q:void 0,episodeSharingInfo:s.sharingInfo,onMarkAsPlayed:J,contentInformation:s.contentInformation,showUri:s.podcast?.uri||a.uri,mediaTypes:s.mediaTypes??void 0,badges:(0,N.jsx)(p.P,{episode:s}),playButtonWrapper:ce,onMoreButtonClick:()=>{q.logInteraction(H.moreButtonFactory().hitUiReveal())}})})})})}))},51636:(e,a,s)=>{s.r(a),s.d(a,{default:()=>ri});var t=s(30758),i=s(85387),r=s(97364),n=s(39705),o=s(76082),l=s(87579),c=s(1214),d=s(24454),u=s(97500),m=s.n(u),h=s(62411),p=s(39629),g=s(33100),x=s(30865),y=s(62247),b=s(42993),v=s(87681),j=s(61570),f=s(54500),C=s(12031),k=s(76358),P=s(76541),w=s(30767),S=s(97304),R=s(74929),N=s(29915),I=s(15817),E=s(33091),A=s(25368);var _=s(8335),B=s(48635),M=s(57826),F=s(85236),T=s(87368),D=s(35354);var L=s(3572),U=s(69479),O=s(86070);const z=({className:e,title:a,uri:s})=>{const{data:i}=(0,D.r)({uri:s}),r=i?.seoRecommendedAudiobook.items,n=i?.seoRecommendedAudiobook.totalCount,c=(0,L.a)(r),{ref:d,inView:u}=(0,_.Wx)({threshold:1}),m=(e=>{const a=(0,S.V)(),s=(0,w.vh)(),t=(0,g.NC)(R.S$t),i=(0,h.d4)(I.F6),r=(0,h.d4)(N.JJ);return()=>{const n={category:"audiobook_more_like_this_component_visible",action:"component_visible",variant:t,label:"dwp",os:(0,A.f)(),destination_url:e,country:i?r:"",sp_t:(0,E.v8)("sp_t")};a?s.send((0,P.r)(n)):s.send((0,k._)(n))}})(s);if((0,t.useEffect)((()=>{u&&m()}),[u,m]),0===n)return null;const p=(0,o.o_h)(s)?.id;return(0,O.jsx)(T.$,{className:e,title:a,seeAllLabel:l.Ru.get("shelf.see-all"),total:r?.length,alwaysShowSeeAll:!0,seeAllUri:`spotify:app:show:${p}:more-like-this`,elementRef:d,children:c?.map((({data:e},a)=>{return(0,O.jsx)(B.M,{uri:e.uri,name:e.name,images:e.coverArt?.sources||[],authorName:(s=e.authorsV2,s.map((e=>e?.name)).join(l.Ru.getSeparator())??""),authors:e.authorsV2,index:a},e.name);var s}))})},V=e=>{const a=(0,F.D)({entityType:U.c.AUDIOBOOK,componentType:"shelf",uri:e.uri});return(0,O.jsx)(M.s,{onError:a,children:(0,O.jsx)(z,{...e})})};var H=s(97254),q=s(67064),G=s(37460),W=s(47939),$=s(49181),K=s(48653),Q=s(8065),X=s(15652),Y=s(32639),J=s(15056),Z=s(29618);const ee="Bns6t3CfzQaCA4DLRzPQ",ae="zGFcpmwFVhJxRDXUXoXA",se="_FLyhB96W9W0msGYNWUl",te="Si5iVyGLDY7mGWH_U2wA",ie="HLBtD6mJyIB9EeOzDtXE",re="DRO0ur1WXqpK9BelywtE",ne="vtlBEOtYFwv1cxC32ccc",oe="Pq_DZj9ECxwTsK8pBxe0",le="bu7LVUNyDPF_FcrKMv74",ce="bYP2npsc_CeChpMGcr6g",de="Ux7aVnDYlwojS4AmkSLg";let ue=function(e){return e.SMALL="small",e.LARGE="large",e}({});const me=({images:e,title:a,contentRating:s,duration:t,moreButton:i,onClick:r,onContextMenu:n,onTouchStart:o,onTouchEnd:l,isPlaying:c,isActive:d,size:u,className:h,label:p,isPlayable:g=!0})=>{const x=u===ue.LARGE?"medium":"small",{badges:y}=(0,Z.b)({contentRating:s});return(0,O.jsxs)("div",{"data-testid":"trailer-component",className:m()(ee,h,{[ae]:d}),onContextMenu:n,onTouchStart:o,onTouchEnd:l,children:[(0,O.jsxs)("div",{className:te,children:[(0,O.jsxs)("div",{className:oe,children:[(0,O.jsx)(Q.b,{type:U.c.EPISODE,title:a,className:m()(ne,{[de]:u===ue.SMALL,[ce]:u===ue.LARGE}),size:X.Qe.SIZE_56,images:e,shape:Q.u.ROUNDED_CORNERS}),(0,O.jsx)("div",{className:le,children:(0,O.jsx)(W.R,{"data-testid":"trailer-play-button",version:G.H4.transparent,size:x,isPlaying:c,onClick:r,disabled:!g})})]}),(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{className:ie,children:(0,O.jsx)(q.Z,{dir:"auto",className:se,variant:"balladBold",children:a})}),(0,O.jsxs)("div",{className:re,children:[(0,O.jsx)($.E,{text:p}),y.explicit&&(0,O.jsx)(K.U,{}),y.nineteen&&(0,O.jsx)(Y.q,{}),(0,O.jsx)(q.Z,{dir:"auto",variant:"mesto",children:(0,O.jsx)(J.d,{durationMs:t})})]})]})]}),i]})};var he=s(14100),pe=s(97485);const ge=({htmlDescription:e,narrators:a,spec:s,isPreRelease:i})=>{const r=(0,pe.s)(),n=(0,t.useCallback)((e=>{const a=s.seeMoreButtonFactory();r.logInteraction(e?a.hitUiReveal():a.hitUiHide())}),[r,s]);return(0,O.jsxs)(O.Fragment,{children:[a.length?(0,O.jsx)(p.E,{as:"p",variant:"bodyMedium",children:l.Ru.get("web-player.audiobooks.narratedByX",a.join(l.Ru.getSeparator()))}):null,e&&(0,O.jsx)(he.N,{maxLines:4,content:e,htmlContent:e,onExpanded:n,isOpen:i||null})]})};var xe=s(93672),ye=s(8912),be=s(57978),ve=s(86994),je=s(19852),fe=s(77024),Ce=s(1435),ke=s(70696),Pe=s(44162),we=s(66312);const Se="e74TmRHu_W1yZHspTBmR",Re="rrcjfInomKt1lXRDRdR8",Ne="Wj9mxFJDtPdiMcUtS1te",Ie="SCwESjClY3m_9JlV2L7S",Ee="fgCxxxjc_7WRNVrA0QJH",Ae="s4XxbZsgf9j4glrHhFdM",_e="Yoa_yG2jhELT4w9wJpHf",Be="xsw253oiwmIAafVfjl1J",Me="JPqnsg5dgBTzsEoClLmD",Fe="bhuRgaz03VXMf0mOG3Q2",Te="GP_qgmZlmL0CJ9r22AD9",De="bilV2VquzmEnhV4d97Tc",Le="caqddwmUJf4ix6GI84NX",Ue="H3bD3wHovFQ2QWwQ5RCg",Oe=({explicit:e,durationMs:a,publishDate:s,preReleaseEndDateTime:t,isPreRelease:i,uri:r,isPlaying:n})=>{const o=(0,Pe.p)(r),{isMarkedAsFinished:c}=(0,ke.z)(r);let d;return i&&t?d=l.Ru.get("web-player.prerelease.releases_on",{date:l.Ru.formatDate(t)}):!i&&s&&(d=l.Ru.formatDate(s)),(0,O.jsxs)("div",{className:Fe,children:[e&&(0,O.jsx)(K.U,{className:Le}),(0,O.jsxs)("div",{className:Te,children:[d&&(0,O.jsx)(p.E,{variant:"bodySmall",className:De,children:d}),a?(0,O.jsxs)(O.Fragment,{children:[o?.playPositionMilliseconds?(0,O.jsx)(p.E,{variant:"bodySmall",className:De,children:(0,O.jsx)(J.d,{durationMs:a})}):null,(0,O.jsx)(we.j,{isPlaying:n,fullyPlayed:c,durationMs:a,position:o?.playPositionMilliseconds})]}):null]})]})};var ze=s(60992),Ve=s(52316);const He=(0,t.createContext)(null),qe=({children:e,isPreRelease:a})=>{const[s,i]=(0,t.useState)(!a),r=(0,t.useMemo)((()=>({isPreRelease:a,isCountdownFinished:s,setCountdownFinished:()=>i(!0)})),[a,s,i]);return(0,O.jsx)(He.Provider,{value:r,children:e})};function Ge(){const e=(0,t.useContext)(He);if(null===e)throw new Error("Trying to use 'PreRealeaseCountdownContext' without 'PreRealeaseCountdownProvider'!");return e}var We=s(86840);const $e="nz8Wc80RAtdAb3yU9FxM",Ke=({uri:e})=>{const{isCountdownFinished:a}=Ge(),{invalidateCache:s}=(0,We.W)(e);return(0,O.jsx)("div",{className:$e,children:a?(0,O.jsx)(ze.$,{onClick:s,children:l.Ru.get("web-player.audiobooks.goToAudiobook")}):(0,O.jsx)(Ve.v,{uri:e,isBook:!0})})};var Qe=s(3864),Xe=s(40638),Ye=s(11273),Je=s(98245);const Ze="NQAShVY0o7RQ2bCTDSkw";function ea({uri:e,price:a,size:s,spec:t,logger:i,onPlayback:r}){const{enqueueSnackbar:n}=(0,Ye.d)(),o=(0,S.V)(),c=(0,h.d4)(I.Ly),d=0===a?.finalPrice?.amount,u=d?t.getButtonFactory({uri:e}):t.buyButtonFactory({uri:e}),m=(0,Xe.YQ)((async()=>{if(i.logInteraction(u.hitShowPaywall({paywalledItem:e})),o)r();else{try{a?.finalPrice?await(0,Je.S)({show_uri:e,currency:a.finalPrice.currency,price:a.finalPrice.amount}):n(l.Ru.get("error.generic"))}catch(e){n(l.Ru.get("error.generic"))}r()}}),2e3,{leading:!0,trailing:!1}),p=c?l.Ru.get("web-player.audiobooks.unlock"):l.Ru.get("web-player.audiobooks.buy");return(0,O.jsx)(ze.$,{size:s,className:Ze,style:{flexShrink:0},onClick:m,children:d?l.Ru.get("web-player.audiobooks.buyFree"):p})}const aa=({uri:e,isLocked:a,price:s,isPlaying:t,isConsumptionCapped:i,onPlayback:r,logger:n,spec:o,size:l="large"})=>a&&!i?(0,O.jsx)(ea,{size:l,uri:e,price:s,logger:n,spec:o,onPlayback:r}):(0,O.jsx)(Qe.D,{size:l,isPlaying:t,uri:e,onClick:r});var sa=s(44788),ta=s(95948),ia=s(36962),ra=s(73737),na=s(22087),oa=s(85105);const la="8px",ca=t.memo((function({backgroundColor:e,uri:a,name:s,isPlaying:i,togglePlay:r,isLocked:n,isSaved:o,consumptionCapExplanation:c,price:d,spec:u,isExplicit:m,publishDate:p,preReleaseEndDateTime:g,duration:x}){const[y,f]=(0,ra.A)(a,o),C=!(0,ia.n)(),{isPreRelease:k}=Ge(),P=(0,h.wA)(),w=(0,pe.s)(),S=(0,sa.d$)(),{spec:R,logger:N}=(0,oa.r)(xe.e,{data:{uri:a}});(0,t.useEffect)((()=>{S&&N.logImpression(R.impression())}),[S,N,R]);const I=(0,t.useCallback)((()=>{const e=u.saveToLibraryButtonFactory();y?w.logInteraction(e.hitUnfollow({itemToBeUnfollowed:a})):(w.logInteraction(e.hitFollow({itemToBeFollowed:a})),S&&N.logInteraction(R.hitFollow({itemToBeFollowed:a}))),f(!y)}),[a,y,u,f,w,S,N,R]),E=(0,t.useCallback)(((e,s)=>{const t=u.downloadButtonFactory();c?P((0,b._3)(c)):s===na.NV.ADD?w.logInteraction(t.hitDownload({itemToDownload:a})):s===na.NV.REMOVE?w.logInteraction(t.hitRemoveDownload({itemToRemoveFromDownloads:a})):s!==na.NV.NO_PERMISSION&&s!==na.NV.NO_CAPABILITY||w.logInteraction(t.hitUiReveal())}),[c,P,w,u,a]),A=(0,t.useCallback)((()=>{const e=u.contextButtonFactory().hitUiReveal();w.logInteraction(e)}),[w,u]),_=(0,ta.j)(),B=!!c,M=!n&&!B;return(0,O.jsxs)(ye.E,{backgroundColor:e,style:{"--action-bar-padding-bottom":la},children:[(0,O.jsx)(be.S,{testId:"book-action-bar-metadata",children:(0,O.jsx)(Oe,{explicit:m,publishDate:p,preReleaseEndDateTime:g,durationMs:x,isPreRelease:k,uri:a,isPlaying:i})}),(0,O.jsxs)(be.S,{children:[k&&(0,O.jsx)(Ke,{uri:a}),!k&&(0,O.jsx)(aa,{uri:a,isLocked:n,isConsumptionCapped:B,price:d,isPlaying:i,onPlayback:r,logger:w,spec:u,size:_}),!k&&(0,O.jsx)(Ce.e,{children:(0,O.jsx)(ve.M,{isAdded:y,onClick:I,disabled:C,size:_,condensed:!0})},"follow-button"),(0,O.jsx)(je.I,{uri:a,onClick:E,size:_,canDownload:M}),(0,O.jsx)(j.b,{menu:(0,O.jsx)(fe.p,{uri:a,isPreRelease:k,price:d,isLocked:n,isCapped:B}),children:(0,O.jsx)(v.e,{label:l.Ru.get("more.label.context",s),onClick:A,size:_})})]})]})}));var da=s(42738),ua=s(66809),ma=s(63663),ha=s(3364),pa=s(1039),ga=s(22923),xa=s(11738),ya=s(50498),ba=s(24026),va=s(97650),ja=s(65047),fa=s(83332),Ca=s(79918),ka=s(1590),Pa=s(9383),wa=s(35524),Sa=s(64254);const Ra="BBK_i9SHovXTLVjas0kc",Na=t.memo((function({coverArt:e,name:a,authorName:s,authors:t,uri:i,backgroundColor:r,isPlaying:n,togglePlay:o,isLocked:c,price:d,isConsumptionCapped:u,logger:m,spec:h,preReleaseEndDateTime:g}){const x=(0,Sa.y)(),y=x===wa.E.SMALL||x===wa.E.XSMALL,{isOpen:b,openModal:v,closeModal:j}=(0,Pa.W)(),{isPreRelease:f,setCountdownFinished:C}=Ge(),k=f&&y,P=(0,O.jsx)(fe.p,{uri:i,price:d,isLocked:c,isCapped:u}),w=(0,O.jsx)(Ca.O,{authorName:s,authors:t});return(0,O.jsxs)(ha.z,{backgroundColor:r,size:f?ha.K.XLARGE:ha.K.DEFAULT,children:[(0,O.jsxs)(xa.h,{children:[f&&(0,O.jsx)(Ke,{uri:i}),!f&&(0,O.jsx)(aa,{uri:i,isLocked:c,price:d,isPlaying:n,isConsumptionCapped:u,onPlayback:o,logger:m,spec:h,size:"medium"}),(0,O.jsx)(da.h,{menu:P,children:(0,O.jsx)(ya.X,{text:a,dragUri:i,dragLabel:a})})]}),!k&&(0,O.jsx)(da.h,{menu:P,children:(0,O.jsx)(pa.K,{images:e,name:a,dragUri:i,dragMimeType:ma.fl.AUDIOBOOKS,shape:Q.u.SQUARE,onClick:v,ariaLabel:l.Ru.get("web-player.audiobooks.open_cover_modal")})}),(0,O.jsxs)(ga.Y,{children:[(0,O.jsx)(va.B,{children:l.Ru.get("web-player.audiobooks.audiobook")}),(0,O.jsx)(da.h,{menu:P,children:(0,O.jsx)(fa.mm,{canEdit:!1,onClick:()=>{},scaleAtMinWidth:fa.tw,dragUri:i,dragMimeType:ma.fl.AUDIOBOOKS,dragLabel:a,children:a})}),f?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ba.X,{children:(0,O.jsx)(p.E,{className:Ra,variant:"bodySmallBold","data-testid":"entityAuthor",children:w})}),g&&(0,O.jsx)(ua.G,{targetDate:g,images:k?e:[],imageTitle:a,onComplete:C})]}):(0,O.jsx)(ja.g,{children:w})]}),(0,O.jsx)(ka.K,{images:e,isOpen:b,onClose:j,title:a})]})})),Ia="pwjwUMaZVoJ0wBcQlIDf",Ea=t.memo((({price:e})=>e.finalPrice&&e.finalListPrice?0===e.finalPrice.amount&&0===e.finalListPrice.amount?(0,O.jsxs)("div",{className:Ia,children:[(0,O.jsx)(p.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:l.Ru.get("audiobook.freePriceDescription")}),(0,O.jsx)(p.E,{variant:"bodySmall",children:l.Ru.get("audiobook.freePriceExplanation")})]}):(0,O.jsxs)("div",{className:Ia,children:[(0,O.jsx)(p.E,{variant:"titleSmall",semanticColor:"textBase",children:e.finalPrice.formattedPrice}),e.finalPrice.amount<e.finalListPrice.amount&&(0,O.jsx)(p.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:l.Ru.get("web-player.audiobooks.retailPrice",(0,O.jsx)("span",{style:{textDecoration:"line-through"},children:e.finalListPrice.formattedPrice}))})]}):null));var Aa=s(29323),_a=s(8991),Ba=s(59082),Ma=s(24732),Fa=s(77663),Ta=s(29761),Da=s(26945),La=s(32576);const Ua="XzRW0BrBLoXKWET5f8m4",Oa="ooqITYCPJKua4e5yv8_9",za="zN8lTnSnAUSRAMPb7XYV",Va="llVyicNXe8z0QAnoRur1",Ha="fCrjgF2UgDUWjtqWls4Q",qa="CLnKy_BRVtIluLfBWy5t",Ga="RZa0qnXymlZCoGOdE03d",Wa="RFXE57hUzWvvK4_7GX13",$a="ALQqkJiR2lZOSYvhHesh",Ka="BQwrI2BbKK4n451iu2QC",Qa="VYLq_YaQVNISHPQOu2af",Xa=t.memo((function({name:e,duration:a,uri:s,bookName:i,usePlayContextItem:r,isChapterLocked:n,isPlayable:o,resumePositionMs:c,isFullyPlayed:d,isExplicit:u,is19PlusOnly:g,spec:x,index:y,consumptionCapExplanation:v}){const C=(0,t.useRef)(c),{isPlaying:k,togglePlay:P,isActive:w}=r({uri:s}),S=(0,pe.s)(),R=(0,h.wA)(),N=(0,Da.o)((e=>{if(e?.item?.uri===s){const a=(0,La.s)(e)??0;return C.current=a,a}return 0})),I=(0,t.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),E=(0,t.useCallback)((e=>{if(I(e),v)return void R((0,b._3)(v));const a=x.chapterBlockFactory({position:y,uri:s}).playButtonFactory();if(n)S.logInteraction(a.hitShowPaywall({paywalledItem:s}));else{const e=(0,Ta.$I)({isPlaying:k,isActive:w,spec:a,logger:S,uri:s});P({loggingParams:e})}}),[v,R,y,w,n,k,S,x,I,P,s]),A=(0,t.useCallback)((()=>{const e=x.chapterBlockFactory({position:y,uri:s}).secondaryHitUiReveal();S.logInteraction(e)}),[y,S,x,s]),_=(0,t.useCallback)((e=>{I(e);const a=x.chapterBlockFactory({position:y,uri:s}).contextMenuFactory().hitUiReveal();S.logInteraction(a)}),[y,S,x,I,s]),B=!(n||v),M=(0,O.jsx)(Ba.d,{className:m()({[Oa]:w}),children:e}),F=(0,O.jsxs)("div",{className:qa,children:[u&&(0,O.jsx)(K.U,{fullText:!0}),g&&(0,O.jsx)(Y.q,{size:16}),(0,O.jsxs)("div",{className:Ga,children:[C.current?(0,O.jsx)(p.E,{variant:"bodySmall",className:Qa,children:(0,O.jsx)(J.d,{durationMs:a.milliseconds})}):null,(0,O.jsx)(we.j,{isPlaying:k,fullyPlayed:d,durationMs:a.milliseconds,resumePositionMs:C.current,position:k?N:void 0})]})]}),T=(0,O.jsxs)("div",{className:$a,"data-testid":`chapter-${y}`,children:[(0,O.jsx)("div",{className:Ka,children:B?(0,O.jsx)(j.b,{menu:(0,O.jsx)(f.r,{uri:s}),children:(0,O.jsx)(Fa.e,{className:Ha,size:Fa.M.xs,label:l.Ru.get("more.label.context",e),onClick:_})}):null}),(0,O.jsx)("div",{className:Wa,children:(0,O.jsx)(W.R,{size:"small",version:W.H.secondary,onClick:E,isPlaying:k,ariaPlayLabel:l.Ru.get("tracklist.a11y.play",e,i),ariaPauseLabel:l.Ru.get("tracklist.a11y.pause",e,i),locked:n&&!v,disabled:!o&&!(n||v)})})]}),D=(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("hr",{className:za,"aria-hidden":!0}),(0,O.jsx)(Ma.v,{id:`chapter-${y}`,title:M,body:F,footer:T,onDoubleClick:e=>{E(e)},className:Ua})]});return B?(0,O.jsx)(da.h,{menu:(0,O.jsx)(f.r,{uri:s}),onShow:A,children:(0,O.jsx)("div",{className:Va,children:D})}):(0,O.jsx)("div",{className:Va,children:D})}));var Ya=s(51577),Ja=s(78459),Za=s(18514);var es=s(32971);const as="LrH_3T2eS36fCP4M_9Wt",ss="D8QrQAVF8Vwxp0zzAf2B",ts=({bookUri:e,bookName:a,sampleUri:s,isFinishedUnlockingJourney:i,usePlayContextItem:r,spec:n,consumptionCapExplanation:o})=>{const c=function(e,a){const s=(0,Za.T)();return(0,t.useCallback)((async(t,i)=>s.getBookContents(e,{offset:t,limit:i,doRefreshSubscription:a})),[a,s,e])}(e,i),{isMarkedAsFinished:d}=(0,ke.z)(e),u=(0,C.s)(),m=u?6:50,[h,g]=(0,t.useState)(m),x=(0,t.useCallback)((e=>e?.uri===s),[s]),y=(0,t.useCallback)((e=>(e=>null!==e)(e)&&!x(e)),[x]),b=(0,t.useCallback)((async(e,a)=>{const s=await c(e,a);return{items:s.items,totalLength:s.totalCount}}),[c]),{getItems:v,nrValidItems:j}=(0,Ja.E)({fetch:b,nrItems:m,limit:50}),f=(0,t.useCallback)((()=>{g((e=>e+m))}),[m]),k=u&&j>h,P=h-1;return(0,O.jsxs)("ul",{children:[(0,O.jsx)(Ya._,{onReachBottom:u?void 0:f,triggerOnInitialLoad:!0,children:v(0,P).map(((e,s)=>{if(!e||!y(e))return null;const{name:t,duration:i,uri:l,playability:{playable:c},playedState:{playPositionMilliseconds:u,state:m},isExplicit:h,is19PlusOnly:p}=e,g=m===es._w.Completed||d,x=function(e){return!e.playability?.playable&&(e.playability?.reason===es.Uk.PaymentRequired||e.playability?.reason===es.Uk.Anonymous)}(e);return(0,O.jsx)(Xa,{name:t,duration:i,uri:l,bookName:a,usePlayContextItem:r,isPlayable:c,isChapterLocked:x,consumptionCapExplanation:o,resumePositionMs:u,isFullyPlayed:g,isExplicit:h,is19PlusOnly:p,spec:n,index:s},`${l}/${s}`)}))}),k&&(0,O.jsx)("div",{className:as,children:(0,O.jsxs)(Aa.v,{onClick:()=>{f()},className:ss,children:[(0,O.jsx)(p.E,{variant:"bodySmallBold",children:l.Ru.get("similar-audiobooks.load-more-chapters")}),(0,O.jsx)(_a.V,{size:"xsmall"})]})})]})};var is=s(97910),rs=s(70117),ns=s(43375),os=s(56021),ls=s(91254);const cs="_yl4tOZxcpoUt28k6B8I",ds="lcJflizNrSwDM9yPNk6h",us="ret7iHkCxcJvsZU14oPY",ms=({rating:e,className:a,onClick:s})=>{if(!e)return null;const t=Boolean(e.rating?.rating);return(0,O.jsxs)("button",{className:m()(cs,a),onClick:s,children:[(0,O.jsx)(q.Z,{dir:"auto",variant:"mestoBold",children:e.averageRating?.showAverage?l.Ru.formatNumber(e.averageRating.average,{maximumFractionDigits:1}):l.Ru.get("web-player.audiobooks.noRating")}),t?(0,O.jsx)(os.j,{iconSize:16,className:m()(ds)}):(0,O.jsx)(ls.a,{iconSize:16,className:m()(ds)}),e.averageRating?.showAverage&&(0,O.jsxs)(q.Z,{variant:"mesto",className:m()(us),children:["(",l.Ru.formatNumberCompact(Number(e.averageRating.totalRatings)),")"]})]})};var hs=s(30658),ps=s(3192),gs=s(93345),xs=s(86779);const ys={shuffle:!1,repeat:gs.p.REPEAT_NONE},bs=t.memo((function({metadata:e}){const{uri:a,coverArt:s,name:r,htmlDescriptionPlain:o,authorName:d,authors:u,sample:_,narrators:B,rating:M,isExplicit:F,duration:T,copyrights:D,publishDate:L,price:z,isLocked:q,isSaved:G,consumptionCapExplanation:W,signifierText:$,resumeEpisodeLink:K,topics:Q,isPreRelease:X,preReleaseEndDateTime:Y}=e,{search:J}=(0,i.zy)(),Z=!!new URLSearchParams(J).get("isUnlockingAudiobook"),ee=!(!(0,hs.Z)(Z)||Z),ae=(0,S.V)(),se=(0,rs.H)(s[0]?.url),te=(0,h.wA)(),ie=(0,C.s)(),re=(e=>{const a=(0,S.V)(),s=(0,w.vh)(),t=(0,g.NC)(R.S$t),i=(0,h.d4)(I.F6),r=(0,h.d4)(N.JJ);return()=>{const n={category:"audiobook_show_page_exposure",action:"audiobook_show_page_visit",variant:t,label:"dwp",os:(0,A.f)(),destination_url:e,country:i?r:"",sp_t:(0,E.v8)("sp_t")};a?s.send((0,P.r)(n)):s.send((0,k._)(n))}})(a);(0,t.useEffect)((()=>{re()}),[re]);const ne=(0,g.NC)(R.NzS,{loadingValue:!1}),{spec:oe,logger:le}=(0,oa.r)(x.U,{data:{uri:a,identifier:n.$h.PODCAST_SHOW_AUDIOBOOK}}),{spec:ce,logger:de}=(0,oa.r)(x.U,{data:{uri:a,identifier:n.$h.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:he,logger:pe}=(0,oa.r)(y.Y,{data:{uri:a}}),xe=(0,t.useMemo)((()=>oe.actionBarFactory()),[oe]),ye=(0,t.useMemo)((()=>ce.aboutSectionFactory()),[ce]),be=(0,t.useMemo)((()=>oe.chapterListFactory()),[oe]);(0,t.useEffect)((()=>{q&&pe.logImpression(he.impression())}),[he,pe,q]);const{isPlaying:ve,togglePlay:je,usePlayContextItem:fe,isActive:Ce,triggerPlay:ke}=(0,ps.P)({uri:a},{featureIdentifier:"audiobook"},ys),{togglePlay:Pe,isPlaying:we,isActive:Fe}=(0,ps.P)({uri:_?.uri??"",pages:[{items:[{uri:_?.uri??"",uid:_?.uri??"",type:U.c.CHAPTER,provider:null,metadata:X?{is_pre_release:"true",type:"trailer"}:void 0}]}]},{featureIdentifier:"audiobook"},ys),Te=ve&&!we,De=Ce&&!Fe,Le=(0,t.useCallback)((async()=>{const e=oe.actionBarFactory().playButtonFactory();if(W)return le.logInteraction(e.hitShowPaywall({paywalledItem:a})),void te((0,b._3)(W));if(!q||ae)if(ae)je();else{const s=(0,Ta.$I)({isPlaying:Te,isActive:De,spec:e,logger:le,uri:a});De?je({loggingParams:s}):ke({skipTo:K?{uri:K}:void 0,loggingParams:s})}}),[oe,W,ae,q,le,a,te,je,Te,De,ke,K]),Oe=(0,t.useCallback)((()=>{_?.uri&&Pe()}),[Pe,_?.uri]),ze=(0,t.useCallback)((()=>{const s=ye.ratingButtonFactory().hitUiReveal();de.logInteraction(s),te((0,b.eH)(a,e))}),[ye,te,e,de,a]),Ve=(0,Sa.y)(),He=q&&!W&&z;return(0,O.jsx)("section",{children:(0,O.jsxs)(qe,{isPreRelease:X,children:[(0,O.jsx)(c.Q,{children:(0,xs.hV)({showOrAudiobookName:r,type:"Audiobook"})}),(0,O.jsx)(is.c,{artistOrShow:d,title:r,uri:a,entityType:is.p.AUDIOBOOK}),(0,O.jsx)(Na,{name:r,authorName:d,authors:u,uri:a,coverArt:s,backgroundColor:se,togglePlay:Le,isPlaying:Te,isLocked:q,isConsumptionCapped:!!W,price:z,logger:le,spec:oe.actionBarFactory(),preReleaseEndDateTime:Y}),(0,O.jsx)(ca,{name:r,backgroundColor:se,uri:a,togglePlay:Le,isPlaying:Te,isLocked:q,isSaved:G,consumptionCapExplanation:W,isExplicit:F,duration:T,publishDate:L,preReleaseEndDateTime:Y,price:z,spec:xe}),(0,O.jsxs)("div",{className:m()(Se,"contentSpacing",{[Re]:Ve===wa.E.LARGE}),children:[(0,O.jsxs)("div",{className:Ne,children:[(0,O.jsxs)("div",{className:Me,children:[$&&(0,O.jsx)(p.E,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:$}),!$&&He&&(0,O.jsx)(Ea,{price:z})]}),(0,O.jsx)(ge,{htmlDescription:o,narrators:B,spec:ye,isPreRelease:X??!1})]}),(0,O.jsxs)("div",{className:Ie,children:[_?.isPlayable&&(0,O.jsx)(me,{label:l.Ru.get("audiobook.page.sample"),images:_.coverArt,title:_.name,duration:_.duration.milliseconds,moreButton:q?null:(0,O.jsx)(j.b,{menu:(0,O.jsx)(f.r,{uri:_.uri}),children:(0,O.jsx)(v.e,{})}),onClick:Oe,isPlaying:we,isActive:Fe,size:ue.LARGE,contentRating:_.contentRating?.label,isPlayable:_.isPlayable}),(0,O.jsxs)("div",{className:_e,children:[!X&&(0,O.jsx)("div",{className:Ee,children:(0,O.jsx)(ms,{rating:M,onClick:ze})}),Q.length>0&&(0,O.jsx)(H.N,{topics:Q,className:Ae})]})]}),(0,O.jsxs)("div",{className:Be,children:[!X&&(0,O.jsx)(ts,{bookUri:a,bookName:r,sampleUri:_?.uri,isFinishedUnlockingJourney:ee,usePlayContextItem:fe,spec:be,consumptionCapExplanation:W},`${a}-${q}-${!!W}`),ne&&(0,O.jsx)(ns.Z,{copyrights:D})]}),ie&&(0,O.jsx)(V,{title:l.Ru.get("similar-audiobooks.more-audiobooks-like-this"),uri:a,className:Ue})]})]})})}));var vs=s(39066),js=s(555),fs=s(93320);const Cs=({uri:e,name:a,isSaved:s,backgroundColor:i,spec:r})=>{const n=(0,pe.s)(),o=!(0,ia.n)(),[c,d]=(0,ra.A)(e,s),u=(0,sa.d$)(),{spec:m,logger:h}=(0,oa.r)(xe.e,{data:{uri:e}});(0,t.useEffect)((()=>{u&&h.logImpression(m.impression())}),[u,h,m]);const p=(0,t.useCallback)((()=>{const a=r.followButtonFactory();n.logInteraction(c?a.hitUnfollow({itemToBeUnfollowed:e}):a.hitFollow({itemToBeFollowed:e})),!c&&u&&h.logInteraction(m.hitFollow({itemToBeFollowed:e})),d(!c)}),[e,c,r,n,d,u,h,m]),g=(0,t.useCallback)((()=>{n.logInteraction(r.contextButtonFactory().hitUiReveal())}),[n,r]),x=(0,ta.j)();return(0,O.jsx)(ye.E,{backgroundColor:i,children:(0,O.jsxs)(be.S,{children:[(0,O.jsx)(Ce.e,{children:(0,O.jsx)(fs.W,{isFollowing:c,onClick:p,disabled:o})},"follow-button"),(0,O.jsx)(j.b,{menu:(0,O.jsx)(js.H,{uri:e}),onShow:g,children:(0,O.jsx)(v.e,{label:l.Ru.get("more.label.context",a),size:x})})]})})};var ks=s(86403),Ps=s(99939),ws=s(11104),Ss=s(36585),Rs=s(26626),Ns=s(82325),Is=s(50175),Es=s(79462);const As="BknvXMyUnN3fQCz8mvLI",_s="slMInsl3HL9_02zHT22R",Bs="40px",Ms=({leavebehinds:e})=>{let a;return 1===e.length&&(a=(0,O.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser})),2===e.length&&(a=l.Ru.get("podcast-ads.recent_ads_just_two",(0,O.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,O.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),e.length>2&&(a=l.Ru.get("podcast-ads.recent_ads_more_than_two",(0,O.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,O.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),(0,O.jsxs)(p.E,{variant:"bodySmall",semanticColor:"textSubdued","data-testid":"show-leavebehinds-text",children:[l.Ru.get("podcast-ads.recent_ads_from"),a]})},Fs=({leavebehinds:e,uri:a,surface:s})=>{const i=(0,w.vh)();if((0,t.useEffect)((()=>{a&&e.length>0&&i.send((0,Ss.x)({leavebehind_request_id:e[0].requestId,event:"event_viewed",event_reason:`viewed_on_${(0,Rs.Fh)(s).toLowerCase()}`,surface:(0,Rs.Fh)(s),uri:a}))}),[i,e,a,s]),0===e.length)return null;const r=(0,o.o_h)(a)?.id,n=1===e.length?e[0].clickthroughUrl:(0,Ns.q)(r),c=Is.Qd,d=e.length>c,u=e.length-(c-1),m=e.slice(0,d?c-1:c);return(0,O.jsx)(Es.N,{to:n,pathname:e.length>1?n:void 0,state:{uri:a},className:_s,onClick:()=>i.send((0,Ss.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,Rs.Fh)(s),uri:a})),"data-testid":"show-leavebehinds-container",children:(0,O.jsx)(Ma.v,{layout:"wide",variant:"tinted",size:"xl",id:"show-leavebehinds",title:(0,O.jsxs)("div",{className:As,"data-testid":"show-leavebehinds-logos-container",children:[m.map((e=>(0,O.jsx)(Ps.C,{"data-testid":"show-leavebehind-image",src:e.displayImage.src,alt:e.displayImage.alt,imageHeight:Bs,imageWidth:Bs},e.adId))),d?(0,O.jsx)(Ts,{"data-testid":"show-leavebehinds-more-count-indicator",variant:"tinted",minBlockSize:Bs,borderRadius:"4px",padding:"6px",children:(0,O.jsx)(p.E,{variant:"bodyMedium","data-testid":"show-leavebehinds-more-count-indicator-text",children:l.Ru.get("podcast-ads.show_more_indicator",u)})}):null]}),body:(0,O.jsx)(Ms,{leavebehinds:e})})})};var Ts=(0,ks.Ay)(ws.a).withConfig({displayName:"LeavebehindsPreview___StyledBox",componentId:"sc-qakd80-0"})({backgroundColor:"#121212",width:"40px",display:"flex",alignItems:"center",justifyContent:"center"}),Ds=s(59856);const Ls=Rs.ui.SHOW_PAGE;function Us({uri:e}){const{data:a,error:s,getLeavebehinds:i}=(0,Ds.A)({surface:Ls,uri:e});(0,t.useEffect)((()=>{i()}),[i]);const r=(0,t.useMemo)((()=>a?(0,Is.iT)(a,e):[]),[a?.requestId]);return s||a?.leavebehindAds&&a?.leavebehindAds?.length<1?null:(0,O.jsx)(Fs,{leavebehinds:r,uri:e,surface:Ls})}var Os=s(45806),zs=s(48515),Vs=s(39948),Hs=s(13467),qs=s(38343),Gs=s(37611),Ws=s(69169);const $s=({className:e,title:a,uri:s})=>{const{data:t}=(0,qs.v)({uri:s}),i=t?.seoRecommendedPodcast.totalCount,r=t?.seoRecommendedPodcast.items,n=function(e){return(e||[]).filter((e=>(0,Gs.K)(e.data)))}(r);if(0===i)return null;const c=(0,o.o_h)(s)?.id;return(0,O.jsx)(T.$,{className:e,title:a,seeAllLabel:l.Ru.get("shelf.see-all"),total:i,alwaysShowSeeAll:!0,seeAllUri:`spotify:app:show:${c}:more-like-this`,children:n?.map((({data:e},a)=>(0,O.jsx)(Hs.o,{uri:e.uri,name:e.name,images:e.coverArt?.sources||[],publisher:e.publisher?.name??"",sharingInfo:null,mediaType:(0,Ws.w)(e.mediaType),index:a},e.uri)))})},Ks=e=>{const a=(0,F.D)({entityType:U.c.SHOW,componentType:"shelf",uri:e.uri});return(0,O.jsx)(M.s,{onError:a,children:(0,O.jsx)($s,{...e})})};var Qs=s(23293),Xs=s(49038),Ys=s(74089);const Js=(0,t.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),Zs=t.memo((function({uri:e,children:a}){return(0,O.jsx)(Ys.E,{uri:e,defaultState:[],sortContext:Js,localStorageKey:"showFilterParams-v2",children:a})}));var et=s(99053);const at={field:et.WY.PUBLISH_DATE,order:et.AX.DESC},st={field:et.WY.PUBLISH_DATE,order:et.AX.ASC},tt=st,it={episodic:at,sequential:st,recent:at};function rt(){return new Map([[at,{key:"newest-to-oldest",value:l.Ru.get("shows.sort.newest-to-oldest")}],[st,{key:"oldest-to-newest",value:l.Ru.get("shows.sort.oldest-to-newest")}]])}function nt(e){return it[e]}const ot=(0,t.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:nt("recent")}),lt=e=>{const a=rt();return Array.from(a.keys()).some((({field:a})=>a===e?.field))},ct=t.memo((function({uri:e,children:a,defaultSortParam:s}){return(0,O.jsx)(Ys.E,{uri:e,defaultState:s,sortContext:ot,localStorageKey:"showSortParam",validator:lt,children:a})}));var dt=s(51034),ut=s(18940),mt=s(88308);const ht="ysJC093hc_2ixGCy40_s",pt="mJP3Bamg3hN7S0p7XKfN",gt="clPqCj1L_KSfoVuTuP6x",xt="vqQmhCMZq7eUtTV7YYOQ",yt=t.memo((function({showMetadata:e,usePlayContextItem:a}){const{sortState:s}=(0,t.useContext)(ot),{sortState:i}=(0,t.useContext)(Js),r=function(e,a,s){const t=(0,Za.T)(),{canSort:i}=t.capabilities,r=(0,mt.U0)((async(i,r)=>t.getContents(e,{offset:i,limit:r,sort:a,filters:s})),[t,e,a,s]),n=(0,mt.U0)((async(a,s)=>t.getContents(e,{offset:a,limit:s})),[t,e]);return i?r:n}(e.uri,s,i),n=(0,dt.c)(),o=n?6:50,[c,d]=(0,t.useState)(o),u=(0,t.useCallback)((async(e,a)=>{const s=await r(e,a);return{items:s.items,totalLength:s.totalCount}}),[r]),{getItems:m,nrValidItems:h}=(0,Ja.E)({fetch:u,nrItems:o,limit:50}),g=(0,t.useCallback)((()=>{d((e=>e+o))}),[o]),x=n&&h>c;return(0,O.jsxs)(ut.pZ,{value:"track-list",children:[(0,O.jsx)(Ya._,{onReachBottom:n?void 0:g,children:m(0,c-1).map(((s,t)=>s&&(0,O.jsxs)("div",{className:pt,children:[(0,O.jsx)("hr",{className:ht,"aria-hidden":!0}),(0,O.jsx)(Xs.q,{index:t,episode:s,showMetadata:e,usePlayContextItem:a},`${s.uri}/${t}`)]},`${t}${s.uri}`)))}),x&&(0,O.jsx)("div",{className:gt,children:(0,O.jsxs)(Aa.v,{onClick:()=>{g()},className:xt,children:[(0,O.jsx)(p.E,{variant:"bodySmallBold",children:l.Ru.get("internal-link-recommender.load-more-episodes")}),(0,O.jsx)(_a.V,{size:"xsmall"})]})})]})}));var bt=s(44846);const vt={field:et.K$.ISPLAYED,operator:et.uj.EQUALS,value:!1},jt={field:et.K$.STARTEDPLAYING,operator:et.uj.GREATER_THAN,value:0};const ft="all-episodes",Ct=({onFilter:e})=>{const{sortState:a,setSortState:s}=(0,t.useContext)(Js),i=new Map([[vt,{key:"is-played",value:l.Ru.get("shows.filter.unplayed")}],[jt,{key:"started-playing",value:l.Ru.get("shows.filter.in-progress")}]]),r=Array.from(i.values());r.unshift({key:ft,value:l.Ru.get("mwp.podcast.all.episodes")});const n=Array.from(i.keys()),o=(0,t.useCallback)((a=>{if(a===ft)s([]);else{const e=n.find((e=>i.get(e)?.key===a));e&&s([e])}e()}),[e,s,n,i]);if(!i.size||!n)return null;let c=r[0];const d=Array.from(i.entries()).filter((e=>a?.some((a=>a.field===e[0].field&&a.operator===e[0].operator))));return d.length>0&&(c=d[0][1]),(0,O.jsx)(bt.g,{options:r,onSelect:e=>o(e),selected:c,variant:"bodyMediumBold",semanticColor:"textBase",heading:l.Ru.get("drop_down.filter_by")})},kt=({onSort:e})=>{const{sortState:a,setSortState:s}=(0,t.useContext)(ot),i=rt(),r=Array.from(i.values()),n=Array.from(i.keys()),o=(0,t.useCallback)((a=>{const t=n.find((e=>i.get(e)?.key===a));t&&s(t),e()}),[n,e,i,s]);if(!i.size||!a)return null;const c=Array.from(i.keys()).find((e=>e.field===a.field&&e.order===a.order));if(!c)return null;const d=i.get(c);return d?(0,O.jsx)(bt.g,{options:r,onSelect:e=>o(e),selected:d,heading:l.Ru.get("drop_down.sort_by")}):null},Pt="jVWq1orbpiIK34UFHkFb",wt="gYTsg8kvcGmu41_lilIb",St="GMHh7OED_Nijo4zzSfrb",Rt="sNEwCEh44Lapg36PnVFw",Nt="SoIsw3P_1RnUtFBHs_2d",It="OMG3QMzpwer8oWsiJpzs",Et="r0yVSge7A1iSTNfudfyV",At="yP6EeRtQJeqKq10IsMxn",_t="MIaGJ1KyQ3JLblOjWL19",Bt="p8WHC1qBUrwrBwzp_vYY",Mt="Uzyuaxpkm_Gwb6jOGbva",Ft="TSNj_F4gGzCuxrzx6n98",Tt="E4HX0M3aD0MY5dUCKSCb",Dt="CbSqM7wDwoLFnyIo1iKL",Lt="c0h80mSMc3PkNlHX0DYs",Ut="SGGetEMTKgQk1aJvG4k9",Ot="ne3ntrWAoMrE6_4A23Mf",zt=({spec:e})=>{const a=(0,pe.s)(),{canSort:s,canFilter:i}=(0,Za.T)().capabilities,r=(0,t.useCallback)((()=>{a.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[a,e]),n=(0,t.useCallback)((()=>{a.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[a,e]);return(0,O.jsxs)("div",{className:At,children:[i&&(0,O.jsx)("div",{className:Bt,children:(0,O.jsx)(Ct,{onFilter:r})}),!i&&(0,O.jsx)(p.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:Mt,children:l.Ru.get("mwp.podcast.all.episodes")}),s&&(0,O.jsx)("div",{className:_t,children:(0,O.jsx)(kt,{onSort:n})})]})};var Vt=s(95172),Ht=s(71401),qt=s(15511);var Gt=s(26698),Wt=s(61715),$t=s(1647),Kt=s(86851);const Qt=({breakpoint:e,metadata:a,spec:s})=>{const{uri:i,trailer:n,topics:o,description:c,htmlDescription:d,rating:u}=a,g=(0,Vt.N)(i),x=(0,pe.s)(),{spec:y,logger:v}=(0,oa.r)(r.R,{data:{uri:i}}),f=(0,t.useMemo)((()=>y.aboutSectionFactory()),[y]),C=(0,t.useMemo)((()=>s.episodeListFactory()),[s]),k=(0,h.wA)(),P=(0,S.V)(),{sortState:w}=(0,t.useContext)(Js),R=(0,Za.T)(),N=(0,dt.c)(),{usePlayContextItem:I}=(0,ps.P)({uri:i,metadata:{[$t.W.SORTING_CRITERIA]:R.getPlayerSort(tt),[$t.W.FILTERING_PREDICATE]:R.getPlayerFilter(w)}},{featureIdentifier:"show"}),{isActive:E,isPlaying:A,togglePlay:_}=I({uri:n?.uri||""}),B=(0,t.useCallback)((e=>{const a=s.aboutSectionFactory().seeMoreButtonFactory(),t=e?a.hitUiReveal():a.hitUiHide();x.logInteraction(t)}),[x,s]),M=(0,t.useCallback)(((e,a)=>{const t=s.aboutSectionFactory().topicFactory(a).hitUiNavigate({destination:a.uri});x.logInteraction(t)}),[x,s]),F=n?{name:n.name,uri:n.uri,audio:{items:n.audio.items.map((e=>({url:e.url})))}}:null,T=(0,Xs.B)(a),D=(0,Gt.C)(F,T),L=(0,t.useCallback)((()=>{n?.uri&&(P?D():_())}),[D,P,_,n?.uri]),{ref:U,breakpoint:z}=(0,Wt.x)({[wa.E.MEDIUM]:0,[wa.E.LARGE]:600}),V=o.length>0,q=c||d,G=q||V,W=(0,zs.C)();return(e=>{const a=(0,h.wA)(),s=(0,dt.c)(),i=(0,h.d4)(qt.uY);(0,t.useEffect)((()=>{s&&e!==i&&a((0,Ht.SC)(e))}),[e,i,a,s])})(i),(0,O.jsxs)("div",{className:m()(Pt,"contentSpacing",{[St]:e===wa.E.LARGE}),ref:U,children:[(0,O.jsx)(Qs.q,{className:wt,gatedEntityCoverArt:a.gatedEntityCoverArt,gatedEntityRelations:a.gatedEntityRelations,upsellExplanation:a.upsellExplanation,hasAccess:a.hasGatedEntityRelationAccess,showCoverArt:!0}),(0,O.jsxs)("div",{className:Rt,children:[G&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(p.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:Mt,children:l.Ru.get("artist.about")}),q&&(0,O.jsx)(he.N,{maxLines:4,content:(c||"").trim(),onExpanded:B,htmlContent:d||void 0}),n&&(0,O.jsx)(da.h,{menu:(0,O.jsx)(Os.b,{uri:n.uri,showUri:i,sharingInfo:n.sharingInfo}),children:(0,O.jsx)(me,{label:l.Ru.get("track-trailer"),className:Ft,images:n.coverArt,title:n.name,duration:n.duration.milliseconds,moreButton:(0,O.jsx)(j.b,{menu:(0,O.jsx)(Os.b,{uri:n.uri,sharingInfo:n.sharingInfo,showUri:i}),children:(0,O.jsx)(Fa.e,{})}),onClick:L,isPlaying:A,isActive:E,size:ue.LARGE,contentRating:n.contentRating?.label})}),(0,O.jsxs)("div",{className:Dt,children:[u&&!g&&(0,O.jsx)("div",{className:Lt,children:(0,O.jsx)(ms,{rating:u,onClick:()=>{const e=f.ratingButtonFactory().hitUiReveal();v.logInteraction(e),k((0,b.eH)(i,a))}})}),V&&(0,O.jsx)(H.N,{topics:o,className:Ut,onClick:M})]})]}),(0,O.jsx)(Us,{uri:i})]}),(0,O.jsx)(Sa.o.Provider,{value:z,children:(0,O.jsxs)("div",{className:m()(It,{[Et]:N}),"data-testid":"show-all-episode-list",children:[(0,O.jsx)(zt,{spec:s}),(0,O.jsx)(Kt.r,{spec:C,children:(0,O.jsx)(yt,{showMetadata:a,usePlayContextItem:I})})]})}),(0,O.jsx)(ns.Z,{copyrights:[]}),(0,O.jsxs)("div",{className:Nt,children:[W&&(0,O.jsx)(Vs.w,{uri:i,title:l.Ru.get("internal-link-recommender.popular-episodes"),"data-testid":"popular-episodes-above"}),N&&(0,O.jsx)(Ks,{title:l.Ru.get("internal-link-recommender.more-podcasts-like-this"),uri:i,className:Ot})]})]})},Xt=t.memo(Qt);var Yt=s(90502),Jt=s(56721);const Zt=({reason:e})=>{const a=function(e){switch(e){case"OTP":return l.Ru.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l.Ru.get("podcasts.subscriber-indicator.subscription");default:return""}}(e);return a?(0,O.jsx)(p.E,{variant:"bodySmall",semanticColor:"textBase",className:Tt,children:a}):null};const ei=({metadata:e,backgroundColor:a})=>{const{uri:s,coverArt:t,name:i,podcastType:r,publisherName:n,gatedContentAccessReason:o}=e,c=(0,O.jsx)(js.H,{uri:s});return(0,O.jsxs)(ha.z,{backgroundColor:a,children:[(0,O.jsx)(xa.h,{children:(0,O.jsx)(da.h,{menu:c,children:(0,O.jsx)(ya.X,{text:i,dragUri:s,dragLabel:i})})}),(0,O.jsx)(Yt.X,{children:(0,O.jsx)(da.h,{menu:c,children:(0,O.jsx)(Jt.b,{loading:"eager",name:i,images:t,placeholderType:"show",shape:Jt.u.SQUARE})})}),(0,O.jsxs)(ga.Y,{children:[(0,O.jsxs)(va.B,{children:["SHOW"===r?l.Ru.get("type.show"):l.Ru.get("type.podcast"),o&&(0,O.jsx)(Zt,{reason:o})]}),(0,O.jsx)(da.h,{menu:c,children:(0,O.jsx)(fa.mm,{dragUri:s,dragLabel:i,scaleAtMinWidth:fa.tw,children:(0,O.jsx)("span",{"data-testid":"show-title",children:i})})}),(0,O.jsx)(ja.g,{children:n})]})]})};var ai=s(58361),si=s(4437),ti=s(31615);const ii=({metadata:e,showId:a})=>{const{coverArt:s,name:i,uri:n,isSaved:o}=e,{spec:l}=(0,oa.r)(r.R,{data:{uri:n}}),d=(0,t.useMemo)((()=>l.actionBarFactory()),[l]),u=(0,rs.H)(s[0]?.url||null),m=(0,Sa.y)();return(0,O.jsxs)("section",{children:[(0,O.jsx)(c.Q,{children:(0,xs.hV)({showOrAudiobookName:i,type:"Podcast"})}),(0,O.jsx)(is.c,{artistOrShow:i,uri:n,entityType:is.p.PODCAST}),(0,O.jsx)(ei,{metadata:e,backgroundColor:u}),(0,O.jsx)(Cs,{uri:n,name:i,isSaved:o,backgroundColor:u,spec:d}),(0,O.jsx)(Xt,{breakpoint:m,metadata:e,showId:a,spec:l})]})},ri=(0,t.memo)((function(){const{showId:e=""}=(0,i.g)(),a=`spotify:show:${e}`,{data:s,error:r,redirectUri:c}=(0,We.W)(a);if(c){const e=(0,o.Lce)(c);return(0,O.jsx)(vs.$,{to:e.toURLPath(!0)})}const u=s&&(0,es.Go)(s);return!s||r?r instanceof ti.W?(0,O.jsx)(d.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error-page.not-available-in-region.title")}):(0,O.jsx)(d.LoadingPage,{hasError:!!r,errorMessage:l.Ru.get("error.not_found.title.page")}):u?(0,O.jsx)(t.Suspense,{fallback:null,children:(0,O.jsx)(ai.u,{pageId:n.$h.PODCAST_SHOW_AUDIOBOOK,uri:a,children:(0,O.jsx)(si.d,{dynamicColors:s.dynamicColors,children:(0,O.jsx)(bs,{metadata:s},`${!!s.consumptionCapExplanation}`)})})}):(0,O.jsx)(t.Suspense,{fallback:null,children:(0,O.jsx)(ai.u,{pageId:n.$h.PODCAST,uri:a,children:(0,O.jsx)(Zs,{uri:s.uri,children:(0,O.jsx)(ct,{uri:s.uri,defaultSortParam:nt(s.consumptionOrder),children:(0,O.jsx)(si.d,{dynamicColors:s.dynamicColors,children:(0,O.jsx)(ii,{showId:e,metadata:s})})})})})})}))},52316:(e,a,s)=>{s.d(a,{v:()=>m});var t=s(69568),i=s(96828),r=s(60992),n=s(75557),o=s(87579),l=s(85108),c=s(47425),d=s(98795),u=s(86070);const m=({uri:e,isBook:a=!1})=>{const{isPreSaved:s,addPresave:m,removePresave:h}=(0,c.w)({uri:e,isBook:a});return s?(0,u.jsx)(t.n,{onClick:h,iconTrailing:i.k,children:o.Ru.get("web-player.prerelease.presaved")}):(0,u.jsx)(l.h,{uri:e,action:d.no.SAVE_PRERELEASE,children:(0,u.jsx)(r.$,{disabled:void 0===s,onClick:m,iconTrailing:n.P,children:o.Ru.get("web-player.prerelease.presave")})})}},66312:(e,a,s)=>{s.d(a,{j:()=>S});var t=s(61469);const i="wIA_5Ypq0rltNPeZQpM4",r="Swi6YtNEFCCVz8l4y75v",n="pklLPOhfigdytL9bPoth",o="sb24Y8kdMZInJ8aI8dXT";var l=s(86070);function c({ariaValueText:e,max:a,current:s}){const t=a&&s?100*Math.min(1,s/a):0,c={transform:`translateX(-${100-t}%)`},d=e||`${Math.round(t)}%`;return(0,l.jsxs)("div",{className:i,role:"progressbar",tabIndex:0,"aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":a,"aria-valuetext":d,children:[(0,l.jsx)("div",{className:r}),(0,l.jsx)("div",{className:n,children:(0,l.jsx)("div",{"data-testid":"progressBarFg",className:o,style:c})})]})}const d="qfYkuLpETFW3axnfMntO",u="_q93agegdE655O5zPz6l",m="z7Yl7CIT1AB0y91f_moh",h="iLIlkUcfIq56KncGtX7u",p="nV50yZ6BR_TIuWP3l7b1",g="qLjIx_SzBEpDRA_q7kxQ";var x=s(39629),y=s(95740),b=s(87579),v=s(97500),j=s.n(v),f=s(15056),C=s(36665),k=s(33586);const P="xWm_uA0Co4SXVxaO7wlB",w=({durationMs:e,className:a,displaySeconds:s})=>{const{hours:t,minutes:i,seconds:r}=(0,C.S)(e);s=!1!==s&&!t&&r;const n=(0,k.j)({h:t,m:i,s:s?r:0});return n?(0,l.jsx)("span",{className:j()(P,a),children:b.Ru.get("time.left",n)}):null},S=e=>{const{resumePositionMs:a=0,releaseDate:s,isPlaying:i,fullyPlayed:r,durationMs:n,position:o=a,compactVariant:v=!1,className:C,progressBarClassName:k,progressStateClassName:P,releaseDateClassName:S}=e,R=s&&s.isoString?(0,l.jsx)(x.E,{as:"p",variant:"bodySmall",className:u,children:(0,t.V2)((0,t.ad)(s.isoString),s.precision)}):null,N=(()=>{if(0===n)return null;if(r&&!i)return(0,l.jsxs)("div",{className:j()(h,P),children:[(0,l.jsx)(x.E,{as:"p",variant:"bodySmall",className:m,children:b.Ru.get("episode.audiobook.chapter.finished")}),(0,l.jsx)(y.i,{size:"small",className:g,"aria-hidden":"true"})]});if(o>0||i){const e=Math.ceil(Math.max(n-o,0));return(0,l.jsx)("div",{className:j()(h,P),children:(0,l.jsx)(x.E,{as:"p",variant:"bodySmall",className:m,children:(0,l.jsx)(w,{durationMs:e,displaySeconds:!v&&void 0})})})}return(0,l.jsx)(x.E,{as:"p",variant:"bodySmall",className:j()(u,S),"data-testid":"episode-progress-not-played",children:(0,l.jsx)(f.d,{durationMs:n,displaySeconds:!v&&void 0})})})(),I=0===n?null:!r&&o>0||i?(0,l.jsx)("div",{className:j()(p,k),children:(0,l.jsx)(c,{current:o,max:n})}):null;return R||N||I?(0,l.jsxs)("div",{className:j()(d,C),children:[R,N,I]}):null}},66809:(e,a,s)=>{s.d(a,{G:()=>w});var t=s(97500),i=s.n(t),r=s(87579),n=s(39629);const o="YNXLVjlRXPfM4xObTojA",l="CVRy4NtxZYSle8dJ1E67",c="holKDGFNEFSz85czBeSv",d="gqidZhN1lgoZDfI_7E6w",u="_IQ8dgA5pEr_V8PfUkWa",m="xNkPMA_OvAxcFTdfyroI";var h=s(86070);const p=({value:e,label:a,hasDivider:s=!1})=>(0,h.jsxs)("div",{className:c,"aria-hidden":"true",children:[(0,h.jsx)(n.E,{variant:"titleSmall",className:i()({[u]:s}),children:e}),(0,h.jsx)(n.E,{variant:"marginal",semanticColor:"textSubdued",children:a})]});var g=s(30758);const x=6e4,y=36e5,b=864e5;var v=s(760),j=s(76066);const f={days:0,hours:0,minutes:0,seconds:0};function C(e){return e>0?function(e){const a=Math.abs(e);return{days:Math.floor(a/b),hours:Math.floor(a%b/y),minutes:Math.floor(a%y/x),seconds:Math.floor(a%x/1e3)}}(e):f}var k=s(8065),P=s(69479);const w=({targetDate:e,className:a,onComplete:s,images:t,imageTitle:n})=>{const{days:c,hours:u,minutes:x,seconds:y}=((e,a)=>{const s=(0,g.useRef)(a);s.current=a;const[t,i]=(0,g.useState)((()=>C((0,v.u)(e))));return(0,j.$)((a=>{const t=(0,v.u)(e),r=C(t);i(r),t<=0&&(a(),s.current?.())}),1e3),t})(e,s),b=void 0!==t&&t.length>0&&n,f=r.Ru.get("web-player.prerelease.countdown_label",{days:c,hours:u,minutes:x,seconds:y});return(0,h.jsxs)("div",{className:i()(o,a,{[l]:b}),role:"timer","data-testid":"countdown",children:[(0,h.jsx)("span",{className:m,children:f}),b&&(0,h.jsx)(k.b,{images:t,type:P.c.ALBUM,shape:k.u.ROUNDED_CORNERS,className:d,title:n}),(0,h.jsx)(p,{value:c,label:r.Ru.get("web-player.prerelease.days",c),hasDivider:!0}),(0,h.jsx)(p,{value:u,label:r.Ru.get("web-player.prerelease.hours",u),hasDivider:!0}),(0,h.jsx)(p,{value:x,label:r.Ru.get("web-player.prerelease.minutes",x),hasDivider:!0}),(0,h.jsx)(p,{value:y,label:r.Ru.get("web-player.prerelease.seconds",y)})]})}},77078:(e,a,s)=>{s.d(a,{X:()=>i});var t=s(22087);function i(e){return[t.kw.YES,t.kw.DOWNLOADING,t.kw.WAITING].includes(e)}},79918:(e,a,s)=>{s.d(a,{O:()=>d});var t=s(30758),i=s(87579),r=s(79462),n=s(86953);const o="IIKJOrbx5pjNtg3gpI0H";var l=s(86070);const c=e=>e,d=({authorName:e="",authors:a,nameHighlighter:s=c})=>(0,n.H)()&&a?.length?a.map((({uri:e,name:a},n)=>(0,l.jsxs)(t.Fragment,{children:[n?i.Ru.getSeparator():null,e?(0,l.jsx)(r.N,{to:e,className:o,children:s(a)},n):s(a)]},n))):s(e)},85108:(e,a,s)=>{s.d(a,{h:()=>u});var t=s(30758),i=s(52662),r=s(26961),n=s(97304),o=s(9760),l=s(63112);var c=s(94284),d=s(86070);const u=({children:e,action:a,uri:s})=>{const u=(0,n.V)(),m=(0,l.N)(o.JD);let h;const p=()=>{const e={triggerId:r.d,triggerAction:{type:a}};i.h.set((a=>({...a,...e}))),m.storeAction(o.j8,{operation:c.tS.ADD,uris:[s]})};try{h=t.Children.only(e)}catch(a){return(0,d.jsx)(d.Fragment,{children:e})}return u?t.cloneElement(h,{onClick:p}):(0,d.jsx)(d.Fragment,{children:e})}}}]);
//# sourceMappingURL=xpui-routes-show.js.map