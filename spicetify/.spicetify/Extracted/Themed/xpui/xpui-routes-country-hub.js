"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2543],{25089:(e,n,o)=>{o.d(n,{CountryHub:()=>Z});var r=o(30758),s=o(97500),c=o.n(s),t=o(85387),a=o(69568),l=o(75579),i=o(87579),d=o(44904),u=o(57826),m=o(24454),h=o(39629),x=o(3364),g=o(22923),j=o(83332),p=o(52997),y=o(86070);const b=({color:e,countryCode:n})=>{const o=(0,p.uO)(n),r=(0,p.gL)(n);return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(x.z,{size:x.K.DEFAULT,backgroundColor:e,children:(0,y.jsxs)(g.Y,{children:[(0,y.jsx)(j.mm,{children:o}),(0,y.jsx)(h.E,{variant:"bodySmall",children:r})]})})})};var f=o(38189),C=o(62411),v=o(4882),M=o(45592),N=o(78775),k=o(44602),z=o(14256),E=o(79462),L=o(50446),O=o(15817),w=o(56889);const H="XDe71TYCM1yakzJ0BVGp",F="zJFuKlrLzbOy7iFiA9tA",S="v2Lq3LdxHmr54XvZF1dS",R="dsg9P8PEMDsVyt8ac3KD",_="ObCtiQ5P3zY3bXBIkN2X",D="BGK8c3q0Fvm7vdMU9Ov1",I="yjfs8dP1IDOpoWAMk7_Q",P="yOchIz_U3btFceKrnMYt",U=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),K=({isModalOpen:e,onClose:n})=>{const o=(0,r.useRef)(null),s=(0,r.useRef)(null),t=(0,C.d4)(O.Ht),[a,l]=(0,r.useState)(!1),d=(0,r.useMemo)((()=>Object.values(p.O4).map((e=>{const n=(0,p.cm)(e);return{name:n,code:e,normalizedName:U(n)}})).sort(((e,n)=>e.name.localeCompare(n.name,t.locale,{sensitivity:"accent"})))),[t.locale]),[u,m]=(0,r.useState)(""),x=(0,r.useDeferredValue)(u),[g,j]=(0,r.useState)(d),[b,f]=(0,r.useState)(!1),K=(0,r.useMemo)((()=>{const e=U(x);return d.filter((n=>n.normalizedName.includes(e)))}),[d,x]);(0,r.useEffect)((()=>{0===K.length?f(!0):f(!1),j(K)}),[K]);const T=e=>{a||m(e)},X=()=>{T(""),n(),s.current&&(s.current.scrollTop=0)};(0,L.m)(X);const B="country-selection-title";return(0,y.jsx)(w.s,{active:e,children:(0,y.jsx)("div",{className:c()(H,{[F]:e}),role:"presentation",onClick:e=>{e.target===o.current&&X()},"data-open":e?"open":"closed",ref:o,children:(0,y.jsxs)("section",{className:S,role:"dialog","aria-modal":!0,"aria-labelledby":B,children:[(0,y.jsx)("div",{className:_,children:(0,y.jsx)(v.H,{iconOnly:M.M,size:"small",onClick:()=>{X()},"aria-label":i.Ru.get("close")})}),(0,y.jsxs)("div",{className:R,children:[(0,y.jsxs)("div",{className:D,children:[(0,y.jsx)(h.E,{as:"h3",variant:"bodyMediumBold",id:B,children:i.Ru.get("concert.location.search.header")}),(0,y.jsx)(N.E,{iconLeading:(0,y.jsx)(k.C,{}),children:(0,y.jsx)(z.Z,{placeholder:i.Ru.get("concert.location.search.placeholder"),onChange:e=>T(e.currentTarget.value),onCompositionStart:()=>{l(!0)},onCompositionEnd:e=>{l(!1),m(e.currentTarget.value)},value:u})})]}),b&&(0,y.jsx)(h.E,{as:"p",variant:"bodyMedium",children:i.Ru.get("concert.error.no_locations_found_subtitle")}),(0,y.jsx)("ul",{className:I,ref:s,children:g.map((e=>(0,y.jsx)("li",{children:(0,y.jsx)(E.N,{className:P,onClick:()=>{X()},to:`/popular-in/${e.code.toLowerCase()}`,children:e.name})},e.code)))})]})]})})})};var T=o(36994),X=o(40887),B=o(48692),Y=o(37007);const A=Spicetify.GraphQL.Definitions["countryHubsPage"]=new B.l("countryHubsPage","query","6c2e4b04d8836507c2ad09c954f27a6c98d8b0a761f99ef6f4dc9bbe7834ba55",null),q=e=>"country"in e;var V=o(20924),G=o(69479);const J="oi3UMt1ydXcHpbXyw2dw",Q=({countryCode:e})=>{const[n,o]=(0,r.useState)(!1),s=(0,t.zy)(),{data:u,loading:h}=(x={countryCode:e||""},(0,Y.I)(A,x,g));var x,g;const j=(0,T.w)(s.pathname);if((0,r.useEffect)((()=>{!h&&u&&q(u.countryHub)&&j()}),[u,h,j]),h)return(0,y.jsx)(m.LoadingPage,{hasError:!1,errorMessage:""});if(null===u||!q(u.countryHub))return(0,y.jsx)(m.LoadingPage,{hasError:!0,errorMessage:i.Ru.get("error.generic")});const C=u.countryHub.country.hexColor,v=(0,p.cm)(e),M=u.countryHub.shelves;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(b,{color:C,countryCode:e}),(0,y.jsx)(d.K,{backgroundColor:C}),(0,y.jsxs)("div",{className:c()(J,"contentSpacing"),children:[(0,y.jsx)(a.n,{iconLeading:l.t,onClick:()=>o(!n),size:"small",children:v}),(0,y.jsx)("div",{role:"presentation","data-open":n?"open":"closed",children:(0,y.jsx)(K,{isModalOpen:n,onClose:()=>{o(!1)}})}),M?.map(((n,o)=>(0,y.jsx)(f.n,{index:o,contentId:n.contentId,shelfItems:n.items.items,countryCode:e},o)))]})]})},Z=()=>{const e=(0,V.g)(),{country:n=""}=(0,t.g)(),o=n.toUpperCase(),s=(0,X.L)(o,G.c.COUNTRY_HUB),c=(0,p.ew)(o)?o:null;if((0,r.useEffect)((()=>{c||e("/")}),[c,e]),!c)return null;const a=c;return(0,y.jsx)(u.s,{onError:s,children:(0,y.jsx)(Q,{countryCode:a})})}}}]);
//# sourceMappingURL=xpui-routes-country-hub.js.map