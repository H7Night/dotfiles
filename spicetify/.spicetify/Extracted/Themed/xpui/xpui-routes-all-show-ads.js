"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1845],{23986:(e,t,a)=>{a.d(t,{o:()=>q});var i=a(30758),n=a(25270),s=a(44850),r=a(57146),d=a(51357),l=a(17640),c=a(29529),o=a(58837),u=a(83155),v=a(39416),h=a(57221),_=a(35763),f=a(24498);const b="c5Ml9BbBuUEHjNkcSwZA";var g=a(86070);const m="70px",p=({adId:e,advertiser:t,tagline:a,displayImage:i,buttonMessage:n,cardOnClick:s,buttonOnClick:r,clickthroughUrl:d})=>(0,g.jsx)(f.N,{to:(0,_.H)(d),className:b,"data-testid":"leavebehind",children:(0,g.jsx)(c.v,{onClick:s,onClickHint:l.Ru.get("ad-formats.learnMore"),layout:"wide",variant:"tinted",id:e,size:"xl",title:(0,g.jsx)(o.d,{weight:"bold",variant:"ballad",lineClamp:1,"data-testid":"leavebehind-advertiser",children:t}),subtitle:(0,g.jsx)(u.j,{as:"div",lineClamp:2,"data-testid":"leavebehind-tagline",children:a}),media:(0,g.jsx)(v.C,{"data-testid":"leavebehind-image",src:i.src,alt:i.alt,imageHeight:m,imageWidth:m,size:"xl"}),trailing:(0,g.jsx)(h.$,{onClick:()=>{r&&r()},"data-testid":"leavebehind-button",colorSet:"invertedLight",size:"small","aria-label":l.Ru.get("ad-formats.learnMore"),children:n})})});var k=a(41430),x=a(47827),y=a(31843),w=a(67843);const I="zlUJfROzFEOsEDWL7ucP",E="Fxvq1Fw7XQdGRDvYokRg",q=({leavebehinds:e,seeAllButton:t,surface:a,uri:c})=>{const o=(0,w.vh)(),u=(0,y.w)(y.P),[v,h]=(0,i.useState)(void 0);(0,i.useEffect)((()=>{e&&e.length>0&&v!==e[0].requestId&&c&&(e.forEach(((e,t)=>{e.uri===c&&(e.trackingEvents?.viewed.forEach((async t=>{try{await u(t)}catch(i){const n=i;o.send((0,r.G)({error_type:"trackingURLFailure",error_message:n.message,http_error_code:422,surface:(0,k.Fh)(a),request_url:t,request_type:"leavebehindAds",lineitem_id:e.lineitemId,ad_content_origin:(0,x.Zl)(a)}))}})),o.send((0,d.x)({leavebehind_lineitem_id:e.lineitemId,leavebehind_request_id:e.requestId,event:"event_viewed",event_reason:`viewed_on_${(0,k.Fh)(a).toLowerCase()}`,surface:(0,k.Fh)(a),surface_position:t+1,uri:c})))})),h(e[0].requestId))}),[o,u,e,c,a,v]);const _=({eventReason:e,lineitemId:t,requestId:i,trackingEvents:n,surfacePosition:s})=>{((e,t)=>{t?.forEach((async t=>{try{await u(t)}catch(i){const n=i;o.send((0,r.G)({error_type:"trackingURLFailure",error_message:n.name,http_error_code:422,surface:(0,k.Fh)(a),request_url:t,request_type:"leavebehindAds",lineitem_id:e,ad_content_origin:(0,x.Zl)(a)}))}}))})(t,n),o.send((0,d.x)({leavebehind_lineitem_id:t,leavebehind_request_id:i,event:"event_clicked",event_reason:e,surface:(0,k.Fh)(a),surface_position:s,uri:c}))};return(0,g.jsxs)("section",{"data-testid":"leavebehinds-wrapper",children:[(0,g.jsxs)("div",{className:E,children:[(0,g.jsx)(n.E,{as:"h2",semanticColor:"textBase",variant:"titleSmall",paddingBottom:(0,s.po)("tighter"),"data-testid":"leavebehinds-title",children:l.Ru.get("podcast-ads.recent_ads")}),t]}),(0,g.jsx)("div",{className:I,"data-testid":"leavebehinds-list-wrapper",children:e.map(((e,t)=>(0,g.jsx)(p,{...e,buttonOnClick:()=>{_({eventReason:"button_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})},cardOnClick:()=>{_({eventReason:"card_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})}},e.adId)))})]})}},51357:(e,t,a)=>{function i(e){return{name:"LeavebehindAdEvent",environments:["browser","device","desktop"],data:e}}a.d(t,{x:()=>i})},56114:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var i=a(30758),n=a(85387),s=a(23986),r=a(64644),d=a(47827),l=a(86070);function c({surface:e}){const t=(0,n.zy)().state,{data:a,error:c,getLeavebehinds:o}=(0,r.A)({surface:e,uri:t.uri});if((0,i.useEffect)((()=>{o()}),[]),!a?.leavebehindAds||c)return null;const u=(0,d.iT)(a,t.uri);return(0,l.jsx)("div",{className:"contentSpacing",children:(0,l.jsx)(s.o,{leavebehinds:u.slice(0,d.E9),surface:e,uri:t.uri})})}},64644:(e,t,a)=>{a.d(t,{A:()=>v});var i=a(30758),n=a(57146),s=a(75044),r=a(14934),d=a(41430),l=a(47827),c=a(67843),o=a(55405),u=a(43352);const v=function(e){const[t,a]=(0,i.useState)(),[v,h]=(0,i.useState)(!1),_=(0,c.vh)(),f=(0,s.NC)(o.SAn,{loadingValue:!1});return{data:t,error:v,getLeavebehinds:(0,i.useCallback)((async()=>{try{const t=await r.b6(u.n.getInstance(),(0,d.Fh)(e.surface),e.uri,e.playlistName,f);a(t.body)}catch(t){const a=t;_.send((0,n.G)({error_type:"fetchAdsFailure",error_message:a.name,http_error_code:a.status,surface:(0,d.Fh)(e.surface),request_type:"leavebehindAds",ad_content_origin:(0,l.Zl)(e.surface)})),h(!0)}}),[_,e.playlistName,e.surface,e.uri,f])}}}}]);
//# sourceMappingURL=xpui-routes-all-show-ads.js.map