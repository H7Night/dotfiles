"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[983],{1233:(e,t,n)=>{n.d(t,{d:()=>r});var s=n(30758),a=n(84521);const r=()=>(0,s.useContext)(a.D)},5875:(e,t,n)=>{n.d(t,{K:()=>r});var s=n(18662),a=n(65891);function r(){return(0,a.N)(s.a)}},11167:(e,t,n)=>{n.d(t,{c:()=>l});var s=n(30758),a=n(34709),r=n(61860),i=n(91247);function l(e,t){const n=(0,r.d)(),l=(0,i.J)(t),o=(0,a.a)();(0,s.useEffect)((()=>n.getBroadcastingEvents().addListener(e,(e=>{o()&&l(e)}))),[n,l,e,o])}},12526:(e,t,n)=>{n.d(t,{h:()=>s});n(6441),n(84588);function s(e){return"object"!=typeof e||null===e?e:window.structuredClone?window.structuredClone(e):JSON.parse(JSON.stringify(e))}},25407:(e,t,n)=>{n.d(t,{Z:()=>y});var s=n(30024),a=n(49358),r=n(65906),i=n(35638),l=n(34852),o=n(23736),c=n(96977),d=n(81055),u=n(26930),h=n(66408),m=n(40381),p=n(57775),x=n(6662),j=n(69146),g=n(19492);const f="wJTo6UR1k7MEB2qA3J6Q";var v=n(86070);const y=({loading:e,uri:t,type:n,title:o,subtitle:g,coverArt:y})=>{const S=(0,j._)(),w=(0,d.C)(),{enqueueSnackbar:E}=(0,u.d)();return(0,v.jsx)(s.v,{id:t,variant:"naked",leading:(0,v.jsx)(p.s,{type:n,semanticColor:"textSubdued",size:"small"}),media:(0,v.jsx)(h.b,{fadeIn:!0,images:S(y?.sources,48),shape:b(t),size:m.Qe.SIZE_48,iconSize:"medium",type:n??C(t),title:o??"",color:(0,x.m)(y?.extractedColors),loadingMode:"eager",className:f}),title:e?(0,v.jsx)(c.Y,{as:"div",variant:"bodyMediumBold",charCount:10,isLoading:!0}):(0,v.jsx)(a.d,{lineClamp:2,children:o??t}),subtitle:e&&N(t)?(0,v.jsx)(c.Y,{as:"div",variant:"bodySmall",charCount:15,isLoading:!0}):(0,v.jsx)(r.j,{hasTextSeparator:!0,lineClamp:2,children:g}),trailing:(0,v.jsx)(i.H,{iconOnly:l._,label:"Copy URI to clipboard",onClick:()=>{w(t),E("URI copied to clipboard")}})})};function b(e){return(0,o.ecE)(e)||(0,o.APS)(e)?h.u.CIRCLE:h.u.ROUNDED_CORNERS}function N(e){return!((0,o.ecE)(e)||(0,o.APS)(e)||(0,o.lyd)(e))}function C(e){const t=(0,o.o_h)(e)?.type;switch(t){case o.NQG.TRACK:return g.c.TRACK;case o.NQG.ALBUM:return g.c.ALBUM;case o.NQG.ARTIST:return g.c.ARTIST;case o.NQG.PLAYLIST:case o.NQG.PLAYLIST_V2:return g.c.PLAYLIST;case o.NQG.SHOW:return g.c.SHOW;case o.NQG.EPISODE:return g.c.EPISODE;case o.NQG.PROFILE:return g.c.USER;case o.NQG.CONCERT:return g.c.CONCERT;case o.NQG.AUTHOR:return g.c.AUTHOR;default:return g.c.UNKNOWN}}},29257:(e,t,n)=>{n.d(t,{u:()=>m});n(54615),n(32807);var s=n(30758),a=n(34314),r=n(29174),i=n(61179),l=n(12074);const o=Spicetify.GraphQL.Definitions["decorateDebugEntityListRowEntities"]=new i.l("decorateDebugEntityListRowEntities","query","cc18eda4c4a87e8428d47abac1930103ca6a10b92cbfcb56ed79c0071b6aa65c",null),c=(e,t)=>(0,l.I)(o,e,t);var d=n(19492),u=n(82412),h=n(26188);function m(e){const{data:t,loading:n}=c({uris:e},{gcTime:18e5,enabled:!!e.length,placeholderData:a.rX});return(0,s.useMemo)((()=>({entitiesByUri:Object.fromEntries(t?.lookup.map(p).filter(u.P).map((e=>[e.uri,e]))??[]),loading:n})),[t?.lookup,n])}function p(e){switch(e.__typename){case"AlbumResponseWrapper":return"Album"===e.data.__typename?{uri:e.data.uri,type:d.c.ALBUM,title:e.data.name,subtitle:e.data.artists.items.map((e=>e.profile.name)).join(r.Ru.getSeparator()),coverArt:e.data.coverArt}:null;case"ArtistResponseWrapper":return"Artist"===e.data.__typename?{uri:e.data.uri,type:d.c.ARTIST,title:e.data.profile.name,subtitle:null,coverArt:e.data.visuals.avatarImage}:null;case"ConcertResponseWrapper":return"Concert"===e.data.__typename?{uri:e.data.uri,type:d.c.CONCERT,title:e.data.title,subtitle:null,coverArt:e.data.image}:null;case"EpisodeOrChapterResponseWrapper":return"Chapter"===e.data.__typename?{uri:e.data.uri,type:d.c.CHAPTER,title:e.data.name,subtitle:"Audiobook"===e.data.audiobookV2.data.__typename?e.data.audiobookV2.data.authorsV2.map((e=>e.name)).join(r.Ru.getSeparator()):null,coverArt:e.data.coverArt}:"Episode"===e.data.__typename?{uri:e.data.uri,type:d.c.EPISODE,title:e.data.name,subtitle:"Podcast"===e.data.podcastV2.data.__typename?[e.data.podcastV2.data.name,e.data.podcastV2.data.publisher?.name??null].filter(u.P):[],coverArt:e.data.coverArt}:null;case"PlaylistResponseWrapper":return"Playlist"===e.data.__typename?{uri:e.data.uri,type:d.c.PLAYLIST,title:e.data.name,subtitle:e.data.followers?r.Ru.get("saves",e.data.followers):null,coverArt:e.data.images.items.at(0)??null}:null;case"PodcastOrAudiobookResponseWrapper":return"Audiobook"===e.data.__typename?{uri:e.data.uri,type:d.c.AUDIOBOOK,title:e.data.name,subtitle:e.data.authorsV2.map((e=>e.name)).join(r.Ru.getSeparator()),coverArt:e.data.coverArt}:"Podcast"===e.data.__typename?{uri:e.data.uri,type:d.c.SHOW,title:e.data.name,subtitle:e.data.publisher?.name??null,coverArt:e.data.coverArt}:null;case"TrackResponseWrapper":return"Track"===e.data.__typename?{uri:e.data.uri,type:d.c.TRACK,title:e.data.name,subtitle:[e.data.artists.items.at(0)?.profile.name??null,e.data.albumOfTrack?.name??null].filter(u.P),coverArt:e.data.albumOfTrack?.coverArt??null}:null;case"UserResponseWrapper":return"User"===e.data.__typename?{uri:e.data.uri,type:d.c.USER,title:e.data.name,subtitle:null,coverArt:e.data.avatar}:null;case"GenreResponseWrapper":case"MerchResponseWrapper":case"PreReleaseResponseWrapper":case"AuthorResponseWrapper":case"UnknownTypeWrapper":return null;default:(0,h.k)(e)}return null}},42023:(e,t,n)=>{n.d(t,{DebugWindowContents:()=>ha});n(54615),n(32807);var s=n(30758),a=n(97500),r=n.n(a),i=n(41638),l=n(83605),o=n(44050),c=n(90551),d=n(420),u=n(14298),h=n(48276),m=n(34852),p=n(43541),x=n(13003),j=n(10909),g=n(96118),f=n(58147);const v="TgLcw_ZdaHvESkPEgYLQ",y="zNGegc8KwsTw3SQKHf_u",b="qMSX_Pybr996fZcayagh",N="YS6d6BNlR28mEtkxH07w",C="vDxH9w6xk7bHMabZsuhj",S="sEU19oMM1YAICdZY23E5",w="Cw3H6ooohrEJbRFy9cdg",E="W0HCTspPvFScLWQ9QyJq",A="WM3ogL7MpxKR0Ym_n9qw",I="DQhZfpOIasfYMfhSltgB",k="iTrSMSnZF2Sr2pAGcj21",R="gQCLM4Et4LueQCIi2zW9",O="f9VIhAIG3YgquVQZqHZ5";var P=n(86070);const T=({title:e,titleExtra:t,rows:n,cols:a,canCollapse:i=!1,isCollapsedInitially:l=!1,renderHead:o=!1,renderRow:c})=>{const[d,u]=(0,s.useState)(!!i&&l);return(0,P.jsxs)(p.K,{className:r()(v,{[y]:d}),children:[e?(0,P.jsxs)("div",{className:b,onClick:()=>{i&&u(!d)},children:[i?(0,P.jsx)("button",{className:N,children:d?(0,P.jsx)(x.V,{size:"small"}):(0,P.jsx)(j.r,{size:"small"})}):null,(0,P.jsx)("h3",{children:e}),t]}):null,(0,P.jsxs)(g.X,{className:C,children:[(0,P.jsx)("colgroup",{children:a.map(((e,t)=>(0,P.jsx)("col",{width:e.width,className:e.className},t)))}),o?(0,P.jsx)("thead",{children:(0,P.jsx)("tr",{children:a.map(((e,t)=>(0,P.jsx)(f.M,{className:S,children:e.name},t)))})}):null,(0,P.jsx)("tbody",{children:Array.isArray(n)?n.map((e=>c?c(e,a):null)):n})]})]})};var _=n(81055),D=n(53129),U=n(19492);const L="YMcjds_NcAi4cEbmH8CQ",M="gh0JfRJ_O4dLCEdAjNVw",F="Txtj4xKE3LxMG2u23BIV",B="qJy0FbUBMTQ6CejUVLKy",H="C58BICAHtIsDaVKzFpyb",z="SdB9m1NLh7FZ1mMfQsAR",J="SxRUmP6Y0IRW1aJijfU5",W="BWvIH314t4_hcIDb2onA",V="ayzSMCWwex0kqdHjRr3Y",Y=[{language:"en",uri:"spotify:audio:50PZU7JmDySDzojKzTapDx"},{language:"fr-CA",uri:"spotify:audio:0j61Bw8ZF9wfyW65Cpugt9"}],Z=new Intl.DisplayNames(["en"],{type:"language"}),K=({language:e,uri:t})=>{const n=(0,D.z)(),s=(0,_.C)();return(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:e}),(0,P.jsx)(u.n,{className:E,highlight:!0,children:Z.of(e)}),(0,P.jsx)(u.n,{className:E,highlight:!0,children:t}),(0,P.jsxs)(u.n,{className:I,children:[(0,P.jsx)("button",{className:R,onClick:()=>{n.play({uri:"spotify:internal:fileplayback",pages:[{items:[{type:U.c.UNKNOWN,uri:t,uid:t,provider:"context",metadata:{title:"Spotify",image_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-300.jpg",image_small_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-64.jpg",image_large_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-640.jpg",image_xlarge_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-640.jpg","actions.advancing_past_track":"stop"}}]}],restrictions:{disallowPausingReasons:["narration"],disallowResumingReasons:["narration"],disallowSeekingReasons:["narration"],disallowSkippingPreviousReasons:["narration"],disallowSkippingNextReasons:["narration"],disallowTogglingRepeatContextReasons:["narration"],disallowTogglingRepeatTrackReasons:["narration"],disallowTogglingShuffleReasons:["narration"],disallowAddToQueueReasons:["narration"],disallowSetQueueReasons:["narration"],disallowSettingPlaybackSpeedReasons:["narration"]}},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"},{skipTo:{index:0}})},children:(0,P.jsx)(h.A,{size:"small"})}),(0,P.jsx)("button",{className:R,onClick:()=>{s(t)},children:(0,P.jsx)(m._,{size:"small"})})]})]})},q=()=>(0,P.jsx)(T,{title:"Consumption Cap Audio Disclaimer",rows:Y,cols:[],renderRow:e=>(0,P.jsx)(K,{...e},e.uri),canCollapse:!0}),G=()=>(0,P.jsx)("div",{className:L,children:(0,P.jsx)(q,{})});var $=n(56695);const Q="UX08Irxg3ssZhLQNj40b",X=()=>{const e=(0,_.C)(),t=(0,$.Y)(),n=t.token?.accessToken??"Not authorized",s=new Date(t.token?.accessTokenExpirationTimestampMs??0);return(0,P.jsx)("div",{className:Q,children:(0,P.jsx)(T,{title:"Authorization",rows:[{name:"Token",value:n},{name:"Expires At",value:s.toLocaleString()},{name:"Retry Attempt",value:t.retryAttempt?.toString()??"N/A"},{name:"Retry At",value:t.retryAt?.toLocaleString()??"N/A"}],cols:[{width:"30%"},{},{width:"16px"}],renderRow:({name:t,value:n})=>(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:t}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:n}),(0,P.jsx)(u.n,{className:I,children:(0,P.jsx)("button",{className:R,onClick:()=>e(n),children:(0,P.jsx)(m._,{size:"small"})})})]})})})};var ee=n(82836);const te="A83S2dzV013Y19VLxbRT",ne=({name:e,value:t})=>{const n=(0,_.C)();return(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:e}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:t}),(0,P.jsx)(u.n,{className:I,children:(0,P.jsx)("button",{className:R,onClick:()=>n(t),children:(0,P.jsx)(m._,{size:"small"})})})]})},se=({device:e})=>(0,P.jsx)(T,{title:e.name,rows:[{name:"Device",value:e?.name},{name:"Identifier",value:e.id},{name:"Type",value:e.type},{name:"Group",value:e.isGroup.toString()},{name:"Local",value:e.isLocal.toString()},{name:"Active",value:e.isActive.toString()},{name:"Connecting",value:e.isConnecting.toString()},{name:"Disabled",value:e.isDisabled.toString()},{name:"Volume",value:e.volume.toString()},{name:"HiFi",value:e.losslessSupport.deviceSupported.toString()}],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:e=>(0,P.jsx)(ne,{...e}),canCollapse:!0,isCollapsedInitially:!0}),ae=()=>{const{connectionStatus:e,devices:t}=(0,ee.v)((e=>({connectionStatus:e.connectionStatus,devices:e.devices})));return(0,P.jsxs)("div",{className:te,children:[(0,P.jsx)(T,{title:"Connect",rows:(0,P.jsx)(ne,{name:"Status",value:e}),cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}]}),t.map((e=>(0,P.jsx)(se,{device:e},e.id)))]})};n(89370);var re=n(69959);const ie={ranges:[{name:"Basic Latin (ASCII)",start:"U+0000",end:"U+007F"},{name:"Latin-1 Supplement",start:"U+0080",end:"U+00FF"},{name:"Latin Extended-A",start:"U+0100",end:"U+017F"},{name:"Latin Extended-B",start:"U+0180",end:"U+024F"},{name:"Greek and Coptic",start:"U+0370",end:"U+03FF"},{name:"Cyrillic",start:"U+0400",end:"U+04FF"},{name:"Armenian",start:"U+0530",end:"U+058F"},{name:"Hebrew",start:"U+0590",end:"U+05FF"},{name:"Arabic",start:"U+0600",end:"U+06FF"},{name:"Devanagari",start:"U+0900",end:"U+097F"},{name:"General Punctuation",start:"U+2000",end:"U+206F"}]},le={},oe=()=>{const e=(0,s.useRef)(null),t=(0,s.useRef)(null),n=(0,s.useRef)(null),a=(0,s.useRef)(null),r=(0,s.useCallback)((()=>{const e=n.current?.getBoundingClientRect().width,t=(0,re.L)(n.current.textContent,20,400);a.current.textContent=`Real width: ${e}px, Estimated width: ${t}px`}),[]),i=(0,s.useCallback)((()=>{ie.ranges.forEach((t=>{const n=parseInt(t.start.slice(2),16),s=parseInt(t.end.slice(2),16);for(let t=n;t<=s;t++){const n=String.fromCharCode(t),s=document.createElement("span");s.style.display="inline",s.style.fontSize="20px",s.style.fontWeight="400",s.textContent=n,e.current?.appendChild(s);const a=s.getBoundingClientRect().width,r=Math.floor(a/20*100);le[t]=r}})),t.current.textContent=JSON.stringify(le)}),[]);return(0,s.useEffect)((()=>{r()}),[r]),(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h2",{children:"Change the text below if the map is working correctly"}),(0,P.jsx)("div",{children:(0,P.jsx)("span",{contentEditable:!0,style:{fontSize:"20px",fontWeight:400,background:"#fff",border:"1px solid blue",margin:"16px 0",padding:"0px"},ref:n,onInput:r,children:"Lorem ipsum dolor sit amet."})}),(0,P.jsx)("pre",{ref:a})]}),(0,P.jsx)("hr",{}),(0,P.jsx)("h2",{children:"JSON font map output"}),(0,P.jsx)("div",{children:(0,P.jsx)("textarea",{style:{width:"100%",height:"200px"},ref:t})}),(0,P.jsx)("hr",{}),(0,P.jsx)("h2",{children:"Rendering Area"}),(0,P.jsx)("div",{children:(0,P.jsx)("button",{onClick:i,children:"Render chars"})}),(0,P.jsx)("div",{style:{width:"100%",maxWidth:"100%",border:"1px solid red"},ref:e})]})};n(14126);var ce=n(17369),de=n(69229),ue=n(8937),he=n(4308),me=n(20473),pe=n(36948),xe=n(37975),je=n(62895),ge=n(35638),fe=n(74396),ve=n(67042),ye=n(92457),be=n(40794),Ne=n(4927),Ce=n(77676),Se=n(96150),we=n(67366),Ee=n(51345),Ae=n(23736),Ie=n(68443),ke=n(25407),Re=n(29257),Oe=(n(27088),n(50563),n(25097),n(96185),n(78312));function Pe(e){return e instanceof Uint8Array?(0,Oe.U5)(e):Array.isArray(e)?e.map(Pe):"object"!=typeof e||null===e||e instanceof Date?e:Object.fromEntries(Object.entries(e).map((([e,t])=>[e,Pe(t)])))}var Te=n(94976),_e=n(96283);var De=n(26930),Ue=n(57775),Le=n(84040),Me=n(5911),Fe=n(58542),Be=n(70491),He=n(12526);const ze="bJCivn96KnicF9OorMtA",Je="dYwRqJuHwq70xUmQIvWg",We="J4_D9yyu_KzwPD8HrEP8",Ve="zSOvuirnU0EE_dZISOQG",Ye="SQ59ocfu1aRXjYTP_E7I",Ze="YlTDiTj7_ooJnrkjWaGI",Ke="v1ZF45YEwslZyIViHQr_",qe="PgqFMbfDZ0HaAaMKz2hg",Ge="LzF5Qzz4X6invHGmooXD",$e="APJUu59mvWfVPwPVaZ78",Qe="L9rS2WwxiEjv6HLfbx0B",Xe="f4sDBZZ5uI0KiTmmnuGL",et=(0,Be.g)(Me.UH);const tt=()=>{const e=(0,Fe.t)(),{enqueueSnackbar:t}=(0,De.d)(),n=(0,_.C)(),a=function(){const e=(0,_e.ox)();return(0,s.useMemo)((()=>e?new e.Function("","return navigator.clipboard.readText()"):()=>{}),[e])}(),{Editor:r,setContent:i,getContent:l}=(0,Te.h)({readOnly:!0}),o=Object.values(Me.UH).filter((e=>"number"==typeof e)).map((e=>({value:e,label:Me.UH[e]}))),c=(0,s.useMemo)((()=>Object.fromEntries(o.map((e=>[e.value,e])))),[o]),[h,p]=(0,s.useState)(""),[x,j]=(0,Le.x)("mex-debug-extensions",[]),[v,y]=(0,Le.x)("mex-debug-extension-kinds-by-entity-uri-to-request",{}),[b,N]=(0,Le.x)("mex-debug-show-decorated-entities",!0),[C,S]=(0,Le.x)("mex-debug-should-hex-encode-bytes",!0),[w,E]=(0,s.useState)(null),A=(0,Re.u)(b?Object.keys(v):[]);(0,s.useEffect)((()=>{if(!w)return void i("");const{requestedExtensionKindsByEntityUri:e,extensionsByEntityUri:t}=w,n=Object.entries(e).map((([e,n])=>({entityUri:e,...Object.fromEntries(n.map((n=>[Me.UH[n],t[e]?.[n]??null])))})));i(JSON.stringify(C?Pe(n):n,null,2))}),[w,i,C]);const I=(0,s.useMemo)((()=>Array.from(new Set(Object.values(v).flat().filter((e=>!(0,Me.V$)(e)))))),[v]);return(0,P.jsxs)("div",{className:ze,children:[(0,P.jsx)(ce.E,{as:"h2",variant:"titleMedium",semanticColor:"textBase",children:"Metadata extensions"}),(0,P.jsxs)("div",{className:We,children:[(0,P.jsx)("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation();const n=nt(h).split(/\n/).filter((e=>null!==(0,Ae.o_h)(e,{parseUnknown:!0})));if(!n.length)return void t(`Invalid entity URIs: "${h}"`);if(!x.length)return void t("Please select some metadata extensions before adding");const s=x.map((e=>e.value)),a=(0,He.h)(v);for(const e of n)a[e]??=[],a[e]=Array.from(new Set([...a[e],...s]));y(a)},children:(0,P.jsxs)(de.a,{className:Ve,variant:"tinted",tabIndex:-1,children:[(0,P.jsx)(ce.E,{variant:"titleSmall",paddingBottom:"tighter-2",as:"h3",children:"Add entities"}),(0,P.jsxs)(ue.g,{label:"Entity URI(s)",labelFor:"entity-uri",children:[(0,P.jsx)(he.h,{id:"entity-uri",type:"text",placeholder:"Entity URI(s) to fetch extensions for",value:h,className:Ye,autoFocus:!0,onChange:e=>{const t=e.currentTarget.value;p(e.nativeEvent instanceof InputEvent&&"insertFromPaste"===e.nativeEvent.inputType?nt(t):t)},required:!0}),(0,P.jsx)(me.N,{children:"Entity URI(s) to request metadata extensions for."})]}),(0,P.jsxs)(ue.g,{label:"Metadata extension(s)",labelFor:"metadata-extensions",children:[(0,P.jsx)(Ee.Ay,{value:x,id:"metadata-extensions",placeholder:"Metadata extension(s) to fetch",isMulti:!0,name:"Metadata extensions",options:o,onChange:e=>{j([...e])}}),(0,P.jsx)(me.N,{children:"Metadata extension(s) to request for the specified entity uri(s)."})]}),(0,P.jsx)(pe.n,{className:Ke,type:"submit",disabled:!h||!x.length,children:"Add"})]})}),(0,P.jsxs)(de.a,{className:Ze,variant:"tinted",tabIndex:-1,children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(ce.E,{variant:"titleSmall",paddingBottom:"tighter-2",as:"h3",children:"Added entities"}),(0,P.jsx)(xe.X,{checked:b,onChange:e=>{N(e.target.checked)},children:"Show decorated entities"})]}),Object.keys(v).length?(0,P.jsxs)(g.X,{children:[(0,P.jsxs)("colgroup",{children:[(0,P.jsx)("col",{width:"375px"}),(0,P.jsx)("col",{}),(0,P.jsx)("col",{width:"48px"})]}),(0,P.jsx)("thead",{children:(0,P.jsxs)(d.H,{children:[(0,P.jsx)(f.M,{children:"Entity"}),(0,P.jsx)(f.M,{children:"Extensions to request"}),(0,P.jsx)(f.M,{})]})}),(0,P.jsx)("tbody",{children:Object.entries(v).map((([e,s])=>(0,P.jsxs)(d.H,{children:[(0,P.jsx)(u.n,{condensed:!0,children:b?(0,P.jsx)(ke.Z,{loading:A.loading&&!(e in A.entitiesByUri),...A.entitiesByUri[e],uri:e}):(0,P.jsx)(je.v,{iconLeading:()=>(0,P.jsx)(Ue.s,{size:"small",type:A.entitiesByUri[e]?.type??(0,Ae.o_h)(e)?.type}),onClick:()=>{n(e),t("URI copied to clipboard")},style:{marginBlockEnd:0},children:e})}),(0,P.jsx)(u.n,{condensed:!0,children:(0,P.jsx)(Ee.Ay,{value:s.map((e=>c[e])),placeholder:"Metadata extension(s) to fetch",isMulti:!0,isClearable:!1,name:"Metadata extensions",options:o,onChange:t=>{const n=(0,He.h)(v);n[e]=t.map((e=>e.value)),y(n)}})}),(0,P.jsx)(u.n,{condensed:!0,children:(0,P.jsx)(Ie.Zp,{label:"Remove entity",children:(0,P.jsx)(ge.H,{className:Ke,iconOnly:fe.M,label:"Remove",onClick:()=>{const{[e]:t,...n}=v;y(n)}})})})]},e)))})]}):(0,P.jsxs)(ve.p,{icon:ye.Z,variant:"contextual",children:[(0,P.jsx)(be.R,{children:"No entities added"}),(0,P.jsx)(Ne.S,{children:"Add entities to request metadata extensions for and they'll be listed here."})]})]})]}),(0,P.jsxs)("div",{className:qe,tabIndex:-1,children:[(0,P.jsx)(Ce.$,{className:Ke,onClick:async()=>{const t=v,n=new Map,s=new Map;for(const[e,t]of Object.entries(v)){const a=t.slice().sort().toString();n.has(a)||n.set(a,t);const r=n.get(a);s.set(r,(s.get(r)??[]).concat(e))}const a=await Promise.all(Array.from(s.entries()).map((([t,n])=>e.fetch(n,t)))).then((e=>Object.fromEntries(e.flat().map((({uri:e,extensions:t})=>[e,t])))));E({requestedExtensionKindsByEntityUri:t,extensionsByEntityUri:a})},children:"Fetch extensions"}),(0,P.jsx)(pe.n,{className:Ke,onClick:async()=>{const n=new Map;for(const[e,t]of Object.entries(v))for(const s of t)n.has(s)||n.set(s,[]),n.get(s)?.push(e);await Promise.all(Array.from(n.entries()).map((([t,n])=>e.expire(n,t)))),t("Extensions expired!")},children:"Expire extensions"}),(0,P.jsx)(Ie.Zp,{label:"Copy request parameters",children:(0,P.jsx)(ge.H,{className:Ke,iconOnly:Se.C,condensed:!0,onClick:()=>{t("Request parameters copied to clipboard"),n(JSON.stringify(v,null,2))}})}),(0,P.jsx)(Ie.Zp,{label:"Import request parameters from clipboard",children:(0,P.jsx)(ge.H,{className:Ke,iconOnly:e=>(0,P.jsx)(Se.C,{...e,className:Je}),condensed:!0,onClick:async()=>{try{const n=JSON.parse(await a());"object"==typeof(e=n)&&null!==e&&Object.entries(e).every((([e,t])=>"string"==typeof e&&Array.isArray(t)&&t.every(et)))?(y(n),t("Request parameters imported from clipboard")):t("Invalid request parameters in clipboard")}catch(e){t(`Failed to import request parameters from clipboard due to the error: ${e instanceof Error?e.message:e}`)}var e}})})]}),w&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(we.d,{className:Ge}),(0,P.jsxs)("div",{className:Xe,tabIndex:-1,children:[(0,P.jsxs)("div",{className:$e,children:[(0,P.jsx)(ce.E,{variant:"titleMedium",as:"h2",semanticColor:"textBase",children:"Response"}),(0,P.jsxs)("div",{className:Qe,children:[(0,P.jsx)(Ie.Zp,{label:"Hex encode all byte fields",children:(0,P.jsx)("div",{children:(0,P.jsx)(xe.X,{checked:C,onChange:e=>{S(e.target.checked)},children:"Hexify bytes"})})}),(0,P.jsx)(Ie.Zp,{label:"Copy response to clipboard",children:(0,P.jsx)(ge.H,{className:Ke,iconOnly:m._,onClick:()=>{n(l()??void 0),t("Response copied to clipboard")}})}),(0,P.jsx)(Ie.Zp,{label:"Clear response",children:(0,P.jsx)(ge.H,{className:Ke,iconOnly:fe.M,onClick:()=>{E(null)}})})]})]}),I.length?(0,P.jsxs)(de.a,{variant:"contrasting",colorSet:"warning",children:[(0,P.jsx)(ce.E,{variant:"titleSmall",paddingBottom:"tighter-2",as:"h3",children:"Warning: requested extensions lacking decoders:"}),(0,P.jsx)("div",{children:I.map((e=>(0,P.jsx)(je.v,{children:Me.UH[e]},e)))}),(0,P.jsx)(ce.E,{variant:"bodyMedium",paddingBottom:"tighter-2",children:"You might want to add proto files and generate a decoders for these in the MetadataExtensionsAPI."})]}):null,r]})]})]})};function nt(e){return e.trimStart().split(/([\s,]+)/).map(((e,t)=>t%2?"\n":(0,Ae.o_h)(e,{parseUnknown:!0})?.toURI()??e)).join("")}var st=n(46141),at=n(5968),rt=n(36661),it=n(25039),lt=n(19270),ot=n(46737),ct=n(97382),dt=n(66699),ut=n(66610),ht=n(68550),mt=n(41593);var pt=n(93331),xt=n(43809);var jt=n(5956),gt=n(59328);const ft=({size:e,ranges:t})=>{if(0===t.length)return(0,P.jsx)("div",{className:F,children:(0,P.jsx)("div",{className:B})});const n=`linear-gradient(90deg, ${t.map((t=>{const n=100*t.fromByte/e,s=100*t.toByte/e;return`transparent ${n}%, ${at.pfM} ${n}%, ${at.pfM} ${s}%, transparent ${s}%`})).join(", ")})`;return(0,P.jsx)("div",{className:F,children:(0,P.jsx)("div",{className:B,style:{background:n}})})},vt=({item:e,file:t})=>{const n=(0,D.z)(),s=(0,_.C)(),a=(function(e){let t,n,s=0;if(0===e.length)return s;for(t=0;t<e.length;t++)n=e.charCodeAt(t),s=(s<<5)-s+n,s|=0;return s}(`${t.format}${t.bitrate}${t.formatEnum}`)+180)%360;return(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:(0,P.jsxs)("div",{className:H,style:{background:`linear-gradient(180deg, hsl(${a}, 60%, 30%), hsl(${a}, 40%, 70%))`},children:[(0,P.jsx)("span",{className:z,children:t.format}),(0,P.jsx)("span",{className:J,children:yt(t)})]})}),(0,P.jsx)(u.n,{className:A,truncate:!0,children:(0,P.jsxs)("div",{className:M,children:[t.fileId,(0,P.jsx)(ft,{size:t.byteSize,ranges:t.byteRanges})]})}),(0,P.jsxs)(u.n,{className:I,children:[(0,P.jsx)("button",{className:R,onClick:()=>{n.play({uri:"spotify:internal:fileplayback",pages:[{items:[{...e,provider:"context",metadata:{"media.manifest":JSON.stringify({id:t.fileId,bitrate:t.bitrate,format:t.formatEnum,encryption:"aes"})}}]}]},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"})},children:(0,P.jsx)(h.A,{size:"small"})}),(0,P.jsx)("button",{className:R,onClick:()=>{s(t.fileId)},children:(0,P.jsx)(m._,{size:"small"})})]})]})};function yt(e){switch(e.formatEnum){case 16:return"16-bit";case 22:return"24-bit";default:return bt(e.bitrate,1e3,"k")}}function bt(e=void 0,t=1,n=""){if(void 0!==e&&-1!==e)return"string"==typeof e&&(e=Number.parseInt(e,10)),`${(Number(e)/t).toLocaleString("en",{maximumFractionDigits:10})}${n}`}function Nt(e=void 0){return!0===e?"Yes":"No"}function Ct(e=void 0){if(void 0!==e)return(0,gt.f)(Number(e))}const St=({name:e,value:t})=>{const n=(0,_.C)();return(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:e}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:t}),(0,P.jsx)(u.n,{className:I,children:(0,P.jsx)("button",{className:R,onClick:()=>n(t),children:(0,P.jsx)(m._,{size:"small"})})})]})},wt=({terminalType:e,transportType:t,isDefaultDevice:n})=>{const s=n?"essentialPositive":"essentialBase",a=[];switch(e){case st.FI.TERMINAL_TYPE_SPEAKERS:a.push((0,P.jsx)(rt.r,{semanticColor:s,size:"small"}));break;case st.FI.TERMINAL_TYPE_HEADPHONES:a.push((0,P.jsx)(it.r,{semanticColor:s,size:"small"}));break;case st.FI.TERMINAL_TYPE_DISPLAY_DEVICE:a.push((0,P.jsx)(lt.I,{semanticColor:s,size:"small"}))}switch(t){case st.Yg.TRANSPORT_TYPE_BUILT_IN:case st.Yg.TRANSPORT_TYPE_VIRTUAL:break;case st.Yg.TRANSPORT_TYPE_USB:a.push((0,P.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",style:{position:"relative",top:"3px",width:16,height:16,fill:(0,ot.oj)(s)},children:(0,P.jsx)("path",{d:"m7.792.312-1.533 2.3A.25.25 0 0 0 6.467 3H7.5v7.319a2.5 2.5 0 0 0-.515-.298L5.909 9.56A1.5 1.5 0 0 1 5 8.18v-.266a1.5 1.5 0 1 0-1 0v.266a2.5 2.5 0 0 0 1.515 2.298l1.076.461a1.5 1.5 0 0 1 .888 1.129 2.001 2.001 0 1 0 1.021-.006v-.902a1.5 1.5 0 0 1 .756-1.303l1.484-.848A2.5 2.5 0 0 0 11.995 7h.755a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h.741a1.5 1.5 0 0 1-.747 1.142L8.76 8.99a2.584 2.584 0 0 0-.26.17V3h1.033a.25.25 0 0 0 .208-.389L8.208.312a.25.25 0 0 0-.416 0Z"})}));break;case st.Yg.TRANSPORT_TYPE_BLUETOOTH:a.push((0,P.jsx)(ct.C,{semanticColor:s,size:"small"}));break;case st.Yg.TRANSPORT_TYPE_DISPLAY_DEVICE:a.push((0,P.jsx)(lt.I,{semanticColor:s,size:"small"}))}return 0===a.length&&a.push((0,P.jsx)(dt.N,{semanticColor:s,size:"small"})),(0,P.jsx)(P.Fragment,{children:a})},Et=({name:e,id:t,isDefaultDevice:n,terminalType:s,terminalTypeRaw:a,transportType:r,transportTypeRaw:i})=>{const l=(0,_.C)();return(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsxs)(u.n,{className:E,highlight:!0,children:[(0,P.jsx)(wt,{terminalType:s,transportType:r,isDefaultDevice:n})," ",e]}),(0,P.jsx)(u.n,{className:A,truncate:!0,children:t}),(0,P.jsx)(u.n,{className:A,children:a}),(0,P.jsx)(u.n,{className:A,children:i}),(0,P.jsx)(u.n,{className:I,children:(0,P.jsx)("button",{className:R,onClick:()=>l(t),children:(0,P.jsx)(m._,{size:"small"})})})]})},At=()=>{const e=(0,jt.o)((e=>e?.item??null)),t=function(){const[e,t]=(0,s.useState)(null),n=(0,mt.p)();return(0,s.useEffect)((()=>{let e=!0;return n.getPlaybackInfo().then((n=>{e&&t(n)})),()=>{e=!1}}),[n]),(0,xt.F)(pt._.INFO,(({data:e})=>{t(e)})),e}(),n=function(e=null,t=null){const[n,a]=(0,s.useState)(null),r=(0,mt.p)();return(0,s.useEffect)((()=>{let n=!0,s=null;if(null===e)a(null);else{const i=async()=>{const t=await r.getFiles(e);n&&a(t)};i(),null!==t&&(s=window.setInterval(i,t))}return()=>{n=!1,null!==s&&window.clearInterval(s)}}),[r,e,t]),n}(e?.uri,500),a=(0,D.z)(),[r,i]=(0,s.useState)([]);return(0,s.useEffect)((()=>{const e=(0,ht.X)(),t=new st.Ag(e).getAudioOutputDevices({},(e=>{i(e.devices.sort(((e,t)=>e.isDefaultDevice?-1:t.isDefaultDevice?1:e.name.localeCompare(t.name))))}));return()=>{t.cancel()}}),[]),null===e?(0,P.jsx)("div",{className:L,children:"Nothing is currently playing."}):(0,P.jsxs)("div",{className:L,children:[(0,P.jsxs)("div",{className:W,children:[(0,P.jsx)(ce.E,{variant:"bodySmallBold",children:"Forced shuffle"}),(0,P.jsx)(ut.l,{id:"forced-shuffe",value:a.getForcedShuffle(),onSelected:e=>{a.setForcedShuffle(e)}})]}),(0,P.jsx)("div",{children:(0,P.jsx)("button",{className:V,onClick:()=>{a.play({uri:"invalid_context_uri"},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"})},children:(0,P.jsx)("span",{children:"Clear context"})})}),(0,P.jsx)(T,{title:"Devices",rows:r,cols:[{name:"Name",width:"30%"},{name:"ID"},{name:"Terminal"},{name:"Transport"},{name:"Actions",width:"16px"}],renderRow:e=>(0,P.jsx)(Et,{...e}),canCollapse:!0}),(0,P.jsx)(T,{title:"Details",rows:[{name:"url"===t?.fileType?"URL":"File ID",value:t?.fileId},{name:"Type",value:t?.fileType},{name:"Codec",value:t?.codecName},{name:"Bitrate",value:bt(t?.fileBitrate,1e3,"k")},{name:"Strategy",value:t?.strategy},{name:"Target Bitrate",value:bt(t?.targetBitrate,1e3,"k")},{name:"Advisted Bitrate",value:bt(t?.advisedBitrate,1e3,"k")},{name:"Target File Available",value:Nt(t?.targetFileAvailable)},{name:"Duration (hh:mm)",value:Ct(t?.lengthMs)},{name:"Duration (ms)",value:bt(t?.lengthMs,1," ms")},{name:"Speed",value:bt(t?.playbackSpeed)},{name:"Gain Adjustment",value:bt(t?.gainAdjustment)},{name:"Loudness",value:t?.hasLoudness?bt(t?.loudness):void 0}],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:e=>(0,P.jsx)(St,{...e}),canCollapse:!0}),(0,P.jsx)(T,{title:"Files",rows:n??[],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:t=>(0,P.jsx)(vt,{item:e,file:t},t.fileId),canCollapse:!0,isCollapsedInitially:!0})]})},It="wNixUJkDt8ib6LarXls_",kt=()=>{const e=(0,jt.o)((e=>e)),t=(0,s.useMemo)((()=>JSON.stringify(e,((e,t)=>"metadata"===e&&t?.constructor===Object?Object.fromEntries(Object.entries(t).sort()):t),2)),[e]),{Editor:n,setContent:a}=(0,Te.h)({readOnly:!0});return(0,s.useEffect)((()=>{a(t)}),[t,a]),(0,P.jsx)("div",{className:It,children:n})};var Rt=n(85387),Ot=n(62824);const Pt="cD9jN2lI075m3UkqXSlQ",Tt=({playlistUri:e})=>{const t=(0,Ot.J)(e,{decorateFormatListData:!0}),{Editor:n,setContent:a}=(0,Te.h)({readOnly:!0});return(0,s.useEffect)((()=>{const e=JSON.stringify(t,null,2);a(e)}),[t,a]),n},_t=()=>{const e=(0,Rt.zy)(),t=(0,Ae.o_h)(e.pathname),n=(0,Ae.nuB)(t);return(0,P.jsx)("div",{className:Pt,children:n?(0,P.jsx)(Tt,{playlistUri:t.toURI()}):(0,P.jsx)(ce.E,{variant:"bodyMedium",children:"Navigate to a playlist to see metadata here."})})};n(88747);var Dt=n(47626);const Ut=()=>{const{data:e}=(0,Dt.k)(),t=Object.keys(e).sort().reduce(((t,n)=>(t[n]=e[n],t)),{}),n=JSON.stringify(t,null,2),{Editor:a,setContent:r}=(0,Te.h)({readOnly:!0});return(0,s.useEffect)((()=>{r(n)}),[n,r]),(0,P.jsx)("div",{className:Pt,children:a})};var Lt=n(74856),Mt=n(52914),Ft=n(48235),Bt=n(96123),Ht=n(47957);function zt(e,t){const n=(0,Ht.x)();(0,s.useEffect)((()=>n.getEvents().addListener(e,t)),[e,t,n])}const Jt="Gc_xi0GmVaC4DyViocdz",Wt="uliJIthMaP5kUx2IpElY",Vt="h0NXdJlkjupX8nTYlhhc",Yt=({name:e,value:t})=>{const n=(0,_.C)();return(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:e}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:t}),(0,P.jsx)(u.n,{className:I,children:(0,P.jsx)("button",{className:R,onClick:()=>n(t),children:(0,P.jsx)(m._,{size:"small"})})})]})},Zt=()=>{const e=(()=>{const e=(0,Ht.x)(),[t,n]=(0,s.useState)(e.getSubscriptions()),a=(0,s.useCallback)((()=>{n(e.getSubscriptions())}),[e,n]);return zt(Bt.K.SUBSCRIBE,a),zt(Bt.K.CANCEL,a),zt(Bt.K.REFRESH,a),t})(),t=(0,_.C)(),n=Object.entries((a=e=>`${e.ident}${e.isPrefix?"*":""}`,e.reduce(((e,t)=>{const n=a(t);return(e[n]=e[n]||[]).push(t),e}),{})));var a;return(0,P.jsx)(T,{title:"Subscriptions",rows:n,cols:[{name:"Ident"},{name:"Actions",width:"16px"}],renderRow:([e,n])=>(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsxs)(u.n,{className:A,truncate:!0,children:[e," (",n.length,")"]}),(0,P.jsx)(u.n,{className:I,children:(0,P.jsx)("button",{className:R,onClick:()=>t(e),children:(0,P.jsx)(m._,{size:"small"})})})]},e),canCollapse:!0})};function Kt(e){if(e.ident.endsWith("/json"))return!0;if(0===e.payloads.length)return!1;const t=(0,Oe.dI)(e.payloads[0]);return t.length>0&&"{"===t[0]}const qt=({message:e})=>{const[t,n]=(0,s.useState)(!1),{Editor:a,setContent:r}=(0,Te.h)({readOnly:!0});return(0,s.useEffect)((()=>{if(0!==e.payloads.length)if(Kt(e)){const t=JSON.parse((0,Oe.dI)(e.payloads[0]));r(JSON.stringify(t,void 0,2))}else{const t=(0,Oe.U5)(e.payloads[0]);r(JSON.stringify(t,void 0,2))}}),[e,r]),(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,children:new Date(e.timestamp).toLocaleString()}),(0,P.jsx)(u.n,{className:E,children:e.ident}),(0,P.jsxs)(u.n,{className:E,children:[(0,P.jsx)("button",{className:R,onClick:()=>n(!t),children:(0,P.jsx)(Lt.W,{size:"small"})}),(0,P.jsx)(Ft.M,{isOpen:t,className:Vt,onClose:()=>n(!1),shouldCloseOnEsc:!0,shouldCloseOnBackdropClick:!0,animated:!0,children:a})]})]})},Gt=()=>{const e=(0,Ht.x)(),[t,n]=(0,s.useState)(0),[a,r]=(0,s.useState)(!0);zt(Bt.K.MESSAGE,(()=>{n(t+1)}));const i=a?e.getMessages().filter(Kt):e.getMessages();return(0,P.jsx)(T,{title:"Messages",titleExtra:(0,P.jsxs)("div",{className:Wt,children:[(0,P.jsx)(Mt.c,{id:"json-only",size:"small",checked:a,onChange:()=>r(!a)}),(0,P.jsx)(ce.E,{as:"label",htmlFor:"json-only",variant:"marginal",children:"JSON only"})]}),rows:i,cols:[{name:"Time",width:"200px"},{name:"Ident"},{name:"Payload",width:"16px"}],renderRow:(e,t)=>(0,P.jsx)(qt,{message:e},`${t}-${e.ident}-${e.timestamp}`),canCollapse:!0})},$t=()=>{const e=(()=>{const e=(0,Ht.x)(),[t,n]=(0,s.useState)(null);(0,s.useEffect)((()=>{e.getConnectionId().then((e=>n(e)))}),[e,n]);const a=(0,s.useCallback)((e=>n(e.data.connectionId)),[n]);return zt(Bt.K.CONNECTION,a),t})();return(0,P.jsxs)("div",{className:Jt,children:[(0,P.jsx)(T,{title:"PubSub",rows:(0,P.jsx)(Yt,{name:"Connection ID",value:e??"-"}),cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}]}),(0,P.jsx)(Zt,{}),(0,P.jsx)(Gt,{})]})};var Qt=n(73075),Xt=n.n(Qt),en=n(40638),tn=n(21384),nn=n(63420),sn=n(41891),an=n(98351),rn=n(11907),ln=n(38526),on=n(32318),cn=n(15581),dn=n(71274),un=n(17512),hn=n(30675),mn=n(3206),pn=n(89587),xn=n(1233),jn=n(96457);const gn=36e5;var fn=n(84881),vn=n(5875),yn=n(55619),bn=n(38021),Nn=n(67190),Cn=n(11919),Sn=n(89343),wn=n(31819),En=n(6999);const An="CPh1NBIPIZdD7S5EeAJw",In="ImIlB71ObQKbFW5YUTmT",kn="TzXFebu8XWPbINPiP4rs",Rn="OBmOFDe_ATF82wNN3ifv",On="MigGXxVYX9Yi6_lGrDwe",Pn="oyMDrjEp_otdJzIKn5YC",Tn=({property:e,onOverride:t})=>{if(!(0,Nn.OJ)(e)&&!(0,Nn.bF)(e))throw Error("Invalid property type for dropdown!");const n=(0,Nn.OJ)(e)?["true","false"]:e.spec.values,s=e.localValue!==e.remoteValue;return(0,P.jsx)(tn.F,{id:`${e.name}-dropdown`,value:(e.localValue??e.spec.defaultValue).toString(),onChange:n=>{var s;t(e,(s=n.currentTarget.value,(0,Nn.OJ)(e)?"true"===s:s))},className:r()({[On]:s}),children:n.map((e=>(0,P.jsx)("option",{value:e,children:e},e)))})},_n=({property:e,onOverride:t})=>{if(!(0,Nn.ZK)(e))throw Error("Invalid property type for dropdown!");const n=e.localValue!==e.remoteValue,[a,i]=(0,s.useState)(e.localValue??e.spec.defaultValue),l=(0,en.YQ)((n=>{t(e,n)}),500);return(0,P.jsx)(nn.Z,{type:"number",min:e.spec.lower,max:e.spec.upper,value:a,onChange:e=>{i(e.currentTarget.value),l(Number.parseInt(e.currentTarget.value,10))},className:r()({[On]:n})})},Dn=({property:e,experimentUrl:t,isRemoteUserSpecificOverride:n,onOverride:a,filter:r})=>{const{setFilter:i}=(0,s.useContext)(un.g),l=e.spec.defaultValue?.toString()??"",o=e.remoteValue?.toString()??"";let c=(t||l!==o?o:null)??null;return c&&t&&(c=(0,P.jsxs)("a",{href:t,target:"_blank",className:Pn,children:[o,n&&(0,P.jsx)(sn.o,{size:"small"})]}),n&&(c=(0,P.jsx)(Ie.Zp,{label:"This value comes from a user-specific override in the linked experiment.",children:c}))),(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsxs)(u.n,{className:E,title:e.name,highlight:!0,children:[(0,P.jsx)("a",{href:`https://backstage.spotify.net/experimentation/propertiesList?propertyName=${e.name}&scope=desktop-ui`,rel:"noopener noreferrer",target:"_blank",children:r.length>0?(0,P.jsx)(dn.M,{searchWords:[r,...r.split(".")],textToHighlight:e.name}):e.name}),e.source===Nn.pS.NATIVE?(0,P.jsx)("div",{className:k,children:(0,P.jsx)("a",{onClick:()=>i(e.component),children:r.length>0?(0,P.jsx)(dn.M,{searchWords:[r,...r.split(".")],textToHighlight:e.component}):e.component})}):null,(0,P.jsx)("div",{className:k,children:e.description})]}),(0,P.jsx)(u.n,{className:A,children:l}),(0,P.jsx)(u.n,{className:A,children:c}),(0,P.jsx)(u.n,{className:A,children:(0,Nn.OJ)(e)||(0,Nn.bF)(e)?(0,P.jsx)(Tn,{property:e,onOverride:a}):(0,Nn.ZK)(e)?(0,P.jsx)(_n,{property:e,onOverride:a}):null})]})},Un="debugPanelRemoteConfigLastChangedAtByPropertyName";var Ln=function(e){return e.ALL="All",e.WEB="Web",e.NATIVE="Native",e}(Ln||{});const Mn={source:Ln.ALL},Fn=({properties:e})=>{const{filter:t,setFilter:n}=(0,s.useContext)(un.g),[a,r]=(0,s.useState)(Mn),i=(0,wn.q)(),l=(0,yn.n)(),o=(0,vn.K)(),[c,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(!1),x=()=>{u(!0)},j=()=>{o.restart()},v=()=>{u(!1)},y=()=>{window.top?.location.reload()},b=()=>{m(!1)},N=(0,s.useRef)(null),C=(0,s.useCallback)((()=>{N.current?.focus()}),[]),{handle:S}=(0,fn.j)(),E=(0,s.useMemo)((()=>new(Xt())(S)),[S]);(0,s.useEffect)((()=>(E.bind(["mod+f"],C),()=>{E.unbind(["mod+f"])})),[C,E]);const A="macOS"===(0,En.f)(),I=(0,s.useCallback)((()=>{const e=i.getItem(Un);return e instanceof Cn.m||e instanceof Sn.Y?{}:e}),[i]),k=(0,s.useCallback)(((e,t)=>{l.setOverride(e,t),e.source===Nn.pS.NATIVE&&x(),["enableAlbumSortByReleaseDate","enableAuthorPage","enableCoursesChipYlx","enableEventsInYourLibrary","enableTuna","enableUnifiedSmartShuffleSignals","enableWatchFeedEntityPages","enableYourDJ","enableCentralisedSmartShuffle","enableSmartShuffle","enableStreamReportingTracker","enableStreamReportingTrackerStopVideoPlaybackOnError","enableJamNearbyJoining","enableResumptionProgress","enableCentralisedSmartShuffleToggle"]?.includes?.(e.name)&&m(!0),i.setItem(Un,{...I(),[e.name]:Date.now()})}),[l,i,I]),R=(0,s.useRef)(I()),O=e.filter((e=>{const n=e.source===Nn.pS.WEB,s=e.source===Nn.pS.NATIVE;if(a.source===Ln.WEB&&!n||a.source===Ln.NATIVE&&!s)return!1;return-1!==(s?`${e.component}.${e.name}`:e.name).toLowerCase().indexOf(t.toLowerCase())})).sort(((e,t)=>(R.current[t.name]??0)-(R.current[e.name]??0)||e.name.localeCompare(t.name))),T=function(){const e=(0,xn.d)(),t=(0,Dt.k)(),n=(0,pn.C)()?.username,a=(0,s.useMemo)((()=>mn.mA.getPropertySetId({clientId:e.remote_config_client_id},(0,mn.v6)(),[])),[e.remote_config_client_id]),r=(0,s.useMemo)((()=>{if(!e||!t.data||!n)return null;const s="web-player"===e.remote_config_client_id||"1"===t.data.employee;return{data:{platform:"WEB",clientId:e.remote_config_client_id,country:t.data.country,propertySetKey:a,clientVersion:e.event_sender_context_information?.client_version_string??"",installationId:e.event_sender_context_information?.installation_id??"",oauthClientId:e.event_sender_context_information?.client_id??"",employee:s,catalogue:t.data.catalogue,originPlatform:e.app_platform,originVersion:e.os_version??"",userName:n}}}),[n,e,t.data,a]),{data:i}=(0,hn.I)({queryKey:["traceback-config"],queryFn:()=>(0,jn.V)().request("https://remote-configuration-resolver.spotify.net/debug/traceback-config",{method:"POST",responseType:"json",headers:{"content-type":"application/json"},payload:JSON.stringify(r)}).then((e=>{const t=e.body;return Object.fromEntries(t.data.map((e=>[e.name,e])))})),staleTime:5e3,gcTime:gn,refetchInterval:gn,refetchOnWindowFocus:!1,enabled:!!r});return i??{}}();return(0,P.jsxs)("div",{className:In,children:[(0,P.jsxs)("div",{className:kn,children:[(0,P.jsx)(an.I,{"aria-label":"Properties to show",mode:"single-select",onSelect:()=>{},children:Object.values(Ln).map((e=>(0,P.jsx)(je.v,{selected:a.source===e,variant:a.source===e?"contrasting":"tinted",onClick:()=>r({source:e}),children:e},e)))}),(0,P.jsx)("div",{children:(0,P.jsx)(rn.E,{iconLeading:(0,P.jsx)(ln.C,{size:"small"}),iconTrailing:(0,P.jsx)(ge.H,{size:"small",iconLeading:fe.M,condensedAll:!0,onClick:()=>n("")}),children:(0,P.jsx)(nn.Z,{size:"small",type:"text",placeholder:A?"Find (⌘+F)":"Find (Ctrl+F)",value:t,onChange:e=>n(e.currentTarget.value),ref:N})})}),(0,P.jsx)(pe.n,{className:Rn,size:"small",onClick:()=>{l.clearOverrides(),i.clearItem(Un),x()},children:"Clear overrides"})]}),c?(0,P.jsx)(on.l,{contextual:!0,onClose:v,renderCloseButton:()=>(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ge.H,{size:"small",iconLeading:cn.H,condensedAll:!0,onClick:j,children:"Restart"}),(0,P.jsx)(ge.H,{size:"small",iconLeading:fe.M,condensedAll:!0,onClick:v,children:"Dismiss"})]}),colorSet:"warningSubdued",children:(0,P.jsx)("span",{children:"Changing native overrides requires a restart."})}):null,h?(0,P.jsx)(on.l,{contextual:!0,onClose:b,renderCloseButton:()=>(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ge.H,{size:"small",iconLeading:cn.H,condensedAll:!0,onClick:y,children:"Reload"}),(0,P.jsx)(ge.H,{size:"small",iconLeading:fe.M,condensedAll:!0,onClick:b,children:"Dismiss"})]}),colorSet:"warningSubdued",children:(0,P.jsx)("span",{children:"Changing platform overrides requires a reload."})}):null,(0,P.jsx)(p.K,{children:(0,P.jsxs)(g.X,{children:[(0,P.jsxs)("colgroup",{children:[(0,P.jsx)("col",{width:"30%"}),(0,P.jsx)("col",{}),(0,P.jsx)("col",{})]}),(0,P.jsxs)("tbody",{children:[(0,P.jsxs)(d.H,{children:[(0,P.jsx)(f.M,{className:w,children:"Name"}),(0,P.jsx)(f.M,{className:w,children:"Default"}),(0,P.jsx)(f.M,{className:w,children:"Remote"}),(0,P.jsx)(f.M,{className:w,children:"Local"})]}),O.map((e=>(0,P.jsx)(Dn,{property:e,experimentUrl:T?.[e.name]?.experimentRef?.experimentUrl,isRemoteUserSpecificOverride:T?.[e.name]?.isOverride??!1,onOverride:k,filter:t},e.name)))]})]})})]})},Bn=()=>{const e=(0,yn.n)(),[t,n]=(0,s.useState)([]);return(0,s.useEffect)((()=>{const t=e.getEvents();return e.getProperties().then(n),t.addListener(bn.M.UPDATE,(e=>n(e.data.properties)))}),[e,n]),(0,P.jsx)("div",{className:An,children:(0,P.jsx)(un.s,{uri:"spotify:internal:debug:remote-config-properties",children:(0,P.jsx)(Fn,{properties:t})})})},Hn="wTIZy4hwIIwMdmqm93rW",zn="g2bLOY5W1sbuXtffHyDY",Jn=()=>{const e=(0,Rt.zy)(),t=(0,Rt.Zp)(),n=e=>{t(e,{state:{preventMoveFocus:!0}})},s=(0,Ae.o_h)(e.pathname);return(0,P.jsxs)("div",{className:Hn,children:[(0,P.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.target).get("navigateTo").toString(),s=new URL(t,"https://open.spotify.com");s.hostname&&s.pathname?n(s.pathname+s.search+s.hash):n(t)},className:zn,children:[(0,P.jsx)("label",{htmlFor:"navigate-input",children:"Navigate to"}),(0,P.jsx)(ce.E,{variant:"bodySmall",as:"input",style:{color:at.Ql9},name:"navigateTo",id:"navigate-input",type:"text",placeholder:"ex. /search/nirvana",onKeyDown:e=>{"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||e.stopPropagation()}})]}),(0,P.jsx)("h2",{children:"Current location:"}),(0,P.jsxs)("ul",{children:[(0,P.jsxs)("li",{children:["Location: ",e.pathname]}),e.search&&(0,P.jsxs)("li",{children:["Search params: ?",e.search]}),e.hash&&(0,P.jsxs)("li",{children:["Hash params: #",e.hash]}),s?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("li",{children:["URL: ",s.toURL()]}),(0,P.jsxs)("li",{children:["URI: ",s.toURI()]})]}):(0,P.jsx)("li",{children:"Not parseable as a Spotify URI!"}),(0,P.jsxs)("li",{children:["Location state: ",(0,P.jsx)("pre",{children:JSON.stringify(e.state,null,2)})]})]})]})};var Wn=n(13932),Vn=n(3733),Yn=n(8558);const Zn=()=>{const e=(0,Wn.NC)(Yn.QMQ),t=(0,yn.n)();return(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:"React-Query Cache Persistence"}),(0,P.jsx)(u.n,{className:A,align:"right",children:(0,P.jsx)(xe.X,{checked:e,onChange:e=>{t.setOverride({source:Nn.pS.WEB,type:Nn.Ut.BOOLEAN,name:"enableReactQueryPersistence"},Boolean(e.target.checked))},children:"Enabled"})}),(0,P.jsx)(u.n,{className:A,align:"right",children:(0,P.jsx)(Ce.$,{size:"small",onClick:()=>{(0,Vn.k)()},children:"Clear cache"})})]})},Kn=()=>(0,P.jsx)("div",{className:L,children:(0,P.jsx)(T,{title:"Development options",rows:(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(Zn,{})}),cols:[],canCollapse:!0})});var qn=n(19500),Gn=n(43391),$n=n(41605),Qn=n(51974),Xn=n(62411),es=n(87327),ts=n(56168),ns=n(36706),ss=n(43123),as=n(46686),rs=function(e){return e.IPL="IN_PERSON",e.RGS="REMOTE",e}(rs||{});function is({obj:e}){return(0,P.jsx)(g.X,{children:(0,P.jsx)("tbody",{children:Object.entries(e).map((e=>(0,P.jsx)(ls,{name:e[0],value:e[1]},e[0])))})})}function ls({name:e,value:t}){const n=(0,_.C)();let s;return"string"==typeof t||"number"==typeof t?s=t:"boolean"==typeof t?s=(0,P.jsx)(xe.X,{defaultChecked:t,isActive:!1,onClick:e=>{e.preventDefault()}}):"object"==typeof t&&null!==t&&(s=(0,P.jsx)(is,{obj:t})),(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:e}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:s}),(0,P.jsx)(u.n,{className:I,children:(0,P.jsx)("button",{className:R,onClick:()=>{void 0!==t&&n("object"==typeof t?JSON.stringify(t):t.toString())},children:(0,P.jsx)(m._,{size:"small"})})})]})}var os=n(93211);n(7354);var cs=n(61860),ds=n(64103),us=n(11167);var hs=n(16995);const ms=({deviceId:e,title:t,tech:n,type:s,token:a,isNew:r})=>{const i=(0,cs.d)(),{data:l}=(0,hn.I)({queryKey:["scannedDeviceRowJam",a],queryFn:()=>i.getSessionInfo(a),refetchInterval:3e4});return(0,P.jsx)(T,{title:t,rows:[{name:"Device ID",value:e},{name:"Tech",value:hs.x[n]},{name:"Type",value:hs.Z[s]},{name:"Token",value:a},{name:"Is new",value:r.toString()},...l?[{name:"Jam session id",value:l.sessionId},{name:"Jam session owner is self",value:l.isSessionOwner.toString()},{name:"Jam session owner",value:l.sessionMembers.find((e=>e.id===l.sessionOwnerId))?.displayName}]:[]],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:({name:e,value:t})=>(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:e}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:t})]}),canCollapse:!0,isCollapsedInitially:!0},e)},ps=()=>{const e=(()=>{const e=(0,cs.d)(),[t,n]=(0,s.useState)(e.getLocalNetSessionDevices());return(0,us.c)(ds.P.SCAN_UPDATE,(()=>{n(e.getLocalNetSessionDevices())})),t})();return e?.devices.map((e=>(0,P.jsx)(ms,{...e},e.deviceId)))};var xs=n(81271),js=n(33441),gs=n(64567);var fs=n(41443);const vs=[{title:"Debugging Info",Component:()=>{const e=(0,gs.M)(),t=(0,js.C)(),n=(0,xs.y)(),s=(0,os.g)(),[a]=(0,Le.x)("dismissStartJamButtonFromQueue",!1),[r]=(0,Le.x)("dismissStartJamButtonFromFriendFeed",!1);return(0,P.jsx)(p.K,{children:(0,P.jsxs)(g.X,{children:[(0,P.jsxs)("colgroup",{children:[(0,P.jsx)("col",{width:"30%"}),(0,P.jsx)("col",{}),(0,P.jsx)("col",{width:"16px"})]}),(0,P.jsxs)("tbody",{children:[(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:"useIsSocialConnectAPIEnabled"}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:e})]}),(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:"useJamExperience()"}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:t})]}),(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:"Is user considered in a Jam?"}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:s.toString()})]}),(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:"useCanCreateJam()"}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:n.toString()})]}),(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:"Jam banner dismissed from queue"}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:a.toString()})]}),(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:"Jam banner dismissed from friend feed"}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:r.toString()})]}),(0,P.jsxs)(d.H,{hover:!0,children:[(0,P.jsx)(u.n,{className:E,highlight:!0,children:"Scanned devices"}),(0,P.jsx)(u.n,{className:A,truncate:!0,align:"right",children:(0,P.jsx)(g.X,{children:(0,P.jsx)("tbody",{children:(0,P.jsx)(ps,{})})})})]})]})]})})}},{title:"Current Session",Component:()=>{const{currentSession:e,refreshCurrentSession:t}=(0,as.D)();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ge.H,{iconOnly:cn.H,onClick:()=>{t()}}),(0,P.jsx)(p.K,{children:e&&(0,P.jsxs)(g.X,{children:[(0,P.jsxs)("colgroup",{children:[(0,P.jsx)("col",{width:"30%"}),(0,P.jsx)("col",{}),(0,P.jsx)("col",{width:"16px"})]}),(0,P.jsx)("tbody",{children:Object.entries(e).map((e=>(0,P.jsx)(ls,{name:e[0],value:e[1]},e[0])))})]})})]})}},{title:"Create New Session",Component:()=>{const{createSession:e}=(0,as.D)(),[t,n]=(0,s.useState)(null),[a,r]=(0,s.useState)(rs.IPL),i=(0,Xn.wA)();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{children:"Create a new session as your current user (does nothing if you already have a session)"}),(0,P.jsxs)("div",{className:O,children:[(0,P.jsxs)(ns.C,{id:"sessionTypeDropdown",value:a,onSelect:e=>{switch(e){case rs.IPL:r(rs.IPL);break;case rs.RGS:r(rs.RGS);break;default:r(rs.IPL)}},children:[(0,P.jsx)("option",{value:rs.IPL,children:rs.IPL},rs.IPL),(0,P.jsx)("option",{value:rs.RGS,children:rs.RGS},rs.RGS)]}),(0,P.jsx)(Ce.$,{onClick:async t=>{t.preventDefault();const s=await e();n(s)},children:"Create"})]}),(0,P.jsx)(pe.n,{onClick:()=>{i((0,ts.A9)(ss.EL.INVITE))},style:{marginTop:es.WG},children:"Open invitation modal"}),null!==t&&(0,P.jsx)(he.h,{value:JSON.stringify(t,null,2),readOnly:!0})]})}},{title:"Leave Current Session",Component:()=>{const{leaveSession:e,currentSession:t}=(0,as.D)(),n=(0,os.g)(),[a,r]=(0,s.useState)(null);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:E,children:"Leave your current session"}),(0,P.jsxs)("div",{className:O,children:[(0,P.jsx)(nn.Z,{value:t?.sessionId??"",readOnly:!0}),(0,P.jsx)(Ce.$,{onClick:async t=>{if(t.preventDefault(),!n)return;const s=await e();r(s)},children:"Leave"})]}),null!==a&&(0,P.jsx)(he.h,{value:JSON.stringify(a,null,2),readOnly:!0})]})}},{title:"Delete Current Session",Component:()=>{const{currentSession:e,deleteSession:t}=(0,as.D)(),n=(0,os.g)(),[a,r]=(0,s.useState)(null);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:E,children:"Delete your current session"}),(0,P.jsxs)("div",{className:O,children:[(0,P.jsx)(nn.Z,{value:e?.sessionId??"",readOnly:!0}),(0,P.jsx)(Ce.$,{onClick:async e=>{if(e.preventDefault(),!n)return;const s=await t();r(s)},children:"Delete"})]}),null!==a&&(0,P.jsx)(he.h,{value:JSON.stringify(a,null,2),readOnly:!0})]})}},{title:"Join Session as Guest",Component:()=>{const[e,t]=(0,s.useState)(""),n=(0,Xn.wA)(),a=(0,fs.g)();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:E,children:"Join somebody else's session (paste join token or join URI)"}),(0,P.jsxs)("div",{className:O,children:[(0,P.jsx)(nn.Z,{value:e,onChange:e=>t(e.currentTarget.value)}),(0,P.jsx)(Ce.$,{onClick:async t=>{t.preventDefault();const s=(0,Ae.o_h)(e);s&&(0,Ae.crr)(s)?a(s.toURLPath(!0)):n((0,ts.A9)(ss.EL.JOIN,e))},children:"Join"})]})]})}}],ys=()=>{const[e,t]=(0,s.useState)(-1);return(0,P.jsxs)("div",{className:Hn,children:[(0,P.jsx)("h1",{children:"Social Connect!"}),(0,P.jsx)(qn.n,{children:vs.map(((n,s)=>(0,P.jsxs)(Gn.A,{children:[(0,P.jsx)($n.J,{className:w,onClick:n=>{n.preventDefault(),t(s===e?-1:s)},isExpanded:s===e,children:n.title}),(0,P.jsx)(Qn.u,{isExpanded:s===e,children:n.Component&&(0,P.jsx)(n.Component,{})})]},`${s}-item`)))})]})};var bs=n(27112),Ns=n(30024),Cs=n(29174);const Ss=({event:e})=>{const t=e.location.pathNodes.at(0)?.name;if(!t)return null;const n=e.location.pathNodes.slice(1).map((e=>e.name)).join(Cs.Ru.getSeparator());return(0,P.jsx)(Ns.v,{id:Date.now().toString(),variant:"bordered",title:t,subtitle:n})};var ws=n(13549),Es=n(91247),As=n(43026);const Is="_skmUsDWCY_10DmlP3pe",ks=()=>{const[e,t]=(0,s.useState)([]);return((e,t)=>{const n=(0,As.s)(),a=(0,Es.J)(t);(0,s.useEffect)((()=>{const t=n.getEvents();return t.addListener(e,a),()=>{t.removeListener(e,a)}}),[e,n,a])})(ws.B.INTERACTION,(e=>{t((t=>[...t,e.data.event]))})),(0,P.jsxs)("div",{className:Is,children:[(0,P.jsx)(ce.E,{variant:"titleMedium",children:"UBI Events"}),0===e.length?(0,P.jsx)(ce.E,{variant:"bodySmall",children:"Interact with the app to start seeing events here!"}):(0,P.jsx)(bs.B,{children:e.map(((e,t)=>(0,P.jsx)(Ss,{event:e},`event-${t}`)))})]})};var Rs=n(17950);const Os="fDfHr0cTWsOLzd2hXPit",Ps=()=>{const e=(0,Xn.wA)(),{mode:t,uiFlags:n}=(0,Xn.d4)((e=>e.ui.videoPlayer));return(0,P.jsxs)("div",{className:Os,children:[(0,P.jsx)(ce.E,{variant:"titleMedium",children:"Video Player"}),(0,P.jsx)(ce.E,{variant:"titleSmall",children:"Current Mode"}),(0,P.jsx)(ce.E,{variant:"bodySmall",children:t}),(0,P.jsx)(ce.E,{variant:"titleSmall",children:"UI Flags"}),(0,P.jsx)(bs.B,{children:Object.entries(n).map((([t,n])=>(0,P.jsx)(Ns.v,{id:t,variant:"bordered",title:t,trailing:(0,P.jsx)(xe.X,{id:t,checked:n,onChange:()=>e((0,Rs.K)(t,!n))})},t)))})]})};function Ts(e){const[t,n]=(0,s.useState)("");return(0,s.useEffect)((()=>{sessionStorage.setItem(e,t)}),[e,t]),{value:t,setValue:n,clearStoredKeyValue:()=>{sessionStorage.removeItem(e)},clearSessionStorage:()=>{sessionStorage.clear()}}}const _s="rqY5xQzTYB0T5O0XyDdn",Ds="jDgWpAIXmxJKgp8GtVWk",Us=()=>{const{value:e,setValue:t,clearStoredKeyValue:n,clearSessionStorage:s}=Ts("eligibility"),{value:a,setValue:r,clearStoredKeyValue:i}=Ts("datetime");return(0,P.jsxs)("div",{className:_s,children:[(0,P.jsx)("h1",{children:"Premium Page Debug"}),(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{children:"Override Eligiiblity"}),(0,P.jsxs)("select",{className:Ds,value:e,onChange:e=>t(e.target.value),children:[(0,P.jsx)("option",{}),(0,P.jsx)("option",{value:"INTRO_ELIGIBLE",children:"INTRO_ELIGIBLE"}),(0,P.jsx)("option",{value:"NON_INTRO_ELIGIBLE",children:"NON_INTRO_ELIGIBLE"}),(0,P.jsx)("option",{value:"WINBACK",children:"WINBACK"})]}),(0,P.jsx)(Ce.$,{className:_s,size:"small",onClick:()=>n("eligibility"),children:"Remove Eligiblity Override"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{children:"Override Date"}),(0,P.jsx)("input",{className:Ds,type:"datetime-local",value:a,onChange:e=>r(e.target.value)}),(0,P.jsx)(Ce.$,{size:"small",onClick:()=>i("datetime"),children:"Remove Date/Time Override"})]}),(0,P.jsx)(Ce.$,{size:"small",onClick:s,children:"Remove All Overrides"})]})};var Ls=n(61179);n(12074);const Ms=Spicetify.GraphQL.Definitions["lookupDebug"]=new Ls.l("lookupDebug","query","cfdb576feda11166395bb3a691695f5f89c624bbf15edbed50f39f2a6ded9f53",null);var Fs=n(22621),Bs=n(901),Hs=n(96455),zs=n(66796);const Js="coy21BK2YBTFtmDx4TNO",Ws="qqllJKnB60UvRvOwb8a2";function Vs(e){return Boolean(e)}function Ys(e){return(0,Fs.yr)(e)}const Zs=()=>{const{request:e}=(0,s.useContext)(Hs.j),[t,n]=(0,Le.x)(Bs.P,[]),[a,r]=(0,s.useState)(""),i=async()=>{if(!function(e){const t=(0,Ae.o_h)(e);return!(!t||(0,Ae.Z0m)(t)||t?.id===Ae.NQG.COLLECTION||!(!t||(0,Ae._Tv)(t)||(0,Ae.ecE)(t)||(0,Ae.gHQ)(t)||(0,Ae.APS)(t)||(0,Ae.U_m)(t)||(0,Ae.WB1)(t)||(0,Ae.nuB)(t)))}(a))return;const s=await(0,zs.c)(e,Ms,{uris:[a]}),r=s?.data?.lookup.map(Ys).filter(Vs)||[];n(r.concat(t))};return(0,P.jsxs)("div",{className:Js,children:[(0,P.jsx)("h1",{children:"Home"}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h2",{children:"Shortcuts override"}),(0,P.jsxs)(ue.g,{label:"Entity URI to add",labelFor:"shortcut_to_add",children:[(0,P.jsx)(nn.Z,{id:"shortcut_to_add",type:"text",placeholder:"spotify:episode:123123",value:a,onChange:e=>r(e.currentTarget.value)}),(0,P.jsxs)(me.N,{children:["Right now we only allow: Artist, Album, Audiobook, Podcast, Track, User, Playlist, Episode and Chapter.",(0,P.jsx)("br",{})," For more info check the HomeV2ShortcutsShelf logic."]})]}),(0,P.jsx)(Ce.$,{size:"small",className:Ws,disabled:0===a.length,onClick:()=>{i()},children:"Add to Shortcuts"}),(0,P.jsx)(Ce.$,{size:"small",className:Ws,onClick:()=>{n([])},children:"Clear all overrides"})]})]})};var Ks=n(64857);const qs="WAiWdE4pBSCiS9bz5mI7",Gs="WU9QRIfJrSPefs8V7QI0",$s="pb99Xy2ZbO0AVWK2BIvI",Qs="G_PJW1iqB1P56Y5QBCja",Xs=[{label:"Production",value:"prod"},{label:"Development",value:"dev"}],ea=()=>{const e=(0,Xn.wA)(),t=(0,Xn.d4)((e=>e.inAppMessaging.env)),n=(0,Xn.d4)((e=>e.inAppMessaging.message)),[a,r]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(!1);(0,s.useEffect)((()=>{n&&o&&c(!1)}),[n,o]);const d=!n&&o;return(0,P.jsx)("div",{className:qs,children:(0,P.jsxs)("div",{className:Gs,children:[(0,P.jsx)("div",{children:(0,P.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingEnv",children:"Mode (endpoint):"})}),(0,P.jsx)(ns.C,{dir:"auto",value:t,id:"desktop.settings.inAppMessagingEnv",onSelect:function(t){"prod"!==t&&"dev"!==t||e((0,Ks.$h)(t))},children:Xs.map((({label:e,value:t})=>(0,P.jsx)("option",{value:t,children:e},t)))}),(0,P.jsx)("div",{children:(0,P.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingCreativeId",children:"Creative Id:"})}),(0,P.jsx)("div",{children:(0,P.jsx)("input",{className:$s,placeholder:"(eg. 12123434)",id:"desktop.settings.inAppMessagingCreativeId",name:"Creative Id",type:"text",value:a,onChange:function(e){r(e.target.value),c(!1)}})}),(0,P.jsx)("div",{children:(0,P.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingAppUri",children:"URI for Dynamic Content (optional):"})}),(0,P.jsx)("div",{children:(0,P.jsx)("input",{className:$s,placeholder:"(eg. spotify:artist:123)",id:"desktop.settings.inAppMessagingAppUri",name:"App Uri",type:"text",value:i,onChange:function(e){l(e.target.value),c(!1)}})}),(0,P.jsx)("div",{}),(0,P.jsx)("div",{}),(0,P.jsx)("div",{children:(0,P.jsx)(Ce.$,{colorSet:"invertedLight",onClick:function(t){t.preventDefault(),e((0,Ks.yR)(a,i)),c(!1),window.setTimeout((()=>{c(!0)}),1e3)},children:"Get Preview"})}),d&&(0,P.jsx)("div",{className:Qs,children:"No Messsage found"})]})})};var ta=n(57314),na=n(28719),sa=n(82412);const aa="CWbF6pzynkRv3fi29lB1",ra="HJW0XXBdaYKM50QJ957Z",ia="ELSpUVm2MXGkQ_0rlJaj",la="BEbSBX8wHpFESTzhAAUs",oa="debugWindowActiveTabGroup",ca="debugWindowActiveTabIndex",da=(0,s.lazy)((async()=>{const{DebugPanelEsperanto:e}=await Promise.all([n.e(9933),n.e(6543)]).then(n.bind(n,16543));return{default:e}})),ua=(0,s.lazy)((async()=>{const{AdDebug:e}=await n.e(70).then(n.bind(n,40070));return{default:e}})),ha=()=>{const e=(0,mt.p)().getCapabilities().canGetFiles,t=(0,gs.M)(),n=(0,_e.ZY)(),a=(0,s.useRef)(null);(0,s.useEffect)((()=>{n&&(n.title="Spotify Debug Window")}),[n]);const d=(0,s.useMemo)((()=>Object.fromEntries(Object.entries({Authorization:[{label:"Access Token",Panel:X},{label:"Product State",Panel:Ut}],Playback:[{label:"Player",Panel:kt},e?{label:"Playback",Panel:At}:null,{label:"Connect",Panel:ae},t?{label:"Social Connect",Panel:ys}:null].filter(sa.P),"Data Fetching":[da?{label:"Esperanto",Panel:da}:null,{label:"PubSub",Panel:$t},null,{label:"Metadata Extensions",Panel:tt}].filter(sa.P),UI:[{label:"Routing",Panel:Jn},{label:"UBI",Panel:ks},{label:"Video Player",Panel:Ps},null].filter(sa.P),Content:[{label:"Audiobooks",Panel:G},{label:"Playlist",Panel:_t}],Other:[null,{label:"Settings",Panel:Kn},{label:"Remote Config",Panel:Bn},ua?{label:"Ads",Panel:ua}:null,{label:"In-App Messaging",Panel:ea},{label:"Your DJ",Panel:na.fW},{label:"Home",Panel:Zs},{label:"Premium Page",Panel:Us},{label:"Font Width Estimation",Panel:oe}].filter(sa.P)}).filter((([e,t])=>t.length>0)))),[e,t]),u=Object.keys(d),h=(0,wn.q)(),m=h.getItem(oa),p="string"==typeof m&&m in d?m:u[0],[x,j]=(0,s.useState)(p),g=h.getItem(ca),f="number"==typeof g&&g in d[x]?g:0,[v,y]=(0,s.useState)(f),b=d[x][v].className,N=d[x][v].Panel;return(0,P.jsx)(ta.SnackbarProvider,{domRootRef:a,children:(0,P.jsx)("div",{className:r()("encore-dark-theme","encore-layout-themes"),children:(0,P.jsxs)("div",{className:aa,children:[(0,P.jsx)(i.V,{className:ra,children:(0,P.jsx)(l.r,{flexMobile:!0,children:u.map((e=>(0,P.jsxs)(s.Fragment,{children:[(0,P.jsx)(o.D,{children:e}),d[e].map(((t,n)=>(0,P.jsx)(c.a,{active:x===e&&v===n,label:t.label,onClick:()=>{j(e),h.setItem(oa,e),y(n),h.setItem(ca,n)},className:ia,children:t.label},t.label)))]},e)))})}),(0,P.jsx)("div",{className:r()(la,b),ref:a,children:(0,P.jsx)(N,{})})]})})})}},43809:(e,t,n)=>{n.d(t,{F:()=>r});var s=n(30758),a=n(41593);function r(e,t){const n=(0,s.useRef)(t),r=(0,a.p)();n.current=t,(0,s.useEffect)((()=>r.getEvents().addListener(e,(e=>{n.current(e)}))),[e,r])}},47957:(e,t,n)=>{n.d(t,{x:()=>r});var s=n(53428),a=n(65891);function r(){return(0,a.N)(s.b)}},58542:(e,t,n)=>{n.d(t,{t:()=>r});var s=n(65891),a=n(41065);function r(){return(0,s.N)(a.Z)}},66610:(e,t,n)=>{n.d(t,{l:()=>h});var s=n(30758),a=n(97500),r=n.n(a);const i="x-toggle-wrapper",l="x-toggle-indicator",o="JCFCfOY_6UEZZSOO2xrl",c="x-toggle-indicatorWrapper",d="x-toggle-input";var u=n(86070);const h=(0,s.forwardRef)((({value:e,disabled:t,onSelected:n,onClick:s,id:a,className:h,condensed:m=!1},p)=>(0,u.jsxs)("label",{className:r()(i,h),onClick:s,children:[(0,u.jsx)("input",{id:a,className:d,type:"checkbox",disabled:t,checked:e,onChange:e=>{const t=e.target.checked;n(t)},ref:p}),(0,u.jsx)("span",{className:r()(c,{[o]:m}),children:(0,u.jsx)("span",{className:r()(l,{[o]:m})})})]})))},80566:(e,t,n)=>{n.d(t,{G:()=>s,S:()=>d});n(24929);function s(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function a(e,t,n=[]){let r=0;for(const i of Object.getOwnPropertyNames(e))t(e,i,n)?r++:s(e[i])&&(r+=a(e[i],t,[i,...n]));return r}function r(e,t){return void 0===e[t]&&(e[t]={},!0)}function i(e,t){return!(!Array.isArray(e[t])||0!==e[t].length)&&(e[t]=[{}],!0)}function l(e,t){return!(!Array.isArray(e[t])||1!==e[t].length||!s(e[t][0])||0!==Object.getOwnPropertyNames(e[t][0]).length)&&(e[t]=[],!0)}function o(e,t){return!(!s(e[t])||0!==Object.getOwnPropertyNames(e[t]).length)&&(e[t]=void 0,!0)}function c(e,t,n){return!(!n.some((e=>/policy/i.test(e)))||!1!==e[t])&&(delete e[t],!0)}function d(e,t,n={}){let s=0;do{s=a(t=e.fromPartial(t),r),s+=a(t,i)}while(s>0);return a(t,o),a(t,l),!0===n.cleanPolicies&&a(t,c),t}},81055:(e,t,n)=>{n.d(t,{C:()=>r});var s=n(30758),a=n(96283);function r(){const e=(0,a.ox)();return(0,s.useMemo)((()=>e?new e.Function("value","if (value) { navigator.clipboard.writeText(value) }"):()=>{}),[e])}},81721:(e,t,n)=>{n.d(t,{p:()=>s});n(24929);function s(e){return!!e&&(Array.isArray(e)?e.some((e=>"is-editorial-booklist"===e.key&&"true"===e.value)):"true"===e["is-editorial-booklist"])}},89587:(e,t,n)=>{n.d(t,{C:()=>r});n(32807);var s=n(62411),a=n(19492);const r=()=>{const e=(0,s.d4)((e=>e.session?.user));return e?{type:a.c.USER,uri:e.uri,username:e.id,displayName:e.display_name??null,images:e.images.map((({url:e,width:t,height:n})=>({url:e,width:t||void 0,height:n||void 0})))}:null}},94976:(e,t,n)=>{n.d(t,{h:()=>F});var s=n(30758),a=n(74432),r=n(59886),i=n(97205),l=n(47047),o=n(11246),c=n(43737),d=n(94916),u=n(260),h=n(66482),m=n(99576),p=n(34834),x=(n(7354),n(8143)),j=n(23736),g=n(25407),f=n(29257),v=n(86070);const y=({uri:e})=>{const{entitiesByUri:t,loading:n}=(0,f.u)([e]);return(0,v.jsx)(g.Z,{loading:n,...t[e],uri:e})},b=new RegExp(String.raw`
  \b                      # only match parts that start at a word boundary
  (?:
    (?:
      (?:
          https?://(?:open|play).spotify.com
          | spotify
        )
        ([:/])
        (?:
          (                   # all standard entity types that are preceded by
                              # "spotify" and followed by a 22-char base 62 id
            track
            | album
            | artist
            | show
            | episode
            | playlist
            | concert
          )
          | (?:
              user\1[^\1]+\1(    # playlist v1 uri:s that contain usernames
                playlist
              )
            )
        )
        \1
      )
      ([0-9a-zA-Z]{22})         # standard 22-char base 62 id
    | (?:
        (?:
          https?://(?:open|play).spotify.com
          | spotify
        )
        ([:/])(user)\5
          (
            (?:
              [A-Za-z0-9\-._~!$&'()*+,;=]  # valid unescaped username characters
              | %[0-9A-Fa-f]{2}             # escaped username characters
            )+
          )
      )
  )
  \b                            # only match parts that end at a word boundary
`.replace(/(?<!\\)\s|#.*.*/g,""),"ig");var N=n(11907),C=n(38526),S=n(74396),w=n(63420);const E=({view:e,className:t})=>{const n=(0,s.useCallback)((t=>{(0,h.TS)(e,t.nativeEvent,"search-panel")&&t.preventDefault()}),[e]),a=(0,s.useCallback)((t=>{e.dispatch({effects:c.Ri.of(new c.L0({search:t}))})}),[e]),r=(0,s.useCallback)((()=>{(0,c.jO)(e)}),[e]),i=(0,s.useRef)(null);return(0,s.useEffect)((()=>{e.dispatch({effects:c.Ri.of(new c.L0({search:""}))}),i.current?.select()}),[e]),(0,v.jsx)("div",{className:t,children:(0,v.jsx)(N.E,{iconLeading:(0,v.jsx)(C.C,{}),iconTrailing:(0,v.jsx)(S.M,{onClick:()=>r()}),children:(0,v.jsx)(w.Z,{ref:i,onKeyDown:e=>n(e),onChange:e=>a(e.currentTarget.value)})})})};n(54615),n(32807);var A=n(80566),I=n(5911);const k=["spotify:artist:5INjqkS1o8h1imAzPqGZBb","spotify:album:79dL7FLiJFOO0EoehUHQBv","spotify:track:6K4t31amVTZDgR3sKmwUJJ","spotify:show:1OLcQdw2PFDPG1jo3s0wbp","spotify:episode:0VpyIy8Srg5IKQdRAbDDH1"],R=Object.values(I.UH).filter((e=>"number"==typeof e)).map((e=>({name:I.UH[e],value:e})));function O(e,t){let n=0;const s=[];if(t.type.is("["))t.parent();else if(t.type.is("Property")){if(!t.firstChild())return[];s.unshift(e.sliceDoc(t.from+1,t.to-1)),t.parent()}for(;t.parent()&&!t.type.is("JsonText");){if(t.type.is("Array"))s.unshift("[]");else if(t.type.is("Property")){if(!t.firstChild())break;s.unshift(e.sliceDoc(t.from+1,t.to-1)),t.parent()}if(++n>1e4)break}return s}function P(e,t){for(const n of t)if("[]"===n){if(!Array.isArray(e)||0===e.length)return null;e=e[0]}else Object.hasOwn(e,n)&&(e=e[n]);return e}function T(e={}){return(0,a.yU)({activateOnTyping:!1,override:[t=>{const n=(0,l.mv)(t.state).cursorAt(t.pos,-1);if(n.type.is("{")||n.type.is("Object")){const s=O(t.state,n),a=function(e,t){return Object.getOwnPropertyNames(P(e,t))}(e,s);return{from:t.pos,options:a.map((e=>({type:"text",label:e,apply:`"${e}"`})))}}if(n.type.is("[")||n.type.is("Array")){const s=O(t.state,n),a=P(e,s);return Array.isArray(a)&&(0,A.G)(a[0])?{from:t.pos,options:[{type:"text",label:"{ ... }",apply:JSON.stringify(a[0]),boost:1},{type:"text",label:"{}",boost:0}]}:/extension/i.test(s[s.length-1])?{from:t.pos,options:R.map((({name:e,value:t})=>({type:"constant",label:e,apply:`${t}`})))}:{from:t.pos,options:k.map((e=>({type:"text",label:`"${e}"`})))}}if(n.type.is("Property")){const s=O(t.state,n),a=function(e,t){const n=P(e,t);return void 0===n?"null":Array.isArray(n)?"array":typeof n}(e,s),r=[];if("boolean"===a)r.push({type:"keyword",label:"true",boost:1}),r.push({type:"keyword",label:"false",boost:0});else if("null"===a)r.push({type:"keyword",label:"null",boost:1}),r.push({label:"{}",apply:"{}",boost:0});else if("string"===a){r.push({label:'""'});for(const e of k)r.push({label:`"${e}"`})}else if("number"===a)if(/extension/i.test(s[s.length-1]))for(const{name:e,value:t}of R)r.push({type:"constant",label:e,apply:`${t}`});else r.push({label:"0",apply:"0"}),r.push({label:"10",apply:"10"}),r.push({label:"100",apply:"100"});else"object"===a?r.push({label:"{}",apply:"{}"}):"array"===a&&r.push({label:"[]",apply:"[]"});return{from:t.pos,options:r}}return null}]})}const _=[u.bM,(0,l.y9)(u.kS),(0,h.$K)(),(0,h.dz)(),(0,h.Wu)(),(0,h.VH)(),d.$t.allowMultipleSelections.of(!0),h.w4.of([...r.pw,...r.cL,...a.OO,...c.Eo,r.Yc]),(0,c.$P)({top:!0,createPanel:e=>{const t=e.dom.ownerDocument.createElement("div");return(0,m.H)(t).render((0,v.jsx)(p.ID,{target:e.dom.ownerDocument.head,children:(0,v.jsx)(E,{view:e})})),{dom:t,top:!0}}}),(0,l.Lv)(),(0,i.Pq)()],D=[..._,(0,r.b6)(),(0,o.bu)((0,i.cp)()),(0,l.WD)(),(0,l.SG)(),(0,a.wm)()],U=[..._,d.$t.readOnly.of(!0)],L=new d.xx,M=({readOnly:e=!1,onChange:t,onDiagnostics:n,editorRef:a,className:r})=>{const i=(0,s.useRef)(null),{extension:l,tooltip:c}=function(){const[e,t]=(0,s.useState)(null),[n,a]=(0,s.useState)(null);return{tooltip:n&&e?(0,x.createPortal)((0,v.jsx)(y,{uri:e}),n):null,extension:(0,s.useMemo)((()=>(0,h.Ux)(((e,n)=>{const{from:s,text:r}=e.state.doc.lineAt(n),i=n-s,l=Array.from(r.matchAll(b)).find((({0:e,index:t})=>i>=t&&i<=t+e.length));if(!l)return null;const{0:o,index:c}=l,d=(0,j.o_h)(o)?.toURI();return d?{pos:s+c,end:s+c+o.length,above:!0,create(){const e=document.createElement("div");return e.style.maxWidth="400px",e.style.minHeight="64px",e.style.whiteSpace="initial",t(d),a(e),{dom:e}}}:null}))),[])}}();return(0,s.useEffect)((()=>{const s=new h.Lz({parent:i.current,extensions:[...e?U:D,L.of(T({})),h.Lz.updateListener.of((e=>{e.docChanged&&t?.(e.state.doc.toString());for(const t of e.transactions)for(const e of t.effects)e.is(o._k)&&n?.(e.value)})),l]});return void 0!==a&&(a.current=s),()=>{s.destroy()}}),[e,t,n,a,l]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:r,ref:i}),c]})};function F({readOnly:e,className:t,onChange:n,onDiagnostics:a}){const r=(0,s.useRef)(),i=(0,s.useRef)(n),l=(0,s.useRef)(a);i.current=n,l.current=a;const o=(0,s.useCallback)((()=>{const e=r.current;return void 0!==e?e.state.doc.toString():null}),[]),c=(0,s.useCallback)((e=>{const t=r.current;void 0!==t&&t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})}),[]),d=(0,s.useCallback)((e=>{const t=r.current;void 0!==t&&t.dispatch({effects:L.reconfigure(T(e))})}),[]),u=(0,s.useCallback)((e=>{i?.current?.(e)}),[]),h=(0,s.useCallback)((e=>{l?.current?.(e)}),[]);return{Editor:(0,v.jsx)(M,{editorRef:r,readOnly:e,className:t,onChange:u,onDiagnostics:h}),getContent:o,setContent:c,setReference:d}}}}]);
//# sourceMappingURL=xpui-debug-window-contents.js.map