"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[777],{15553:(t,e,a)=>{a.d(e,{C:()=>i});var n=a(30758),o=a(29032);function i(t){var e,a,i,r,s,c=t.size?o.$Z[t.size]:t.iconSize,l=(0,o._C)([{size:16,svgContent:"<path d='M9.741.85a.75.75 0 0 1 .375.65v13a.75.75 0 0 1-1.125.65l-6.925-4a3.642 3.642 0 0 1-1.33-4.967 3.639 3.639 0 0 1 1.33-1.332l6.925-4a.75.75 0 0 1 .75 0zm-6.924 5.3a2.139 2.139 0 0 0 0 3.7l5.8 3.35V2.8l-5.8 3.35zm8.683 4.29V5.56a2.75 2.75 0 0 1 0 4.88z'/><path d='M11.5 13.614a5.752 5.752 0 0 0 0-11.228v1.55a4.252 4.252 0 0 1 0 8.127v1.55z'/>"},{size:24,svgContent:"<path d='M14.5 1.134A1 1 0 0 1 15 2v20a1 1 0 0 1-1.5.866L2.846 16.712a5.445 5.445 0 0 1 0-9.424L13.5 1.135a1 1 0 0 1 1 0zM3.847 9.02a3.444 3.444 0 0 0 0 5.96L13 20.268V3.732L3.847 9.02zM17 20.127a8.504 8.504 0 0 0 0-16.253v2.125a6.502 6.502 0 0 1 0 12.003v2.125z'/><path d='M17 16.032V7.968a4.5 4.5 0 0 1 0 8.064z'/>"}],c||24),u=null!==(e=t.autoMirror)&&void 0!==e&&e;return n.createElement(o.In,Object.assign({},t,{autoMirror:u,viewBox:"0 0 ".concat(l.size," ").concat(l.size),dangerouslySetInnerHTML:{__html:"".concat((r=t.title,s=t.titleId,r?"<title ".concat(s?'id="'.concat(s,'"'):"",">").concat(r,"</title>"):"")).concat((a=t.desc,i=t.descId,a?"<desc ".concat(i?'id="'.concat(i,'"'):"",">").concat(a,"</desc>"):"")).concat(l.svgContent)}}))}},17188:(t,e,a)=>{a.d(e,{g:()=>n.g});var n=a(72536)},25183:(t,e,a)=>{a.d(e,{z:()=>h});var n=a(76640),o=a(70096),i=a(30758),r=a(43183),s=a(6469),c=a(50255),l=["as","className","value","semanticColor","color","css","style"];function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){(0,n.A)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h=function(t){var e=t.as,a=t.className,n=t.value,u=void 0===n?0:n,h=t.semanticColor,p=void 0===h?"essentialBrightAccent":h,m=(t.color,t.css),v=t.style,g=(0,o.A)(t,l),f=e||"div";return i.createElement(f,Object.assign({role:"progressbar","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100","data-encore-id":r.j.ProgressBar,className:(0,c.ZP)(["progress-bar"],a),style:d(d({},(0,c.Xn)("ProgressBar",m)),v)},g),i.createElement("div",{className:(0,c.ZP)(["progress-bar__indicator"]),style:{inlineSize:"".concat(u,"%"),"--progress-bar-color":(0,s.oj)(p)}}))}},36730:(t,e,a)=>{a.d(e,{X:()=>i});var n=a(30758),o=a(29032);function i(t){var e,a,i,r,s,c=t.size?o.$Z[t.size]:t.iconSize,l=(0,o._C)([{size:16,svgContent:"<path d='M13.86 5.47a.75.75 0 0 0-1.061 0l-1.47 1.47-1.47-1.47A.75.75 0 0 0 8.8 6.53L10.269 8l-1.47 1.47a.75.75 0 1 0 1.06 1.06l1.47-1.47 1.47 1.47a.75.75 0 0 0 1.06-1.06L12.39 8l1.47-1.47a.75.75 0 0 0 0-1.06z'/><path d='M10.116 1.5A.75.75 0 0 0 8.991.85l-6.925 4a3.642 3.642 0 0 0-1.33 4.967 3.639 3.639 0 0 0 1.33 1.332l6.925 4a.75.75 0 0 0 1.125-.649v-1.906a4.73 4.73 0 0 1-1.5-.694v1.3L2.817 9.852a2.141 2.141 0 0 1-.781-2.92c.187-.324.456-.594.78-.782l5.8-3.35v1.3c.45-.313.956-.55 1.5-.694V1.5z'/>"},{size:24,svgContent:"<path d='M17.293 15.207a1 1 0 0 0 1.414 0l1.793-1.793 1.793 1.793a1 1 0 0 0 1.414-1.414L21.914 12l1.793-1.793a1 1 0 0 0-1.414-1.414L20.5 10.586l-1.793-1.793a1 1 0 1 0-1.414 1.414L19.086 12l-1.793 1.793a1 1 0 0 0 0 1.414zM14.5 1.134A1 1 0 0 1 15 2v20a1 1 0 0 1-1.5.866L2.846 16.712a5.445 5.445 0 0 1 0-9.424L13.5 1.135a1 1 0 0 1 1 0zM3.847 9.02a3.444 3.444 0 0 0 0 5.96L13 20.268V3.732L3.847 9.02z'/>"}],c||24),u=null!==(e=t.autoMirror)&&void 0!==e&&e;return n.createElement(o.In,Object.assign({},t,{autoMirror:u,viewBox:"0 0 ".concat(l.size," ").concat(l.size),dangerouslySetInnerHTML:{__html:"".concat((r=t.title,s=t.titleId,r?"<title ".concat(s?'id="'.concat(s,'"'):"",">").concat(r,"</title>"):"")).concat((a=t.desc,i=t.descId,a?"<desc ".concat(i?'id="'.concat(i,'"'):"",">").concat(a,"</desc>"):"")).concat(l.svgContent)}}))}},40755:(t,e,a)=>{a.d(e,{u:()=>r});var n=a(30758),o=a(80797),i=a(86070);const r=({pageId:t,uri:e,children:a})=>{const r=(0,o.u)(),s=(0,o.H)();return(0,n.useEffect)((()=>{r?.reportPageView({pageId:t,navigationalRoot:s??void 0,entityUri:e})}),[t,s,r,e]),(0,i.jsx)(i.Fragment,{children:a})}},59745:(t,e,a)=>{a.d(e,{WatchFeedViewContainer:()=>$a});var n=a(20435),o=a(40755),i=a(30758),r=a(4056),s=a(86070);const c=(0,i.createContext)(null);function l(){const t=(0,i.useContext)(c);if(null===t)throw new Error("Trying to use 'OverturePlaybackContext' without 'OverturePlaybackProvider'!");return t}const u=({children:t,overridePlatformId:e})=>{const a=(0,i.useMemo)((()=>({videoPlayerContainer:".playbackContainerWatchFeed",audioPlayerContainer:".playbackContainerWatchFeed"})),[]),n=(0,r.H)(a,void 0,void 0,void 0,e);return(0,s.jsx)(c.Provider,{value:n,children:t})};var d=a(97500),h=a.n(d),p=a(40638),m=a(98978),v=a(25270),g=a(46462),f=a(76151);const b="music",y="1.0.0",_="default",x="16.0.1";function L(t){return new A(t)}class A{constructor(t){this._path=[{name:"desktop-watch-feed-view",...t.data}],t?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=t.parentAbsoluteLocation)}closeButtonFactory(){return new A.CloseButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}muteButtonFactory(){return new A.MuteButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}followButtonFactory(){return new A.FollowButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}artistNameFactory(){return new A.ArtistNameEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}hashtagButtonFactory(t){return new A.HashtagButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}shareButtonFactory(){return new A.ShareButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}addToQueueFactory(){return new A.AddToQueueEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}nextButtonFactory(){return new A.NextButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}previousButtonFactory(){return new A.PreviousButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}trackTitleFactory(t){return new A.TrackTitleEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}albumTitleFactory(){return new A.AlbumTitleEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}!function(t){t.CloseButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"close_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(A||(A={})),function(t){t.MuteButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"mute_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitMutePlayback(){return{actionName:"mute_playback",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUnmutePlayback(){return{actionName:"unmute_playback",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(A||(A={})),function(t){t.FollowButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"follow_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitFollow({itemToBeFollowed:t}){return{actionParameterNames:["item_to_be_followed"],actionParameterValues:[t.toString()],actionName:"follow",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUnfollow({itemToBeUnfollowed:t}){return{actionParameterNames:["item_to_be_unfollowed"],actionParameterValues:[t.toString()],actionName:"unfollow",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(A||(A={})),function(t){t.ArtistNameEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"artist_name"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(A||(A={})),function(t){t.HashtagButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({...a,name:"hashtag_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(A||(A={})),function(t){t.ShareButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"share_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitShare({entityToBeShared:t,shareId:e}){return{actionParameterNames:["entity_to_be_shared","share_id"],actionParameterValues:[t.toString(),e.toString()],actionName:"share",actionVersion:2,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(A||(A={})),function(t){t.AddToQueueEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"add_to_queue"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitAddItemToQueue({itemToAddToQueue:t}){return{actionParameterNames:["item_to_add_to_queue"],actionParameterValues:[t.toString()],actionName:"add_item_to_queue",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(A||(A={})),function(t){t.NextButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"next_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitSkipToNext({itemToBeSkipped:t,positionMs:e,totalContentMs:a}){return{actionParameterNames:["item_to_be_skipped","position_ms","total_content_ms"],actionParameterValues:[t.toString(),e.toString(),a.toString()],actionName:"skip_to_next",actionVersion:2,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(A||(A={})),function(t){t.PreviousButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"previous_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitSkipToPrevious({itemToBeSkipped:t,positionMs:e,totalContentMs:a}){return{actionParameterNames:["item_to_be_skipped","position_ms","total_content_ms"],actionParameterValues:[t.toString(),e.toString(),a.toString()],actionName:"skip_to_previous",actionVersion:2,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(A||(A={})),function(t){t.TrackTitleEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({...a,name:"track_title"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}impression(){return{app:b,generatorVersion:x,specificationVersion:y,specificationMode:_,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(A||(A={})),function(t){t.AlbumTitleEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"album_title"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(A||(A={}));var j=a(17640),C=a(79583),N=a(29032);function w(t){var e,a,n,o,r,s=t.size?N.$Z[t.size]:t.iconSize,c=(0,N._C)([{size:16,svgContent:"<path d='M6.46 1.5 5.4.44l-3 3L1 2.04-.06 3.1 2.4 5.56 6.46 1.5ZM7.188 6c.331-.452.596-.957.778-1.5H13.5a1 1 0 1 0 0-2H8.244A5.482 5.482 0 0 0 7.966 1H13.5a2.5 2.5 0 0 1 0 5H7.188ZM16 10.5H2V9h14v1.5Zm0 4.5H2v-1.5h14V15Z'/>"},{size:24,svgContent:"<path d='M8.414 3 7 1.586l-3.75 3.75-1.75-1.75L.086 5 3.25 8.164 8.414 3ZM11 4c0 .34-.024.673-.07 1h7.62a1.5 1.5 0 1 1 0 3H9.745a7.036 7.036 0 0 1-2.137 2H18.55a3.5 3.5 0 1 0 0-7h-7.62c.046.327.07.66.07 1Zm10 12H3v-2h18v2Zm0 6H3v-2h18v2Z'/>"}],s||24),l=null!==(e=t.autoMirror)&&void 0!==e&&e;return i.createElement(N.In,Object.assign({},t,{autoMirror:l,viewBox:"0 0 ".concat(c.size," ").concat(c.size),dangerouslySetInnerHTML:{__html:"".concat((o=t.title,r=t.titleId,o?"<title ".concat(r?'id="'.concat(r,'"'):"",">").concat(o,"</title>"):"")).concat((a=t.desc,n=t.descId,a?"<desc ".concat(n?'id="'.concat(n,'"'):"",">").concat(a,"</desc>"):"")).concat(c.svgContent)}}))}var E=a(95652),k=a(58325),S=a(12543),M=a(36838),V=a(38273);const P=i.memo((function({uri:t,className:e,onClick:a=()=>{},size:n=C.t.xs,placement:o}){const r=(0,S.W)(),{isInQueue:c,toggleInQueue:l}=(t=>{const e=(0,M.z)(),a=(0,V.w)().queued.find((e=>e.uri===t)),n=!!a,o=a?.uid;return{toggleInQueue:(0,i.useCallback)((()=>{n?e.removeFromQueue([{uri:t,uid:o??null}]):e.addToQueue([{uri:t,uid:null}])}),[o,n,e,t]),isInQueue:n}})(t),u=(0,i.useCallback)((()=>{r({intent:"add-to-queue",type:"click"}),l(),a()}),[r,l,a]),d=c?j.Ru.get("contextmenu.remove-from-queue"):j.Ru.get("contextmenu.add-to-queue");return(0,s.jsx)(k.Zp,{label:d,placement:o,children:(0,s.jsx)(g.H,{semanticColor:c?"textBrightAccent":"textSubdued",iconOnly:c?w:E.V,"aria-label":d,onClick:u,"data-testid":"add-button",size:n,className:e})})}));var I=a(2565),F=a(49406),T=a(52110),B=a(51775),R=a(17188),O=a(73929),z=a(93301),U=a(36730),D=a(15553),W=a(33876);const H="IQsUjbPtrVLyyA5iu3zQ",Q=({iconSize:t="small",toggleMute:e,isMuted:a,className:n,labelPlacement:o})=>a?(0,s.jsx)(k.Zp,{label:j.Ru.get("playback-control.unmute"),placement:o,children:(0,s.jsx)(g.H,{condensedAll:!0,onClick:e,"aria-label":j.Ru.get("playback-control.unmute"),className:n,children:(0,s.jsx)(U.X,{size:t})})}):(0,s.jsx)(k.Zp,{label:j.Ru.get("playback-control.mute"),placement:o,children:(0,s.jsxs)(g.H,{condensedAll:!0,onClick:e,"aria-label":j.Ru.get("playback-control.mute"),className:n,children:[(0,s.jsx)(D.C,{size:t}),(0,s.jsx)(W.J,{animated:!0,white:!0,className:H})]})});var Z=a(8143),q=a(75773),J=a(26423),X=a(43294),Y=a(85856);const G="JXh51ebDftiwM49U49IA",K="IId345zLSrSuzIWtN4Sd",$="EMcF5GoJ2mLzcp0t365T",tt="V795GKOEZNiChr8dJcD4",et="pGPb4TiSkhPdYEt8h2Av",at="FWBI05WNSb4HR8goMhai",nt="BWyVJ8XXZ0jRGpFaA9iW",ot="gWworaJ45IDWOdwjrZKh",it=()=>{const[t,e]=(0,i.useState)(!1);return(0,i.useLayoutEffect)((()=>{setTimeout((()=>e(!0)),200)}),[]),(0,s.jsxs)("div",{className:h()(G,{[K]:t}),children:[(0,s.jsx)("div",{className:h()(tt,et)}),(0,s.jsx)("div",{className:h()(tt,at)}),(0,s.jsx)("div",{className:h()(tt,nt)}),(0,s.jsx)("div",{className:h()(tt,at)}),(0,s.jsx)("div",{className:$}),(0,s.jsx)("div",{className:h()(tt,ot)}),(0,s.jsx)("div",{className:h()(tt,nt)}),(0,s.jsx)("div",{className:h()(tt,et)}),(0,s.jsx)("div",{className:h()(tt,at)})]})};var rt=a(91049),st=a(57195),ct=a(65238),lt=a(3378);const ut="YHeDUF3aquXRxYmKOs1A",dt="Ul_Er3t8veggCi1APkwp",ht="fhmiZPVDhaOYIlNd7Myq",pt="sJnarE2UKqyhLo0LFNqy",mt="bPMdcQr8gSb4AgWfkolx",vt="cjZ23zZucJkKFMIrGZa4",gt="qgczwXDFdF_gy4gRs3LN",ft="rCxYvbE1hq2_VEMOM6M_",bt="iQnF1gu0Mg2rGsKVHIFn";const yt=({parentEl:t,item:e})=>{const[a,n]=(0,i.useState)({shouldRender:!0,hasError:!1}),o=(0,Y.Eg)(e?.canvas?.fileId,e?.canvas?.uri)&&!a.hasError;(0,i.useEffect)((()=>{n({shouldRender:!0,hasError:!1})}),[e?.uri]);const r=(0,i.useCallback)((t=>{t&&n({shouldRender:!1,hasError:!0})}),[]);return(0,Z.createPortal)((0,s.jsx)(s.Fragment,{children:o&&(0,s.jsx)(X.h,{menu:(0,s.jsx)(B.P,{uri:e.uri}),children:(0,s.jsx)("div",{className:dt,children:(0,s.jsx)(Y.Gg,{fileId:e.canvas?.fileId,canvasUrl:e.canvas?.url,canvasUri:e.canvas?.uri,className:ht,overridePlatformId:rt.R,playerContainerClass:"canvasContainerWatchFeed",onError:r,playbackType:Y.RT.Loop})})})}),t)},_t=(0,i.memo)((function({item:t,itemPosition:e,isActive:a,onItemPositionInView:n,carouselEl:o,itemElByPositionRef:r}){const c=function(t){return t.canvas?.thumbnail?.sources?t.canvas.thumbnail.sources.sort(((t,e)=>(e.width??0)-(t.width??0)))[0]?.url:t.coverArt?.sources.sort(((t,e)=>(e.width??0)-(t.width??0)))[0]?.url}(t),l=null===t.canvas,[u,d]=(0,i.useState)(null),{ref:p,inView:m}=(0,q.Wx)({threshold:l?1:.6,root:o});(0,i.useEffect)((()=>{m&&n(e)}),[m,n,e]);const v=(0,i.useCallback)((t=>{r.current.set(e,t)}),[r,e]),g=(0,ct.S)([p,d,v]);return c?(0,s.jsx)(X.h,{menu:(0,s.jsx)(B.P,{uri:t.uri}),children:(0,s.jsxs)("div",{ref:g,className:pt,children:[l&&a&&(0,s.jsx)(it,{}),(0,s.jsx)("div",{className:h()(gt,{[ft]:a,[vt]:l}),style:{"--background-color":t.coverArt?.extractedColors?.colorDark.hex??J.l0o},children:(0,s.jsx)("div",{className:mt,children:(0,s.jsx)(st._,{className:bt,loading:"lazy",src:c,radius:12,width:"100%"})})}),a&&u&&(0,s.jsx)(yt,{parentEl:u,item:t})]})}):null})),xt=({items:t,currentItemPosition:e,onItemPositionInView:a,itemElByPositionRef:n,onScroll:o,setScrollingState:r})=>{const[c,l]=(0,i.useState)(null);return(0,i.useEffect)((()=>{if((0,lt.n)())return()=>{};const t=()=>r(!0),e=()=>r(!1);return c?.addEventListener("scroll",t,{once:!0}),c?.addEventListener("scrollend",e),()=>{c?.removeEventListener("scroll",t),c?.removeEventListener("scrollend",e)}}),[c,r,e]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:ut,tabIndex:-1,ref:l,onScroll:o,onKeyDown:t=>{t.preventDefault()},children:t.map(((t,o)=>(0,s.jsx)(_t,{item:t,isActive:o===e,carouselEl:c,itemPosition:o,onItemPositionInView:a,itemElByPositionRef:n},t.uri)))})})};var Lt=a(68832),At=a(76669),jt=a(17871),Ct=a(42256),Nt=a(24498),wt=a(87156),Et=a(71468),kt=a(58089);const St="g47sxYAVvWCq_6T4Ba5L",Mt=({artistUri:t,initialLibraryState:e,spec:a})=>{const[n,o]=(0,Et.A)(t,e),r=(0,kt.s)(),c=(0,i.useCallback)((async()=>{let e;e=n?a.followButtonFactory().hitUnfollow({itemToBeUnfollowed:t}):a.followButtonFactory().hitFollow({itemToBeFollowed:t}),r.logInteraction(e);try{await o(!n)}catch{}}),[n,o,t,a,r]),l=n?j.Ru.get("unfollow"):j.Ru.get("follow");return(0,s.jsx)(wt.W,{className:St,isFollowing:n,onClick:c,buttonText:l})};var Vt=a(25865);const Pt=200,It="ease-in-out";var Ft=function(t){return t[t.UP=-1]="UP",t[t.NONE=0]="NONE",t[t.DOWN=1]="DOWN",t}(Ft||{});const Tt=t=>{if(!t)return Ft.NONE;const{previous:e,current:a}=t;return void 0===e||void 0===a?Ft.NONE:Math.sign(a.position-e.position)},Bt=(t,e,a)=>{if(!t.animate)return void(t.style.opacity="1");const n=Tt(a);t.animate({opacity:[0,1],transform:[`translateY(${50*n}%)`,"translateY(0%)"]},{duration:Pt,easing:It,fill:"forwards",delay:100})},Rt=(t,e,a,n)=>{if(!t.animate)return void a();const o=Tt(n);t.animate({opacity:[1,0],transform:["translateY(0%)",`translateY(${-1*o*50}%)`]},{duration:Pt,easing:It,delay:100}).addEventListener("finish",a,{once:!0})},Ot=t=>{t.animate?t.animate({opacity:[0,1]},{duration:Pt,easing:It,fill:"forwards"}):t.style.opacity="1"},zt=(t,e,a)=>{if(!t.animate)return void a();t.animate({opacity:[1,0]},{duration:Pt,easing:It}).addEventListener("finish",a,{once:!0})},Ut=({hideEnteringElements:t,animateEnteringElements:e,animateExitingElements:a,animateFlippedElements:n})=>{t(),a(),n(),e()},Dt="dkbQiFBHMdijQeINl_ij",Wt="aiSwqZguOk1P52s9o9xP",Ht="bl3iefJaRs18m1sL93Eh",Qt="zrFS4My93WidFfSAb0u6",Zt="mENWYVW_PAl8OWp2Ut6e",qt="dErRUxXewpEkZd52uLTh",Jt="q2y15bQqkJDcBixyP5oa",Xt=({mainArtist:t,hashtags:e,spec:a,logger:n,position:o,itemUri:r})=>{const{open:c}=(0,Vt.P)(),l=(0,i.useCallback)((t=>{const e=a.hashtagButtonFactory({uri:t}).hitUiNavigate({destination:t});n.logInteraction(e),c(t,"discovery")}),[n,c,a]),u=(0,i.useCallback)((()=>{const e=a.artistNameFactory().hitUiNavigate({destination:t.uri});n.logInteraction(e)}),[n,t.uri,a]);return(0,s.jsx)(Lt.ZI,{flipKey:`wf-${r}-footer`,handleEnterUpdateDelete:Ut,decisionData:{position:o},children:(0,s.jsxs)("div",{className:Dt,children:[(0,s.jsx)(X.h,{renderInline:!0,menu:(0,s.jsx)(Ct.t,{uri:t.uri,isInLibrary:t.saved}),children:(0,s.jsxs)("div",{className:Wt,children:[(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(Lt.lf,{flipId:`wf-artist-avatar-${r}`,translate:!1,opacity:!1,scale:!1,onAppear:Ot,onExit:zt,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(jt.e,{label:t.name,images:t.avatar?.sources||[],width:32,userIconSize:"small"})})},`wf-artist-avatar-${r}`)}),(0,s.jsxs)("div",{className:Ht,children:[(0,s.jsx)(Lt.lf,{flipId:"wf-artist-name",translate:!0,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(Lt.lf,{flipId:t.name,translate:!1,opacity:!1,scale:!1,onAppear:Ot,onExit:zt,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(v.E,{variant:"bodySmall",semanticColor:"textSubdued",children:(0,s.jsx)(Nt.N,{to:t.uri,onClick:u,children:t.name})})})},t.name)})}),t.listeners&&(0,s.jsx)(Lt.lf,{flipId:"wf-listeners",translate:!0,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(v.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Jt,children:j.Ru.formatNumber(t.listeners,{notation:"compact",maximumFractionDigits:0})})})})]}),(0,s.jsx)(Lt.lf,{flipId:"wf-follow-button",translate:!0,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(Mt,{artistUri:t.uri,initialLibraryState:t.saved,spec:a})})})]})}),e.length>0&&(0,s.jsx)("div",{className:Qt,children:e.map(((t,e)=>(0,s.jsx)(Lt.lf,{flipId:e,translate:!0,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(At.v,{onClick:()=>l(t.uri),children:(0,s.jsx)("span",{className:Zt,children:t.title})},e)})},e)))})]})})};var Yt=a(31164),Gt=a(89596),Kt=a(25183),$t=a(97564),te=a(97378);const ee="edeYmiJw2Fd9EFB2SQZo",ae="cpE_cN95GCusnLJ3Mssy",ne=()=>{const{progressMs:t,durationMs:e,animate:a}=function(){const t=l(),e=(0,i.useRef)(Date.now()),a=(0,i.useRef)(0),[n,o]=(0,i.useState)(0),[r,s]=(0,i.useState)(3e4),[c,u]=(0,i.useState)(!1),d=(0,te.g)();return t.on($t.LW.PROGRESS,(t=>{const n=Date.now();n-e.current>=500&&(o(t.data.position),e.current=n,t.data.position>a.current?u(!0):u(!1),a.current=t.data.position)})),t.on($t.LW.BEFORE_TRACK_LOAD,(()=>{o(0),u(!1)})),t.on($t.LW.DURATION_CHANGED,(t=>{s(t.data.duration)})),t.on($t.LW.TRACK_ENDED,(()=>{o(r)})),{progressMs:n,durationMs:r,animate:c&&"visible"===d}}();return(0,s.jsx)(Kt.z,{className:h()(ee,{[ae]:a}),semanticColor:"essentialBase",value:100*t/e,dir:"ltr"})};var oe=a(41952);const ie="BKbRtjcDGVGtwX86D6Q4",re="Cypiobiw1yGi5E9N48gJ",se="E0LdRRiYvrkUdZCmAXqQ",ce="yJJKqce9DPVQnrFseKKU",le="_bMlIQGXEMMBRZOVM71Z",ue="omghgDzOcUFl6oOXYNHX",de="TaaunKIj990MWZKrBWHW",he=({item:t,handleTitleClick:e,widthBreakpoint:a,position:n})=>{const o=function(t){return t?.coverArt?.sources.sort(((t,e)=>(t.width??0)-(e.width??0)))[0]?.url}(t),i=t.canvas&&o;return(0,s.jsx)(Lt.ZI,{flipKey:`wf-${t.uri}-itemInfo`,handleEnterUpdateDelete:Ut,decisionData:{position:n},children:(0,s.jsxs)("div",{className:se,children:[(0,s.jsx)(X.h,{renderInline:!0,menu:(0,s.jsx)(B.P,{uri:t.uri,albumUri:t.album?.uri,artists:t.artists}),children:(0,s.jsx)(Lt.lf,{flipId:`wf-title-${t.uri}`,translate:!0,onAppear:Bt,onExit:Rt,children:(0,s.jsx)("div",{className:de,children:(0,s.jsx)(v.E,{variant:a===oe.E.LARGE?"titleSmall":"titleMedium",className:ce,semanticColor:"textBase",children:(0,s.jsx)(Nt.N,{to:t.uri,onClick:e,children:t.title})})})},`wf-title-${t.uri}`)}),(0,s.jsx)("div",{children:t.artists.map(((t,e)=>(0,s.jsx)(X.h,{renderInline:!0,menu:t?.uri?(0,s.jsx)(Ct.t,{uri:t?.uri}):null,children:(0,s.jsx)(Lt.lf,{flipId:`wf-artist-${t.uri}`,translate:!0,children:(0,s.jsxs)("div",{className:h()(de,ie),children:[e>0?j.Ru.getSeparator():null,(0,s.jsx)(Nt.N,{to:t.uri,children:(0,s.jsx)(v.E,{variant:"bodyMedium",className:re,children:t.name})})]})},`wf-artist-${t.uri}`)},e)))}),(0,s.jsxs)("div",{className:ue,children:[i&&(0,s.jsx)(X.h,{renderInline:!0,menu:t.album?.uri?(0,s.jsx)(Gt.h,{uri:t.album?.uri}):null,children:(0,s.jsx)(Lt.lf,{flipId:`wf-coverart-${t.uri}`,translate:!1,opacity:!1,scale:!1,onAppear:Ot,onExit:zt,children:(0,s.jsx)("div",{className:de,children:(0,s.jsx)(Yt._,{src:o,className:le})})},`wf-coverart-${t.uri}`)}),(0,s.jsx)(ne,{})]})]})})};var pe=a(46300);const me="YKRW27BSGgfw1jw43dpT",ve=()=>(0,s.jsxs)("div",{className:ut,tabIndex:0,children:[(0,s.jsx)("div",{className:pt,children:(0,s.jsx)("div",{className:gt})}),(0,s.jsx)("div",{className:pt,children:(0,s.jsx)("div",{className:gt,children:(0,s.jsx)("div",{className:me,ref:t=>{t?.scrollIntoView({block:"center",inline:"nearest"})}})})}),(0,s.jsx)("div",{className:pt,children:(0,s.jsx)("div",{className:gt,children:(0,s.jsx)("div",{className:me})})})]}),ge="DJxOEatMU2PHk0cCYWoX",fe="FP_XXx0FMQPJEu3WzfpM",be="JYvxp3Y58xF59FA7Mnaf",ye="WLr9Q6nJ_Hv35r7pNEa3",_e="uwkK6FkoyBrxvGSYBbhw",xe="AkStH5UDLsXzudcPz_J_",Le="YmJS4xMTXdNQLvbP2VAt",Ae="Qtx4b7Wc1c7NEX49CMeH",je="SliTY9e8oKOiypDQdhlw",Ce="OGPXh73aLJDzhfFAdPvM",Ne="d9bbNw4YiAXpQpjrSgBJ",we="ji0qx5PBc5_4aMgNLGrp",Ee="BLIxyum1wPNrFibaQ9wr",ke="NazSI1w8xaruwFqTP3sS",Se="ZRarvpz5og3ifOVHzGOv",Me="RQaEu8T4LvqfvRmirqJy",Ve="jskTw7aMQHNyh13AZI6R",Pe="hK5DaTfJaFpo2BJuoy5k",Ie=({hide:t})=>(0,s.jsxs)("div",{className:h()(ye,be,{[_e]:t}),children:[(0,s.jsxs)("div",{className:Pe,children:[(0,s.jsx)("div",{className:xe,children:(0,s.jsx)(pe.Y,{as:"div",variant:"bodySmall",charCount:8,isLoading:!0})}),(0,s.jsxs)("div",{className:se,children:[(0,s.jsx)(pe.Y,{as:"div",variant:"titleMedium",charCount:10,isLoading:!0}),(0,s.jsx)(pe.Y,{as:"div",variant:"bodyMedium",charCount:15,isLoading:!0}),(0,s.jsx)(pe.Y,{as:"div",variant:"bodySmall",charCount:20,isLoading:!0})]}),(0,s.jsxs)("div",{className:Dt,children:[(0,s.jsx)(pe.Y,{as:"div",variant:"titleSmall",charCount:10}),(0,s.jsx)(pe.Y,{as:"div",variant:"bodySmall",charCount:15})]})]}),(0,s.jsx)("div",{className:Se,children:(0,s.jsx)(ve,{})}),(0,s.jsx)("div",{className:we})]});var Fe=a(93162),Te=a(57221),Be=a(33732),Re=a(81588),Oe=a(17656),ze=a(79531),Ue=a(32617),De=a(54642),We=a(99565);const He="dcZW_YRCwhi9TTJMPxzX",Qe="JSNVglrzXyqMjvBqTdjS",Ze="HfPg2vA6Xn7iwiUnz1e9",qe="f7MX2BXkHu1edOXcPYc6",Je="GMCJTC2SwK0uAZrugIfm",Xe=({children:t})=>(0,s.jsx)("div",{className:He,children:t}),Ye=({children:t})=>{const[e,a]=(0,We.x)("watch-feed.dismissed-shortcut-onboarding",!1),n=(0,De.W)();if((0,i.useEffect)((()=>{const t=t=>{"?"===t.key&&a(!e)};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[e,a]),e)return(0,s.jsx)(s.Fragment,{children:t});const o=(0,s.jsxs)(Re.A,{colorSet:"announcement",popoverTitle:j.Ru.get("web-player.watch-feed.view.shortcuts.title"),children:[(0,s.jsx)(v.E,{as:"p",variant:"bodyMedium",paddingBottom:"tighter-2",children:j.Ru.get("web-player.watch-feed.view.shortcuts.description")}),(0,s.jsxs)("div",{className:qe,children:[(0,s.jsxs)("div",{className:Je,children:[(0,s.jsx)(v.E,{variant:"bodySmall",children:j.Ru.get("web-player.watch-feed.view.shortcuts.previous")}),(0,s.jsx)(Xe,{children:(0,s.jsx)(Oe.J,{size:"small"})})]}),(0,s.jsxs)("div",{className:Je,children:[(0,s.jsx)(v.E,{variant:"bodySmall",children:j.Ru.get("web-player.watch-feed.view.shortcuts.next")}),(0,s.jsx)(Xe,{children:(0,s.jsx)(ze.y,{size:"small"})})]}),(0,s.jsxs)("div",{className:Je,children:[(0,s.jsx)(v.E,{variant:"bodySmall",children:j.Ru.get("web-player.watch-feed.view.shortcuts.add-to-library")}),(0,s.jsx)(Xe,{children:(0,s.jsx)(ze.y,{size:"small",className:Qe})})]}),(0,s.jsxs)("div",{className:Je,children:[(0,s.jsx)(v.E,{variant:"bodySmall",children:j.Ru.get("web-player.watch-feed.view.shortcuts.add-to-queue")}),(0,s.jsx)(Xe,{children:(0,s.jsx)(ze.y,{size:"small",className:Ze})})]}),(0,s.jsxs)("div",{className:Je,children:[(0,s.jsx)(v.E,{variant:"bodySmall",children:j.Ru.get("web-player.watch-feed.view.shortcuts.mute-unmute")}),(0,s.jsx)(Xe,{children:(0,s.jsx)(v.E,{variant:"marginal",children:(0,s.jsx)("kbd",{children:"M"})})})]})]})]});return(0,s.jsx)(Ue.W,{overlay:o,onHide:()=>{a(!0)},placement:n?Ue.W.topLeft:Ue.W.leftTop,children:t})},Ge="bsYqS4l_sJOvBGGeudDj",Ke="XIKBfnA7TQOV1T8LLiAS",$e="kT3dFHdVmU0vyeE71IDE",ta=({hasNext:t,hasInteracted:e,moveDown:a,isRTL:n,widthBreakpoint:o})=>{const r=j.Ru.get("web-player.watch-feed.view.next-button"),c=n?"right":"left",l=(0,i.useRef)(null);return(0,i.useLayoutEffect)((()=>{e&&l.current?.focus({preventScroll:!0})}),[e]),e?(0,s.jsx)(k.Zp,{label:r,placement:c,children:(0,s.jsx)(g.H,{className:Ge,"aria-label":r,label:r,disabled:!t,iconOnly:Fe.r,onClick:()=>a(),ref:l,size:o===oe.E.SMALL?"small":"medium"})}):(0,s.jsx)("div",{className:Ke,children:(0,s.jsx)(Ye,{children:(0,s.jsx)(Te.$,{className:$e,disabled:!t,colorSet:"invertedLight",iconTrailing:Be.R,onClick:()=>a(),size:o===oe.E.SMALL?"small":"medium",children:j.Ru.get("web-player.watch-feed.view.next-button")})})})};var ea=a(64797);const aa="fCykqEza3WtgKmxjL0C1",na=({hasPrevious:t,moveUp:e,isRTL:a,widthBreakpoint:n})=>{const o=j.Ru.get("web-player.watch-feed.view.previous-button"),i=a?"right":"left";return t?(0,s.jsx)(k.Zp,{label:o,placement:i,children:(0,s.jsx)(g.H,{className:aa,"aria-label":o,label:o,iconOnly:ea.o,onClick:()=>e(),size:n===oe.E.SMALL?"small":"medium"})}):null};var oa=a(62411),ia=a(10858),ra=a(10874),sa=a(76236),ca=a(90497),la=a(7840);const ua=({uri:t,moveUp:e,moveDown:a,toggleMute:n})=>{const o=(0,ca.i)(t),r=(0,M.z)(),s=(0,la.g)(),c=(0,oa.d4)((t=>t.platform.isDesktop)),[l,u]=(0,Et.A)(o),d=(0,i.useCallback)((()=>{u(!l)}),[l,u]),h=(0,i.useCallback)((()=>{r.addToQueue([{uri:t,uid:null}])}),[r,t]),p=(0,i.useCallback)((()=>{s(-1)}),[s]),m=(0,i.useCallback)((()=>{s(1)}),[s]);return(0,ia.N)((0,sa.p)(ra.r.GO_BACKWARDS),p,{condition:c}),(0,ia.N)((0,sa.p)(ra.r.GO_FORWARDS),m,{condition:c}),(0,ia.N)((0,sa.p)(ra.r.WF_ADD_TO_LIBRARY),d),(0,ia.N)((0,sa.p)(ra.r.WF_ADD_TO_QUEUE),h),(0,ia.N)((0,sa.p)(ra.r.WF_MUTE_UNMUTE),n),(0,ia.N)((0,sa.p)(ra.r.WF_GO_TO_PREVIOUS),e),(0,ia.N)((0,sa.p)(ra.r.WF_GO_TO_NEXT),a),null};var da=a(22936),ha=a(99326),pa=a(73035);function ma({playbackContainerClass:t,onError:e=()=>{}}){const a=l(),[n,o]=(0,i.useState)(!1),r=(0,te.g)(),{volume:s}=(0,ha.n)(),c=(0,i.useRef)(s),u=(0,da.J)(e);(0,i.useLayoutEffect)((()=>{s>=0&&(a.setVolume(s),c.current=s),0===s&&o(!0)}),[a,s]),(0,i.useEffect)((()=>(a.on($t.LW.TRACK_LOADED,(()=>{const e=document.getElementsByClassName(t),a=e[0]?.querySelector("video");a&&(a.loop=!0,a.muted=!1,a.autoplay=!0)})),a.on($t.LW.ERROR,(t=>{t.data.error&&u(t.data.error),u(new Error("PreviewPlayback error"))})),a.on($t.LW.MUTED_CHANGED,(({data:t})=>{o(t.muted),t.muted||a.setVolume(c.current||.7)})),()=>{a.removeListener($t.LW.TRACK_LOADED),a.removeListener($t.LW.ERROR),a.removeListener($t.LW.VOLUME_CHANGED)})),[u,a,t]);const d=(0,i.useCallback)((async()=>{const t=await a.getCurrentState(),e=t.playbackState.playing,n=t.track?.uri;"hidden"===r&&e?a.pause():"visible"!==r||e||n&&a.resume()}),[r,a]);(0,i.useEffect)((()=>{d()}),[d]);const h=(0,i.useCallback)((t=>{const e=function(t){const e=t?.preview;return t?.uri&&e?.url?(0,$t.a2)({uri:t.uri,format:"MP3",url:e.url,logData:{playbackId:(0,pa.E)()}}):null}(t);e&&a.playTracks([e],{paused:!1})}),[a]),p=(0,i.useCallback)((async()=>{a.setMuted(!n)}),[n,a]),m=(0,i.useCallback)((()=>a.getCurrentState()),[a]);return{playPreview:h,toggleMute:p,isMuted:n,getCurrentState:m}}var va=a(85387),ga=a(37953),fa=a(46628);var ba=a(41914);var ya=a(83441),_a=a(6469),xa=a(23703),La=a(35820),Aa=a(87983);function ja(t){return(0,Aa.h)(t||void 0,{desiredLabel:"large",desiredSize:600})}function Ca(t){const e=t?.extractedColors?.colorDark;if(e&&!e.isFallback)return e.hex}var Na=a(93805),wa=a(48383),Ea=a(48563),ka=a(11957),Sa=a(65927),Ma=a(5141);const Va={intent:"share",type:"click",itemIdSuffix:"watchfeed/share"},Pa="playbackContainerWatchFeed";const Ia=({watchFeedContent:t,feedUri:e,resumeOnClose:a})=>{const{close:n}=(0,Vt.P)(),o=(0,De.W)(),[r,c]=(0,i.useState)(!1),l=(0,O.B)(),u=(0,i.useRef)(!1),d=(0,i.useRef)(new Map),[b,y]=(0,i.useState)(a),[_,x]=(0,i.useState)(!1),{closeSnackbar:A}=(0,z.d)(),{spec:N,logger:w}=(0,Ma.r)(L,{data:{uri:e}}),E=(0,i.useCallback)((t=>{t&&A(),x(t)}),[A]),{content:{title:S,items:M},error:V,fetchNextPage:U,isFetching:D,hasNextPage:W}=t,[H,Z]=(0,i.useState)(0),q=M[H]||null,[J,X]=(0,i.useState)(!q),[Y,G]=(0,i.useState)(!1);(0,i.useEffect)((()=>{q?(G(!0),setTimeout((()=>{X(!1)}),400)):(G(!1),X(!0))}),[q]);const K=(0,i.useMemo)((()=>N.trackTitleFactory({uri:q?.uri})),[N,q]),$=(0,Sa.t)(K);!function({currentItemUri:t,resumeOnClose:e}){const{close:a,updateLocationState:n}=(0,Vt.P)(),o=(0,va.zy)(),r=(0,i.useRef)();(0,i.useEffect)((()=>{r.current?o.pathname!==r.current?a({resumePlayback:e,forceClose:!0}):t&&t!==o.state?.watchFeed?.lastSeenItemUri&&n({isOpen:!0,resumeOnClose:e,lastSeenItemUri:t}):r.current=o.pathname}),[a,o,e,t,n])}({currentItemUri:q?.uri,resumeOnClose:b}),function(t){const e=(0,ga.XB)(),{close:a}=(0,Vt.P)(),n=(0,i.useRef)();(0,i.useEffect)((()=>{n.current?e!==n.current&&e!==fa.Z.NowPlayingView&&a({resumePlayback:t}):n.current=e}),[a,t,e])}(b),function(t){const{close:e}=(0,Vt.P)();(0,i.useEffect)((()=>{const a=a=>{"Escape"===a.key&&(a.target instanceof HTMLElement&&a.target.closest(`#${ba.v}`)||e({resumePlayback:t}))};return document.addEventListener("keyup",a),()=>{document.removeEventListener("keyup",a)}}),[t,e])}(a);const tt=t=>{const e=N.closeButtonFactory().hitUiHide();w.logInteraction(e),n({resumePlayback:t})},et=(0,i.useCallback)((t=>{c(!0),u.current=!0,Z((e=>{const a=e+t;return a in M?(setTimeout((()=>{d.current.get(a)?.scrollIntoView({block:"center",inline:"nearest",behavior:"smooth"})})),a):e}))}),[M]),{playPreview:at,toggleMute:nt,isMuted:ot,getCurrentState:it}=ma({playbackContainerClass:Pa}),rt=(0,i.useCallback)((async()=>{const{playbackState:t}=await it(),e=N.previousButtonFactory().hitSkipToPrevious({itemToBeSkipped:M[H].uri,positionMs:t.position??-1,totalContentMs:t.duration??-1});w.logInteraction(e),et(-1)}),[et,M,w,H,N,it]);(0,i.useLayoutEffect)((()=>{Z(0),d.current.get(0)?.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})}),[e]),(0,i.useLayoutEffect)((()=>{0!==H&&c(!0)}),[H]);const st=(0,i.useCallback)((async()=>{const{playbackState:t}=await it(),e=N.nextButtonFactory().hitSkipToNext({itemToBeSkipped:M[H].uri,positionMs:t.position??-1,totalContentMs:t.duration??-1});w.logInteraction(e),et(1)}),[et,M,w,H,N,it]),ct=(0,p.YQ)((0,i.useCallback)((()=>{u.current=!1}),[]),100,{leading:!1,trailing:!0}),lt=(0,i.useCallback)((t=>{u.current||Z(t)}),[]),ut=(0,i.useCallback)((()=>{if(ot){const t=N.muteButtonFactory().hitUnmutePlayback();w.logInteraction(t)}else{const t=N.muteButtonFactory().hitMutePlayback();w.logInteraction(t)}nt()}),[ot,w,N,nt]),dt=(0,i.useCallback)((()=>{const t=N.shareButtonFactory().hitShare({entityToBeShared:q?.uri,shareId:q?.sharingInfo?.shareId||""});w.logInteraction(t)}),[q,w,N]),ht=(0,i.useCallback)((()=>{if(!q)return;const t=N.addToQueueFactory().hitAddItemToQueue({itemToAddToQueue:q?.uri});w.logInteraction(t)}),[q,w,N]),pt=(0,i.useCallback)((()=>{const t=N.trackTitleFactory({uri:q.uri}).hitUiNavigate({destination:q.uri});w.logInteraction(t),y(!1)}),[q,N,w]);(0,i.useEffect)((()=>{!V&&q&&W&&function(t,e,a){return t>=e-5&&!(e>50)&&!a}(H,M.length,D)&&U()}),[V,q,H,D,M,U,W]),(0,i.useEffect)((()=>{at(q)}),[q,at]),(0,i.useEffect)((()=>{Z(0)}),[e]);const mt=Boolean(M[H-1]),vt=Boolean(M[H+1]),gt=(0,i.useRef)(null),{dynamicColors:ft,dynamicColorsCssVariables:bt}=function(t,e){const a=ja(t?.coverArt?.sources),n=ja(e?.coverArt?.sources),{data:o}=(0,La.g)(a?[a]:[],{placeholderData:ya.rX});(0,La.g)(n?[n]:[]);let i=null;if(o){const t=(0,_a.r6)((0,xa.c)(o,"higherContrast"));i=(0,xa.I)(t)}return{dynamicColorsCssVariables:i,dynamicColors:o}}(q,M.at(H+1)),{breakpoint:yt}=(0,wa.x)({[oe.E.SMALL]:0,[oe.E.MEDIUM]:778,[oe.E.LARGE]:1102},gt),_t=(0,ka.o)((t=>(t?.restrictions?.disallowAddToQueueReasons||[]).length>0));if(V)return null;const Lt=q?.artists[0],At={backgroundColor:ft?.higherContrast.backgroundBase.toCSS(Ea.a.RGBA)??(Ca(q?.coverArt)||m.PQ2)},jt=o?"right":"left";return(0,s.jsx)(Na.s,{focusTrapOptions:{allowOutsideClick:!0},children:(0,s.jsx)("div",{className:ge,onClick:()=>tt(a),role:"presentation",children:(0,s.jsxs)("div",{style:At,className:fe,onClick:t=>{t.stopPropagation()},role:"presentation",tabIndex:-1,children:[q&&(0,s.jsxs)("div",{className:be,ref:gt,children:[(0,s.jsxs)("div",{className:Pe,ref:$,children:[(0,s.jsx)("div",{children:(0,s.jsx)(v.E,{className:xe,semanticColor:"textBase",children:S})}),(0,s.jsx)(he,{item:q,handleTitleClick:pt,widthBreakpoint:yt,position:H}),(0,s.jsx)(Xt,{mainArtist:Lt,hashtags:q.hashtags,spec:N,logger:w,position:H,itemUri:q.uri})]}),(0,s.jsxs)("div",{className:Se,children:[(0,s.jsx)(xt,{items:M,currentItemPosition:H,onItemPositionInView:lt,itemElByPositionRef:d,onScroll:ct,setScrollingState:E}),(0,s.jsx)("div",{className:h()(Me,{[Ve]:_}),ref:l})]}),(0,s.jsxs)("div",{className:we,children:[(0,s.jsxs)("div",{className:Le,children:[(0,s.jsx)("div",{className:Ae,children:(0,s.jsx)(Q,{toggleMute:ut,isMuted:ot,labelPlacement:jt,iconSize:yt===oe.E.SMALL?"small":"medium"})}),(0,s.jsx)(k.Zp,{label:j.Ru.get("close"),placement:"bottom",children:(0,s.jsx)(g.H,{onClick:()=>tt(a),"aria-label":j.Ru.get("close"),condensedAll:!0,children:(0,s.jsx)(f.M,{size:yt===oe.E.SMALL?"small":"medium"})})})]}),(0,s.jsxs)("div",{className:je,style:{...bt},children:[(0,s.jsx)(T.b,{renderInline:!0,placement:jt,menu:(0,s.jsx)(B.P,{uri:q.uri,albumUri:q.album?.uri,artists:q.artists,sharingInfo:q.sharingInfo,menuBoundary:gt?.current||void 0}),children:(0,s.jsx)(I.e,{size:yt===oe.E.SMALL?I.M.sm:I.M.md,label:j.Ru.get("more.label.context",q.title),placement:jt,className:Ce})}),(0,s.jsx)(F.w,{ariaLabel:j.Ru.get("context-menu.copy-track-link"),uri:q.uri,placement:jt,interactionData:Va,sharingInfo:null,size:yt===oe.E.SMALL?"small":"medium",onClick:dt}),!_t&&(0,s.jsx)(P,{uri:q.uri,size:yt===oe.E.SMALL?"small":"medium",placement:jt,onClick:ht,className:Ne}),(0,s.jsx)(R.g,{uri:q.uri,size:yt===oe.E.SMALL?C.t.sm:C.t.md,labelPlacement:jt,menuPlacement:jt,className:Ee})]}),(0,s.jsxs)("div",{className:ke,children:[(0,s.jsx)(na,{hasPrevious:mt,moveUp:rt,isRTL:o,widthBreakpoint:yt}),(0,s.jsx)(ta,{hasNext:vt,hasInteracted:r,moveDown:st,isRTL:o,widthBreakpoint:yt}),(0,s.jsx)("div",{className:Pa}),(0,s.jsx)(ua,{moveUp:rt,moveDown:st,toggleMute:nt,uri:q.uri})]})]})]}),J&&(0,s.jsx)(Ie,{hide:Y})]})})})};var Fa=a(59798),Ta=a(24792);a(31491);const Ba=new Ta.l("watchFeedView","query","4eb0691296f18d98a553ed288853f579f8c7c4fca66b80c0e223e47dd30e935b",null);const Ra=t=>{const e=function(t=[]){return t.find((t=>!!t.fileId))||null}(t.previews?.audioPreviews?.items);return{uri:t.uri,preview:e,title:t.name,album:t.albumOfTrack,artists:(a=t.artists.items,a.map((t=>({uri:t.uri,verified:t.profile.verified||!1,name:t.profile.name,avatar:t.visuals.avatarImage,saved:t.saved,listeners:t.stats.monthlyListeners})))),canvas:t.canvas,coverArt:t.albumOfTrack?.coverArt||null,sharingInfo:t.sharingInfo,hashtags:t.discoveryFeedHashtags};var a};var Oa=a(20607),za=a(29471),Ua=a(23426),Da=a(99667);function Wa(t){if("TrackResponseWrapper"===t.content.__typename&&"Track"===t.content.data.__typename){const e=t.content.data;return Ra(e)}return null}const Ha={offset:0,previousItems:[]};const Qa=({discoveryFeedUri:t,firstItemUri:e,resumeOnClose:a})=>{const n=function(t){const{discoveryFeedUri:e,firstItemUri:a}=t,n=(0,oa.d4)(Oa.JJ),{request:o}=(0,i.useContext)(Ua.j),{data:r,error:s,isFetching:c,hasNextPage:l,fetchNextPage:u}=(0,Fa.q)({queryKey:["watch-feed","view",e,a],queryFn:({pageParam:t})=>(0,Da.c)(o,Ba,{sp_t:(0,za.v8)("sp_t")??"",country:n,discoveryFeedUri:e,uri:"spotify:section:0JQ5DABRtFWApcy61XJEvU",firstItemUri:t.offset?"":a??"",offset:t.offset,limit:40,previousItems:t.previousItems}),gcTime:18e5,staleTime:3e5,initialPageParam:Ha,getNextPageParam:(t,e)=>{const a=e.reduce(((t,e)=>("HomeSectionCollection"===e?.data?.homeSections.__typename&&e.data.homeSections.sections.forEach((e=>{"HomeSection"===e.__typename&&"HomeWatchFeedSectionData"===e.data?.__typename&&(t.offset=e.sectionItems.pagingInfo.nextOffset??0,t.previousItems=t.previousItems.concat(e.sectionItems.items.map((t=>Wa(t)?.uri??null)).filter((t=>null!==t))))})),t)),{...Ha});if(0!==a.offset)return a}});return{content:(0,i.useMemo)((()=>r?.pages?r.pages.reduce(((t,e)=>{const a=e?.data?.homeSections;if("HomeSectionCollection"===a?.__typename){let e=t.title;return a.sections.forEach((a=>{"HomeSection"===a.__typename&&"HomeWatchFeedSectionData"===a.data?.__typename&&(e=a.data.title?.transformedLabel||null,a.sectionItems.items.forEach((e=>{const a=Wa(e);a&&t.items.push(a)})))})),{items:t.items,title:e}}return t}),{items:[],title:null}):{items:[],title:null}),[r]),error:s,isFetching:c,hasNextPage:l,fetchNextPage:u}}({discoveryFeedUri:t,firstItemUri:e});return(0,s.jsx)(Ia,{watchFeedContent:n,resumeOnClose:a,feedUri:t})};var Za=a(75044);const qa=new Ta.l("watchFeedEntity","query","9fc2299880ea50313d07c4e41dc53735cbe0919d826fd72027b1690e18151a1c",null);var Ja=a(55405);const Xa=({entityFeedUri:t,resumeOnClose:e,watchFeedTitle:a})=>{const n=((t,e)=>{const{request:a}=(0,i.useContext)(Ua.j),n=(0,Za.NC)(Ja.ggJ,{loadingValue:!1}),{data:o,error:r,isFetching:s,fetchNextPage:c,hasNextPage:l}=(0,Fa.q)({queryKey:["watch-feed","view",t],queryFn:({pageParam:e})=>(0,Da.c)(a,qa,{uri:t,limit:25,offset:e}),initialPageParam:0,enabled:n,getNextPageParam:t=>t?.data?.getWatchFeedForEntity.pagingInfo.nextOffset,staleTime:3e5,gcTime:18e5});return{content:(0,i.useMemo)((()=>{if(!o?.pages)return{items:[],title:null};const t=o.pages.reduce(((t,e)=>{const a=[];return e?.data?.getWatchFeedForEntity.items.forEach((t=>{"TrackResponseWrapper"===t.__typename&&"Track"===t.data.__typename&&a.push(Ra(t.data))})),t.concat(a)}),[]);return{title:e,items:t}}),[o,e]),error:r,isFetching:s,hasNextPage:l,fetchNextPage:c}})(t,a);return(0,s.jsx)(Ia,{watchFeedContent:n,resumeOnClose:e,feedUri:t})};var Ya=a(56555),Ga=a(91563);const Ka=({state:t})=>{const{feedUri:e,firstItemUri:a,resumeOnClose:n,type:o,title:i}=t;if(!o)return null;switch(o){case"discovery":return(0,s.jsx)(Qa,{discoveryFeedUri:e,firstItemUri:a,resumeOnClose:n});case"entity":return(0,s.jsx)(Xa,{entityFeedUri:e,resumeOnClose:n,watchFeedTitle:i??""});default:(0,Ga.k)(o)}return null},$a=()=>{const t=(0,Ya.S)();return t.isOpen?(0,s.jsx)(o.u,{pageId:n.$h.WATCHFEED,uri:t.feedUri,children:(0,s.jsx)(u,{overridePlatformId:rt.R,children:(0,s.jsx)(Ka,{state:t})})}):null}},64797:(t,e,a)=>{a.d(e,{o:()=>i});var n=a(30758),o=a(29032);function i(t){var e,a,i,r,s,c=t.size?o.$Z[t.size]:t.iconSize,l=(0,o._C)([{size:16,svgContent:"<path d='M.47 11.03a.75.75 0 0 0 1.06 0L8 4.56l6.47 6.47a.75.75 0 1 0 1.06-1.06L8 2.44.47 9.97a.75.75 0 0 0 0 1.06z'/>"},{size:24,svgContent:"<path d='M2.793 15.957a1 1 0 0 0 1.414 0L12 8.164l7.793 7.793a1 1 0 1 0 1.414-1.414L12 5.336l-9.207 9.207a1 1 0 0 0 0 1.414z'/>"}],c||24),u=null!==(e=t.autoMirror)&&void 0!==e&&e;return n.createElement(o.In,Object.assign({},t,{autoMirror:u,viewBox:"0 0 ".concat(l.size," ").concat(l.size),dangerouslySetInnerHTML:{__html:"".concat((r=t.title,s=t.titleId,r?"<title ".concat(s?'id="'.concat(s,'"'):"",">").concat(r,"</title>"):"")).concat((a=t.desc,i=t.descId,a?"<desc ".concat(i?'id="'.concat(i,'"'):"",">").concat(a,"</desc>"):"")).concat(l.svgContent)}}))}},86462:(t,e,a)=>{a.d(e,{F:()=>i});var n=a(30758),o=a(85142);function i(t,e){const a=(0,n.useRef)(e),i=(0,o.p)();a.current=e,(0,n.useEffect)((()=>i.getEvents().addListener(t,(t=>{a.current(t)}))),[t,i])}},91049:(t,e,a)=>{a.d(e,{R:()=>o,Z:()=>n});const n="desktop-home-watch-feed",o="desktop-watch-feed"},97378:(t,e,a)=>{a.d(e,{g:()=>o});var n=a(30758);function o(){const[t,e]=(0,n.useState)(document.visibilityState);return(0,n.useEffect)((()=>{const t=()=>e(document.visibilityState);return document.addEventListener("visibilitychange",t),()=>document.removeEventListener("visibilitychange",t)}),[]),t}},99326:(t,e,a)=>{a.d(e,{n:()=>s});var n=a(30758),o=a(16864),i=a(85142),r=a(86462);function s(){const t=(0,i.p)(),[e,a]=(0,n.useState)(-1);(0,n.useEffect)((()=>{let e=!0;return(async()=>{const n=await t.getVolume();e&&a(n)})(),()=>{e=!1}}),[t]),(0,r.F)(o._.VOLUME,(t=>a(t.data.volume)));return{volume:e,setVolume:(0,n.useCallback)((e=>{a(e),t.setVolume(e)}),[t])}}}}]);
//# sourceMappingURL=dwp-watch-feed-view-container.js.map