"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2630,3569],{5826:(e,a,t)=>{t.r(a),t.d(a,{default:()=>z});var n=t(97500),s=t.n(n),i=t(17640),r=t(20307),l=t(75463),o=t(51132),c=t(47457),d=t(86527),u=t(75539),m=t(4077),g=t(86070);function x(e,a){switch(e.type){case u.c.ALBUM:return(0,g.jsx)(r.a,{uri:e.uri,name:e.name,images:e.images,sharingInfo:null,artists:e.artists,index:a},e.uri);case u.c.ARTIST:return(0,g.jsx)(l.a,{uri:e.uri,name:e.name,images:e.images,index:a},e.uri);case u.c.SHOW:return(0,g.jsx)(d.o,{uri:e.uri,name:e.name,images:e.images,publisher:e.publisher,sharingInfo:null,mediaType:m.Q.UNKNOWN,index:a},e.uri);case u.c.AUDIOBOOK:return(0,g.jsx)(o.M,{uri:e.uri,name:e.name,images:e.images,authorName:e.authorName,index:a},e.uri);case u.c.PLAYLIST:return(0,g.jsx)(c.B,{uri:e.uri,name:e.name,images:e.images,description:"",authorName:e.creatorName,index:a},e.uri);default:return null}}var f=t(37924),h=t(30758),p=t(40638),y=t(46966),b=t(84439),j=t(44538),I=t(98011),v=t(4833),C=t(499),k=t(44758),S=t(98136),A=t(37525),P=t(5555),w=t(42668),E=t(54799);const R=function({uri:e,name:a,images:t,index:n}){const s=(0,P.o)(),r=(0,h.useRef)(null),l=(0,h.useRef)(!0),o=(0,A.A)(),{isPlaying:c}=(0,E.l_)(k.bV),{togglePlay:d}=(0,w.P)({uri:k.bV,pages:[{items:r.current?.map((e=>({...e,provider:null})))||[]}]},{featureIdentifier:"local_files"});(0,h.useEffect)((()=>(l.current=!0,()=>{l.current=!1})),[]);const u=(0,S.P)(),m=(0,p.YQ)((async(e,a)=>{if(!r.current){const e=await o.getTracks();r.current=e}l&&d({loggingParams:a},{uri:k.bV,pages:[{items:r.current?.map((e=>({...e,provider:null})))||[]}]})}),C.d,{leading:!0,trailing:!1});return s.canFetchAllTracks&&u?(0,g.jsx)(y.Z,{index:n,delegatePlayback:!0,delegateLogging:!0,isPlaying:c,onPlay:m,headerText:a,featureIdentifier:"local_files",uri:e,renderCardImage:()=>(0,g.jsx)(b.M,{images:t,FallbackComponent:I.e}),renderSubHeaderContent:()=>(0,g.jsx)(j.c,{children:i.Ru.get("local-files.description")})}):null},T=({index:e})=>{const a=(0,v.Iu)();return(0,g.jsx)(h.Suspense,{fallback:null,children:(0,g.jsx)(R,{index:e,name:a.name,uri:a.uri,images:a.images})})};var N=t(51890),O=t(82232),H=t(16884);var M=t(35525);const z=function(){const{hasError:e,items:a}=function(){const e=(0,H.B)(),[a,t]=(0,h.useState)(!0),[n,s]=(0,h.useState)(!1),[i,r]=(0,h.useState)([]);return(0,h.useEffect)((()=>{(async()=>{try{const a=await e.getDownloads();r(a)}catch(e){s(!0)}finally{t(!1)}})()}),[e]),{isLoading:a,hasError:n,items:i}}(),t=(0,S.P)();return e?null:(0,g.jsx)("div",{className:s()(M.A.offline,"contentSpacing"),children:a.length>0||t?(0,g.jsxs)(O.pZ,{value:"headered-grid",children:[(0,g.jsx)(f.$,{title:i.Ru.get("music_downloads"),total:a.length,seeAllUri:"/collection/music-downloads",alwaysShowSeeAll:!0,children:a.map(((e,a)=>(0,g.jsx)(O.pZ,{value:"card",index:a,children:x(e,a)},e.uri)))}),t&&(0,g.jsx)(f.$,{title:i.Ru.get("local-files"),total:1,showAll:!0,children:(0,g.jsx)(T,{index:0})})]}):(0,g.jsx)(N.OfflineEmptyState,{showDownloadInformation:!0})})}},35525:(e,a,t)=>{t.d(a,{A:()=>n});const n={offline:"tpweADmlLll_vhLLKgu2",emptyStateContainer:"e9Wimf8ZtOrZpvPbfWtg",icon:"zCM7ss2KtS5tWRItxyls",info:"lG5QlwmK6exKdfikWw2A"}},51132:(e,a,t)=>{t.d(a,{M:()=>T});var n=t(30758),s=t(97500),i=t.n(s),r=t(62411),l=t(60749),o=t(25270),c=t(57514),d=t(43757),u=t(75044),m=t(17640),g=t(96381),x=t(46966),f=t(84439),h=t(44538),p=t(46656),y=t(11786),b=t(43294),j=t(28957),I=t(71331),v=t(70884),C=t(16490),k=t(55405),S=t(23953);const A="udGpsOceE80fzjUaGxkU",P="wMX24UZ671wvuRJkkUOC";var w=t(86070);const E=({isPreRelease:e,publishDate:a})=>e&&a?("string"==typeof a&&(a=new Date(a)),(0,w.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",children:(0,w.jsx)("span",{children:m.Ru.get("web-player.prerelease.releases_on",{date:m.Ru.formatDate((0,S.ad)(a.toISOString()),(0,S.s7)({month:"long",day:"numeric",year:"numeric"}))})})})):null,R=({signifierText:e})=>e?(0,w.jsx)(o.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:e}):null,T=({name:e,uri:a,images:t,authorName:s,isHero:S,className:T,onClick:N,testId:O,index:H,requestId:M,isLocked:z=!1,isPlayable:L=!1,color:U,signifierText:D,isPreRelease:_=!1,publishDate:B,variant:K,consumptionCapExplanation:Z,logCardImpressions:q=!1})=>{const{playUri:F,playOptions:Q}=(0,C.J)(a),W=(0,r.wA)(),J=(0,u.NC)(k.HJU),V=!!Z,G=(0,v.I)(a),X=G?(0,w.jsx)(l.N_,{to:G.toURLPath(!0),children:s}):s,Y=(0,n.useCallback)((()=>{V&&W((0,g._3)(Z))}),[Z,W,V]);let $;return $=S?(0,w.jsx)(p.A,{className:T,index:H,onClick:N,headerText:e,featureIdentifier:"audiobook",uri:a,playOptions:Q,onPlay:V?Y:void 0,delegatePlayback:V,isPlayable:(L||V)&&J,ariaPauseLabel:m.Ru.get("tracklist.a11y.pause",e,s),ariaPlayLabel:m.Ru.get("tracklist.a11y.play",e,s),dragMimeType:I.fl.AUDIOBOOKS,renderCardImage:()=>(0,w.jsx)(f.M,{isHero:!0,images:t,color:U,FallbackComponent:e=>(0,w.jsx)(c.l,{size:"xxlarge",...e})}),renderSubHeaderContent:()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(y.t,{children:m.Ru.get("card.tag.audiobook")}),(0,w.jsx)(o.E,{variant:"bodySmall",children:X})]}),getSignifierContent:()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(E,{isPreRelease:_,publishDate:B}),(0,w.jsx)(R,{signifierText:D})]}),testId:O,requestId:M,logCardImpressions:q}):(0,w.jsx)(x.Z,{className:T,variant:K,index:H,onClick:N,headerText:e,featureIdentifier:"audiobook",uri:a,playUri:F,onPlay:V?Y:void 0,delegatePlayback:V,playOptions:Q,isPlayable:(L||V)&&J,ariaPauseLabel:m.Ru.get("tracklist.a11y.pause",e,s),ariaPlayLabel:m.Ru.get("tracklist.a11y.play",e,s),dragMimeType:I.fl.AUDIOBOOKS,renderCardImage:()=>(0,w.jsx)(f.M,{images:t,color:U,FallbackComponent:e=>(0,w.jsx)(c.l,{size:"xxlarge",...e})}),renderSubHeaderContent:()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(h.c,{lineClamp:D?1:2,children:[z&&(0,w.jsx)(d.y,{size:"small",className:A}),(0,w.jsx)(E,{isPreRelease:_,publishDate:B}),(0,w.jsx)(o.E,{as:"span",variant:"bodySmall",className:i()({[P]:_&&s}),children:X})]}),(0,w.jsx)(R,{signifierText:D})]}),testId:O,requestId:M,logCardImpressions:q}),(0,w.jsx)(b.h,{menu:(0,w.jsx)(j.p,{uri:a}),children:$})}},51890:(e,a,t)=>{t.d(a,{OfflineEmptyState:()=>c});var n=t(40479),s=t(16114),i=t(25270),r=t(17640),l=t(35525),o=t(86070);const c=({showDownloadInformation:e})=>(0,o.jsxs)("div",{className:l.A.emptyStateContainer,children:[e?(0,o.jsx)(n.i,{size:"xxlarge",className:l.A.icon}):(0,o.jsx)(s.P,{size:"xxlarge",className:l.A.icon}),(0,o.jsx)(i.E,{as:"h1",variant:"titleLarge",semanticColor:"textBase",dir:"auto",children:r.Ru.get("web-player.offline.empty-state.title")}),(0,o.jsx)(i.E,{as:"h2",variant:"bodyMedium",semanticColor:"textSubdued",dir:"auto",className:l.A.info,children:e?r.Ru.get("web-player.offline.empty-state.subtitle"):r.Ru.get("offline.callout-disconnected")})]})},55019:(e,a,t)=>{t.d(a,{y:()=>i});var n=t(30758),s=t(37525);function i(){const e=(0,s.A)(),[a,t]=(0,n.useState)(e.getIsEnabled());(0,n.useEffect)((()=>{const a=e.subscribeIsEnabled(t);return()=>a()}),[e]);return[a,(0,n.useCallback)((a=>e.setIsEnabled(a)),[e])]}},69107:(e,a,t)=>{t.d(a,{t:()=>i});var n=t(46822),s=t(11338);function i(){return(0,n.N)(s.Z)}},70884:(e,a,t)=>{t.d(a,{I:()=>m});var n=t(99101),s=t(12599);var i=t(89723),r=t(69107),l=t(5305),o=t(16318),c=t(30758),d=t(59567),u=t(88308);function m(e){const a=function(e,a,t){const n=(0,r.t)(),s=(0,l.jE)(),m=(0,c.useMemo)((()=>Array.isArray(e)?e:[e]),[e]),g=(0,c.useMemo)((()=>Array.isArray(a)?a:[a]),[a]),x=(0,u.lB)((()=>["use-metadata-extensions",m,g]),[m,g]),f=(0,c.useCallback)((()=>{s.invalidateQueries({queryKey:x})}),[s,x]);(0,c.useEffect)((()=>n.getEvents().addListener(d.C.EXPIRE,(e=>{g.includes(e.data.extensionKind)&&e.data.entityUris.some((e=>m.includes(e)))&&f()}))),[n,m,g,f]);const h=(0,c.useCallback)((t=>{const n=t.map((e=>e.extensions));let s;return s=(0,i.yQ)(a)&&"string"==typeof e?n?.at(0)?.[a]:(0,i.yQ)(a)&&"string"!=typeof e?n.map((e=>e[a])):(0,i.yQ)(a)||"string"!=typeof e?n:n.at(0),s}),[e,a]);return(0,o.I)({...t,queryKey:x,queryFn:()=>n.fetch(m,g),select:h})}(e,i.UH.IDENTITY_TRAIT,{staleTime:36e5,gcTime:72e5,enabled:(0,n.H)()}).data?.contributors.at(0)?.uri;return function(e){const a=(0,s.o_h)(e);return(0,s.Exu)(a)?a:null}(a)}},81741:(e,a,t)=>{t.d(a,{E:()=>i});var n=t(30758),s=t(29032);function i(e){var a,t,i,r,l,o=e.size?s.$Z[e.size]:e.iconSize,c=(0,s._C)([{size:16,svgContent:"<path d='M1.75 1A1.75 1.75 0 0 0 0 2.75v11.5C0 15.216.784 16 1.75 16h12.5A1.75 1.75 0 0 0 16 14.25v-9.5A1.75 1.75 0 0 0 14.25 3H7.82l-.65-1.125A1.75 1.75 0 0 0 5.655 1H1.75z'/>"},{size:24,svgContent:"<path d='M1 4a2 2 0 0 1 2-2h5.155a3 3 0 0 1 2.598 1.5l.866 1.5H21a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4z'/>"}],o||24),d=null!==(a=e.autoMirror)&&void 0!==a&&a;return n.createElement(s.In,Object.assign({},e,{autoMirror:d,viewBox:"0 0 ".concat(c.size," ").concat(c.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,l=e.titleId,r?"<title ".concat(l?'id="'.concat(l,'"'):"",">").concat(r,"</title>"):"")).concat((t=e.desc,i=e.descId,t?"<desc ".concat(i?'id="'.concat(i,'"'):"",">").concat(t,"</desc>"):"")).concat(c.svgContent)}}))}},86527:(e,a,t)=>{t.d(a,{o:()=>g});var n=t(17640),s=t(46966),i=t(84439),r=t(44538),l=t(46656),o=t(11786),c=t(43294),d=t(88800),u=t(4077),m=t(86070);const g=({images:e,name:a,uri:t,publisher:g,sharingInfo:x,mediaType:f,isHero:h=!1,onClick:p,testId:y,index:b,requestId:j,color:I,variant:v,logCardImpressions:C=!1})=>{let k;const S=f===u.Q.MIXED?n.Ru.get("type.show"):n.Ru.get("card.tag.show");return k=h?(0,m.jsx)(l.A,{index:b,onClick:p,delegatePlayback:!0,headerText:a,featureIdentifier:"show",uri:t,isPlayable:!1,renderCardImage:()=>(0,m.jsx)(i.M,{isHero:!0,images:e,color:I}),renderSubHeaderContent:()=>(0,m.jsxs)(r.c,{isHero:!0,children:[(0,m.jsx)(o.t,{children:S}),g&&(0,m.jsx)("span",{children:g})]}),testId:y,requestId:j,logCardImpressions:C}):(0,m.jsx)(s.Z,{variant:v,onClick:p,isPlayable:!1,delegatePlayback:!0,headerText:a,featureIdentifier:"show",uri:t,index:b,renderCardImage:()=>(0,m.jsx)(i.M,{isHero:h,images:e,color:I}),renderSubHeaderContent:()=>(0,m.jsx)(r.c,{children:g&&(0,m.jsx)("span",{children:g})}),testId:y,requestId:j,logCardImpressions:C}),(0,m.jsx)(c.h,{menu:(0,m.jsx)(d.H,{uri:t,sharingInfo:x}),children:k})}},98011:(e,a,t)=>{t.d(a,{e:()=>r});var n=t(81741);const s="k270skPbT7JOaSidSA2a";var i=t(86070);const r=({iconSize:e=64,...a})=>(0,i.jsx)("div",{className:s,children:(0,i.jsx)(n.E,{iconSize:e,...a,semanticColor:"textBrightAccent","aria-hidden":!0})})},98136:(e,a,t)=>{t.d(a,{P:()=>s});var n=t(55019);function s(){return(0,n.y)()[0]}}}]);
//# sourceMappingURL=xpui-routes-offline-browse.js.map