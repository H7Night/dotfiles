"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3667],{11962:(e,t,i)=>{i.d(t,{x:()=>s.x});var s=i(29652)},43874:(e,t,i)=>{i.d(t,{A:()=>s});const s={videoPlayerContainer:"ngkFeIGFyNUaxRspbs5H"}},61432:(e,t,i)=>{i.r(t),i.d(t,{PiPMiniPlayer:()=>Ui});var s=i(30758),n=i(97500),a=i.n(n),l=i(13932),r=i(71474),o=i(29174),c=i(35580),d=i(17369),u=i(25826),m=i(53397),g=i(85887),h=i(17872),x=i(60731),v=i(33009),p=i(30934),k=i(2585),N=i(29660),C=i(9856),j=i.n(C);const y=()=>!0===j().getParser(window.navigator.userAgent).satisfies({chrome:">=123",edge:">=127"}),f=()=>{y()&&window.focus()};var b=i(32002),w=i(82836),S=i(93211),B=i(17154),D=i(41097);const P="ZTvigd5RaqxtTdBzGide",R="jxNXLdUZfNhmCuYDbAKP",L="BBABURh2CZ6if4dMvq3j";var E=i(86070);const M=()=>{const{isPlayingRemotely:e,connectionStatus:t,remoteDeviceName:i,remoteDeviceType:s}=(0,w.v)((e=>{const t=(0,b.V)(e);return{isPlayingRemotely:t.isPlayingRemotely,connectionStatus:t.connectionStatus,remoteDeviceName:t.remoteDevice?.name,remoteDeviceType:t.remoteDevice?.type}}),D.a),{spec:n,logger:a}=(0,B.r)(p.s,{}),{triggerRef:l,toggleDevicePicker:r,isPickerOpen:o}=(0,N.z)(),c=(0,S.g)();if(!(e&&i&&s)&&!c)return(0,E.jsx)(E.Fragment,{});const u=(0,k.$A)(s||"unknown",t);return(0,E.jsxs)("div",{className:P,children:[(0,E.jsx)(u,{size:"xsmall",className:R,role:"presentation",semanticColor:"textPositive"}),(0,E.jsx)(h.r,{title:i,children:(0,E.jsx)(v.Y,{component:"button",onClick:()=>{const e=n.activeDeviceButtonFactory(),{interactionId:t}=a.logInteraction(o?e.hitUiHide():e.hitUiReveal());r(t),f()},ref:l,className:L,semanticColor:"textPositive",children:(0,E.jsx)(d.E,{variant:"bodySmall","aria-live":"polite",semanticColor:"textPositive",children:i})})},i??"context-item-connection-status")]})};var T=i(82358),I=i(12496);const O=({item:e,className:t})=>{const i=(0,c.L)(),s=i?.context;return(0,I.v)(e)&&s?(0,E.jsx)(T.a,{context:s,item:e,className:t}):null};var z=i(79769),W=i(37739),V=i(22286),F=i(73740),A=i(83884),H=i(53129),_=i(7344),U=i(67715),Z=i(26188);const q=({uri:e,spec:t,logger:i})=>{const n=(0,s.useRef)(e);n.current=e;const a=(0,H.z)(),l=(0,s.useMemo)((()=>t.playerControlsFactory()),[t]),r=(0,s.useCallback)((e=>{let t=null;"pause"===e?t=l.playPauseButtonFactory().hitPause({itemToBePaused:n.current}):"resume"===e&&(t=l.playPauseButtonFactory().hitResume({itemToBeResumed:n.current})),t&&i.logInteraction(t)}),[i,l]),o=(0,s.useCallback)((e=>{const t=l.likeButtonFactory(),s=e?t.hitLike({itemToBeLiked:n.current}):t.hitRemoveLike({itemNoLongerLiked:n.current});i.logInteraction(s)}),[i,l]),c=(0,s.useCallback)((()=>{const e=a.getState();if(!e)return;const t=l.previousButtonFactory().hitSkipToPrevious(K(e));i.logInteraction(t)}),[i,a,l]),d=(0,s.useCallback)((()=>{const e=a.getState();if(!e)return;const t=l.nextButtonFactory().hitSkipToNext(K(e));i.logInteraction(t)}),[i,a,l]),u=(0,s.useCallback)((e=>{const t=l.repeatButtonFactory();let s=null;switch(e){case _.p.REPEAT_TRACK:s=t.hitRepeatOneEnable();break;case _.p.REPEAT_CONTEXT:s=t.hitRepeatEnable();break;case _.p.REPEAT_NONE:s=t.hitRepeatDisable();break;default:(0,Z.k)(e)}s&&i.logInteraction(s)}),[i,l]),m=(0,s.useCallback)((e=>{const t=e?"shuffle":"linear",s=e?"linear":"shuffle",a=l.shuffleButtonFactory({uri:n.current}).hitSelectShuffleMode({previousMode:s,selectedMode:t});i.logInteraction(a)}),[i,l]),g=(0,s.useCallback)((e=>{const t=l.volumeMuteButtonFactory();i.logInteraction("muted"===e?t.hitMutePlayback():t.hitUnmutePlayback())}),[i,l]),h=(0,s.useCallback)((e=>{const t=l.volumeBarFactory();i.logInteraction(t.hitSetVolume({newVolumePercentage:Q(e)}))}),[i,l]),x=(0,s.useCallback)((e=>{const t=l.volumeBarFactory();i.logInteraction(t.dragSetVolume({newVolumePercentage:Q(e)}))}),[i,l]),v=(0,s.useCallback)((e=>{const t=l.seekBackwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,l]);return{onClickSeekForward:(0,s.useCallback)((e=>{const t=l.seekForwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,l]),onClickSeekBack:v,onClickPlayPause:r,onClickLike:o,onClickSkipPrevious:c,onClickSkipNext:d,onClickRepeat:u,onClickShuffle:m,onClickVolumeButton:g,onClickVolumeBar:h,onDragVolumeBar:x,onClickShare:(0,s.useCallback)((()=>{const e=l.shareButtonFactory({uri:n.current});i.logInteraction(e.hitCopyToClipboard())}),[i,l]),onClickProgressBar:(0,s.useCallback)((e=>{const t=l.progressBarFactory();i.logInteraction(t.hitSeekToTime({msToSeekTo:e}))}),[i,l]),onDragProgressBar:(0,s.useCallback)((e=>{const t=l.progressBarFactory();i.logInteraction(t.dragSeekToTime({msToSeekTo:e}))}),[i,l])}};function K(e){return{itemToBeSkipped:e.item?.uri||"",positionMs:(0,U.s)(e)??-1,totalContentMs:e.duration??-1}}function Q(e){return Math.floor(100*e)}var Y=i(98834),X=i(52396),J=i(94445),G=i(75168),$=i(53502);const ee="d_srhjvwD_GUA3bcCWe4",te="Y1sIRIE9_S2jPP9L89qs",ie="_qTFf4L4feIZxZ9RCcca",se="xLVzUYXestVWzpfiOPxA",ne="alofN0D4rOdnu0Y6xfcw",ae="iKzG3nPAIAbL5CZAbKJU",le="b6HgoPaw7SCowvemSx0g",re="qFpig0a2GKNJnWJFd1db",oe="PuRqtCWIESfTs0d2dULt",ce="fEVqL0T4qWVkozlVqGcy",de="lcyebQsHz0j8IkDXTAlB",ue="enGtDaA6WTTvIFhZz1wz",me="Kj0qWPCL3_VrCWRyNrMD",ge="Jo4RE0VhDecfPElNZucO";let he=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const xe=({item:e,spec:t,logger:i,size:s=he.xs,className:n})=>{const l=e.uri,r=(0,G.X)(),o=(0,J.C)(),d=(0,c.L)(),u=d?.context,{canDisplayButton:m}=(0,F.$)(e,u),{shouldShowFeedbackControls:g}=(0,A.d)(u),h=(0,V.$)(),x=g&&!h||m,{onClickLike:v}=q({uri:l,spec:t,logger:i});return(0,I.v)(e)&&u?r&&o&&(0,X.N)(e)?(0,E.jsx)("div",{className:ge,children:(0,E.jsx)(Y.o,{contextUri:e.metadata?.context_uri,id:e.uid??void 0,uri:e.uri,isActive:!0})}):(0,E.jsx)("div",{className:me,children:(0,E.jsx)(W.b,{size:x?he.xs:s,uri:l,onClick:v,className:a()(de,n),showDelayOnHover:1e3,isMiniPlayer:!0})}):(0,$.p)(e)?(0,E.jsx)(z.b,{size:s,uri:l,onClick:v,className:a()(de,n),condensed:!0}):null};var ve=i(71602),pe=i(1473),ke=i(91030);const Ne="yb0n1ZOvcsGEP6MtzpHw",Ce="wigNir143xMt4ihKMqrK",je="jbCLA5mslXPNLClPNh8h",ye="srBfv7LB0I9QnzxBpeTV",fe="V2fqnNTxbJBIOeX14ZFW",be="N5WQok6ioU_Dmf0F0O31",we="NZlJ5gYuUaWvALQ2gGfg",Se="r5_6Dsophi0MbO6WWawA",Be="kWWqvihyBXMNH5W5rCwb",De="CsqhW5xDG4TO3VV20IZJ";const Pe=({item:e,onClick:t,className:i,isSmallWidth:s})=>{const{spec:n,logger:l}=(0,B.r)(r.w,{}),o=(0,ke.N)(e)?u.Q.getAdTitle(e)??e.name:e.name,c=(0,ke.N)(e)?u.Q.getAdSubtitle():e.name,v=(0,ve.K)(),p=function(e){switch(e){case"SMALL":return{title:"bodySmall",subtitle:"marginal"};case"MEDIUM":return{title:"bodyMedium",subtitle:"bodySmall"};default:return{title:"titleSmall",subtitle:"bodySmall"}}}(v.vertical),k="SMALL"===v.vertical,{connectionStatus:N}=(0,w.v)((e=>({connectionStatus:(0,b.V)(e).connectionStatus})),D.a);return(0,E.jsxs)("div",{className:a()(Ne,i),children:[(0,E.jsx)("div",{className:fe,children:(0,E.jsxs)(h.r,{title:o,children:[(0,E.jsx)(d.E,{"data-testid":"context-item-info-title",as:"div",variant:p.title,className:be,dir:"auto",children:(0,E.jsx)(g.R,{item:e,onClick:t,adUrl:(0,ke.N)(e)?e.url:void 0,children:o})}),N===pe.zP.CONNECTED&&(0,E.jsxs)(d.E,{"data-testid":"context-item-info-subtitles",as:"div",variant:p.title,className:a()(k?we:ye,be),semanticColor:"textSubdued",children:[(0,E.jsx)("span",{className:a()(Se,{[Be]:!k}),children:"â€¢"}),(0,E.jsx)(m.n,{item:e,onClick:t})]})]},`${e.uri}-context-item-info-title`)}),(0,E.jsx)(x.l,{className:De,item:e,size:k?"xsmall":"small",variant:k?"marginal":"bodySmall",enableVideoButton:!0,isSmallWidth:s}),(0,E.jsx)("div",{className:we,children:N===pe.zP.CONNECTED?(0,E.jsx)(M,{}):(0,E.jsx)(h.r,{title:c,children:(0,E.jsx)(d.E,{"data-testid":"context-item-info-subtitles",as:"div",variant:p.subtitle,className:we,semanticColor:"textSubdued",children:(0,E.jsx)(m.n,{item:e,onClick:t})})},`${e.uri}-context-item-info-subtitles`)}),!k&&!(0,ke.N)(e)&&(0,E.jsx)("div",{className:Ce,children:(0,E.jsxs)("div",{className:je,children:[(0,E.jsx)(O,{item:e}),(0,E.jsx)(xe,{item:e,spec:n,logger:l,size:he.sm})]})})]})};var Re=i(77676),Le=i(35638),Ee=i(41443),Me=i(28239),Te=i(1697),Ie=i(39082);const Oe="U7qJ1UbUI0C76xXqYVQY",ze="wSLUJtAztEeB6cSHzEjf",We="ivh1pWB_obHbkRTZRwlA",Ve="giy3mj7QBOoIdj6wwTpe",Fe="FZZUfZ2ShpHjnzy_P6Kb",Ae="CppZQsRDE7tQVl_Uo22Y";i(43874),i(93376);const He=s.memo((({spec:e,logger:t})=>{const{openURLWithSessionTransfer:i}=(0,Ie.L)(),n=(0,Te.D)("loggedin_upgrade_button"),a=(0,Ee.g)(),l=(0,Me.k)(),{url:r,isExternal:c}=l,u=(0,s.useCallback)((()=>{let s;!1===c?(a("/premium"),s=e.upsellComponentFactory().upsellButtonFactory().hitUiNavigate({destination:"/premium"})):(i(n(r),"_blank"),s=e.upsellComponentFactory().upsellButtonFactory().hitNavigateToExternalUri({destination:r})),t.logInteraction(s)}),[c,t,a,e,i,n,r]);return(0,E.jsx)("div",{className:Oe,children:(0,E.jsxs)("div",{className:ze,children:[(0,E.jsx)(d.E,{variant:"titleSmall",dir:"auto",className:We,children:o.Ru.get("web-player.pip-mini-player.upsell.title")}),(0,E.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Ve,children:o.Ru.get("web-player.pip-mini-player.upsell.subtitle")}),(0,E.jsxs)("div",{className:Ae,children:[(0,E.jsx)(Re.$,{onClick:u,size:"small",children:o.Ru.get("web-player.pip-mini-player.upsell.cta-button")}),(0,E.jsx)(Le.H,{size:"small",onClick:()=>{const e=window.documentPictureInPicture?.window;e&&e.resizeTo(e.outerWidth-e.innerWidth+300,e.outerHeight-e.innerHeight+300)},className:Fe,children:o.Ru.get("action-trigger.button.not-now")})]})]})})}));var _e=i(70519),Ue=i(70719);const Ze="document-pip-hover-element",qe="document-pip-cover-art",Ke="document-pip-cover-art-placeholder";var Qe=i(28719),Ye=i(44944);function Xe(e,t,i,s){try{if(!e)return i;const n=getComputedStyle(e);if(!n)return i;const a=n.getPropertyValue(t),l=parseInt(a.replace(s,""),10);return isNaN(l)?i:l}catch(e){return i}}var Je=i(8558),Ge=i(57775),$e=i(70773),et=i(96283),tt=i(5956),it=i(49772),st=i(59328);const nt="wF7I8x6BNoB5TCxuQM6p",at="mTVLkxm92ETj9KUKj6We",lt="_ZzrZWfp7kDAE2lh9_Wc",rt="Z7EJBI5IBlrJ1ze7IeeW",ot="v5BmE36Bbgt7MSjmR6Xc",ct="CAQW4b5xnSED1cuM6jcp",dt="Pvgy7FmdedDiDBpWdtwf",ut="GSgApqjTNqV1hBpu3zeT",mt="cRGZivJEkNn8_Q7kaHpT",gt="jOhwShRZLQkG51TckxOL",ht="Jgem6BNDvKfWTBl3cX4W",xt="ePoosDhdXDFF4p3vqKLd",vt="QGE_nRKg4bMbNKF_e7PM",pt="ddMrU_P5vADrfZCD5KQP",kt="x591ODwZ11KBAWKS6SiE",Nt="yyE7Kg8ClZLrYU03bSoA",Ct="GJYNq4mAAnZScLzJPrZb",jt="mBYWBXnQ_1G3IS2q0zUM",yt="F7RVFhPYBKleXl4ulrwe",ft="Q4qOSqJZ_dfNRxOBhsGE",bt="hix4I_WU5iQPehn_m5h2",wt="gOpH1qSy5WZp_dGqBjSO",St="lMgtxFlYdJbfEQ0tvAqK",Bt="ZeSR2WPUGMRnwFnGoYp3",Dt="NEKBj5FX847wFAhR57Bm",Pt="dahc71cxY4Nzk6ebA2ZW",Rt="vYL9B3OtXRb7_BrVMqPs",Lt="dJY9K_yl2SIFh2sQav8J",Et="B62SqNdB5yicbOhkDWDy",Mt="ixLnBGpFXBDXJBwJAFN2",Tt="xG6CoSo4Qt0PDw74JLdM",It="COvUYZFLWyAYMoZxYBWV",Ot="GrueVX2aNdOBYUmVxO1g",zt="gDC7KBL5Cbad2gkb2ECA",Wt="YjoaIyvleWu6L_m3iqwr",Vt="Z7MRt3IpXA2HKQSwTZ3p",Ft="UqNXNAlAlrI35gbbTIlL",At="JWR17pOvN2l0NGHVAi9Q",Ht="RwUrgB_h_amNMENcAmKM",_t="UuWUqZ0KXYAc2I1R_tdl",Ut=({item:e,imageUrl:t})=>{const i=(0,_e.b)(e),s=(0,E.jsx)($e._,{className:kt,src:t,loading:"eager",testid:qe,children:(0,E.jsx)("div",{className:Nt,children:(0,E.jsx)(Ge.s,{size:"xlarge",type:e.type,"data-testid":Ke})})});return i.url?(0,E.jsx)(Ue.N,{className:pt,to:i.url,children:s}):s},Zt=()=>{const{isPlayingVideo:e}=(0,tt.o)((e=>({isPlayingVideo:(0,it.A3)(e)}))),{item:t,context:i}=(0,c.L)()??{},n=(0,s.useMemo)((()=>(0,st.h)(t?.images??void 0,{desiredSize:640,desiredLabel:"large"})),[t?.images,640]),r=(0,b.l)(),o=(0,l.NC)(Je.a4n),{isYourDJNarrator:d}=(0,Ye.C)(),u=(0,s.useRef)(null),m=(0,s.useCallback)((()=>{if(!u.current)return;const e=u.current?.children[0];if(!e)return;const{offsetWidth:t,offsetHeight:i}=u.current;let s=Math.min(t,i);s=Math.min(s,640),1===Xe(e,"--extra-padding",0,"")&&(s-=Math.max(Math.min(.1*s,64),12)),e.width=e.height=s}),[]),g=(0,et.ox)();(0,s.useEffect)((()=>(g?.addEventListener("resize",m),()=>{g?.removeEventListener("resize",m)})),[m,g]);const h=(0,ke.N)(t);let x=!e;!e||!r&&o||(x=!0);const v=(0,s.useMemo)((()=>x&&!h&&y()),[h,x]);let p;p=d?(0,E.jsx)(Qe.aU,{}):h?(0,E.jsx)(Ut,{item:t,imageUrl:n}):(0,E.jsx)($e._,{className:kt,src:n,loading:"eager",testid:qe,children:(0,E.jsx)("div",{className:Nt,children:(0,E.jsx)(Ge.s,{size:"xlarge",type:t?.type,"data-testid":Ke})})});const k=(0,s.useCallback)((()=>{v&&f()}),[v]),N=(0,s.useCallback)((e=>{"Enter"===e.key&&k()}),[k]);return t&&i&&x?(0,E.jsx)("div",{className:a()(xt,{[vt]:v}),ref:e=>{u.current=e,m()},role:"button",tabIndex:v?0:-1,onClick:k,onKeyDown:N,children:p}):null};var qt=i(55793);const Kt="rFAL3oCwNWt8hwKtPBtv",Qt="FvrxUai9k0vi672k0ZX6",Yt="beJ5feP63DJ9Mlan76C6",Xt=({children:e,hideBackground:t,ambientMode:i})=>{const s=(0,qt.w)({contrast:"highContrast"}),n=(0,qt.w)({contrast:"minContrast"});return(0,E.jsx)("div",{className:a()(Kt,{[Qt]:!t&&s&&n,[Yt]:i}),"data-testid":"pip-hover-element",style:{"--background-base":s?.["--background-base"],"--background-base-min-contrast":n?.["--background-base"]},children:e})};var Jt=i(70694),Gt=i(89568),$t=i(74396),ei=i(98418),ti=i(55910),ii=i(45730),si=i(80514),ni=i(48459);const ai=()=>(0,E.jsx)("svg",{width:"7",height:"8",viewBox:"0 0 7 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:ot,children:(0,E.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.37397 1.94965C6.60829 1.71534 6.60829 1.33544 6.37397 1.10113C6.13966 0.866812 5.75976 0.866812 5.52544 1.10113L3.47461 3.15196L1.42422 1.10157C1.18991 0.86726 0.81001 0.86726 0.575695 1.10158C0.341381 1.33589 0.341381 1.71579 0.575695 1.9501L2.62608 4.00049L0.575696 6.05087C0.341381 6.28519 0.341381 6.66509 0.575696 6.8994C0.81001 7.13372 1.18991 7.13372 1.42422 6.8994L3.47461 4.84902L5.52544 6.89985C5.75976 7.13416 6.13966 7.13416 6.37397 6.89985C6.60829 6.66554 6.60829 6.28564 6.37397 6.05132L4.32314 4.00049L6.37397 1.94965Z",fill:"#912616"})}),li=s.memo((({className:e})=>"SMALL"!==(0,ve.K)().vertical?(0,E.jsx)(Jt.U,{className:e}):(0,E.jsx)(Gt.M,{className:e}))),ri=({className:e})=>{const{setVideoPlayerUIFlag:t}=(0,ti.d)(),{onClick:i}=(0,si.D)({}),n=(0,s.useCallback)((()=>{t(ii.nP.documentPip,!1),i()}),[t,i]),l=(0,ei.mv)();return(0,E.jsxs)("div",{style:{display:"var(--mini-player-drag-display)"},className:a()(e,lt),children:[(0,E.jsx)("button",{className:rt,onClick:n,children:l.operatingSystem===ni.f.macOS?(0,E.jsx)(ai,{}):(0,E.jsx)($t.M,{size:"xsmall",className:ot})}),(0,E.jsx)(li,{className:dt}),(0,E.jsx)("div",{className:ct})]})};var oi=i(42179),ci=i(40638),di=i(67374),ui=i(36440),mi=i(52740),gi=i(54932),hi=i(55912),xi=i(91636),vi=i(14210),pi=(i(12934),i(39184)),ki=i(23736),Ni=i(64605),Ci=i(68443);const ji=({onClick:e,item:t,className:i,showDelayOnHover:s})=>(0,E.jsx)(Ci.Zp,{label:(0,ki.gHQ)(t.uri)?o.Ru.get("context-menu.copy-episode-link"):o.Ru.get("context-menu.copy-track-link"),showDelay:s,children:(0,E.jsx)("div",{className:a()(i),children:(0,E.jsx)(Ni.w,{sharingInfo:null,uri:t.uri,onClick:e,size:"small",interactionData:{type:"click",intent:"share"},disableTooltip:!0,ariaLabel:(0,ki.gHQ)(t.uri)?o.Ru.get("context-menu.copy-episode-link"):o.Ru.get("context-menu.copy-track-link"),className:ae})})});var yi=i(19723),fi=i(82455),bi=i(79530);const wi=s.memo((({pipWindowSize:e,item:t,spec:i,logger:s,direction:n,volumeIconRef:l})=>{const{onClickPlayPause:r,onClickVolumeButton:o,onClickVolumeBar:c,onDragVolumeBar:d,onClickSeekBack:u,onClickSeekForward:m}=q({uri:t.uri,spec:i,logger:s}),g=(0,ci.YQ)(d,500,{leading:!1,trailing:!0});return"DEFAULT"===e.vertical?(0,E.jsx)(gi.v,{onClick:m,className:ee}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:Lt,children:(0,E.jsx)(pi.M,{mode:pi.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:n,onToggleMuteClick:o,onVolumeBarClick:c,onVolumeBarDrag:g,className:ee,volumeIconRef:l,isMiniPlayer:!0,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Rt,children:(0,E.jsx)(mi.h,{onClick:u,className:ee,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Dt,children:(0,E.jsx)(di.x,{onClick:r,className:a()(ee,ue),showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Pt,children:(0,E.jsx)(gi.v,{onClick:m,className:ee,showDelayOnHover:1e3})})]})})),Si=s.memo((({item:e,spec:t,logger:i,pipWindowSize:s,direction:n,volumeIconRef:l})=>{const{onClickPlayPause:r,onClickSkipPrevious:o,onClickSkipNext:c,onClickVolumeButton:d,onClickVolumeBar:u,onDragVolumeBar:m,onClickSeekBack:g,onClickSeekForward:h,onClickShare:x}=q({uri:e.uri,spec:t,logger:i}),v=(0,ci.YQ)(m,500,{leading:!1,trailing:!0}),p="SMALL"===s.vertical,k="DEFAULT"===s.vertical,N="SMALL"===s.horizontal,C=k&&!N;return(0,E.jsxs)(E.Fragment,{children:[p&&(0,E.jsx)("div",{className:Ot,children:(0,E.jsx)(O,{item:e})}),p&&(0,E.jsx)("div",{className:Rt,children:(0,E.jsx)("div",{className:te,children:(0,E.jsx)(xe,{item:e,spec:t,logger:i,className:a()(ee,de,"encore-base-set")})})}),(0,E.jsx)("div",{className:Et,children:(0,E.jsx)(pi.M,{mode:pi.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:p?"horizontal":n,onToggleMuteClick:d,onVolumeBarClick:u,onVolumeBarDrag:v,className:ee,volumeIconRef:l,isMiniPlayer:!0,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Lt,children:(0,E.jsx)(mi.h,{onClick:g,className:oe,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Tt,children:(0,E.jsx)(xi.d,{onClick:o,className:le,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Dt,children:(0,E.jsx)(di.x,{iconSize:C?"medium":"small",onClick:r,className:a()(ee,ue),showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Mt,children:(0,E.jsx)(vi.$,{onClick:c,className:re,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Pt,children:(0,E.jsx)(gi.v,{onClick:h,className:ce,showDelayOnHover:1e3})}),!p&&(0,E.jsx)(ji,{item:e,onClick:x,className:ee,showDelayOnHover:1e3}),p&&(0,E.jsx)("div",{className:It,children:(0,E.jsx)(ji,{item:e,onClick:x,className:ee,showDelayOnHover:1e3})})]})})),Bi=s.memo((({item:e,spec:t,logger:i,pipWindowSize:s,direction:n,volumeIconRef:l})=>{const{onClickPlayPause:r,onClickSkipPrevious:o,onClickSkipNext:c,onClickVolumeButton:d,onClickVolumeBar:u,onDragVolumeBar:m,onClickShuffle:g,onClickRepeat:h,onClickShare:x}=q({uri:e.uri,spec:t,logger:i}),v=(0,ci.YQ)(m,500,{leading:!1,trailing:!0}),p="SMALL"===s.vertical,k="DEFAULT"===s.vertical,N="SMALL"===s.horizontal,C=k&&!N;return(0,E.jsxs)(E.Fragment,{children:[p&&(0,E.jsx)("div",{className:Ot,children:(0,E.jsx)(O,{item:e,className:ee})}),p&&(0,E.jsx)("div",{className:Rt,children:(0,E.jsx)("div",{className:te,children:(0,E.jsx)(xe,{item:e,spec:t,logger:i,className:a()(ee,de,"encore-base-set")})})}),!p&&(0,E.jsx)("div",{className:Et,children:(0,E.jsx)(pi.M,{mode:pi.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:n,onToggleMuteClick:d,onVolumeBarClick:u,onVolumeBarDrag:v,className:ee,volumeIconRef:l,isMiniPlayer:!0,showDelayOnHover:1e3})}),p&&(0,E.jsx)("div",{className:Et,children:(0,E.jsx)(pi.M,{mode:pi.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"horizontal",onToggleMuteClick:d,onVolumeBarClick:u,onVolumeBarDrag:v,className:ee,volumeIconRef:l,isMiniPlayer:!0,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:a()(Tt,ee),children:(0,E.jsx)(fi.w,{renderEnabled:()=>(0,E.jsx)(yi.a,{size:"small",withSnackbar:!1,className:se,showDelayOnHover:1e3}),renderDisabled:()=>(0,E.jsx)(hi.u,{onClick:g,className:se,showDelayOnHover:1e3})})}),(0,E.jsx)("div",{className:Lt,children:(0,E.jsx)(xi.d,{onClick:o,className:ie,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Dt,children:(0,E.jsx)(di.x,{iconSize:C?"medium":"small",onClick:r,className:a()(ee,ue),showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Pt,children:(0,E.jsx)(vi.$,{onClick:c,className:ie,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Mt,children:(0,E.jsx)(ui.s,{onClick:h,className:ne,showDelayOnHover:1e3})}),!p&&(0,E.jsx)(ji,{item:e,onClick:x,className:ee,showDelayOnHover:1e3}),p&&(0,E.jsx)("div",{className:It,children:(0,E.jsx)(ji,{item:e,onClick:x,className:ee,showDelayOnHover:1e3})})]})})),Di=s.memo((({item:e,spec:t,logger:i})=>{const n=e.uri,[a,l]=s.useState("vertical"),r=s.useRef(null),o=(0,ve.K)();if(s.useEffect((()=>{if(r.current){const e=r.current.getBoundingClientRect().top;l(e-26<80?"horizontal":"vertical")}}),[o.height]),!n)return null;if((0,ke.N)(e))return(0,E.jsx)(wi,{item:e,spec:t,logger:i,pipWindowSize:o,direction:a,volumeIconRef:r});const c=function(e){if((0,$.p)(e)||(0,bi.d)(e))return"audio"===e.mediaType||"mixed"===e.mediaType;return!1}(e);return c?(0,E.jsx)(Si,{item:e,spec:t,logger:i,pipWindowSize:o,direction:a,volumeIconRef:r}):(0,E.jsx)(Bi,{item:e,spec:t,logger:i,pipWindowSize:o,direction:a,volumeIconRef:r})}));var Pi=i(11962);const Ri=s.memo((({item:e,spec:t,logger:i,onDragEnd:n,onDragStart:a})=>{const l=e.uri,{onClickProgressBar:r,onDragProgressBar:o}=q({uri:l,spec:t,logger:i}),c=(0,s.useCallback)(((e,t)=>{switch(t){case"drag":return o(e);case"hit":return r(e);default:return(0,Z.k)(t)}}),[r,o]);return(0,E.jsx)(Pi.x,{isPreview:!1,onChange:c,onDragStart:a,onDragEnd:n,timerPlacement:"above"})}));var Li=i(8143),Ei=i(40751);const Mi=e=>{const t=(0,Ei.j)(),[i,n]=(0,s.useState)(!1),[a,r]=(0,s.useState)(!1),o=(0,s.useRef)(a),c=(0,l.NC)(Je.ikI),d=(0,s.useRef)(null),u=(0,s.useCallback)((()=>{d.current&&clearTimeout(d.current),e&&(d.current=setTimeout((()=>{n(!0)}),1e3*c))}),[c,e]);(0,s.useEffect)((()=>{e||n(!1)}),[e]);const m=(0,s.useCallback)((()=>{n(!1),u()}),[u]),g=(0,ci.YQ)(m,100,{leading:!0,trailing:!1,maxWait:1e3*(c-1)});return(0,s.useEffect)((()=>{const t=window.documentPictureInPicture?.window;return e&&t?.addEventListener("pointermove",g),()=>{t?.removeEventListener("pointermove",g),d.current&&clearTimeout(d.current)}}),[g,e]),(0,s.useEffect)((()=>{o.current!==i&&(e=>{const t=window.documentPictureInPicture?.window?.document;t&&"startViewTransition"in t&&(t.documentElement.setAttribute("data-transition","pip-mini-player"),t.startViewTransition((()=>{(0,Li.flushSync)(e)})).finished.finally((()=>{t.documentElement.removeAttribute("data-transition")})))})((()=>{r(i)})),o.current=i}),[i]),(0,s.useEffect)((()=>{e&&n(!t)}),[t,e]),a};function Ti(e){if(!e)return null;return{width:e.innerWidth,height:e.innerHeight}}var Ii=i(99413);var Oi=i(57314),zi=i(26930),Wi=i(75859),Vi=i(87389),Fi=i(14862),Ai=i(64861);var Hi=i(87612);const _i=()=>(0,E.jsxs)("svg",{className:_t,width:"9",height:"9",viewBox:"0 0 9 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,E.jsx)("line",{x1:"0.823223",y1:"8.82322",x2:"8.82322",y2:"0.823223",stroke:"#727272",strokeWidth:"0.5"}),(0,E.jsx)("line",{x1:"4.82322",y1:"8.82322",x2:"8.82322",y2:"4.82322",stroke:"#727272",strokeWidth:"0.5"})]}),Ui=(0,s.memo)((()=>{const e=(0,s.useRef)(null),[t,i]=(0,s.useState)(!1),n=(0,ve.K)(),d="SMALL"===n.vertical,u="SMALL"===n.horizontal,[m,g]=(0,s.useState)(null),[h,x]=(0,s.useState)(null),v=(0,s.useRef)(null),[p,k]=(0,s.useState)(!1),N=(0,ei.mv)().operatingSystem===ni.f.Windows,{isPlayingVideo:C}=(0,tt.o)((e=>({isPlayingVideo:(0,it.A3)(e)}))),{item:j,context:b}=(0,c.L)()??{},w=640,S="xlarge",D=(0,l.NC)(Je.Ln9),P=Mi(!0),R=(0,s.useMemo)((()=>(0,st.h)(j?.images??void 0,{desiredSize:w,desiredLabel:S})),[j?.images,w]),L=function(){const e=(0,tt.o)((e=>e?.item),((e,t)=>e?.uri===t?.uri)),t=(0,st.h)(e?.images||void 0,{desiredLabel:"large",desiredSize:600})??e?.images?.[0]?.url??"",{data:i}=(0,Ai.g)([t]);return i??null}(),M=(0,Vi.z)(R,"transparent"),T=(0,l.NC)(Je.a4n);(0,Wi.M)({desiredSize:w,desiredLabel:S});const{spec:I,logger:O}=(0,B.r)(r.w,{});(({spec:e,logger:t})=>{const i=(0,et.ox)(),n=(0,s.useRef)(null);null===n.current&&(n.current=Ti(i)),(0,Ii.s)((()=>{const s=Ti(i);null!==s&&null!==n.current&&(t.logInteraction(e.dragUiResize2d({startWidthPx:n.current.width,startHeightPx:n.current.height,endWidthPx:s.width,endHeightPx:s.height})),n.current=s)}),{throttleTime:500,leading:!1,trailing:!0})})({logger:O,spec:I}),(({spec:e,logger:t,pipWindow:i})=>{(0,s.useEffect)((()=>{if(!i)return;const s=s=>{if(s.currentTarget===i){const i=e.windowControlsFactory().closeButtonFactory().hitUiHide();t.logInteraction(i)}};return i.addEventListener("pagehide",s),()=>{i.removeEventListener("pagehide",s)}}),[t,i,e])})({logger:O,spec:I,pipWindow:window.documentPictureInPicture?.window??null});const{setVideoPlayerUIFlag:z}=(0,ti.d)(),[W,V]=(0,s.useState)("");(0,s.useLayoutEffect)((()=>{V(at)}),[]),(0,s.useEffect)((()=>{T&&z(ii.nP.documentPip,!0)}),[T,z]);const{enqueueSnackbar:F}=(0,zi.d)(),A=(0,s.useCallback)((e=>{var t;(t=e.target)&&"object"==typeof t&&"nodeName"in t&&"A"===t.nodeName&&"_blank"!==e.target.target&&(y()?f():F(o.Ru.get("web-player.pip-mini-player.snackbar.link-opened-in-main-window")))}),[F]);((e,t)=>{const i=(0,et.ox)(),n=t??i;(0,s.useEffect)((()=>{e&&n&&(n.document.title=e)}),[e,n])})(o.Ru.get("web-player.pip-mini-player.window-title"));const H=(0,s.useRef)(null),_=(0,l.NC)(Je.HYy),U=(0,Hi.t)(I,_),[Z,q]=(0,s.useState)(!1),[K,Q]=(0,s.useState)(!1),Y=(0,s.useRef)(null),X=(0,s.useRef)(null),J=(0,s.useCallback)((()=>{q(!0),Y.current&&clearTimeout(Y.current),Y.current=setTimeout((()=>{q(!1);const e=Xe(H.current,"--mouse-active-over-controls-fadeout-timeout",300,"ms");X.current&&clearTimeout(X.current),X.current=setTimeout((()=>{X.current=null}),e)}),1e3)}),[]),G=(0,s.useCallback)((()=>{X.current||q(!1)}),[]),$=(0,s.useCallback)((()=>{Q(!0)}),[]),ee=(0,s.useCallback)((()=>{Q(!1)}),[]),te=(0,s.useCallback)((()=>{i(!0)}),[]),ie=(0,s.useCallback)((()=>{i(!1)}),[]),se=(0,s.useCallback)((()=>{k(!0)}),[]),ne=(0,s.useCallback)((()=>{k(!1),ie()}),[ie]),ae=(0,s.useCallback)((()=>{if(v.current){const e=v.current.getBoundingClientRect(),t=.5,i=.5,s=e.width*t-2.5,n=e.width*i-2.5;g(s),x(n)}}),[]);(0,s.useEffect)((()=>{ae()}),[n.width,n.height,ae]),(0,s.useEffect)((()=>{const e=()=>{ae()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[ae]),(0,s.useEffect)((()=>{const e=new ResizeObserver(ae),t=v.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}}),[ae]);const le=(0,s.useCallback)((e=>{if(!t)return;const i=v.current;if(i){const t=i.getBoundingClientRect(),s=("rtl"===document.documentElement.dir?t.right-e.clientX:e.clientX-t.left)/t.width,n=1-s,a=t.width*s-2.5,l=t.width*n-2.5;a>40&&l>80&&(g(a),x(l))}}),[t]);if(!j||!b)return null;const re=(0,ke.N)(j),oe=!D&&!re,ce={"--background-color":M,"--background-image-url":`url(${R})`,"--background-image-width":"640px","--background-image-height":"640px","--player-controls-max-width":re?"140px":"260px","--cinema-mode-border-radius":N?"4px":"6px","--cinema-mode-top-offset":N?"-25px":"-26px",display:"var(--mini-player-display)",cursor:t?"grabbing":"default"};return(0,E.jsxs)(Oi.SnackbarProvider,{domRootRef:e,children:[(0,E.jsxs)("div",{ref:H,className:a()("encore-dark-theme","encore-small-devices-theme",nt),style:{"--mini-player-display":"none","--mini-player-drag-display":"none"},children:[(0,E.jsx)(ri,{}),(0,E.jsxs)("div",{className:a()(mt,gt,{[St]:P}),style:ce,ref:U,onMouseLeave:ne,onMouseEnter:se,children:[oe&&(0,E.jsx)(He,{spec:I,logger:O}),(0,E.jsx)(Fi.d,{dynamicColors:L,children:(0,E.jsx)(Xt,{hideBackground:C,ambientMode:P,children:(0,E.jsx)("div",{className:ht,id:"document-pip-main-container",children:(0,E.jsx)(Zt,{})})})}),!d&&(0,E.jsx)(Pe,{item:j,className:wt,onClick:A,isSmallWidth:u}),d?(0,E.jsxs)("div",{ref:v,className:Bt,style:{display:"grid",gridTemplateColumns:`${m}px 5px ${h}px`,gridTemplateAreas:"'contextinfo divider playercontrols'"},role:"button",tabIndex:0,onMouseMove:le,onMouseUp:ie,onMouseLeave:ie,children:[(0,E.jsx)("div",{className:At,children:(0,E.jsx)(Pe,{item:j,className:wt,onClick:A,isSmallWidth:u})}),p&&!u&&(0,E.jsx)("div",{className:zt,dir:"ltr",children:(0,E.jsx)("div",{className:a()(Vt,{[Ft]:t}),onMouseDown:te,tabIndex:-1,role:"button",children:(0,E.jsx)("div",{className:Wt})})}),(0,E.jsxs)("div",{className:a()("encore-over-media-set",Ct,{[bt]:Z||K,[ft]:(0,ke.N)(j)}),dir:"ltr","data-testid":Ze,onMouseEnter:J,onMouseMove:J,onMouseLeave:G,children:[(0,E.jsx)("div",{className:a()(jt,Ht),dir:"ltr",children:(0,E.jsx)(Di,{item:j,spec:I,logger:O})}),(0,E.jsx)("div",{className:a()(yt),dir:"ltr",children:(0,E.jsx)(Ri,{item:j,spec:I,logger:O,onDragEnd:ee,onDragStart:$})})]})]}):(0,E.jsxs)("div",{className:a()("encore-over-media-set",Ct,{[bt]:Z||K,[ft]:(0,ke.N)(j)}),dir:"ltr","data-testid":Ze,onMouseEnter:J,onMouseMove:J,onMouseLeave:G,children:[(0,E.jsx)("div",{className:a()(jt),dir:"ltr",children:(0,E.jsx)(Di,{item:j,spec:I,logger:O})}),(0,E.jsx)("div",{className:a()(yt),dir:"ltr",children:(0,E.jsx)(Ri,{item:j,spec:I,logger:O,onDragEnd:ee,onDragStart:$})})]})]}),(0,E.jsx)("div",{className:W,children:(0,E.jsx)(oi.B,{fadeIn:!1})}),(0,E.jsx)("div",{ref:e,className:ut})]}),(0,E.jsx)(_i,{})]})}))},82358:(e,t,i)=>{i.d(t,{a:()=>s.a});var s=i(42956)},87389:(e,t,i)=>{i.d(t,{r:()=>c,z:()=>d});var s=i(30758),n=i(66590),a=i(5916),l=i(13625),r=i(96455),o=i(30675);function c(e=null){const{request:t}=(0,s.useContext)(r.j),{data:i}=(0,o.I)({queryKey:["extracted-color",e],queryFn:()=>e?(0,l.j)(t,e).then((([{colorDark:e,colorLight:t,colorRaw:i}])=>({colorDark:e.toCSS(a.a.HEX),colorLight:t.toCSS(a.a.HEX),colorRaw:i.toCSS(a.a.HEX)}))):null,gcTime:864e5,staleTime:216e5,enabled:!!e});return i??void 0}function d(e=null,t=n.l0o,i="colorRaw"){return c(e)?.[i]??t}}}]);
//# sourceMappingURL=xpui-pip-mini-player.js.map