"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{1967:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ji});var s=a(30758),i=a(62411),r=a(85387),l=a(25270),n=a(75044),o=a(9643),c=a(12599),d=a(17640),u=a(57211),m=a(78557),p=a(86070);const y=(e,t,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(a),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),x=({clickTracking:e,clickThrough:t,thirdPartyImpression:a,impression:r,logoUrl:n,advertiserName:o,creativeId:c,lineItemId:u})=>{const x=(0,i.wA)(),[h,g]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(x((0,m.tb)()),x((0,m.i2)(y("event_viewed",c,u))),()=>{x((0,m.zV)())})),[x,c,u]),(0,p.jsxs)("div",{className:"sponsor-container",children:[(0,p.jsx)(l.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:d.Ru.get("playlist.presented_by",o)}),(0,p.jsxs)("div",{className:"sponsor-logo",children:[(0,p.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:t,onClick:()=>{x((0,m.i2)(y("event_clicked",c,u))),g(!0)},children:(0,p.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:n,alt:o,"data-ta-id":"sponsor-logo"})}),(0,p.jsx)("img",{className:"sponsor-logo__imp-pixel",src:r,alt:""}),a&&(0,p.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),h&&(0,p.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},h=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((t=>t.ads.sponsoredPlaylist.previewAd||t.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,s.useEffect)((()=>{a||t((0,m.uP)(e))}),[t,e,a]),a?(0,p.jsx)("div",{children:(0,p.jsx)(x,{...a})}):null},g=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),r=(0,i.d4)((e=>e.ads.sponsoredPlaylist.previewAd));(0,s.useEffect)((()=>{a||t((0,m.uU)())}),[t,a]);const l=r||a&&((e,t)=>{const a=Date.now()/1e3,s=e.split(":"),i=s[s.length-1];return t.some((({playlistId:e,endTime:t,startTime:s})=>e===i&&a>=s&&a<(t||a+1)))})(e,a);return l?(0,p.jsx)(h,{playlistUri:e}):null};var b=a(71331),f=a(18703),A=a(98587),j=a(80478),T=a(31988),R=a(83467),C=a(83154),v=a(65355),k=a(61166),S=a(25070),E=a(61642),I=a(19758),P=a(56691),w=a(32379),N=a(66733),L=a(5141);var U=a(76151),_=a(6306),B=a(59993),M=a(24792),O=a(31491);const D=new M.l("queryInlineCurationSearchV2","query","d2738708e23c1bb63d6fe1bed09cdb91333fdbc988352cbb9e3e47a2d517e918",null),F=new M.l("queryInlineCurationSearchV2Booklists","query","d2738708e23c1bb63d6fe1bed09cdb91333fdbc988352cbb9e3e47a2d517e918",null),V=new M.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),$=new M.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null);var z=a(75539),H=a(53321),q=a(81637);function W(e){return{type:z.c.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authorsV2?.map((e=>e?.name)).join(d.Ru.getSeparator())||"",authors:e.authorsV2,images:e.coverArt?.sources??[],isLocked:(0,H.e$)(e.accessInfo),isExplicit:e.contentRatingV2?.labels.includes(q.av.Explicit),durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map((e=>({uri:e.destinationUri,title:e.contextualName})))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var K=a(96617),Y=a(35691),J=a(1855),Q=a(91563);function G(e){return{type:z.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,Y.r)(e.coverArt)}}function X(e){if("Album"!==e.data.__typename)return null;return G(e.data)}function Z(e){const t=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(t??[]).map((e=>X(e))).filter(J.P)||[]}function ee(e){if("Artist"!==e.data.__typename)return null;const t=e.data;return{type:z.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,Y.r)(t.visuals.avatarImage)}}function te(e){if("Episode"!==e.data.__typename)return null;const t=e.data,a=t.podcastV2.data;return"Podcast"!==a.__typename?null:{type:z.c.EPISODE,uri:t.uri,id:t.id,name:t.name,images:(0,Y.r)(t.coverArt),isExplicit:t.contentRating?.label===q.x7.Explicit,is19PlusOnly:t.contentRating?.label===q.x7.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:t.playability.playable}}function ae(e){const t=(0,Y.r)(e.albumOfTrack?.coverArt||null);return{type:z.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:t.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===q.x7.Explicit,is19PlusOnly:e.contentRating?.label===q.x7.NineteenPlus}}function se(e){if("Track"!==e.data.__typename)return null;return ae(e.data)}function ie(e){return(e?.itemsV2??[]).map((e=>{const t=(0,K.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return X(t);case"ArtistResponseWrapper":return ee(t);case"EpisodeResponseWrapper":return te(t);case"TrackResponseWrapper":return se(t);default:return(0,Q.k)(t),null}})).filter(J.P)||[]}function re(e){return(e?.itemsV2??[]).map((e=>{const t=(0,K.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?W(t.data):null})).filter(J.P)||[]}const le=async(e,t,a,s=0,i=10,r=10)=>{const l={term:t,offset:s,limit:i,numberOfTopResults:r};if(a){const a=await e(F,l),s=a?.data?.searchV2;return s?(n=t,{albums:[],artists:[],episodes:[],tracks:[],topResults:re(s.topResultsV2)??[],query:n}):null}var n;const o=await e(D,l),c=o?.data?.searchV2;return c?function(e,t){return{albums:Z(e.albumsV2)??[],artists:(i=e.artists,((i?.items??[]).map((e=>ee(e))).filter(J.P)||[])??[]),episodes:(s=e.episodes,((s?.items??[]).map((e=>te(e))).filter(J.P)||[])??[]),tracks:(a=e.tracksV2,((a?.items??[]).map((e=>se(e.item))).filter(J.P)||[])??[]),topResults:ie(e.topResultsV2)??[],query:t};var a,s,i}(c,t):null},ne=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(V,i),l=r?.data?.albums;return l?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((e=>ae(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Q.k)(t),null}}(l):null},oe=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e($,i),l=r?.data?.artists;return l?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((e=>G(e)))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((e=>ae(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Q.k)(t),null}}(l):null};let ce=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const de=(e,t)=>"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:("NAV_TO_RESULTS"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:ce.SEARCH,term:t.term,title:""}]}),e);var ue=a(97500),me=a.n(ue),pe=a(40638),ye=a(54195);const xe="playlist-inlineSearchBox-filterInputContainer",he="playlist-inlineSearchBox-filterInput",ge="playlist-inlineSearchBox-overlay",be="playlist-inlineSearchBox-searchIconContainer",fe="playlist-inlineSearchBox-searchIcon",Ae="playlist-inlineSearchBox-clearButton",je=s.memo((function({placeholder:e,onChange:t=()=>{},onFocus:a=()=>{}}){const[i,r]=(0,s.useState)(""),n=(0,s.useRef)(null),o=(0,pe.YQ)((e=>{t(e)}),200),c=(0,s.useCallback)((e=>{const t=e.currentTarget.value;r(t),o(t)}),[r,o]),u=(0,s.useCallback)((()=>{n.current&&n.current.focus(),r(""),t("")}),[r,t]),m=(0,s.useCallback)((e=>{"Escape"===e.key&&i&&u()}),[i,u]);return(0,p.jsxs)("div",{className:xe,role:"search",children:[(0,p.jsx)(l.E,{as:"input",variant:"bodySmall",ref:n,className:me()(he),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:c,onKeyDown:m,onFocus:a,value:i}),(0,p.jsxs)("div",{className:ge,children:[(0,p.jsx)("span",{className:be,children:(0,p.jsx)(ye.C,{size:"small",className:fe,"aria-hidden":"true"})}),i&&(0,p.jsx)("button",{className:Ae,onClick:u,"aria-label":d.Ru.get("search.a11y.clear-input"),children:(0,p.jsx)(U.M,{size:"small"})})]})]})}));var Te=a(40822),Re=a(44483),Ce=a(50962),ve=a(49026);const ke=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ce.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Re.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[ve.$.TITLE_AND_ARTIST,ve.$.ALBUM,ve.$.ADD]});var Se=a(90513);const Ee=({renderRow:e,searchResults:t})=>{const a=t.filter((e=>e.type===z.c.TRACK)),s=t.filter((e=>e.type===z.c.ALBUM));return(0,p.jsxs)("div",{children:[(0,p.jsx)(l.E,{as:"p",variant:"bodyMediumBold",className:Se.A.artistResultListTitle,children:d.Ru.get("playlist.curation.popular_songs")}),(0,p.jsx)(Ce.S4,{ariaLabel:d.Ru.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:Re.qq,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[ve.$.TITLE_AND_ARTIST,ve.$.ALBUM,ve.$.ADD]}),(0,p.jsx)(l.E,{as:"p",variant:"bodyMediumBold",className:Se.A.artistResultListTitle,children:d.Ru.get("playlist.curation.albums")}),(0,p.jsx)(Ce.S4,{ariaLabel:d.Ru.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:Re.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[ve.$.TITLE_AND_ARTIST,ve.$.ALBUM,ve.$.ADD]})]})},Ie=({renderRow:e,searchResults:t,renderSeeAllRow:a,seeAllXList:s})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Ce.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Re.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[ve.$.TITLE_AND_ARTIST,ve.$.ALBUM,ve.$.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,p.jsx)(Ce.S4,{ariaLabel:d.Ru.get("search.title.all"),renderRow:a,rowPlaceholder:Re.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[ve.$.TITLE_AND_ARTIST,ve.$.ALBUM,ve.$.ADD],testID:"playlist-inline-curation-see-all-options"})]}),Pe=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ce.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Re.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[ve.$.TITLE_AND_ARTIST,ve.$.ALBUM,ve.$.ADD]}),we=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ce.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Re.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[ve.$.TITLE_AND_ARTIST,ve.$.ALBUM,ve.$.ADD]}),Ne=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ce.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Re.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[ve.$.TITLE_AND_ARTIST,ve.$.ALBUM,ve.$.ADD]});var Le=a(40621),Ue=a(34721);const _e="G2t3w2AAeb5OXp0_GeWs",Be="saVjTFMyWYUz975_tkQm",Me="thi8fNCkEhutRkDC90c0",Oe="pHVlkChuJpEnBQyU3ADv",De="ENWs3JxcqtD98_8fbPz2",Fe="L8IUKEJL6JiTyE_qUVCc",Ve="XcyjdXgsNX0DBt72tfiD",$e="VhJnuS7UcUPfIlzD8dlU",ze="He29vQ5anFj_bJ5iEaI2",He=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(Ue.$,{className:De,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:ze,onClick:s,children:[(0,p.jsxs)(Le.T,{columnIndex:0,className:Fe,children:[void 0!==i?(0,p.jsx)("img",{className:Me,src:i,alt:e.name}):null,(0,p.jsxs)("div",{className:Ve,children:[(0,p.jsx)(l.E,{as:"p",className:Oe,variant:"bodyMedium",children:e.name}),(0,p.jsx)(l.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.Ru.get("album")})]})]}),(0,p.jsx)(Le.T,{columnIndex:1}),(0,p.jsx)(Le.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:$e,onClick:s,children:a?(0,p.jsx)(B.g,{}):(0,p.jsx)(_.V,{})})})]})})};var qe=a(96342);const We=({size:e})=>(0,p.jsx)("div",{className:Be,children:(0,p.jsx)(qe.r,{size:e})}),Ke=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(Ue.$,{className:De,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:ze,onClick:s,"data-testid":"playlist-inline-curation-artist",children:[(0,p.jsxs)(Le.T,{columnIndex:0,className:Fe,children:[void 0!==i?(0,p.jsx)("img",{className:_e,src:i,alt:e.name}):(0,p.jsx)(We,{size:"small"}),(0,p.jsxs)("div",{className:Ve,children:[(0,p.jsx)(l.E,{as:"p",className:Oe,variant:"bodyMedium",children:e.name}),(0,p.jsx)(l.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.Ru.get("artist")})]})]}),(0,p.jsx)(Le.T,{columnIndex:1}),(0,p.jsx)(Le.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:$e,onClick:s,children:a?(0,p.jsx)(B.g,{}):(0,p.jsx)(_.V,{})})})]})})};var Ye=a(80366),Je=a(43294),Qe=a(56952),Ge=a(56543),Xe=a(44363),Ze=a(33675),et=a(58193),tt=a(68607),at=a(42743),st=a(2959),it=a(67037),rt=a(35301),lt=a(12543),nt=a(60707),ot=a(78249),ct=a(76541),dt=a(88774),ut=a(82232),mt=a(3754),pt=a(83223),yt=a(56838),xt=a(86697);const ht=s.memo((function({uid:e,uri:t,isPlayable:a,isMOGEFRestricted:i,isExplicit:r,contextUri:l,name:n,imgUrl:o,index:c,podcast:u,usePlayContextItem:m}){const y=(0,s.useMemo)((()=>l.replace("internal:recs:","")),[l]),x=(0,lt.W)(),{addItems:h}=(0,pt.x)(y),{isActive:g,isPlaying:b,triggerPlay:f,togglePlay:A}=m({uid:e,uri:t,index:c}),j=(0,s.useCallback)((()=>{h([t],{after:"end"}),x({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:y})}),[h,t,x,y]),T=(0,mt.T)(t),{isPlayable:R,isAnyArtistBanned:C}=(0,nt.g)(t,{isPlayable:a}),{badges:v,hasBadges:k}=(0,yt.b)({downloadAvailability:T,isExplicit:r,isMOGEFRestricted:i});return(0,p.jsx)(ut.pZ,{value:"row",index:c,children:(0,p.jsx)(Je.h,{menu:(0,p.jsx)(Qe.b,{uri:t,contextUri:l}),children:(0,p.jsxs)(rt.w,{uri:t,contextUri:t,isPlayable:R,isAnyArtistBanned:C,onTriggerPlay:()=>{f()},isActive:g,ageRestricted:i,index:c,ariaRowIndex:c,dragMetadata:{name:n,createdBy:u.name},isExplicit:r,children:[(0,p.jsxs)(at.U,{ariaColIndex:0,children:[(0,p.jsx)(Ze.u,{uri:t,src:o,onClick:()=>{A()},isLocked:!1,isPlaying:b,isActive:g,isEpisode:!0,playAriaLabel:d.Ru.get("tracklist.a11y.play",n,u.name)}),(0,p.jsxs)(et.l,{children:[(0,p.jsx)(it.p,{titleText:n,children:n}),k&&(0,p.jsxs)(Xe.P,{children:[v.download&&(0,p.jsx)(ct._,{}),v.explicit&&(0,p.jsx)(ot.U,{}),v.nineteen&&(0,p.jsx)(dt.q,{className:xt.A.nineteen,size:16})]})]})]}),(0,p.jsx)(st.o,{ariaColIndex:1,children:(0,p.jsx)(Ge.g,{uri:u.uri,name:u.name,children:u.name})}),(0,p.jsx)(tt.l,{ariaColIndex:2,children:(0,p.jsx)(Ye.n,{size:"small",onClick:j,children:d.Ru.get("playlist.extender.button.add")})})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),gt=({episode:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(ht,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:s}),bt=({label:e,index:t,isRTL:a,onClick:s})=>(0,p.jsx)(Ue.$,{className:De,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":e,className:ze,onClick:s,children:[(0,p.jsx)(Le.T,{columnIndex:0,className:Fe,children:(0,p.jsx)(l.E,{as:"p",className:Oe,variant:"bodyMedium",children:e})}),(0,p.jsx)(Le.T,{columnIndex:1}),(0,p.jsx)(Le.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:$e,onClick:s,children:a?(0,p.jsx)(B.g,{}):(0,p.jsx)(_.V,{})})})]})});var ft=a(64414),At=a(51775),jt=a(24498),Tt=a(87017),Rt=a(91343),Ct=a(6723),vt=a(81315),kt=a(88429),St=a(16772),Et=a(99150);const It=s.memo((function({uid:e,uri:t,name:a,imgUrl:i,artists:r,isExplicit:l,index:n,album:o,contextUri:c,isPlayable:u,isMOGEFRestricted:m,usePlayContextItem:y,durationMs:x,shouldRenderDuration:h,internalLink:g}){const{spec:b,logger:f}=(0,L.r)(ft.i,{data:{position:n,reason:"",uri:t}}),A=(0,s.useMemo)((()=>c.replace("internal:recs:","")),[c]),j=(0,lt.W)(),{addItems:T}=(0,pt.x)(A),{isActive:R,isPlaying:C,triggerPlay:v,togglePlay:k}=y({uid:e,uri:t,index:n}),S=(0,s.useCallback)((()=>{f.logInteraction(b.addButtonFactory().hitAddToPlaylist({playlist:A,itemToBeAdded:t})),T([t],{after:"end"}),j({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:A})}),[f,b,A,t,T,j]),E=(0,mt.T)(t),{isPlayable:I,isAnyArtistBanned:P}=(0,nt.g)(t,{isPlayable:u,isLocal:!1,isOutOfMarket:!1,artistUris:r?.map((e=>e.uri))}),{unBanArtists:w}=(0,St.M)(r.map((e=>e.uri))),N=r.map((e=>e.name)).join(d.Ru.getSeparator()),{badges:U,hasBadges:_}=(0,yt.b)({downloadAvailability:E,isExplicit:l,isMOGEFRestricted:m}),B=h&&x,M=r.map((e=>e.name)).join(d.Ru.getSeparator()),O=(0,Et.c)();return(0,p.jsx)(ut.pZ,{value:"row",index:n,children:(0,p.jsx)(Je.h,{menu:(0,p.jsx)(At.P,{uri:t,albumUri:o.uri,artists:r,contextUri:c}),children:(0,p.jsxs)(rt.w,{uri:t,contextUri:c,isPlayable:I,isAnyArtistBanned:P,handleArtistBanUndoClick:w,onTriggerPlay:(e,t)=>{v({loggingParams:t})},isActive:R,ageRestricted:m,index:n,ariaRowIndex:n,dragMetadata:{name:a,createdBy:N},spec:b,className:xt.A.isRecommendedTrackListRow,isExplicit:l,children:[(0,p.jsxs)(at.U,{ariaColIndex:0,children:[(0,p.jsx)(Ze.u,{uri:t,src:i,onClick:(e,t)=>{k({loggingParams:t})},isLocked:!1,isPlaying:C,isActive:R,playAriaLabel:d.Ru.get("tracklist.a11y.play",a,N),spec:b}),(0,p.jsxs)(et.l,{children:[g&&O?(0,p.jsx)(jt.N,{to:t,className:xt.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(it.p,{titleText:a,children:a})}):(0,p.jsx)(it.p,{titleText:a,children:a}),_&&(0,p.jsxs)(Xe.P,{children:[U.explicit&&(0,p.jsx)(ot.U,{}),U.download&&(0,p.jsx)(ct._,{}),U.nineteen&&(0,p.jsx)(dt.q,{className:xt.A.nineteen,size:16})]}),(0,p.jsx)(vt.p,{children:(0,p.jsx)(Tt.l,{artists:r,spec:b})})]})]}),(0,p.jsx)(st.o,{ariaColIndex:1,children:(0,p.jsx)(Ge.g,{uri:o.uri,name:o.name,creatorUri:r?.[0]?.uri,spec:b,children:o.name})}),(0,p.jsx)(st.o,{ariaColIndex:2,children:(0,p.jsx)("span",{})}),(0,p.jsxs)(tt.l,{ariaColIndex:3,children:[B?(0,p.jsx)(kt.d,{uri:t}):null,B?(0,p.jsx)(Rt.P,{duration:x,dataTestId:"render-duration"}):(0,p.jsx)(Ye.n,{size:"small",onClick:S,"aria-label":d.Ru.get("addToPlaylist-icon.label"),"data-testid":"add-to-playlist-button",children:d.Ru.get("playlist.extender.button.add")}),B?(0,p.jsx)(Ct.Y,{menu:(0,p.jsx)(At.P,{uri:t,albumUri:o.uri,contextUri:c,artists:r}),label:d.Ru.get("more.label.track",a,M)}):null]})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),Pt=({track:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(It,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:s});var wt=a(37833),Nt=a(42668);const Lt=({resultList:e,level:t,isRTL:a,playlistUri:i,navToResults:r,navToEntity:n,term:o,isBooklist:u})=>{let m=e;const y=(e=>e.map((e=>{if(e.type===z.c.TRACK||e.type===z.c.EPISODE){const{uri:t,id:a}=e;return{type:(0,c.U_m)(t)?z.c.TRACK:z.c.EPISODE,uri:t,uid:a,provider:null}}return null})).filter(J.P))(e),{draggable:x,onDragStart:h}=(0,wt.P)(),{addItems:g}=(0,pt.x)(i),f=(0,s.useCallback)((e=>{g([e],{after:"end"})}),[g]),{usePlayContextItem:A}=(0,Nt.P)({uri:`${i.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(o)}:${t?.navType??0}`,pages:[{items:y}]},{featureIdentifier:"search"}),j=(0,s.useCallback)(((e,t)=>(0,p.jsx)(bt,{isRTL:a,index:t,label:e.label,onClick:()=>{r({navType:e.type,term:o,title:e.label})}},e.uri)),[a,r,o]),T=(0,s.useCallback)(((e,t)=>e.type===z.c.ARTIST?(0,p.jsx)(Ke,{isRTL:a,index:t,searchResult:e,onClick:()=>{n({navType:ce.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===z.c.EPISODE?(0,p.jsx)(gt,{index:t,episode:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:A},e.uri):e.type===z.c.TRACK?(0,p.jsx)(Pt,{index:t,track:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:A},e.uri):e.type===z.c.ALBUM?(0,p.jsx)(He,{index:t,isRTL:a,searchResult:e,onClick:()=>{n({navType:ce.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,p.jsx)(Te.H,{book:e,index:t,featureIdentifier:"playlist_recommendations",contextUri:i,isRecommendation:!0,onAddClick:f,showSeparator:0!==t},e.uri)),[a,n,f,i,A]);if(""===o)return(0,p.jsx)("div",{className:Se.A.emptySearchTermContainer});if(!e||0===e?.length)return(0,p.jsxs)("div",{className:Se.A.emptyStateContainer,children:[(0,p.jsx)(l.E,{as:"h1",variant:"titleSmall",children:d.Ru.get("search.empty-results-title",o)}),(0,p.jsx)(l.E,{as:"p",variant:"bodySmall",children:d.Ru.get("search.empty-results-text")})]});if(t?.navType===ce.SEARCH){const t=[{type:ce.ARTISTRESULTS,label:d.Ru.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:ce.ALBUMRESULTS,label:d.Ru.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:ce.TRACKRESULTS,label:d.Ru.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return m=e,u?(0,p.jsx)(p.Fragment,{children:m.map(((e,t)=>e&&e.type===z.c.AUDIOBOOK?(0,p.jsx)(Te.H,{contextUri:i,index:t,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,onAddClick:f,draggable:x,onDragStart:t=>{h(t,{itemUris:[e.uri],itemMimeTypes:[b.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null))}):(0,p.jsx)(Ie,{renderRow:T,searchResults:m,renderSeeAllRow:j,seeAllXList:t})}return t?.navType===ce.ALBUM?(0,p.jsx)(ke,{renderRow:T,searchResults:m}):t?.navType===ce.ARTIST?(0,p.jsx)(Ee,{renderRow:T,searchResults:m}):t?.navType===ce.ALBUMRESULTS?(0,p.jsx)(Pe,{renderRow:T,searchResults:m}):t?.navType===ce.TRACKRESULTS?(0,p.jsx)(Ne,{renderRow:T,searchResults:m}):t?.navType===ce.ARTISTRESULTS?(0,p.jsx)(we,{renderRow:T,searchResults:m}):null};var Ut=a(54642),_t=a(23426);const Bt=({playlistUri:e,hideInlineCuration:t,isBooklist:a})=>{const[i,r]=(0,s.useState)([]),[n,o]=(0,s.useState)(),c=(0,Ut.W)(),{level:u,changeTerm:m,goBack:y,navToEntity:x,navToResults:h,term:g}=(()=>{const[e,t]=(0,s.useReducer)(de,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:i}=e;return{changeTerm:e=>{t({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{t({type:"GO_BACK"})},navToEntity:e=>{t({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{t({type:"NAV_TO_RESULTS",level:e})},term:i}})(),{request:b}=(0,s.useContext)(_t.j),{spec:f,logger:A,UBIFragment:j}=(0,L.r)(N.e,{}),T=(0,s.useCallback)((e=>{m(e),e?A.logInteraction(f.searchBarFactory().keyStrokeFilter()):A.logInteraction(f.searchBarFactory().hitClearFilter())}),[m,A,f]);return(0,s.useEffect)((()=>{let e=!0;return(async()=>{if(u)switch(u.navType){case ce.SEARCH:try{if(!n||n.query!==g&&""!==g){const t=await le(b,g,a);e&&o(t)}else""===g&&r([])}catch{r([])}n&&r(n.topResults);break;case ce.ARTISTRESULTS:n&&r(n?.artists);break;case ce.ALBUMRESULTS:n&&r(n?.albums);break;case ce.TRACKRESULTS:n&&r(n?.tracks);break;case ce.EPISODERESULTS:n&&r(n?.episodes);break;case ce.ALBUM:try{const t=await ne(b,u.uri,100,0);e&&t&&r(t.tracks)}catch{r([])}break;case ce.ARTIST:try{const t=await oe(b,u.uri,100,0);e&&t&&r([...t.albums,...t.tracks])}catch{r([])}}})(),()=>{e=!1}}),[u,g,n,b,a]),(0,p.jsxs)(j,{spec:f,children:[(0,p.jsxs)("section",{className:Se.A.playlistInlineCurationSection,children:[(0,p.jsxs)("div",{className:Se.A.playlistInlineCurationWrapper,children:[(0,p.jsx)(l.E,{as:"h1",className:Se.A.playlistInlineCurationTitle,variant:"titleSmall",children:d.Ru.get("playlist.curation.title")}),(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(je,{placeholder:a?d.Ru.get("playlist.curation.search_placeholder-booklists"):d.Ru.get("playlist.curation.search_placeholder"),onChange:T})})]}),(0,p.jsx)("button",{className:Se.A.playlistInlineCurationCloseButton,onClick:t,children:(0,p.jsx)(U.M,{"aria-label":d.Ru.get("close")})})]}),null!==u&&u.navType!==ce.SEARCH?(0,p.jsxs)("button",{className:Se.A.playlistInlineCurationBackButton,onClick:()=>y(),children:[c?(0,p.jsx)(_.V,{"aria-label":d.Ru.get("navbar.go-back"),className:Se.A.icon}):(0,p.jsx)(B.g,{"aria-label":d.Ru.get("navbar.go-back"),className:Se.A.icon}),(0,p.jsx)(l.E,{as:"p",variant:"bodyMediumBold",children:u.title})]}):null,(0,p.jsx)("div",{className:Se.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,p.jsx)(Lt,{playlistUri:e,term:g,level:u,resultList:i,navToEntity:x,navToResults:h,isRTL:c,isBooklist:a})})]})};var Mt=a(34824),Ot=a(16056),Dt=a(14037),Ft=a(52224);const Vt=(0,s.createContext)({getReference:()=>null,setReference:()=>{}}),$t=({children:e})=>{const t=(0,s.useRef)(null),a=(0,s.useCallback)((()=>t.current),[]),i=(0,s.useCallback)((e=>{t.current=e}),[]),r=(0,s.useMemo)((()=>({getReference:a,setReference:i})),[a,i]);return(0,p.jsx)(Vt.Provider,{value:r,children:e})};var zt=a(79210);const Ht=(e,t,a)=>{const{name:r,uri:l,uid:n}=e,{sortState:o}=(0,s.useContext)(k.cL),c=o.order!==ve.H.NONE,{draggable:d,onDragStart:m}=(0,wt.P)({itemIds:[n],itemUris:[l],itemMimeTypes:[b.fl.AUDIOBOOKS],dragLabelText:r,contextUri:t}),{setReference:p,getReference:y}=(0,s.useContext)(Vt),x=(0,s.useCallback)((e=>{p({uri:l,uid:n}),m(e)}),[m,p,n,l]),h=(0,i.wA)(),g=(0,zt.m)(),j=(0,s.useCallback)(((e,a)=>{const s=e[b.fl.AUDIOBOOKS];if(!s)return;const i=y();i?a===f.Nz.BEFORE?g.move(t,[i],{before:{uri:l,uid:n}}):g.move(t,[i],{after:{uri:l,uid:n}}):a===f.Nz.BEFORE?h((0,u.io)(t,s,{before:{uri:l,uid:n}})):h((0,u.io)(t,s,{after:{uri:l,uid:n}})),p(null)}),[t,h,y,g,p,n,l]),T=a&&!c?[b.fl.AUDIOBOOKS]:[];return{...(0,A.A)({uri:l,id:n,allowedMimeTypesByDropPosition:{[f.Nz.BEFORE]:T,[f.Nz.AFTER]:T},onDrop:j}),onDragStart:x,draggable:d}},qt="bg5inM_sdkHpYWiFf7Id",Wt="DyW2LAm9YDcCkcdM0eeP",Kt=()=>(0,p.jsx)("div",{className:Wt}),Yt=(0,s.memo)((function({item:e,contextUri:t,canEdit:a=!1,canRemove:s=!1,index:i,highlightText:r}){const{className:l,dropPosition:n,draggable:o,...c}=Ht(e,t,a);return(0,p.jsxs)(Ft.W,{className:l,"aria-posinset":i,reRunOnDOMUpdate:!0,children:[n===f.Nz.BEFORE&&(0,p.jsx)(Kt,{}),(0,p.jsx)(Te.H,{book:e,contextUri:t,index:i,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:s,className:l,draggable:o,showSeparator:0!==i,highlightText:r,...c}),n===f.Nz.AFTER&&(0,p.jsx)(Kt,{})]})}));var Jt=a(16941),Qt=a(20743),Gt=a(66055),Xt=a(83531),Zt=a(36207),ea=a(89873);const ta=({contextUri:e,initialItems:t,nrItems:a,canEdit:i,canRemove:l,ariaLabel:n})=>{const o=(0,zt.m)(),c=(0,Xt.SF)(),{filter:d}=(0,s.useContext)(v.g),{sortState:u}=(0,s.useContext)(k.cL),{contentsOptions:m}=(0,Jt.$)(u,d),[,y]=(0,S.z)(),x=(0,s.useCallback)((async(t,a)=>{const s=await o.getContents(e,{...m,offset:t,limit:a}),i=s.items.map((e=>null===e?null:(0,Zt.pW)(e)?e:null));return{...s,items:i}}),[o,m,e]),{getItem:h,nrValidItems:g,invalidateCache:b}=(0,Gt.E)({nrItems:a,fetch:x,limit:50,initialItems:t});(0,s.useLayoutEffect)((()=>{y(g)}),[g,y]),(0,ea.H)(e,b);const f=(0,s.useCallback)((e=>(0,p.jsx)("div",{style:{height:e}})),[]),A=(0,s.useCallback)(((e,t)=>t===Ot.u.TITLE||t===Ot.u.SUBTITLE?(0,p.jsx)(Dt.M,{searchWords:[d],textToHighlight:e}):e),[d]),j=(0,s.useCallback)(((t,a)=>{const s=h(t);return s?(0,p.jsx)(Yt,{contextUri:e,item:s,canEdit:i,canRemove:l,index:t,highlightText:A},s.uri):f(`${a}px`)}),[i,l,e,h,A,f]),T="POP"===(0,r.wQ)()?0:10;return(0,p.jsx)("div",{className:qt,children:(0,p.jsx)(Mt.R,{firstInteractiveIsWrapper:!0,"aria-label":n,"aria-rowcount":g,"aria-colcount":6,children:(0,p.jsx)($t,{children:(0,p.jsx)(Qt.M,{totalCount:g,estimatedHeight:200,renderItem:j,renderPlaceholder:f,scrollNodeRef:c,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:T})})})})};var aa=a(49281),sa=a(15346),ia=a(79531),ra=a(17656),la=a(33256);let na=function(e){return e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW",e}({});const oa={[na.DOWN]:()=>(0,p.jsx)(ia.y,{size:"small",className:xt.A.statusChangeDown}),[na.UP]:()=>(0,p.jsx)(ra.J,{size:"small",className:xt.A.statusChangeUp}),[na.NEW]:()=>(0,p.jsx)(la.Z,{className:xt.A.notificationDot}),[na.EQUAL]:()=>null},ca=({status:e,number:t})=>{const a=oa[e];return(0,p.jsxs)("div",{className:me()(xt.A.rowChartStatus),children:[(0,p.jsx)(l.E,{variant:"bodyMedium",children:t}),(0,p.jsx)(a,{})]})};var da=a(28475),ua=a(10475),ma=a(74743),pa=a(6527),ya=a(75267),xa=a(35707),ha=a(93692),ga=a(22690);const ba=s.memo((function({uri:e,name:t,duration_ms:a,artists:s,album:i,isMOGEFRestricted:r,isExplicit:l,isPlayable:n,uid:o,index:c,contextUri:u,imgUrl:m,statusChange:y,playCount:x,usePlayContextItem:h,isCompactMode:g}){const{spec:b}=(0,L.r)(ft.i,{data:{position:c,reason:"",uri:e}}),f=(0,aa.w)(),A=(0,Et.c)(),{isActive:j,isPlaying:T,triggerPlay:R,togglePlay:C}=h({uid:o,uri:e,index:c}),v=(0,mt.T)(e),{isPlayable:k,isAnyArtistBanned:S}=(0,nt.g)(e,{isPlayable:n,isLocal:!1,isOutOfMarket:!1,artistUris:s?.map((e=>e.uri))}),{unBanArtists:E}=(0,St.M)(s?.map((e=>e.uri))??[]),{badges:I,hasBadges:P}=(0,yt.b)({downloadAvailability:v,isExplicit:l,isMOGEFRestricted:r}),w=s?.map((e=>e.name)).join(d.Ru.getSeparator())||"";return(0,p.jsx)(ut.pZ,{value:"row",index:c,children:(0,p.jsx)(Je.h,{menu:(0,p.jsx)(At.P,{uri:e,albumUri:i?.uri,artists:s}),children:(0,p.jsx)(rt.w,{uri:e,contextUri:u,index:c,onTriggerPlay:(e,t)=>{R({loggingParams:t})},isActive:j,ariaRowIndex:c+1,isPlayable:k,isAnyArtistBanned:S,handleArtistBanUndoClick:E,ageRestricted:r,dragMetadata:{name:t,createdBy:w},allowedDropTypes:[],spec:b,isCompactMode:g,isExplicit:l,children:f.map((({columnType:r,options:l},n)=>{const o=(0,ha.y)(n,r,f);return(0,p.jsx)(o,{ariaColIndex:n,children:(()=>{switch(r){case ve.$.INDEX:return(0,p.jsx)(ma.$,{uri:e,className:xt.A.rowMarkerChartStatus,playAriaLabel:d.Ru.get("tracklist.a11y.play",t,w),onClick:(e,t)=>{k&&C({loggingParams:t})},isPlaying:T,isActive:j,spec:b,children:y?(0,p.jsx)(ca,{number:c+1,status:y}):(0,p.jsx)(pa.a,{children:c+1})});case ve.$.TITLE_AND_ARTIST:case ve.$.TITLE_AND_AUTHOR:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(da.e,{src:m}),(0,p.jsxs)(et.l,{children:[(0,p.jsx)(it.p,{titleText:t,children:t}),P&&(0,p.jsxs)(Xe.P,{children:[I.download&&(0,p.jsx)(ct._,{}),I.explicit&&(0,p.jsx)(ot.U,{}),I.nineteen&&(0,p.jsx)(dt.q,{className:xt.A.nineteen,size:16})]}),(0,p.jsx)(vt.p,{children:(0,p.jsx)(Tt.l,{artists:s,spec:b})})]})]});case ve.$.TITLE:return(0,p.jsxs)(ua.q,{children:[A?(0,p.jsx)(jt.N,{to:e,className:xt.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(it.p,{titleText:t,children:t})}):(0,p.jsx)(it.p,{titleText:t,children:t}),P&&(0,p.jsxs)(Xe.P,{children:[I.download&&(0,p.jsx)(ct._,{}),I.explicit&&(0,p.jsx)(ot.U,{}),I.nineteen&&(0,p.jsx)(dt.q,{className:xt.A.nineteen,size:16}),I.hasAssociatedVideo&&(0,p.jsx)(ga.l,{})]})]});case ve.$.ARTIST:case ve.$.AUTHOR:return(0,p.jsx)(xa.Y,{children:s&&(0,p.jsx)(sa.E,{artists:s,spec:b})});case ve.$.PLAYS:return(0,p.jsx)(ya.Y,{playcount:x});case ve.$.ALBUM_OR_PODCAST:case ve.$.ALBUM:return(0,p.jsx)(Ge.g,{uri:i.uri,name:i.name,creatorUri:s?.[0]?.uri,spec:b,children:i.name});case ve.$.DURATION:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(kt.d,{uri:e,spec:b}),!l?.hideDuration&&(0,p.jsx)(Rt.P,{duration:a}),(0,p.jsx)(Ct.Y,{menu:(0,p.jsx)(At.P,{uri:e,albumUri:i?.uri,artists:s}),label:d.Ru.get("more.label.track",t,w),spec:b})]});case ve.$.ADDED_BY:case ve.$.ADDED_AT:case ve.$.RELEASE_DATE:case ve.$.ACTIONS:case ve.$.ALBUM_OR_SHOW:case ve.$.EVENT_DATE:case ve.$.EVENT_INFO:case ve.$.CONCERT:case ve.$.CONCERT_VENUE:case ve.$.ADD:case ve.$.BPM:case ve.$.KEY:case ve.$.VIBE:return null;default:(0,Q.d)(r)}return null})()},`column-${n}`)}))})})})}),((e,t)=>e.uri===t.uri&&e.isCompactMode===t.isCompactMode));var fa=a(38720);const Aa={column:null,order:ve.H.NONE},ja=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,scrollToUid:i,usePlayContextItem:r,tracklistDomRef:l,sortableColumns:n,isCompactMode:o=!1}){const c=(0,zt.m)(),{filter:d,setFilter:u}=(0,s.useContext)(v.g),m=(0,s.useRef)(null),y=(0,s.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,ea.H)(a,y);const{sortState:x,setSortState:h}=(0,s.useContext)(k.cL),g=(0,s.useCallback)((e=>{h((0,C.So)(e,x))}),[x,h]);(0,s.useEffect)((()=>{h(Aa),u("")}),[a,u,h]),(0,s.useEffect)((()=>{m.current&&i&&m.current.scrollToItem({uid:i})}),[i]);const b=(0,s.useCallback)((async(e,t)=>{const s=await c.getContents(a,{offset:e,limit:t,sort:(0,C.Xt)(x),filter:d,decorateFormatListData:!0});return{items:s.items,totalLength:s.totalLength}}),[a,c,x,d]),f=(0,s.useCallback)(((e,t)=>{const s=(0,fa.g)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,p.jsx)(ba,{index:t,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:s?.url||"",statusChange:e.formatListAttributes?.status,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:r,isCompactMode:o},t+e.uri)}),[a,r,o]),A=(0,aa.w)(),j=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,p.jsx)(ut.pZ,{value:"chart-tracklist",children:(0,p.jsx)(Ce.S4,{ariaLabel:e,hasHeaderRow:!0,columns:A,sortableColumns:n,sortState:x,onSort:g,renderRow:f,resolveItem:j,nrTracks:t,fetchTracks:b,limit:100,canFetchAllTracks:c.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:l,columnPersistenceKey:"chart-tracklist",isCompactMode:o,className:xt.A.chartTrackList},a)})}));var Ta=a(29529),Ra=a(58837),Ca=a(46462),va=a(55405),ka=a(99565);const Sa="Q36RQHBLv4CTpqvIsEly",Ea=({uri:e})=>{const[t,a]=function(e){const[t,a]=(0,ka.x)("daylist-snapshot-dismissed-link-back-uris",[]),s=t.includes(e),i=()=>{a([...t,e])};return[s,i]}(e);return t?null:(0,p.jsx)(Ta.v,{id:"daylist-snapshot-link-back-banner",variant:"tinted",className:Sa,title:(0,p.jsxs)(Ra.d,{children:[(0,p.jsx)(l.E,{variant:"bodySmall",children:d.Ru.get("web-player.playlist.daylist.link-back-banner.title")})," ",(0,p.jsx)(jt.N,{to:"spotify:playlist:37i9dQZF1EP6YuccBxUcC1",children:(0,p.jsx)(l.E,{variant:"bodySmallBold",children:d.Ru.get("web-player.playlist.daylist.link-back-banner.link-text")})})]}),trailing:(0,p.jsx)(Ca.H,{iconOnly:U.M,size:"small",onClick:a})})},Ia=({uri:e,formatListAttributes:t})=>(0,n.NC)(va.bph,{loadingValue:!1})&&"true"===t?.["daylist-eligible"]?(0,p.jsx)(Ea,{uri:e,formatListAttributes:t}):null;var Pa=a(75773),wa=a(47457),Na=a(67464),La=a(57863),Ua=a(79223);function _a(e,t){return e.build().withHost(La.QU).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:`playlistURI:${t}`,limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var Ba=a(20437);const Ma="BagEpNps_J8R2QuHRZMa",Oa="mbuOeSEBZed4fc2naMS6",Da="bjB8WZd0Ev30ZFbiScDm",Fa=(0,s.memo)((({uri:e})=>{const t=(0,Xt.SF)(),{ref:a,inView:i}=(0,Pa.Wx)({initialInView:!1,rootMargin:"128px 100%",root:t.current}),r=function(e,t){const{data:a}=(0,Ua.Z)(_a,[e],{enabled:t,staleTime:36e5,gcTime:72e5});return a?.body.content?.items}(e,i),l=(0,s.useRef)(null),n=function(e){const[t,a]=(0,ka.x)("mlt-height",300),i=(0,s.useCallback)((()=>{const t=e.current?.getBoundingClientRect()?.height;t&&a(t)}),[e,a]);return(0,Ba.w)({refOrElement:e,observeOnly:"height",onResize:i,observeOnMount:!0}),t}(l);return 0===r?.length?null:(0,p.jsx)("div",{className:Ma,style:{"--last-height":`${n}px`},ref:a,children:(0,p.jsx)("div",{className:Oa,children:r&&(0,p.jsx)(Na.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:d.Ru.get("web-player.playlist.more-like-this.section-header-title"),total:r.length,elementRef:l,className:Da,children:r.map(((e,t)=>(0,p.jsx)(wa.B,{index:t,uri:e.uri,name:e.name,authorName:e.owner?.display_name??null,description:null,images:e.images},e.uri)))})})})}));var Va=a(87015),$a=a(66108),za=a(49086),Ha=a(79583),qa=a(25718),Wa=a(2565),Ka=a(49406),Ya=a(52110),Ja=a(60224),Qa=a(49671),Ga=a(38172),Xa=a(62372),Za=a(78165),es=a(25072),ts=a(81680),as=a(58325),ss=a(32617),is=a(81588),rs=a(13126);const ls={bottomEnd:rs.dw.topStart,top:rs.dw.bottom},ns=({visible:e,onHide:t,placement:a,children:s,label:i})=>(0,p.jsx)(ss.W,{placement:a,withPortal:!0,overlay:e&&(0,p.jsx)("div",{children:(0,p.jsx)(is.A,{arrow:ls[a],colorSet:"announcement",onClose:t,children:i})}),children:s});var os=a(53853),cs=a(55085),ds=function(e){return e.xs="small",e.sm="medium",e.md="large",e}(ds||{});const us=({uri:e,label:t,onClick:a,size:s=ds.md})=>{const{onCopyLink:i}=(0,cs.J)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:r,setToggleActivationVisible:l}=(0,os.R)();return(0,p.jsx)(ns,{visible:r,onHide:()=>l(!1),label:d.Ru.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,p.jsx)(as.Zp,{label:t,children:(0,p.jsx)(Ca.H,{onClick:e=>{a?.(e),i?.()},iconOnly:ts.h,size:s,"aria-hidden":"true","aria-label":t,condensed:!0})})})};var ms=a(26643),ps=a(31600),ys=a(97460);const xs=s.memo((({metadata:e,tracklistDomRef:t,sortableColumns:a})=>{const{hasSpotifyAudiobooks:i}=e,r=i||!1,{spec:l,logger:n}=(0,L.r)(ms.E,{}),o=(0,s.useCallback)((()=>{n.logInteraction(l.filterFieldFactory().keyStrokeFilter())}),[n,l]),c=(0,s.useCallback)((()=>{n.logInteraction(l.filterFieldFactory().hitClearFilter())}),[n,l]);return(0,p.jsxs)("div",{className:Se.A.searchBoxContainer,children:[(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(ps.S,{placeholder:d.Ru.get("playlist.search_in_playlist"),onFilter:o,onClear:c,clearOnEscapeInElementRef:t})}),(0,p.jsx)(ys.d,{columns:[...a],isBooklist:r})]})}));var hs=a(36907),gs=a(18827);const bs="dw-display",fs="genre.displayName.",As="dw-session-control-reset",js="session_control.selected_signals",Ts=({uri:e,formatListAttributes:t,availableSignals:a})=>{const i=(0,zt.m)(),[r,l]=(0,s.useState)((()=>Cs(t?.[js]))),n=(0,s.useMemo)((()=>function(e,t,a){return e?.filter((({name:e})=>e.startsWith(bs))).map((({name:e})=>({name:e,displayName:t?.[`${fs}${e.split("$").at(-1)}`]??e,isSelected:a?.has(e)??!1})))??null}(a,t,r)),[a,t,r]),o=t?.[js];if((0,s.useEffect)((()=>{l(Cs(o))}),[o]),!n?.length)return null;const c=n.filter((({isSelected:e})=>e)).map((({name:e,displayName:t})=>({id:e,getName:()=>t,ubiId:e}))),d=c.length?[]:n.map((({name:e,displayName:t})=>({id:e,getName:()=>t,ubiId:e})));return(0,p.jsx)(za.S,{children:(0,p.jsx)(gs.s,{availableFilters:d,selectedFilters:c,toggleFilterId:()=>{},resetFilterIds:async()=>{l(new Set),await i.sendSignal(e,As)},onFilterClick:async(t,a)=>{if(!t)return;const s=new Set(a?[]:[t]);l(s),await i.sendSignal(e,a?As:t)},ariaLabel:(0,hs.v)("Filters"),clearBtnAriaLabel:(0,hs.v)("Clear filters"),applyLightThemeControls:!0})})},Rs=e=>(0,n.NC)(va.MFf)?(0,p.jsx)(Ts,{...e}):null;function Cs(e){return new Set(e?[e]:[])}var vs=a(26321),ks=a(47181),Ss=a(25733);const Es=()=>null;var Is=a(69284),Ps=a(24802),ws=a(92144),Ns=a(81286),Ls=a(90677),Us=a(71468),_s=a(92375),Bs=a(58089);const Ms=s.memo((function({playlist:e,capabilities:t,spec:a,isPlaying:i,isActive:r,togglePlay:l,isBooklist:n,isConcert:o=!1,backgroundColor:c,tracklistDomRef:u,sortableColumns:m,className:y,watchFeedEntityEntryPoint:x,formatListAttributes:h,availableSignals:g,isVideoFirst:b}){const{metadata:{uri:f,name:A,unfilteredTotalLength:j,isOwnedBySelf:T,isRootlistable:R,canPlay:C,isPublished:v,totalLength:k}}=e,S=(0,Ns.n)(),E=(0,Bs.s)(),I=(0,s.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),P=t.canFilter&&j>0,w=t.canSort&&j>0,N=j>0,U=(0,Ss.X)(),_=(0,Is.x)(),[B,M]=(0,Us.A)(f),O=(0,s.useCallback)((async()=>{try{await M(!B)}catch{}}),[B,M]),D=(0,s.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:f,shareId:""});E.logInteraction(e)}),[a,E,f]),F=(0,es.d$)(),{spec:V,logger:$}=(0,L.r)(Va.e,{data:{uri:f}});(0,s.useEffect)((()=>{F&&$.logImpression(V.impression())}),[F,$,V]);const H=(0,s.useCallback)((()=>{let e;const t=a.heartButtonFactory();B?e=t.hitUnfollow({itemToBeUnfollowed:f}):(e=t.hitFollow({itemToBeFollowed:f}),F&&$.logInteraction(V.hitFollow({itemToBeFollowed:f}))),E.logInteraction(e),O()}),[a,O,B,E,f,F,$,V]),q=(0,ws.j)(),W=P&&w;return(0,p.jsxs)($a.E,{backgroundColor:c,className:y,children:[(0,p.jsxs)(za.S,{children:[C&&!n?(0,p.jsx)(Xa.D,{onClick:l,isPlaying:i,size:q,uri:f,ariaPlayLabel:d.Ru.get("playlist.a11y.play",A),ariaPauseLabel:d.Ru.get("playlist.a11y.pause",A)}):null,x&&(0,p.jsx)(_s.r,{spec:a,children:(0,p.jsx)(Ps.H,{entryPoint:x,watchFeedTitle:A,type:z.c.PLAYLIST,entityUri:f})}),U&&k>0&&!n&&(0,p.jsx)(_s.r,{spec:I,children:(0,p.jsx)(vs.Y,{shuffleContext:ks.b.playlistActionBar,entityName:A,contextUri:f,isActive:r,activationPlacement:"bottomEnd",size:q})}),!T&&R?(0,p.jsx)(Qa.e,{children:(0,p.jsx)(Ha.M,{isAdded:B,onClick:H,size:q,condensed:!0})}):null,N&&!n&&!b&&(0,p.jsx)(qa.f,{uri:f,isFollowing:B,canDownload:N,onClick:(e,t)=>(0,Ls.Qv)(t,a.downloadButtonFactory(),E,f),onFollow:O,size:q,condensed:!0}),e.metadata.permissions?.canAdministratePermissions&&S&&(0,p.jsx)(us,{onClick:D,label:d.Ru.get("permissions.invite-collaborators",A),uri:f,size:q}),(o||n)&&(0,p.jsx)(Ka.w,{uri:f,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:o?"concerts-near-you/share":"booklist/share"},onClick:D,size:q}),_&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Es,{uri:f,playlistMetadata:e.metadata})}),(0,p.jsx)(Ya.b,{onShow:()=>(0,Ls.R2)(a,E),menu:(0,p.jsx)(Ja.W,{uri:f,isPublished:v}),children:(0,p.jsx)(Wa.e,{label:d.Ru.get("more.label.context",A),size:q})}),W?(0,p.jsx)(_s.r,{spec:a,children:(0,p.jsx)(xs,{metadata:e.metadata,tracklistDomRef:u,sortableColumns:m})}):(0,p.jsx)("div",{className:Se.A.leadingSlot,children:(0,p.jsx)(Ga.u,{property:va.mA2,renderNewExperience:()=>(0,p.jsx)(Za.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),(0,p.jsx)(Rs,{uri:f,formatListAttributes:h,availableSignals:g})]})}));var Os=a(76669),Ds=a(65927);const Fs=e=>{const t=(0,Bs.s)(),a=(0,s.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),i=(0,Ds.t)(a);return(0,p.jsxs)("div",{className:Se.A.concertsFooter,children:[(0,p.jsx)(jt.N,{to:"/concerts",className:Se.A.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,p.jsxs)("div",{className:Se.A.promoRow,ref:i,children:[(0,p.jsx)(l.E,{as:"h2",variant:"bodyMediumBold",className:Se.A.promoTitle,children:d.Ru.get("concerts.find_more")}),(0,p.jsx)(Os.v,{as:"span",selected:!0,children:d.Ru.get("concerts.find_nearby")}),(0,p.jsx)("img",{className:Se.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,p.jsx)("div",{className:Se.A.disclaimerContainer,children:(0,p.jsx)(l.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:d.Ru.get("concerts_near_you.playlist_disclaimer")})})]})};var Vs=a(86232),$s=a(56030),zs=a(58989);const Hs="multiUserAttributionDisplayNamesV2";var qs=a(24213),Ws=a(47571);function Ks(e){return(0,Zt.Jy)(e)||(0,Zt.xp)(e)}function Ys(e){return(0,Zt.Jy)(e)||(0,Zt.xp)(e)||(0,Zt.pW)(e)}const Js=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,playlistName:r,isMixedMedia:l,isLive:o,isBlend:m,isConcert:y,isBooklist:x,canEdit:h,scrollToUid:g,feedbackPath:f,deleteFeedbackPath:A,usePlayContextItem:j,tracklistRef:T,tracklistDomRef:R,canRemove:E,spec:I,initialItems:P,isCompactMode:w=!1,sortableColumns:N,hasSpotifyAudiobooks:L,isPersonalized:U=!1,isVideoFirstPlaylist:_=!1}){const B=(0,Bs.s)(),M=(0,n.NC)(va.LX5),O=(0,qs.$)()&&U,D=(0,zt.m)(),{filter:F}=(0,s.useContext)(v.g),{sortState:V,setSortState:$}=(0,s.useContext)(k.cL),z=(0,Ws.m)(),H=(0,s.useRef)((()=>{})),[q,W]=(0,s.useState)([]),K=(0,i.wA)(),Y=(0,aa.w)(),J=(0,s.useCallback)((()=>{T?.current&&T.current.update()}),[T]);(0,ea.H)(a,J);const Q=(0,s.useCallback)(((e,t)=>{$((0,C.So)(e,V)),B.logInteraction(I.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[$,V,B,I]),G=(0,s.useCallback)((e=>{H.current(),D.remove(a,e)}),[D,a]),X=(0,s.useCallback)(((e,t,a=!1)=>{E&&(H.current=t,e.length>1&&!a?W(e):G(e))}),[E,G]);(0,s.useEffect)((()=>{T?.current&&g&&T.current.scrollToItem({uid:g})}),[g,T]);const Z=(0,s.useCallback)((async(e,t)=>{const s=await D.getContents(a,{offset:e,limit:t,sort:(0,C.Xt)(V),filter:F,decorateFormatListData:!!f||o||m,isExtraColumnsEnabled:z});return{items:s.items,totalLength:s.totalLength}}),[D,a,V,F,f,o,m,z]),ee=(0,s.useCallback)(((e,t,s)=>{if(!T?.current)return;const i=T.current.getRows()[t];i&&(B.logInteraction(I.dragSort()),s===rt.Y.Before?D.move(a,e,{before:i}):D.move(a,e,{after:i}))}),[T,B,I,D,a]),te=(0,s.useCallback)(((e,t,s)=>{if(!T?.current)return;const i=T.current.getRows()[t];i&&(B.logInteraction(I.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),s===rt.Y.Before?K((0,u.io)(a,e,{before:{uri:i.uri,uid:i.uid}})):K((0,u.io)(a,e,{after:{uri:i.uri,uid:i.uid}})))}),[T,B,I,a,K]),ae=(0,s.useCallback)(((e,t)=>{let s,i=null;(0,Zt.xp)(e)?(i=e.show,s=e.images.concat(e.show?.images||[])):(0,Zt.Jy)(e)?(i=e.album,s=e.album?.images):(0,Zt.pW)(e)&&(s=e.images);const n=(0,fa.g)(s,{desiredSize:40,desiredLabel:"small"});let o=[];h&&V.order===ve.H.NONE&&(o=x?[b.fl.AUDIOBOOKS]:[b.fl.TRACKS,b.fl.LOCAL_TRACKS,b.fl.EPISODES,...L?[b.fl.AUDIOBOOKS]:[]]);const d="1"===e?.formatListAttributes?.["dislike-feedback-selected"],u=!!(0,Zt.xp)(e)&&e.podcastSubscription.isUserSubscribed;let g=!1;(0,Zt.xp)(e)&&e.podcastSubscription.isPaywalled&&!u?g=!0:Ks(e)?g=e.isPlayable&&!d:(0,Zt.pW)(e)&&(g=!0);let T=!1;(0,Zt.xp)(e)&&e.podcastSubscription.isPaywalled?T=!0:(0,Zt.pW)(e)&&(T=e.isLocked&&!e.isOutOfMarket);const R=m&&((e,t)=>{const a=[];if(!t)return a;const s=t[Hs]?Hs:"multiUserAttributionDisplayNames",i=t?.[s]?.split(","),r=t?.multiUserAttributionImages?.split(",");if(!i||!r)return a;const l=t?.multiUserAttributionUsernamesV2?.split(",")||[],n=t?.multiUserAttributionType?.split(",")||[],o=i.length;for(let e=0;e<o;e++){const t=l[e],s=t&&(0,c.Qjr)(t).toURI();a.push({username:t,uri:s,displayName:i[e],images:(d=r[e],d.length>1?[{url:d}]:[]),recsplanation:n[e]})}var d;return a.sort(((t,a)=>t.username?t.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let C=0;Ks(e)?C=e.duration.milliseconds:(0,Zt.pW)(e)&&(C=e.durationMs||0);let v="";Ys(e)&&(v=e.name);let k=null;return(0,Zt.xp)(e)&&(k=e.gatedEntityRelations),(0,p.jsx)(zs.W,{isCompactMode:w,index:t,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:g,duration_ms:C,isPaywalled:T,isUserSubscribed:u,name:v,artists:(0,Zt.Jy)(e)?e.artists:void 0,albumOrShow:i,isExplicit:(Ys(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,Zt.Jy)(e)&&e.hasAssociatedVideo&&M)??!1,associatedAudioUri:(0,Zt.Jy)(e)?e.associatedAudioUri:void 0,associatedAudioAlbumUri:(0,Zt.Jy)(e)?e.associatedAudioAlbumUri:void 0,isMixedMedia:l,isLocal:(0,Zt.Jy)(e)&&e.isLocal,addedBy:R,hasDecoratedAddedBy:D.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Zt.xp)(e)&&e.release.isoString||"",isMOGEFRestricted:((0,Zt.Jy)(e)||(0,Zt.xp)(e))&&e.is19PlusOnly,type:e.type,imgUrl:n?.url||"",onMove:ee,onInsert:te,usePlayContextItem:j,allowedDropTypes:o,feedbackPath:f,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:A,isDisliked:d,isBlend:m,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:E,playlistName:r,isConcert:y,concertsCount:String(e.formatListAttributes?.concert_uris?.split(",").length??0),concertURI:e.formatListAttributes?.concert_uri,concertDate:e.formatListAttributes?.concert_date,concertVenue:e.formatListAttributes?.concert_subtitle,authorName:(0,Zt.pW)(e)?e.authorName:"",isOutOfMarket:!!(0,Zt.pW)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Zt.pW)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:h,bpm:(0,Zt.Jy)(e)?e.bpm:void 0,musicKey:(0,Zt.Jy)(e)?e.key:void 0,gatedEntityRelations:k,isBanned:!!(0,Zt.Jy)(e)&&e.isBanned,showBanButton:O,isVideoFirst:_&&(0,Zt.Jy)(e)&&!!e.associatedAudioUri},t+e.uri)}),[h,V.order,m,w,a,M,l,D,ee,te,j,f,A,E,r,y,O,x,L,_]),se=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,ie]=(0,S.z)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ut.pZ,{value:"playlist-tracklist",children:(0,p.jsx)(Ce.S4,{isCompactMode:w,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:Y,sortableColumns:N,sortState:V,onSort:Q,onRemove:X,renderRow:ae,resolveItem:se,nrTracks:t,fetchTracks:Z,limit:100,canFetchAllTracks:D.getCapabilities().canFetchAllTracks,outerRef:T,outerDomRef:R,tracks:P,isConcertPlaylist:y,onNrValidItemsChange:ie,columnPersistenceKey:"playlist-tracklist"},a)}),(0,p.jsx)($s.F,{title:d.Ru.get("playlist.remove_from_playlist",r),isOpen:q.length>0,tracks:q,onClose:e=>{e.stopPropagation(),W([])},onRemove:G})]})}));var Qs=a(35176);var Gs=a(52842),Xs=a(93486);const Zs={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},ei=e=>{const t=e.replace(/\+/g,"%20");return decodeURIComponent(t)},ti=e=>{const t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};const a=t[1],s=/([^:]+):([^:]+)/g;let i;const r=[],l=[];for(;i=s.exec(a);){const e=i[1];let t=i[2];e===Zs.USER&&(t=ei(t)),r.push(e),l.push(t)}if(0===r.length)return{type:null,id:null};const n=r.reduce(((e,t,a)=>(e[r[a]]=l[a],e)),{});return{type:r[r.length-1],id:l[l.length-1],...n}};var ai=a(76670),si=a(82026),ii=a(5305);const ri=new M.l("getAudiobooksMetadata","query","523c71c64749a628f83e6b31a122c76663243730bf02df01fd64abf0f62f572f",null),li=3e5;function ni(e,t){return["list-extender",e,t]}const oi=(e,t,a=10,i)=>{const r=2*a,l=3*a,n=(0,ii.jE)(),c=(0,s.useRef)(0),[d,u]=(0,s.useState)(e),[m,p]=(0,s.useState)((()=>n.getQueriesData({queryKey:ni(e,t),stale:!1}).at(0)?.[1]??[])),y=(0,s.useRef)(m.map((e=>e.uri??""))),{spec:x,logger:h}=(0,L.r)(o.K,{data:{uri:e}}),g=(0,s.useMemo)((()=>x.recommendedFactory()),[x]);(0,si.e)(ai.Lj.OPERATION_COMPLETE,(({data:a})=>{a.uri===e&&(a.operation===ai.sP.ADD?p((e=>e.filter((e=>a.uris.every((t=>t!==e.uri)))))):a.operation===ai.sP.REMOVE&&p((e=>e.filter((e=>a.items.every((t=>t.uri!==e.uri)))))),a.operation!==ai.sP.ADD&&a.operation!==ai.sP.REMOVE||n.invalidateQueries({queryKey:ni(e,t)}))}));const b=(0,s.useRef)(!0);(0,s.useEffect)((()=>(b.current||(p([]),u(e),y.current=[],c.current=c.current+1),b.current=!0,()=>{c.current=c.current+1})),[e]),(0,s.useEffect)((()=>{if(m.length<r){const e=Math.min(r,l-m.length),a=c.current,s=ni(d,t),o=b.current&&0===y.current.length;(o?n.fetchQuery({queryKey:s,queryFn:()=>i(d,[],e),staleTime:li,gcTime:li}):i(d,y.current,e)).then((t=>{if(a!==c.current||!t)return;const i=t.map((e=>e?.uri&&e.uri)).filter((e=>null!==e));t.length<e&&y.current.length?y.current=[]:y.current=[...y.current,...i],p((e=>[...e,...t])),o&&n.setQueryData(s,t)}))}b.current=!1}),[r,l,d,m.length,n,i,t]);const f=(0,s.useCallback)((()=>{if(x){const e=g.refreshButtonFactory().hitRefreshContent();h.logInteraction(e)}p((e=>e.slice(a)))}),[h,g,x,a]);return{recommendations:m.slice(0,a),_bufferedRecommendations:m.slice(a),refresh:f}},ci=s.memo((function({uri:e,canEdit:t}){const{recommendations:a,refresh:i}=((e,t=10)=>{const a=(0,zt.m)(),{request:i}=(0,s.useContext)(_t.j),r=(0,s.useCallback)((async(e,t,s)=>{const r=await a.getRecommendedBookUris(e,t,s),l=await i(ri,{uris:r});return l?.data?.podcasts?.map((e=>"Audiobook"===e.__typename?W(e):null)).filter(J.P)??[]}),[a,i]);return oi(e,"book",t,r)})(e),{draggable:r,onDragStart:n}=(0,wt.P)(),{addItems:o}=(0,pt.x)(e),c=(0,Xs.p)(),u=(0,s.useCallback)((e=>{o([e],{after:"end"})}),[o]);return c?a?.length&&a.length>0?(0,p.jsxs)("div",{className:Se.A.recommendedTrackList,"data-testid":"recommended-books",children:[(0,p.jsx)("div",{className:Se.A.top,children:(0,p.jsxs)("div",{className:Se.A.header,children:[(0,p.jsx)(l.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(l.E,{variant:"bodySmall",className:Se.A.subtitle,children:d.Ru.get("playlist.extender.songs.in.playlist")})]})}),c&&(0,p.jsxs)(p.Fragment,{children:[a.map(((a,s)=>a?(0,p.jsx)(Te.H,{contextUri:e,index:s,featureIdentifier:"playlist_recommendations",book:a,sharingInfo:a.sharingInfo,isRecommendation:!0,draggable:r,onAddClick:t?u:void 0,onDragStart:e=>{n(e,{itemUris:[a.uri],itemMimeTypes:[b.fl.AUDIOBOOKS],dragLabelText:a.name})},showSeparator:0!==s},s):null)),(0,p.jsx)(Ca.H,{className:Se.A.refreshButton,onClick:i,children:d.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:Se.A.recommendedTrackList,children:(0,p.jsx)("div",{className:Se.A.top,children:(0,p.jsxs)("div",{className:Se.A.header,children:[(0,p.jsx)(l.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(l.E,{variant:"bodySmall",className:Se.A.subtitle,children:d.Ru.get("web-player.playlist.booklist-recommender-dsa-message")})]})})})}));var di=a(4612);const ui=s.memo((function({playlistUri:e,canEdit:t,tracks:a}){const i="1"===(0,di.$)("filter-age-restricted-content"),{usePlayContextItem:r}=(0,Nt.P)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:z.c.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),l=(0,s.useCallback)(((a,s)=>{const l=a.duration;return(0,p.jsx)(It,{index:s,imgUrl:a.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:a.uri,isPlayable:!(i&&a.isMOGEFRestricted),name:a.name,artists:a.artists,album:{...a.album,imgUrl:a.album.imageUrl},isExplicit:a.explicit,isMOGEFRestricted:a.isMOGEFRestricted,usePlayContextItem:r,durationMs:l,shouldRenderDuration:!t,internalLink:!0},`${s}-${a.uri}`)}),[e,i,r,t]),n=(0,s.useMemo)((()=>[ve.$.TITLE_AND_ARTIST,ve.$.ALBUM,ve.$.ADDED_AT,ve.$.ADD]),[]),o=(0,s.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),c=(0,s.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return(0,p.jsx)(Ce.S4,{ariaLabel:d.Ru.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:Re.qq,tracks:c,renderRow:l,resolveItem:o,columns:n},`${e}-recommended`)})),mi=s.memo((function({playlistUri:e,playlistLength:t,canEdit:a}){const{recommendations:i,refresh:r}=((e,t=10)=>{const a=(0,zt.m)(),i=(0,s.useCallback)((async(e,t,s)=>{const i=t.map((e=>ti(e).id??""));return a.getRecommendedTracks(e,i,s)}),[a]);return oi(e,"track",t,i)})(e),n=!t||0===t,o=(0,Xs.p)(),c=n?d.Ru.get("playlist.extender.empty.playlist"):d.Ru.get("playlist.extender.songs.in.playlist");return o?i.length>0?(0,p.jsxs)("div",{className:Se.A.recommendedTrackList,children:[(0,p.jsx)("div",{className:Se.A.top,children:(0,p.jsxs)("div",{className:Se.A.header,children:[(0,p.jsx)(l.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(l.E,{variant:"bodySmall",className:Se.A.subtitle,children:c})]})}),o&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ui,{playlistUri:e,canEdit:a,tracks:i}),(0,p.jsx)(Ca.H,{className:Se.A.refreshButton,onClick:r,children:d.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:Se.A.recommendedTrackList,children:(0,p.jsx)("div",{className:Se.A.top,children:(0,p.jsxs)("div",{className:Se.A.header,children:[(0,p.jsx)(l.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(l.E,{variant:"bodySmall",className:Se.A.subtitle,children:d.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})}));var pi=a(48851),yi=a(40091),xi=a(50572),hi=a(65463),gi=a(14402),bi=a(58883);const fi=(e,t,a)=>{const s=(0,gi.sH)(e.seo.playlist||e.seo.playlistV2||{},e.playlistId,t);return(0,xi.o)(a,(0,r.zy)())||s},Ai=()=>{const{playlistId:e=""}=(0,r.g)(),t=(0,Et.c)(),a={seo:{playlist:(0,i.d4)(yi.LO),playlistV2:(0,i.d4)(yi.nc)},playlistId:e},s=(e=>fi(e,bi.T.VARIANT_1,hi.P.SpotifyPlaylistTitleTag1))(a),l=(e=>fi(e,bi.T.VARIANT_2,hi.P.SpotifyPlaylistTitleTag2))(a),n=(e=>fi(e,bi.T.VARIANT_3,hi.P.SpotifyPlaylistTitleTag3))(a);return t?{spotifyPlaylistTitleTagVariant1Enabled:s,spotifyPlaylistTitleTagVariant2Enabled:l,spotifyPlaylistTitleTagVariant3Enabled:n}:{spotifyPlaylistTitleTagVariant1Enabled:!1,spotifyPlaylistTitleTagVariant2Enabled:!1,spotifyPlaylistTitleTagVariant3Enabled:!1}},ji=(e,t,a)=>{const s=(0,gi.lM)(e.seo.playlist||e.seo.playlistV2||{},e.playlistId,t);return(0,xi.o)(a,(0,r.zy)())||s},Ti=()=>{const{playlistId:e=""}=(0,r.g)(),t=(0,Et.c)(),a={seo:{playlist:(0,i.d4)(yi.LO),playlistV2:(0,i.d4)(yi.nc)},playlistId:e},s=(e=>ji(e,bi.T.VARIANT_1,hi.P.UserPlaylistTitleTag1))(a),l=(e=>ji(e,bi.T.VARIANT_2,hi.P.UserPlaylistTitleTag2))(a),n=(e=>ji(e,bi.T.VARIANT_3,hi.P.UserPlaylistTitleTag3))(a);return t?{userPlaylistTitleTagVariant1Enabled:s,userPlaylistTitleTagVariant2Enabled:l,userPlaylistTitleTagVariant3Enabled:n}:{userPlaylistTitleTagVariant1Enabled:!1,userPlaylistTitleTagVariant2Enabled:!1,userPlaylistTitleTagVariant3Enabled:!1}};var Ri=a(36122);class Ci{async deleteChanges(e){throw new Error("Method not implemented.")}async getChanges(e){throw new Error("Method not implemented.")}async applyChanges(e,t){throw new Error("Method not implemented.")}async applyChangesNewPlaylist(e,t){throw new Error("Method not implemented.")}async previewChanges(e,t){throw new Error("Method not implemented.")}async getTrackPairTransitionMetadata(e){throw new Error("Method not implemented.")}maybeApplyAutoTuna(e){throw new Error("Method not implemented.")}turnOnMix(e){throw new Error("Method not implemented.")}turnOffMix(e){throw new Error("Method not implemented.")}}const vi=(0,s.createContext)(null),ki=({children:e})=>{const t=(0,s.useMemo)((()=>new Ci),[]);return(0,p.jsx)(vi.Provider,{value:t,children:e})};var Si=a(13811),Ei=a(23534),Ii=a(90089),Pi=a(10074),wi=a(87879),Ni=a(73018),Li=a(91302);const Ui=["meta+v"];var _i=a(7397),Bi=a(78256),Mi=a(78247),Oi=a(42666),Di=a(26751),Fi=a(68456),Vi=a(81481);const $i=s.lazy((()=>a.e(4789).then(a.bind(a,94349)))),zi=s.lazy((()=>Promise.resolve().then(a.bind(a,19758)))),Hi=s.lazy((()=>a.e(3632).then(a.bind(a,51998)))),qi=s.lazy((()=>a.e(9718).then(a.bind(a,44617)))),Wi=new Set([]),Ki=s.memo((function({playlist:e,capabilities:t}){const{metadata:{uri:a,name:m,images:y,totalLength:x,unfilteredTotalLength:h,isOwnedBySelf:T,hasEpisodes:R,canAdd:U,canRemove:_,formatListData:B,hasDateAdded:M,collaborators:D,isPublished:F,hasSpotifyAudiobooks:V,hasSpotifyTracks:$,availableSignals:z},contents:{items:H}}=e,{spec:q,logger:W,UBIFragment:K}=(0,L.r)(o.K,{data:{uri:a}});e.metadata;const Y=(0,Ns.n)(),J=(0,n.NC)(Vi.Cf,{loadingValue:!1}),Q=(0,Ri.m)(),{isCompactMode:G}=(0,Si.a)(),X=s.useMemo((()=>q.headerFactory()),[q]),Z=s.useMemo((()=>q.tracklistFactory()),[q]),ee=s.useMemo((()=>q.actionBarFactory()),[q]),te="chart"===B?.type,ae="concerts-near-you"===B?.type&&J,se="live-streams"===B?.type,ie=["blend","celebrity-blend","friends-mix"].indexOf(B?.type||"")>-1,re=[$,R,V].filter(Boolean).length>1,le=!re&&!!V&&(0,Gs.R)(H),ne="artistsets"===B?.type||"this-is"===B?.attributes["editorial.series"],oe=(0,pi.D)(e.metadata),ce=B?.attributes||{},de=ce.header_image_url_desktop||ce.image_url||null,ue=U&&_,{isInlineCurationVisible:me,showInlineCuration:ye,hideInlineCuration:xe}=((e,t)=>{const[a,i]=(0,s.useState)(e&&0===t),{spec:r,logger:l}=(0,L.r)(N.e,{});return{isInlineCurationVisible:a,showInlineCuration:(0,s.useCallback)((()=>{i(!0),l.logInteraction(r.findMoreButtonFactory().hitUiReveal())}),[l,r]),hideInlineCuration:(0,s.useCallback)((()=>{i(!1),l.logInteraction(r.closeButtonFactory().hitUiHide())}),[l,r])}})(ue,h),{productState:he}=(0,i.d4)(_i.Ht),ge=!!he?.ads&&parseInt(he.ads,10)>0,be="spotify"===e.metadata.owner.username,fe=(0,i.wA)(),Ae=(0,r.wQ)(),je=(0,r.zy)(),Te=(0,n.NC)(va.vQ3,{loadingValue:!1}),Re=(0,n.NC)(va.UPi,{loadingValue:!1}),Ce=(0,I.useThisisPlaylistExtensionQuery)({uri:a},{gcTime:5*O.i,enabled:ne}).data?.playlistV2,ve="Playlist"===Ce?.__typename?Ce.artistsOnTour?.[0]:null,ke=Re&&"Playlist"===Ce?.__typename?Ce.concerts?.items.map((e=>e.data)):null,Ee=ke?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const t=[e.location.name,e.location.city].join(d.Ru.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:t,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:a[0]?.visuals.avatarImage?.sources[0]?.url,saved:e.saved}})),Ie="POP"!==Ae?new URLSearchParams(je.search).get("uid"):null,{filter:Pe}=(0,s.useContext)(v.g),{sortState:we}=(0,s.useContext)(k.cL),Ne=(0,zt.m)(),Le=(0,s.useRef)(null),Ue=(0,s.useRef)(null),[_e]=y,Be=(0,Ii.H)(null!==de?de:_e?.url||null),{contentsOptions:Me}=(0,Jt.$)(we,Pe),{isPlaying:Oe,isActive:De,togglePlay:Fe,usePlayContextItem:Ve}=(0,Nt.P)((0,Oi.A)(a,Me),{featureIdentifier:"playlist"}),$e=(0,s.useCallback)((()=>{const e=(0,Ls.$I)({isPlaying:Oe,isActive:De,spec:ee.playButtonFactory(),logger:W,uri:a});Fe({loggingParams:e})}),[Oe,De,Fe,ee,W,a]);!function(e){const t=(0,Pi._)(),a=(0,pe.YQ)((()=>{t.paste().then((t=>e(t)))}),500,{leading:!0,trailing:!1});(0,Li.f)(Ui,a),(0,Ni.x)(wi.W.PASTE,a)}((0,s.useCallback)((e=>{const t=e.split(/[\r\n]+/g).map((e=>(0,c.o_h)(e))).filter((e=>null!==e&&((0,c.U_m)(e)||(0,c.gHQ)(e)||(0,c.PkR)(e))));if(t.length>0&&U){const e=t.map((e=>e.toURI())),s=Le.current?.getSelected()?.slice(-1)?.[0],i={after:s??"end"};fe((0,u.io)(a,e,i))}}),[U,fe,a]));const ze=(0,s.useCallback)((e=>{const t=[...e[b.fl.TRACKS]||[],...e[b.fl.LOCAL_TRACKS]||[],...e[b.fl.EPISODES]||[],...e[b.fl.ALBUMS]||[],...e[b.fl.AUDIOBOOKS]||[]];t.length>0&&U&&(W.logInteraction(q.dragAddToPlaylist({playlist:a,itemToBeAdded:t[0]})),fe((0,u.io)(a,t)))}),[U,W,q,a,fe]),He=!be&&0!==h,qe=!le&&Y&&(ue&&!me||He),We=le&&Y&&(ue&&!me||He),Ke=T&&Y,Ye=!ue&&!le&&!He&&Y,Je=D?.count??1,[Qe]=(0,S.z)(),Ge="plays"===ce.rank_type,Xe=(0,s.useMemo)((()=>(0,C.Ey)({isMixedMedia:re,hasEpisodes:R,hasSpotifyAudiobooks:V,hasDateAdded:M,isLive:se,isConcert:ae,isBlend:ie,nrCollaborators:Je,isBooklist:le,isCompactMode:G,isChart:te,showPlayCount:Ge,isExtraColumnsEnabled:Q,isVideoFirstPlaylist:oe})),[re,R,V,M,se,ae,ie,Je,le,G,te,Ge,Q,oe]),Ze=(0,s.useMemo)((()=>{let e;return e=Ne.getCapabilities().canSort?le?new Set(k.dh):new Set((0,C.zq)(Xe)):Wi,e}),[Xe,le,Ne]),et=le&&!G,tt=(0,s.useMemo)((()=>{const e=le?[b.fl.AUDIOBOOKS]:[b.fl.TRACKS,b.fl.LOCAL_TRACKS,b.fl.EPISODES,b.fl.ALBUMS];return{[f.Nz.ON]:U?e:[]}}),[U,le]),{className:at,dropPosition:st,...it}=(0,A.A)({allowedMimeTypesByDropPosition:tt,onDrop:ze}),rt=Ai(),lt=Ti();return(0,Ei.K)(a),(0,p.jsxs)(s.Suspense,{fallback:null,children:[(0,p.jsx)(P.c,{artistOrShow:e.metadata.owner.displayName,title:m,uri:a,entityType:P.p.PLAYLIST}),(0,p.jsx)(j.Q,{children:(0,Fi.Q2)({playlistName:m,userName:e.metadata.owner.displayName||"",isSpotifyOwned:be,spotifyPlaylistTitleTagVariants:rt,userPlaylistTitleTagVariants:lt,count:x})}),(0,p.jsxs)("section",{role:"presentation","data-testid":"playlist-page","data-test-uri":a,...it,children:[(0,p.jsx)(Vs.x,{metadata:e.metadata,isPlaying:Oe,isPublished:F,totalItems:Qe,togglePlay:$e,backgroundColor:Be,spec:X,className:at}),(0,p.jsxs)("div",{className:Se.A.playlistContent,children:[(0,p.jsx)(Ms,{playlist:e,capabilities:t,spec:ee,isPlaying:Oe,isActive:De,togglePlay:$e,isBooklist:le,backgroundColor:Be,tracklistDomRef:Ue,isConcert:ae,sortableColumns:Ze,className:at,watchFeedEntityEntryPoint:oe?void 0:e.metadata.watchFeedEntityEntryPoint,availableSignals:z,formatListAttributes:ce,isVideoFirst:oe}),(0,p.jsxs)("div",{className:at,children:[(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)($i,{formatListData:e.metadata.formatListData})}),!Re&&ve?.upcomingEventsCount?(0,p.jsx)(zi,{artistConcertsUri:ve.uri||"",artistImageUrl:ve.imageUrl||"",artistName:ve.title||"",spec:q}):null,Re&&!!ve&&Ee&&Ee.length>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Hi,{liveEvents:Ee,artistConcertsUri:ve.uri||"",artistName:ve.title||"",spec:q})}),(0,p.jsxs)("div",{className:"contentSpacing",children:[(0,p.jsx)(Ia,{uri:a,formatListAttributes:ce}),ge?(0,p.jsx)(g,{playlistUri:a}):null,ge&&be?(0,p.jsx)(qi,{uri:a,playlistName:m}):null,e.metadata.hasSpotifyAudiobooks&&Te&&(0,p.jsxs)("div",{className:Se.A.noBooklistSupportContainer,children:[(0,p.jsx)(l.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:d.Ru.get("web-player.playlist.booklist-not-supported-title")}),(0,p.jsx)(l.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:d.Ru.get("web-player.playlist.booklist-not-supported.message")})]}),x>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:et?(0,p.jsx)(ta,{initialItems:H,contextUri:a,nrItems:x,canEdit:ue,canRemove:_,ariaLabel:m}):(0,p.jsx)(K,{spec:Z,children:(0,p.jsx)(E.a,{columns:Xe,children:te?(0,p.jsx)(ja,{ariaLabel:m,nrTracks:x,playlistUri:a,scrollToUid:Ie,usePlayContextItem:Ve,tracklistDomRef:Ue,sortableColumns:Ze,isCompactMode:G},a):(0,p.jsx)(Js,{ariaLabel:m,nrTracks:x,playlistUri:a,playlistName:m,isMixedMedia:re,isLive:se,isConcert:ae,isBlend:ie,isBooklist:le,canEdit:ue,scrollToUid:Ie,feedbackPath:ce["dislike-endpoint"],deleteFeedbackPath:ce["delete-endpoint"],usePlayContextItem:Ve,tracklistRef:Le,tracklistDomRef:Ue,canRemove:_,spec:Z,initialItems:H,isCompactMode:G,sortableColumns:Ze,hasSpotifyAudiobooks:V??!1,isPersonalized:(0,w.X)(e.metadata.formatListData?.type),isVideoFirstPlaylist:oe},a)})})}),Ke&&(0,p.jsx)(s.Suspense,{fallback:null,children:me?(0,p.jsx)(Bt,{playlistUri:a,hideInlineCuration:xe,isBooklist:le}):(0,p.jsx)("button",{className:Se.A.seeMore,onClick:ye,children:(0,p.jsx)(l.E,{as:"div",variant:"bodySmallBold",children:d.Ru.get("playlist.curation.find_more")})})}),qe?(0,p.jsx)("div",{"data-testid":"recommended-track",children:(0,p.jsx)(mi,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:ue})}):null,We?(0,p.jsx)(ci,{uri:a,canEdit:ue}):null,Ye&&(0,p.jsx)(Fa,{uri:a})]})]})]}),ae&&(0,p.jsx)(Fs,{spec:q.footerSectionFactory()})]})]})})),Yi=s.memo((function({uri:e}){const t=(0,zt.m)().getCapabilities(),{filter:a}=(0,s.useContext)(v.g),{sortState:i}=(0,s.useContext)(k.cL),{metadataOptions:r,contentsOptions:l}=(0,Jt.$)(i,a),{data:n,isLoading:o,isError:c}=(0,Di.W)(e,r,l);return(e=>{const t=(0,Qs.j)(),a=(0,zt.m)(),i=(0,s.useRef)(!1);(0,s.useEffect)((()=>{t&&i.current&&a.resync(e,{maybe:!0}),t||(i.current=!0)}),[t,a,e])})(e),!n||o?(0,p.jsx)(R.LoadingPage,{hasError:c,errorMessage:d.Ru.get("error.not_found.title.playlist"),loadOffline:t.canModifyOffline}):n.metadata.permissions&&!n.metadata.permissions.canView?(0,p.jsx)(T.Z,{uri:e}):(0,p.jsx)(Ki,{playlist:n,capabilities:t})})),Ji=()=>{const{playlistId:e}=(0,r.g)(),t=(0,c.Pse)((e||"").split("&")[0]).toURI();return(0,p.jsx)(Mi.P,{surface:Bi.u.PLAYLIST,uris:[t],children:(0,p.jsx)(k.sn,{uri:t,children:(0,p.jsx)(v.s,{uri:t,children:(0,p.jsx)(S.S,{children:(0,p.jsx)(ki,{children:(0,p.jsx)(Yi,{uri:t})})})})})})}},11118:(e,t,a)=>{a.d(t,{$:()=>l});var s=a(75044),i=a(29222),r=a(81481);const l=()=>{const e=(0,i.j)(),t=(0,s.NC)(r.en,{loadingValue:!1});return e.getCapabilities().canBan&&t}},19758:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u,useThisisPlaylistExtensionQuery:()=>x});var s=a(25270),i=a(80366),r=a(17640),l=a(24498),n=a(58089),o=a(65927),c=a(59337),d=a(86070);const u=e=>{const{artistImageUrl:t,artistName:a,artistConcertsUri:u,spec:m}=e,p=(0,n.s)(),y=(0,o.t)(m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}));return t&&a&&u?(0,d.jsxs)("section",{ref:y,className:"contentSpacing",children:[(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:r.Ru.get("concerts")}),(0,d.jsx)("div",{className:c.A.cards,children:(0,d.jsxs)("div",{className:c.A.tourCard,"data-testid":"on-tour-card",children:[(0,d.jsx)("img",{className:c.A.cardImage,src:t,alt:""}),(0,d.jsxs)("div",{className:c.A.cardContent,children:[(0,d.jsx)(s.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:c.A.subtitle,children:r.Ru.get("concerts_on_tour")}),(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",className:c.A.title,semanticColor:"textBase",children:a}),(0,d.jsx)(l.N,{to:u,className:c.A.cardLink,children:(0,d.jsx)(i.n,{as:"span",size:"small",onClick:()=>{const e=m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:u});p.logInteraction(e)},className:c.A.cardButton,children:r.Ru.get("concerts_see_all_events")})})]})]})})]}):null};var m=a(24792),p=a(31491);const y=new m.l("thisisPlaylistExtension","query","906c2e14927400c8a71645c647576ce032f837a112d5e6f9375b19c80445c8cf",null),x=(e,t)=>(0,p.I)(y,e,t)},24213:(e,t,a)=>{a.d(t,{$:()=>s.$});var s=a(11118)},32379:(e,t,a)=>{a.d(t,{X:()=>c,$:()=>d});var s=a(11118),i=a(90497),r=a(71468),l=a(24821),n=a(42005);const o=["artistsets","artist-mix-reader","blend","daily-mix","daylist","discover-weekly","descripto","inspiredby-mix","on-repeat","release-radar","repeat-rewind","topic-mix"],c=e=>!!e&&o.includes(e),d=(e,t)=>{const a=(0,s.$)(),o=(0,i.i)(e.uri),[d]=(0,r.A)(o),{currentSession:u}=(0,n.D)(),m=Boolean(u?.active);return!(!(0,l.v)(e)||!t||d||!a||e.uri!==o||m)&&((e,t)=>"autoplay"===e.provider||!("context"!==e.provider||!c(t.metadata?.format_list_type)))(e,t)}},33675:(e,t,a)=>{a.d(t,{u:()=>p});var s=a(97500),i=a.n(s),r=a(40638),l=a(20440),n=a(28475),o=a(12543),c=a(499),d=a(58089),u=a(86697),m=a(86070);const p=({uri:e,src:t,playAriaLabel:a,onClick:s,isPlaying:p,isActive:y,isLocked:x,isEpisode:h,isVideo:g,spec:b})=>{const f=(0,o.W)(),A=(0,d.s)(),j=(0,r.YQ)((t=>{let a;if(f({type:"click",intent:p?"pause":"play"}),b){const t=b.playbackButtonFactory();let s;s=y&&p?t.hitPause({itemToBePaused:e}):y&&!p?t.hitResume({itemToBeResumed:e}):t.hitPlay({itemToBePlayed:e}),a=A.logInteraction(s)}s(t,a)}),c.d,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:u.A.rowImageWithPlay,children:[(0,m.jsx)(n.e,{src:t,isEpisode:h,isVideo:g}),(0,m.jsx)(l.x,{className:i()(u.A.rowPlayPauseButton,u.A.rowImagePlayPauseButton),iconClassName:u.A.rowPlayPauseIcon,onClick:j,isPlaying:p,isLocked:x,playAriaLabel:a})]})}},40822:(e,t,a)=>{a.d(t,{H:()=>X});var s=a(30758),i=a(97500),r=a.n(i),l=a(62411),n=a(72654),o=a(25270),c=a(80366),d=a(83155),u=a(55839),m=a(88897),p=a(12599),y=a(17640),x=a(96381),h=a(79583),g=a(35792),b=a(2565),f=a(49406),A=a(52110),j=a(43294),T=a(28957),R=a(72767),C=a(45763),v=a(62300),k=a(97170),S=a(52127),E=a(44576),I=a(37010),P=a(16056),w=a(92290),N=a(24498),L=a(7840),U=a(60707),_=a(90677),B=a(78249),M=a(71468),O=a(9954),D=a(3754),F=a(63043),V=a(42668),$=a(91174),z=a(4319),H=a(58089),q=a(5141),W=a(48632),K=a(91455);const Y="i3wVxndfxMEqUujUJOYc",J="XFwXZEToljeXDRWQYSEm",Q="hZ_wTiRO870PNY1cRKCd";var G=a(86070);const X=(0,s.memo)((function({book:e,contextUri:t,featureIdentifier:a,index:i,sharingInfo:X,uid:Z,rating:ee,isRecommendation:te=!1,canRemove:ae=!1,showSeparator:se=!1,highlightText:ie=e=>e,onAddClick:re,...le}){const{name:ne,description:oe,isLocked:ce,isExplicit:de,images:ue,type:me,uri:pe,authorName:ye,consumptionCapExplanation:xe,durationMs:he,topics:ge=[],signifierText:be}=e,fe=(0,H.s)(),{spec:Ae}=(0,q.r)(m.m,{data:{position:i,uri:pe}}),{isPlaying:je,isActive:Te,togglePlay:Re}=(0,V.P)({uri:pe},{featureIdentifier:a}),{isPlayable:Ce}=(0,U.g)(pe,{}),ve=(0,L.g)(),ke=(0,p.o_h)(pe).toURLPath(!0),Se=(0,w.$)(),Ee=(0,$.p)(pe),[Ie,Pe]=(0,M.A)(pe),we=(0,D.T)(pe),Ne=(0,l.wA)(),Le=Se===w.e.SMALL?"small":"medium",Ue=(0,s.useCallback)((()=>{fe.logInteraction(Ae.addButtonFactory().hitAddToPlaylist({playlist:t,itemToBeAdded:pe})),re?.(pe)}),[fe,Ae,t,pe,re]),_e=(0,s.useCallback)((()=>{if(xe)Ne((0,x._3)(xe));else if(ce&&!xe)ve(ke);else{const e=(0,_.$I)({isPlaying:je,isActive:Te,spec:Ae.playButtonFactory(),logger:fe,uri:pe});Re({loggingParams:e})}}),[xe,Ne,Te,ce,je,fe,ve,Ae,Re,pe,ke]),Be=(0,s.useCallback)((()=>{fe.logInteraction(Ae.genreLinkFactory({uri:ge[0].uri??""}).hitUiNavigate({destination:ge[0].uri??""}))}),[fe,Ae,ge]),Me=(0,G.jsx)(I.U,{children:ie(ne,P.u.TITLE)}),Oe=(0,G.jsx)(k.k,{description:oe,children:(0,G.jsxs)(R.X,{badges:!!de&&(0,G.jsx)(B.U,{}),children:[!0===ee?.showAverage&&void 0!==ee.average&&(0,G.jsxs)("span",{children:[(0,G.jsx)(n.j,{size:"xsmall",className:Y}),y.Ru.formatNumber(ee.average,{maximumFractionDigits:1})]}),ge.at(0)?.title&&(0,G.jsx)(N.N,{className:J,to:ge[0].uri??"",onClick:Be,children:ge[0].title}),void 0!==he&&(0,G.jsx)(W.j,{isPlaying:!1,fullyPlayed:Ee?.state===z.H7.Completed,durationMs:he,position:Ee?.playPositionMilliseconds})]})}),De=(0,G.jsx)(T.p,{uri:pe,uid:Z,contextUri:t,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:ae}),Fe=!ce&&!!!xe,Ve=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(h.M,{className:r()({[K.A.visibleAction]:Ie}),isAdded:Ie,onClick:()=>{Ie?fe.logInteraction(Ae.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:pe})):fe.logInteraction(Ae.saveToLibraryButtonFactory().hitLike({itemToBeLiked:pe})),Pe(!Ie)},size:Le,condensedAll:!0,condensed:!0}),(0,G.jsx)(g.I,{className:r()({[K.A.visibleAction]:(0,O.X)(we)}),uri:pe,onClick:(e,t)=>{t===F.NV.ADD&&fe.logInteraction(Ae.downloadButtonFactory().hitDownload({itemToDownload:pe}))},size:Le,canDownload:Fe,condensedAll:!0}),(0,G.jsx)(f.w,{uri:pe,sharingInfo:X??null,interactionData:{intent:"share",type:"click"},size:Le,onClick:()=>{fe.logInteraction(Ae.shareButtonFactory().hitShare({entityToBeShared:pe,shareId:X?.shareId??""}))},condensedAll:!0}),(0,G.jsx)(A.b,{menu:De,children:(0,G.jsx)(b.e,{label:y.Ru.get("more.label.context",ne),size:Le,onClick:()=>{fe.logInteraction(Ae.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),$e=te?null:(0,G.jsx)(S.F,{actions:Ve,playButton:(0,G.jsx)(C.q,{onClick:_e,isPlaying:je,ariaPlayLabel:y.Ru.get("tracklist.a11y.play",ne,ye),ariaPauseLabel:y.Ru.get("tracklist.a11y.pause",ne,ye),locked:ce,disabled:!Ce})}),ze=(0,G.jsx)(E.e,{images:ue,name:ne,type:me,breakpoint:Se}),He=be?(0,G.jsx)(o.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:be}):null,qe=re?(0,G.jsx)(c.n,{size:"small",onClick:Ue,children:y.Ru.get("playlist.extender.button.add")}):null,We=(0,G.jsxs)(d.j,{hasTextSeparator:!0,children:[(0,G.jsxs)(G.Fragment,{children:[te&&ce&&(0,G.jsx)(u.u,{semanticColor:"textSubdued",title:y.Ru.get("mwp.header.content.unavailable"),size:"xsmall",className:Q}),y.Ru.get("card.tag.audiobook")]}),ie(ye,P.u.SUBTITLE)]});return(0,G.jsx)(j.h,{menu:De,onShow:()=>{fe.logInteraction(Ae.secondaryHitUiReveal())},children:(0,G.jsx)(v.k,{breakpoint:Se,id:`book-${pe}`,media:ze,pretitle:He,title:Me,body:Oe,subtitle:We,footer:$e,trailing:qe,isActive:Te,onClick:()=>{fe.logInteraction(Ae.hitUiNavigate({destination:pe})),ve(ke)},showSeparator:se,disabled:!Ce,...le})})}))},59337:(e,t,a)=>{a.d(t,{A:()=>s});const s={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}},90089:(e,t,a)=>{a.d(t,{H:()=>n});var s=a(30758),i=a(26423),r=a(495),l=a(88036);function n(e=null,t=i.l0o){const{backgroundColor:a}=(0,r.oI)(),n=(0,r.as)(),o=(0,l.z)(e);return(0,s.useEffect)((()=>(n((0,r.Mo)(o)),()=>{n((0,r.Hf)())})),[o,n]),a||t}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map