(()=>{var e,t,n,a,r,i,s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=__webpack_modules__,o.amdO={},e=[],o.O=(t,n,a,r)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,a,r]=e[d],s=!0,c=0;c<n.length;c++)(!1&r||i>=r)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(s=!1,r<i&&(i=r));if(s){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,a,r]},o.F={},o.E=e=>{Object.keys(o.F).map((t=>{o.F[t](e)}))},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var r=Object.create(null);o.r(r);var i={};t=t||[null,n({}),n([]),n(n)];for(var s=2&a&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(r,i),r},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>(({42:"xpui-routes-blend",319:"dwp-panel-section",347:"home-subfeed",352:"dwp-page-error-template",399:"xpui-routes-episode-more-like-this",599:"home-ad-card",749:"xpui-routes-country-hub-section",777:"dwp-watch-feed-view-container",983:"xpui-debug-window-contents",1206:"xpui-root-dialogs",1396:"xpui-routes-premium-page",1602:"dwp-home-header",1621:"home-v2-section",1785:"xpui-desktop-routes-settings",1845:"xpui-routes-all-show-ads",2205:"xpui-playlist-format-redirect-with-params",2233:"dwp-home-chips-row",2355:"xpui-routes-playlist",2391:"xpui-routes-desktop-settings",2543:"xpui-routes-country-hub",2579:"dwp-error-page",2630:"dwp-offline-empty-state",2889:"xpui-routes-recent-searches",3322:"dwp-now-playing-bar",3569:"xpui-routes-offline-browse",3632:"this-is-playlist-concerts-carousel",3667:"xpui-pip-mini-player",3838:"xpui-routes-cultural-moment-hub",3890:"xpui-routes-track",3934:"dev-playground",4084:"dwp-whats-new-feed",4312:"home-hpto",4389:"xpui-routes-collection-local-files",4483:"dwp-user-comments",4496:"xpui-routes-create-playlist",4574:"your-sound-capsule-modal",4789:"concerts-on-tour-playlist-card",5040:"xpui-routes-see-all-playlist-leavebehinds",5094:"dwp-top-bar",5523:"xpui-routes-stage-page",5663:"xpui-routes-recently-played",5783:"xpui-routes-collection-concerts",5853:"xpui-routes-collection-concert-gallery",5885:"home-ads-container",5962:"xpui-routes-album",6080:"xpui-routes-collection-episodes",6266:"browse-v2",6457:"xpui-routes-your-library-x",6505:"xpui-routes-lyrics",6665:"home-ads-visibility-logger",6863:"xpui-routes-track-v2",7067:"lottie-animation",7125:"xpui-routes-search",7170:"home-ads-fetcher",7241:"xpui-routes-venues",7564:"xpui-routes-buddy-feed",7599:"legacy-hpto-compatibility",7988:"dwp-video-player",8212:"xpui-routes-health-check",8493:"xpui-desktop-modals",8552:"dwp-feedback-bar",8588:"dwp-billboard-ad",8606:"xpui-routes-show",8828:"xpui-routes-collection-songs",8865:"xpui-routes-album-prerelease",9033:"xpui-routes-show-more-like-this",9209:"xpui-routes-concert",9319:"home-v2",9480:"xpui-routes-profile",9500:"dwp-leaderboard-component",9528:"xpui-routes-episode",9718:"playlist-leavebehinds"}[e]||e)+".js"),o.miniCssF=e=>(({42:"xpui-routes-blend",319:"dwp-panel-section",352:"dwp-page-error-template",399:"xpui-routes-episode-more-like-this",599:"home-ad-card",749:"xpui-routes-country-hub-section",777:"dwp-watch-feed-view-container",983:"xpui-debug-window-contents",1206:"xpui-root-dialogs",1396:"xpui-routes-premium-page",1602:"dwp-home-header",1621:"home-v2-section",1845:"xpui-routes-all-show-ads",2233:"dwp-home-chips-row",2355:"xpui-routes-playlist",2391:"xpui-routes-desktop-settings",2543:"xpui-routes-country-hub",2579:"dwp-error-page",2630:"dwp-offline-empty-state",2889:"xpui-routes-recent-searches",3322:"dwp-now-playing-bar",3569:"xpui-routes-offline-browse",3632:"this-is-playlist-concerts-carousel",3667:"xpui-pip-mini-player",3838:"xpui-routes-cultural-moment-hub",4084:"dwp-whats-new-feed",4312:"home-hpto",4389:"xpui-routes-collection-local-files",4483:"dwp-user-comments",4574:"your-sound-capsule-modal",4789:"concerts-on-tour-playlist-card",5040:"xpui-routes-see-all-playlist-leavebehinds",5094:"dwp-top-bar",5523:"xpui-routes-stage-page",5663:"xpui-routes-recently-played",5783:"xpui-routes-collection-concerts",5853:"xpui-routes-collection-concert-gallery",5962:"xpui-routes-album",6080:"xpui-routes-collection-episodes",6266:"browse-v2",6457:"xpui-routes-your-library-x",6488:"dwp-premium-page",6863:"xpui-routes-track-v2",7125:"xpui-routes-search",7241:"xpui-routes-venues",7564:"xpui-routes-buddy-feed",7599:"legacy-hpto-compatibility",7988:"dwp-video-player",8493:"xpui-desktop-modals",8552:"dwp-feedback-bar",8588:"dwp-billboard-ad",8606:"xpui-routes-show",8828:"xpui-routes-collection-songs",8865:"xpui-routes-album-prerelease",9033:"xpui-routes-show-more-like-this",9209:"xpui-routes-concert",9319:"home-v2",9480:"xpui-routes-profile",9500:"dwp-leaderboard-component",9528:"xpui-routes-episode",9718:"playlist-leavebehinds"}[e]||e)+".css"),o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},r="client-web:",o.l=(e,t,n,i)=>{if(a[e])a[e].push(t);else{var s,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==r+n){s=u;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",r+n),s.src=e),a[e]=[t];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var r=a[e];if(delete a[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.p="/",(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,n)=>{var a=o.miniCssF(e),r=o.p+a;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var r=(s=n[a]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(r===e||r===t))return s}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){var s;if((r=(s=i[a]).getAttribute("data-href"))===e||r===t)return s}})(a,r))return t();((e,t,n,a,r)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",o.nc&&(i.nonce=o.nc),i.onerror=i.onload=n=>{if(i.onerror=i.onload=null,"load"===n.type)a();else{var s=n&&n.type,o=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+": "+o+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=o,i.parentNode&&i.parentNode.removeChild(i),r(c)}},i.href=t,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i)})(e,r,null,t,n)})),t={4234:0};o.f.miniCss=(n,a)=>{t[n]?a.push(t[n]):0!==t[n]&&{42:1,70:1,319:1,352:1,399:1,599:1,679:1,749:1,777:1,983:1,1206:1,1396:1,1602:1,1621:1,1845:1,2161:1,2233:1,2355:1,2391:1,2543:1,2579:1,2630:1,2889:1,3322:1,3569:1,3632:1,3667:1,3838:1,4084:1,4312:1,4389:1,4395:1,4483:1,4574:1,4789:1,5040:1,5094:1,5346:1,5523:1,5663:1,5783:1,5853:1,5962:1,6080:1,6266:1,6457:1,6488:1,6543:1,6863:1,7125:1,7241:1,7399:1,7564:1,7599:1,7779:1,7988:1,8493:1,8552:1,8588:1,8606:1,8828:1,8865:1,9033:1,9209:1,9319:1,9480:1,9500:1,9528:1,9718:1}[n]&&a.push(t[n]=e(n).then((()=>{t[n]=0}),(e=>{throw delete t[n],e})))},o.F.miniCss=e=>{if(!(o.o(t,e)&&void 0!==t[e]||/^(1(101|368|461|597|785|907|96)|2((20|23|31)5|023|039|124|620)|3(93[47]|071|291|47|638|769|890)|4((19|32|49)6|5|588|735)|5(8(37|84|85)|286|499)|6(286|36|505|634|665|897)|7((27|39|49)5|067|170|194|246|488|937|992)|8(7(19|25|57|63)|119|212|463|574|832)|9(2(34|8|90)|038|058|416|462|884|933))$/.test(e))){t[e]=null;var n=document.createElement("link");o.nc&&n.setAttribute("nonce",o.nc),n.rel="prefetch",n.as="style",n.href=o.p+o.miniCssF(e),document.head.appendChild(n)}}}})(),(()=>{var e={4234:0};o.f.j=(t,n)=>{var a=o.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else if(6488!=t){var r=new Promise(((n,r)=>a=e[t]=[n,r]));n.push(a[2]=r);var i=o.p+o.u(t),s=new Error;o.l(i,(n=>{if(o.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,a[1](s)}}),"chunk-"+t,t)}else e[t]=0},o.F.j=t=>{if((!o.o(e,t)||void 0===e[t])&&6488!=t){e[t]=null;var n=document.createElement("link");n.charset="utf-8",o.nc&&n.setAttribute("nonce",o.nc),n.rel="prefetch",n.as="script",n.href=o.p+o.u(t),document.head.appendChild(n)}},o.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[i,s,c]=n,l=0;if(i.some((t=>0!==e[t]))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(c)var d=c(o)}for(t&&t(n);l<i.length;l++)r=i[l],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.nc=void 0,i={7170:[599,6665]},o.f.prefetch=(e,t)=>Promise.all(t).then((()=>{var t=i[e];Array.isArray(t)&&t.map(o.E)})),o.O(0,[4234],(()=>{[352,6634,1101,7194,7395,8463,7125,1597,5837,4312,5885,3569,2630].map(o.E)}),5);var c={};(()=>{"use strict";o(32807),o(6441);var e=o(99576);var t=o(13932),n=o(64343),a=o(34921),r=o(98108),i=o(29174);const s="PWA_DISPLAY_MODE_CHANGED";var c=o(24514),l=o(56168),d=o(51778),u=o(62411),h=o(2178),p=o(94992),m=o(74297),f=o(30758);const g="main-appShell-container",b="main-appShell-sideBar",v="main-appShell-navItems",y="main-appShell-mainContent",_="main-appShell-topBar",E="main-appShell-cards",x="main-appShell-cardsHeader",A="main-appShell-cardsWrapper",w="main-appShell-card",S="main-appShell-playbackBar";var I=o(86070);const N=(0,f.memo)((function(){return(0,I.jsxs)("div",{className:g,children:[(0,I.jsx)("div",{className:b,children:(0,I.jsxs)("svg",{className:v,width:"232",height:"704",viewBox:"0 0 232 704",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("path",{fill:"#000",d:"M0 0h227v704H0z"}),(0,I.jsx)("path",{d:"M29.887 130.123A8.47 8.47 0 0032.5 124a8.5 8.5 0 10-8.5 8.5 8.454 8.454 0 005.125-1.73l4.401 5.153.76-.649-4.399-5.151zM24 131.5c-4.136 0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5-3.364 7.5-7.5 7.5zM29.16 158.597l-.913.406 7.797 17.513.914-.406-7.798-17.513zM18.5 176.5h1v-18h-1v18zm6 0h1v-18h-1v18z",fill:"#757575"}),(0,I.jsx)("path",{fill:"#404040",d:"M53 162h122v11H53zM64 258h95v11H64z"}),(0,I.jsx)("path",{fill:"#fff",d:"M16 248h32v32H16z"}),(0,I.jsx)("path",{d:"M38 263h-5v-5h-2v5h-5v2h5v5h2v-5h5v-2z",fill:"#000"}),(0,I.jsx)("path",{fill:"url(#paint0_linear)",d:"M16 292h32v32H16z"}),(0,I.jsx)("path",{d:"M37.797 302.727a4.057 4.057 0 00-5.488-.253.558.558 0 01-.31.112.531.531 0 01-.31-.112 4.054 4.054 0 00-5.488.253 4.05 4.05 0 00-1.194 2.883c0 1.089.424 2.113 1.168 2.855l4.462 5.223a1.791 1.791 0 002.726 0l4.435-5.195a4.052 4.052 0 001.195-2.883 4.057 4.057 0 00-1.196-2.883z",fill:"#fff"}),(0,I.jsx)("path",{fill:"#404040",d:"M64 303h79v11H64z"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 353h142v11H16zM16 395h53v11H16zM16 437h98v11H16zM16 479h143v11H16zM16 521h97v11H16z",opacity:"0.6"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 218h71v11H16z"}),(0,I.jsx)("path",{d:"M25.501 73.078L34 77.984V91h-6v-7h-5v7h-6V78.024l8.501-4.946zm-.002-1.156L16 77.449V92h8v-7h3v7h8V77.407l-9.501-5.485z",fill:"#616161"}),(0,I.jsx)("path",{fill:"#404040",d:"M53 78h122v11H53zM53 120h122v11H53z"}),(0,I.jsx)("defs",{children:(0,I.jsxs)("linearGradient",{id:"paint0_linear",x1:"0",y1:"308",x2:"32",y2:"340",gradientUnits:"userSpaceOnUse",children:[(0,I.jsx)("stop",{stopColor:"#450AF5"}),(0,I.jsx)("stop",{offset:"1",stopColor:"#C4EFD9"})]})})]})}),(0,I.jsxs)("div",{className:y,children:[(0,I.jsx)("div",{className:_,children:(0,I.jsxs)("svg",{width:"125",height:"95",viewBox:"0 0 125 95",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{x:"0",y:"31",width:"125",height:"32",rx:"16",fill:"#282828"}),(0,I.jsx)("path",{d:"M992 59c6.627 0 12-5.373 12-12s-5.373-12-12-12-12 5.373-12 12 5.373 12 12 12z",fill:"#404040"}),(0,I.jsx)("path",{fill:"#404040",d:"M1014 42h66v11h-66z"})]})}),(0,I.jsxs)("div",{children:[(0,I.jsxs)("div",{className:E,children:[(0,I.jsxs)("div",{className:x,children:[(0,I.jsx)("svg",{width:"257",height:"23",viewBox:"0 0 257 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)("path",{fill:"#404040",d:"M0 0h257v23H0z"})}),(0,I.jsx)("svg",{width:"72",height:"11",viewBox:"0 0 72 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)("path",{fill:"#404040",d:"M0 0h72v11H0z"})})]}),(0,I.jsxs)("div",{className:A,children:[(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]})]})]}),(0,I.jsxs)("div",{className:E,children:[(0,I.jsxs)("div",{className:x,children:[(0,I.jsx)("svg",{width:"257",height:"23",viewBox:"0 0 257 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)("path",{fill:"#404040",d:"M0 0h257v23H0z"})}),(0,I.jsx)("svg",{width:"72",height:"11",viewBox:"0 0 72 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)("path",{fill:"#404040",d:"M0 0h72v11H0z"})})]}),(0,I.jsxs)("div",{className:A,children:[(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]})]})]}),(0,I.jsxs)("div",{className:E,children:[(0,I.jsxs)("div",{className:x,children:[(0,I.jsx)("svg",{width:"257",height:"23",viewBox:"0 0 257 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)("path",{fill:"#404040",d:"M0 0h257v23H0z"})}),(0,I.jsx)("svg",{width:"72",height:"11",viewBox:"0 0 72 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)("path",{fill:"#404040",d:"M0 0h72v11H0z"})})]}),(0,I.jsxs)("div",{className:A,children:[(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,I.jsxs)("svg",{className:w,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,I.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]})]})]})]})]}),(0,I.jsxs)("div",{className:S,children:[(0,I.jsx)("div",{children:(0,I.jsx)("svg",{width:"175",height:"40",viewBox:"0 0 175 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)("path",{fill:"#404040",d:"M53 5h122v11H53zM53 23h101v11H53zM0 0h40v40H0z"})})}),(0,I.jsx)("div",{children:(0,I.jsxs)("svg",{width:"216",height:"48",viewBox:"0 0 216 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("path",{d:"M12.5 22.8l.7-.8c-1.1-1.3-2.7-2-4.3-2v1c1.3 0 2.6.6 3.5 1.6l.1.2zm7.5 4.7c-1.2 0-2.3-.5-3.2-1.3l-.6.8c1 1 2.4 1.5 3.8 1.5V30l3.5-2-3.5-2v1.5zm0-6V23l3.5-2-3.5-2v1.5c-1.6 0-3.2.7-4.2 2l-3.4 3.9c-.9 1-2.2 1.6-3.5 1.6v1c1.6 0 3.2-.7 4.2-2l3.4-3.9c.9-1 2.2-1.6 3.5-1.6zM61 18.5l-8 4.619V19h-2v10h2v-4.119l8 4.619v-11zM163 20v4.119l-8-4.619v11l8-4.619V30h2V20h-2zM197.5 21h4.5v1.5l3.5-2-3.5-2V20h-4.5c-2.5 0-4.5 2-4.5 4.5 0 .6.1 1.2.4 1.8l.9-.5c-.2-.4-.3-.8-.3-1.3 0-1.9 1.6-3.5 3.5-3.5zm9.1 1.7l-.9.5c.2.4.3.8.3 1.3 0 1.9-1.6 3.5-3.5 3.5H198v-1.5l-3.5 2 3.5 2V29h4.5c2.5 0 4.5-2 4.5-4.5 0-.6-.1-1.2-.4-1.8z",fill:"#fff"}),(0,I.jsx)("circle",{cx:"108",cy:"24",r:"20",fill:"#fff"}),(0,I.jsx)("path",{d:"M100 16h16v16h-16V16z",fill:"#fff"}),(0,I.jsx)("path",{d:"M104.018 30l10.392-6-10.392-6v12z",fill:"#000"})]})}),(0,I.jsx)("div",{children:(0,I.jsx)("svg",{width:"99",height:"16",viewBox:"0 0 99 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)("path",{d:"M1 2v5l4.33-2.5L1 2zm0 12h14v-1H1v1zm0-4h14V9H1v1zm7-5v1h7V5H8zM92.945 1.379l-.652.763A7.968 7.968 0 0194.863 8a7.972 7.972 0 01-2.57 5.858l.651.763a8.966 8.966 0 00.001-13.242zm-2.272 2.66l-.651.763a4.484 4.484 0 01-.001 6.397l.651.763a5.48 5.48 0 001.691-3.961c0-1.557-.65-2.962-1.69-3.962zM80 5v6h2.804L88 14V2l-5.196 3H80zm7-1.268v8.536L83.072 10H81V6h2.072L87 3.732zM40 2.5v8c0 .55.45 1 1 1h5v-1h-5v-8h5v-1h-5c-.55 0-1 .45-1 1zM43 14c0 .275.225.5.5.5H46v-1h-2.5c-.275 0-.5.225-.5.5zM55 1.5h-6c-.55 0-1 .45-1 1v11c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-11c0-.55-.45-1-1-1zm0 12h-6v-11h6v11zm-3-8A.75.75 0 1052 4a.75.75 0 000 1.5zm0 6a2 2 0 100-4 2 2 0 000 4zm0-3c.551 0 1 .449 1 1 0 .551-.449 1-1 1-.551 0-1-.449-1-1 0-.551.449-1 1-1z",fill:"#fff"})})})]})]})}));var C=o(19438);const T=f.memo((function(){const e=Object.keys(i.Ru.getTranslations()).length>0;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(C.x,{isOpen:!0,isRemoteConfigInitialized:!1,headingMessage:e?i.Ru.get("error-dialog.generic.header"):"Something went wrong",message:e?i.Ru.get("error-dialog.generic.body"):"Try reloading the page",buttonLabel:e?i.Ru.get("fatal-error.button-label"):"RELOAD PAGE"}),(0,I.jsx)(N,{})]})}));var j=o(69558),L=o(54330),R=o(37134),k=o(53129),O=o(79530),P=o(53502);const D=()=>{const e=(0,k.z)(),t=(0,u.Pj)(),n=(0,f.useRef)(),a=(0,L.S)(),r=e.getState()?.item,i=r&&((0,P.p)(r)||(0,O.d)(r));return(0,f.useEffect)((()=>{n.current=a}),[a]),(0,f.useEffect)((()=>navigator&&navigator.mediaSession?((0,R.g)()&&i||(navigator.mediaSession.setActionHandler("previoustrack",(()=>{const t=n.current?.isOpen;t||e.skipToPrevious()})),navigator.mediaSession.setActionHandler("nexttrack",(()=>{const t=n.current?.isOpen;t||e.skipToNext()}))),navigator.mediaSession.setActionHandler("play",(()=>{const t=n.current?.isOpen;t||e.resume({featureIdentifier:"media-keys"})})),navigator.mediaSession.setActionHandler("pause",(()=>{const t=n.current?.isOpen;t||e.pause({featureIdentifier:"media-keys"})})),i&&(navigator.mediaSession.setActionHandler("seekbackward",(t=>{const n=t.seekOffset?1e3*t.seekOffset:1e4;e.seekBackward(n)})),navigator.mediaSession.setActionHandler("seekforward",(t=>{const n=t.seekOffset?1e3*t.seekOffset:1e4;e.seekForward(n)}))),()=>{navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null),navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",null)}):()=>{}),[i,e,t]),null};var M=o(76158),H=o(45730),z=o(10635),V=o(11761),U=o(91030),F=o(12496),B=o(2088),q=o(26188);function W(e){return e?.map((({url:e,width:t,height:n})=>({src:e,sizes:`${t}x${n}`})))??[]}function G(e){window.navigator.mediaSession&&(window.navigator.mediaSession.metadata=function(e){return(0,F.v)(e)?new window.MediaMetadata({title:e.name,artist:e.artists.map((e=>e.name)).join(i.Ru.getSeparator()),album:e.album.name,artwork:W(e.images)}):(0,P.p)(e)?new window.MediaMetadata({title:e.name,artist:e.artists?.map((e=>e.name)).join(i.Ru.getSeparator())||"",album:e.show.name,artwork:W(e.images)}):(0,O.d)(e)?new window.MediaMetadata({title:e.name,artist:e.artists?.map((e=>e.name)).join(i.Ru.getSeparator())||"",album:e.book.name,artwork:W(e.images)}):(0,U.N)(e)?new window.MediaMetadata({title:i.Ru.get("ad-formats.advertisement"),artist:"",album:"",artwork:W(e.images)}):(0,B.v)(e)||void 0===e?new window.MediaMetadata({title:"",artist:"",album:"",artwork:[]}):(0,q.d)(e)}(e))}const Q=()=>((0,V.p)(z.gd.UPDATE,(({data:e})=>G(e?.item??void 0))),null),K=()=>(0,u.d4)(M.c)===H.Kz.pip?(0,I.jsx)(Q,{}):null;var $=o(96131),Y=o(30339);function Z(e){return{name:"KmPageView",environments:["browser"],data:e}}function X(e){return{name:"KmPageViewNonAuth",environments:["browsernonauth"],data:e}}var J=o(23736);function ee(e=""){const t=`https://open.spotify.com${e}`;let n="";const a=/^\/\w+\/([a-zA-Z0-9]+)[/\w+]*/.exec(e);a?.[1]&&(n=a[1]);let r=e,i=e;const s=e.match(/^\/search\/(.*)\/(.*)/);return/^\/genre\//.test(e)||/^\/view\//.test(e)?i="/browse/genres":"/"===e?(i="/browse",r="/browse/featured"):"/browse/charts"===e?i="/charts":"/collection/tracks"===e?i="/collection/songs":"/search"===e?i="/search":s?(i="podcasts"===s[2]?"/search/shows":`/search/${s[2]}`,r=`/search/${s[2]}`):e.match(/\/search\/(?<query>.*)/)?(i="/search",r="/search/results"):"/download"===e?i="/upsell":"/queue"===e?i="/nowplaying/queue":/^\/artist\/[a-zA-Z0-9]+\/related/.test(e)?(r=(0,J.ITr)(n).toString(),i="/artist/related"):/^\/artist\/[a-zA-Z0-9]+\/about/.test(e)?(r=(0,J.ITr)(n).toString(),i="/artist/about"):/^\/artist\/[a-zA-Z0-9]+\/concerts/.test(e)?(r=(0,J.ITr)(n).toString(),i="/artist/concerts"):(0,J.ecE)(t)?(r=(0,J.ITr)(n).toString(),i="/artist"):(0,J.tbX)(t)?(r=(0,J.Pse)(n).toString(),i="/playlist"):(0,J._Tv)(t)?(r=(0,J.Q00)(n).toString(),i="/album"):(0,J.gHQ)(t)?(r=(0,J.iMK)(n).toString(),i="/episode"):(0,J.WB1)(t)?(r=(0,J.Mci)(n).toString(),i="/shows"):(0,J.APS)(t)?(r=(0,J.Qjr)(n).toString(),i="/profile"):(0,J.U_m)(t)&&(r=(0,J.Mce)(n).toString(),i="/track"),{viewUri:r,mappedPageId:i}}var te=o(83510);const ne="#login";var ae=o(85387);var re=o(63176);class ie extends f.Component{constructor(e){super(e);const{eventSender:t,location:n,isAnonymous:a}=this.props;t.send(ce(n.pathname,a))}shouldComponentUpdate(e){const{eventSender:t,navigationType:n,location:a,isAnonymous:r}=e,{location:i}=this.props,s=a.hash===ne||i.hash===ne;return(0,$.j)(a,i)||n===Y.rc.Replace||s||((0,re.D)(a.pathname),t.send(function(e,t=!1){const{viewUri:n,mappedPageId:a}=ee(e),r={page:a,type:"exit",view_uri:n};return t?X(r):Z(r)}(i.pathname,r)),t.send(ce(a.pathname,r))),!1}render(){return null}}const se=(0,u.Ng)((function(e,t){return{...t,isAnonymous:e.session.isAnonymous}}))((oe=ie,e=>{const t=(0,ae.zy)(),n=(0,ae.Zp)(),a=(0,ae.wQ)(),r=(0,ae.g)();return(0,I.jsx)(oe,{...e,navigate:n,navigationType:a,location:t,params:r})}));var oe;function ce(e,t=!1){const{viewUri:n,mappedPageId:a}=ee(e),r={page:a,type:"enter",view_uri:n};return t?X(r):Z(r)}var le=o(53143),de=o(45876),ue=o(7962);var he=de.L.isUsingKeyboard,pe=function(e){var t=function(e){var t=(0,f.useState)(e),n=(0,ue.A)(t,2),a=n[0],r=n[1],i=function(){return r(!1)},s=function(e){switch(e.key){case"Tab":case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":r(!0)}};return(0,f.useEffect)((function(){return window.addEventListener("keydown",s),window.addEventListener("mousedown",i),window.addEventListener("touchstart",i),function(){window.removeEventListener("keydown",s),window.removeEventListener("mousedown",i),window.removeEventListener("touchstart",i)}}),[]),{isUsingKeyboard:a,setIsUsingKeyboard:r}}(he),n=t.isUsingKeyboard;return f.createElement(de.E.Provider,{value:{isUsingKeyboard:n}},e.children)},me=o(16575);var fe=o(90238),ge=o(98418);const be=({fetchHomeAd:e,setHomeAd:t,adsSlotConfig:n,fetchRef:a})=>{const r=(0,ge.vh)();return{fetchAndSetHomeAd:(0,f.useMemo)((()=>e&&n?.hpto?async()=>{const n=e();a.current=n;try{t(n);const e=await n;a.current===n&&t(e)}catch(e){a.current===n&&t(void 0);const i=e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:String(e);r.send((0,fe.G)({error_type:"fetchHPTOSlotFailure",error_message:i,request_type:"hpto"}))}}:void 0),[r,a,e,t,n])}};function ve(e){const[t,n]=(0,f.useState)(!1);return(0,f.useEffect)((()=>n(!1)),[e]),{dismissed:t,dismiss(){n(!0)}}}function ye(){const e=(0,f.useState)(),t=(0,f.useRef)(e[0]);return{imageUrlToExtractHomeAdColorFrom:(0,f.useState)(),extractedHomeAdColor:[e[0],function(n){t.current=n,e[1](n)}],extractedHomeAdColorRef:t}}const _e=f.useState;var Ee=o(8558);const xe=()=>({allowSwitchingBetweenHomeAdsAndHpto:(0,t.NC)(Ee.htx)});var Ae=o(7812);const we=f.useState;var Se=o(2305);function Ie({adsSlotConfig:e}){const t=(0,ae.Zp)(),[n,a]=we(),r=e&&Se.r.hpto in e;return(0,f.useEffect)((()=>{if(!r)return()=>{};const e=(async()=>{const e=await Promise.resolve().then(o.bind(o,46125)),{slotsClient:n,adsCoreConnector:r}=e,i=await Promise.resolve().then(o.bind(o,20262)),{AdSlotEvent_AdSlotEventType:s,SubSlotRequest:c}=i;return await r.createSlot(Se.r.hpto),await r.enableSlot(Se.r.hpto),n.subSlot(c.fromPartial({slotId:Se.r.hpto}),(({adSlotEvent:e})=>{e?.eventType===s.AVAILABLE&&"true"===e.ad?.metadata?.is_preview&&(a(e.ad),t("/"))}))})();return()=>{e.then((e=>e.cancel()))}}),[r,t,a]),{previewHomeAd:n,setPreviewHomeAd:a}}function Ne({fetchHomeAd:e,adsSlotConfig:t,enableLegacyHptoContainerLoader:n}){const{homeAd:a,setHomeAd:r}=function(){const[e,t]=_e();return{homeAd:e,setHomeAd:t}}(),{fetchAndSetHomeAd:i}=(s={fetchHomeAd:e,setHomeAd:r,adsSlotConfig:t},{...be({...s,fetchRef:(0,f.useRef)()})});var s;return function({enableLegacyHptoContainerLoader:e}={}){const{allowSwitchingBetweenHomeAdsAndHpto:t}=xe(),n=(0,u.wA)();(0,f.useEffect)((()=>{!t&&e&&n((0,Ae.T)())}),[e,t,n])}({enableLegacyHptoContainerLoader:n}),{setHomeAd:r,fetchAndSetHomeAd:i,homeAd:a,...ye(),...ve(a),...Ie({adsSlotConfig:t})}}const Ce=({instance:e,children:t})=>{const{adsSlotConfig:n}=function({getAdsSlotConfig:e}){const[t,n]=(0,f.useState)();return(0,f.useEffect)((function(){e?.().then(n)}),[e]),{adsSlotConfig:t}}({getAdsSlotConfig:e?.config.getAdsSlotConfig}),a=Ne({adsSlotConfig:n,...e?.home}),r=(0,f.useMemo)((()=>({adsAPI:e||null,homeAds:a})),[a,e]);return(0,I.jsx)(me.Cp.Provider,{value:r,children:t})};var Te=o(90791),je=o(24622),Le=o(54395),Re=o(65045),ke=o(52127),Oe=o(67274),Pe=o(21757),De=o(84521),Me=o(55619),He=o(38021);const ze=({children:e})=>{const n=(0,Me.n)(),[a,r]=(0,f.useState)((()=>n.getLocalConfiguration()));return(0,f.useEffect)((()=>n.getEvents().addListener(He.M.UPDATE,(e=>r(e.data.configuration)))),[n,r]),(0,I.jsx)(t.Gu,{configuration:a,children:e})},Ve=({children:e,providers:t})=>{if(void 0===e)throw new Error("MultiProvider requires children!");return t.reduceRight(((e,t)=>(0,f.cloneElement)(t,void 0,e)),(0,I.jsx)(f.Fragment,{children:e}))};var Ue=o(79223),Fe=o(72661);const Be=({instance:e,children:t})=>(0,I.jsx)(Fe.c.Provider,{value:e,children:t});var qe=o(50266);const We=({instance:e,children:t})=>(0,I.jsx)(qe.b.Provider,{value:e,children:t});var Ge=o(96455);const Qe=({request:e,children:t})=>{const n=(0,f.useMemo)((()=>({request:e})),[e]);return(0,I.jsx)(Ge.j.Provider,{value:n,children:t})};var Ke=o(44298);const $e=({instance:e,children:t})=>(0,I.jsx)(Ke.M.Provider,{value:e,children:t});var Ye=o(48602),Ze=o(20167),Xe=o(43026),Je=o(40175);const et=({instance:e,children:t})=>(0,I.jsx)(Je.J.Provider,{value:e,children:t}),tt=({instance:e,children:t})=>(0,I.jsx)(ge.rP.Provider,{value:e,children:t}),nt=Spicetify.ReactComponent.PlatformProvider=({platform:e,children:t})=>{const n=(0,k.z)(),a=[(0,I.jsx)(tt,{instance:e}),(0,I.jsx)(Le.D,{}),(0,I.jsx)(Qe,{request:e.getGraphQLLoader()}),(0,I.jsx)(De.J,{platformData:e.getPlatformData()}),(0,I.jsx)(ze,{}),(0,I.jsx)(Ce,{instance:e.getAdManagers()}),(0,I.jsx)(Ye.A,{instance:e.getSingAlongAPI()}),(0,I.jsx)(Ze.a,{value:null}),(0,I.jsx)(Xe.V,{instance:e.getUBILogger()}),(0,I.jsx)(Oe.Z,{instance:e.getCollectionPlatformAPI()}),(0,I.jsx)(Pe.m,{instance:e.getEqualizerAPI()}),(0,I.jsx)(Te.U.Provider,{value:e.getBuddyFeedAPI()}),(0,I.jsx)(Re.pF,{playerAPI:n}),(0,I.jsx)(ke.t,{instance:e.getSettingsAPI()}),(0,I.jsx)(Ue.U,{instance:e.getRequestBuilder()}),(0,I.jsx)(Be,{instance:e.getAudioOutputDevicesAPI()}),(0,I.jsx)(We,{instance:e.getExternalAccessoryAPI()}),(0,I.jsx)($e,{instance:e.getPlaybackFiltersAPI()}),(0,I.jsx)(et,{instance:e.getUrlDispenserServiceClient()}),(0,I.jsx)(pe,{}),(0,I.jsx)(je.i,{})];return(0,I.jsx)(Ve,{providers:a,children:t})};var at=o(87241),rt=o(38939),it=o(21375),st=o(36303),ot=o(41443);const ct=({history:e,children:t})=>{const[n,a]=(0,f.useState)((()=>({location:e.location,action:e.action})));return(0,f.useLayoutEffect)((()=>{e.listen(((e,t)=>a({location:e,action:t})))}),[e]),(0,I.jsx)(ae.Ix,{location:n.location,navigationType:n.action,navigator:e,children:(0,I.jsx)(ot.$,{children:t})})};var lt=o(69732),dt=o(34314),ut=o(19159),ht=o(4707),pt=o(91402),mt=class extends pt.Q{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const a=t.queryKey,r=t.queryHash??(0,dt.F$)(a,t);let i=this.get(r);return i||(i=new ut.X({client:e,queryKey:a,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ht.jG.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>(0,dt.MK)(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>(0,dt.MK)(e,t))):t}notify(e){ht.jG.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){ht.jG.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){ht.jG.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},ft=o(40784),gt=class extends pt.Q{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#n=new Map,this.#a=0}#t;#n;#a;build(e,t,n){const a=new ft.s({mutationCache:this,mutationId:++this.#a,options:e.defaultMutationOptions(t),state:n});return this.add(a),a}add(e){this.#t.add(e);const t=bt(e);if("string"==typeof t){const n=this.#n.get(t);n?n.push(e):this.#n.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const t=bt(e);if("string"==typeof t){const n=this.#n.get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#n.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=bt(e);if("string"==typeof t){const n=this.#n.get(t),a=n?.find((e=>"pending"===e.state.status));return!a||a===e}return!0}runNext(e){const t=bt(e);if("string"==typeof t){const n=this.#n.get(t)?.find((t=>t!==e&&t.state.isPaused));return n?.continue()??Promise.resolve()}return Promise.resolve()}clear(){ht.jG.batch((()=>{this.#t.forEach((e=>{this.notify({type:"removed",mutation:e})})),this.#t.clear(),this.#n.clear()}))}getAll(){return Array.from(this.#t)}find(e){const t={exact:!0,...e};return this.getAll().find((e=>(0,dt.nJ)(t,e)))}findAll(e={}){return this.getAll().filter((t=>(0,dt.nJ)(e,t)))}notify(e){ht.jG.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return ht.jG.batch((()=>Promise.all(e.map((e=>e.continue().catch(dt.lQ))))))}};function bt(e){return e.options.scope?.id}var vt=o(81104),yt=o(49041),_t=o(10589),Et=class{#r;#i;#s;#o;#c;#l;#d;#u;constructor(e={}){this.#r=e.queryCache||new mt,this.#i=e.mutationCache||new gt,this.#s=e.defaultOptions||{},this.#o=new Map,this.#c=new Map,this.#l=0}mount(){this.#l++,1===this.#l&&(this.#d=vt.m.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#r.onFocus())})),this.#u=yt.t.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#r.onOnline())})))}unmount(){this.#l--,0===this.#l&&(this.#d?.(),this.#d=void 0,this.#u?.(),this.#u=void 0)}isFetching(e){return this.#r.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#i.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#r.build(this,t),a=n.state.data;return void 0===a?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime((0,dt.d2)(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#r.findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,n){const a=this.defaultQueryOptions({queryKey:e}),r=this.#r.get(a.queryHash),i=r?.state.data,s=(0,dt.Zw)(t,i);if(void 0!==s)return this.#r.build(this,a).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return ht.jG.batch((()=>this.#r.findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,n)]))))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state}removeQueries(e){const t=this.#r;ht.jG.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const n=this.#r;return ht.jG.batch((()=>(n.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries({type:"active",...e},t))))}cancelQueries(e,t={}){const n={revert:!0,...t},a=ht.jG.batch((()=>this.#r.findAll(e).map((e=>e.cancel(n)))));return Promise.all(a).then(dt.lQ).catch(dt.lQ)}invalidateQueries(e,t={}){return ht.jG.batch((()=>(this.#r.findAll(e).forEach((e=>{e.invalidate()})),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},a=ht.jG.batch((()=>this.#r.findAll(e).filter((e=>!e.isDisabled())).map((e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(dt.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(a).then(dt.lQ)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=this.#r.build(this,t);return n.isStaleByTime((0,dt.d2)(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(dt.lQ).catch(dt.lQ)}fetchInfiniteQuery(e){return e.behavior=(0,_t.PL)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(dt.lQ).catch(dt.lQ)}ensureInfiniteQueryData(e){return e.behavior=(0,_t.PL)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return yt.t.isOnline()?this.#i.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#r}getMutationCache(){return this.#i}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#o.set((0,dt.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#o.values()],n={};return t.forEach((t=>{(0,dt.Cp)(e,t.queryKey)&&Object.assign(n,t.defaultOptions)})),n}setMutationDefaults(e,t){this.#c.set((0,dt.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#c.values()],n={};return t.forEach((t=>{(0,dt.Cp)(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)})),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,dt.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===dt.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#r.clear(),this.#i.clear()}};function xt(e){return e}function At(e){return{mutationKey:e.options.mutationKey,state:e.state,...e.options.scope&&{scope:e.options.scope},...e.meta&&{meta:e.meta}}}function wt(e,t,n){return{state:{...e.state,...void 0!==e.state.data&&{data:t(e.state.data)}},queryKey:e.queryKey,queryHash:e.queryHash,..."pending"===e.state.status&&{promise:e.promise?.then(t).catch((e=>n(e)?Promise.reject(new Error("redacted")):Promise.reject(e)))},...e.meta&&{meta:e.meta}}}function St(e){return e.state.isPaused}function It(e){return"success"===e.state.status}function Nt(e){return!0}function Ct(e,t={}){const n=t.shouldDehydrateMutation??e.getDefaultOptions().dehydrate?.shouldDehydrateMutation??St,a=e.getMutationCache().getAll().flatMap((e=>n(e)?[At(e)]:[])),r=t.shouldDehydrateQuery??e.getDefaultOptions().dehydrate?.shouldDehydrateQuery??It,i=t.shouldRedactErrors??e.getDefaultOptions().dehydrate?.shouldRedactErrors??Nt,s=t.serializeData??e.getDefaultOptions().dehydrate?.serializeData??xt;return{mutations:a,queries:e.getQueryCache().getAll().flatMap((e=>r(e)?[wt(e,s,i)]:[]))}}var Tt=o(69198),jt=["added","removed","updated"];function Lt(e){return jt.includes(e)}async function Rt({queryClient:e,persister:t,maxAge:n=864e5,buster:a="",hydrateOptions:r}){try{const i=await t.restoreClient();if(i){if(!i.timestamp)return t.removeClient();{const s=Date.now()-i.timestamp>n,o=i.buster!==a;if(s||o)return t.removeClient();!function(e,t,n){if("object"!=typeof t||null===t)return;const a=e.getMutationCache(),r=e.getQueryCache(),i=n?.defaultOptions?.deserializeData??e.getDefaultOptions().hydrate?.deserializeData??xt,s=t.mutations||[],o=t.queries||[];s.forEach((({state:t,...r})=>{a.build(e,{...e.getDefaultOptions().hydrate?.mutations,...n?.defaultOptions?.mutations,...r},t)})),o.forEach((({queryKey:t,state:a,queryHash:s,meta:o,promise:c})=>{let l=r.get(s);const d=void 0===a.data?a.data:i(a.data);if(l){if(l.state.dataUpdatedAt<a.dataUpdatedAt){const{fetchStatus:e,...t}=a;l.setState({...t,data:d})}}else l=r.build(e,{...e.getDefaultOptions().hydrate?.queries,...n?.defaultOptions?.queries,queryKey:t,queryHash:s,meta:o},{...a,data:d,fetchStatus:"idle"});if(c){const e=Promise.resolve(c).then(i);l.fetch(void 0,{initialPromise:e})}}))}(e,i.clientState,r)}}}catch(e){throw await t.removeClient(),e}}async function kt({queryClient:e,persister:t,buster:n="",dehydrateOptions:a}){const r={buster:n,timestamp:Date.now(),clientState:Ct(e,a)};await t.persistClient(r)}function Ot(e){const t=e.queryClient.getQueryCache().subscribe((t=>{Lt(t.type)&&kt(e)})),n=e.queryClient.getMutationCache().subscribe((t=>{Lt(t.type)&&kt(e)}));return()=>{t(),n()}}var Pt=o(13280),Dt=({children:e,persistOptions:t,onSuccess:n,onError:a,...r})=>{const[i,s]=f.useState(!0),o=f.useRef({persistOptions:t,onSuccess:n,onError:a}),c=f.useRef(!1);return f.useEffect((()=>{o.current={persistOptions:t,onSuccess:n,onError:a}})),f.useEffect((()=>{const e={...o.current.persistOptions,queryClient:r.client};return c.current||(c.current=!0,Rt(e).then((()=>o.current.onSuccess?.())).catch((()=>o.current.onError?.())).finally((()=>{s(!1)}))),i?void 0:Ot(e)}),[r.client,i]),(0,I.jsx)(Tt.Ht,{...r,children:(0,I.jsx)(Pt.d,{value:i,children:e})})},Mt=o(3733),Ht=o(88012),zt=o(96457);const Vt=()=>(0,Ht.v8)("sp_key"),Ut=e=>{const t=(0,zt.V)(),n=(()=>{const e=Vt();return setInterval((()=>{e!==Vt()&&window.location.reload()}),5e3)})();t.on(r.TransportEvent.LOGGED_OUT,(()=>{clearInterval(n),e()}))};const Ft=864e5,Bt=Spicetify.ReactComponent.PlatformProvider=({platform:e,children:n})=>{const a=(0,t.NC)(Ee.QMQ),r="always",i=(0,f.useMemo)((()=>new Et({defaultOptions:{queries:{gcTime:0,networkMode:r},mutations:{networkMode:r}}})),[r]);if((0,f.useEffect)((()=>{var e;Ut((()=>{(0,Mt.k)()})),e=()=>{console.log("Detected hard reload. Deleting persisted cache."),(0,Mt.k)()},window.addEventListener("keydown",(t=>{const n=(t.ctrlKey||t.metaKey)&&t.shiftKey&&"R"===t.key.toUpperCase(),a=t.ctrlKey&&"F5"===t.key.toUpperCase();(n||a)&&e()}))}),[]),(0,f.useEffect)((()=>{a||(0,Mt.k)()}),[a]),a){const t=(0,Mt.Z)(),a=e.getSession(),r=["v1",e.username,a.locale,a.market];return(0,I.jsx)(Dt,{client:i,persistOptions:{persister:t,buster:r.join(":"),maxAge:Ft,hydrateOptions:{defaultOptions:{queries:{gcTime:Ft}}},dehydrateOptions:{shouldDehydrateQuery:e=>!!e.meta?.persist&&It(e)}},children:n})}return(0,I.jsx)(Tt.Ht,{client:i,children:n})};var qt=o(37461);var Wt=o(97500),Gt=o.n(Wt),Qt=o(64857);function Kt(){const e=(0,t.NC)(Ee.g3o),n=(0,u.wA)();return(0,f.useEffect)((()=>{e&&n((0,Qt.$h)("dev"))}),[e,n]),null}function $t(){const e=(0,t.NC)(Ee.SqX),n=(0,u.wA)();return(0,f.useEffect)((()=>{n((0,Qt.ab)(e))}),[e,n]),null}function Yt(){const e=(0,u.wA)(),[t,n]=(0,f.useState)(!1);return(0,f.useEffect)((()=>{e(l.yk()),n(!0)}),[e]),t?(0,I.jsxs)(f.Suspense,{fallback:null,children:[(0,I.jsx)(Kt,{}),(0,I.jsx)($t,{})]}):null}var Zt=o(83338),Xt=function(e){var t=e.useBrowserDefaultFocusStyle,n=void 0===t||t,a=e.children;return f.createElement(Zt.g.Provider,{value:{useBrowserDefaultFocusStyle:n}},a)},Jt=o(74551);const en=({children:e})=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Jt.M,{children:e})});var tn=o(19340),nn=o(81197),an=(o(7354),o(24929),o(73075)),rn=o.n(an),sn=o(6330),on=o(2499),cn=function(e){return e[e.DOWN=-1]="DOWN",e[e.NONE=0]="NONE",e[e.UP=1]="UP",e}(cn||{});const ln=10,dn=({ranges:e,size:t,onResize:n,label:a,placement:r,elementRef:i,decreaseSizeKeyboardCombination:s,increaseSizeKeyboardCombination:o,afterResizing:c})=>{const[l,d]=(0,f.useState)(!1),u=(0,on.W)(),h=(0,f.useCallback)(((t,n=cn.NONE)=>{if(e.some((([e,n])=>e<=t&&t<=n)))return t;switch(n){case cn.NONE:{const[n,a]=e.slice().sort((([e,n],[a,r])=>Math.min(Math.abs(e-t),Math.abs(n-t))-Math.min(Math.abs(a-t),Math.abs(r-t))))[0];return t<n?n:a}case cn.UP:{const n=e.find((([n],a)=>(e[a-1]?.[1]??0)<t&&t<n)),a=n?.[0];return a?Math.ceil(a/ln)*ln:t}case cn.DOWN:{const n=e.find((([n,a],r)=>{const i=e[r+1]?.[0]??1/0;return a<t&&t<i})),a=n?.[1];return a?Math.floor(a/ln)*ln:t}default:return(0,q.k)(n),t}}),[e]),p=(0,f.useCallback)((e=>{if(!i.current)return null;const t=i.current.getBoundingClientRect();return"inline-start"===r?u?e-t.left:t.right-e:"inline-end"===r?u?t.right-e:e-t.left:null}),[r,i,u]),m=(0,f.useCallback)((e=>{if(null==e)return;const t=0!==e||l?Math.trunc(h(e)):0;n(t)}),[h,n,l]);if(Number.isNaN(t)){const t=(e[0][1]-e[0][0])/2;console.error(`[LayoutResizer] css property value is not a number. Defaulting to ${t}`),m(t)}const g=(0,f.useCallback)((()=>{d(!0);const e=t,n=e=>{r.startsWith("inline")?m(p(e.clientX)):m(p(e.clientY))};document.addEventListener("pointerup",(()=>{d(!1),document.removeEventListener("pointermove",n),c?.(e,t)}),{once:!0}),document.addEventListener("pointermove",n)}),[c,p,m,t,r]);(0,f.useEffect)((()=>(s&&rn().bind(s,(()=>{m(h(t-ln,-1))})),o&&rn().bind(o,(()=>{m(h(t+ln,1))})),()=>{s&&rn().unbind(s),o&&rn().unbind(o)})),[s,h,o,m,t]);const b=e[0][0],v=e[e.length-1][1];return(0,I.jsxs)(I.Fragment,{children:[l&&(0,I.jsx)("div",{className:"LayoutResizer__resize-overlay"}),(0,I.jsx)("div",{"":"LayoutResizer__resize-bar",onPointerDown:g,className:Gt()("LayoutResizer__resize-bar",{"LayoutResizer__resize-bar--resizing":l,"LayoutResizer__inline-start":"inline-start"===r,"LayoutResizer__inline-end":"inline-end"===r,"LayoutResizer__block-start":"block-start"===r,"LayoutResizer__block-end":"block-end"===r}),onDoubleClick:()=>{const n=e.findIndex((([e])=>e===t)),a=e.findIndex((([e,n])=>n===t));if(-1!==a){const t=e.at(a+1);t&&m(t[0])}else if(-1!==n){const t=e.at(n-1);t&&m(t[1])}},children:(0,I.jsx)(sn.o,{className:"LayoutResizer__input",type:"range",min:b,max:v,onChange:function(e){if(l)return;const n=t;let a=parseInt(e.target.value,10);a=h(a,Math.sign(a-t)),m(a),c?.(n,a)},value:t,step:ln,children:a})})]})};var un=o(41588),hn=o(52276),pn=o(28427),mn=o(57462),fn=o(73435),gn=o(82507),bn=o(48837),vn=o(99922);const yn=({elementRef:e})=>{const{spec:t,logger:n}=(0,vn.$)(nn.j,{data:{identifier:"yourlibraryx"}}),a=(0,gn.LH)(),{isGridView:r}=(0,bn.t)(),{size:s,setSize:o,minMaxRanges:c}=(0,fn.y)(),l=(0,on.W)(),d=(0,hn.S)()===un.z.LIBRARY;let u="default";a===gn.ZS.COLLAPSED?u="collapsed":a===gn.ZS.EXPANDED&&(u=r?"expanded_grid":"expanded_list");const h=(0,f.useCallback)(((e,a)=>{e!==a&&n.logInteraction(t.sidebarFactory({uri:"",identifier:u}).dragUiResize({startSizePx:e,endSizePx:a}))}),[n,u,t]);return d?null:(0,I.jsx)(dn,{elementRef:e,placement:"inline-end",label:i.Ru.get("resize.sidebar"),onResize:o,size:s,ranges:c,decreaseSizeKeyboardCombination:l?(0,mn.p)(pn.r.NPV_SIDEBAR_DECREASE_WIDTH):(0,mn.p)(pn.r.LEFT_SIDEBAR_DECREASE_WIDTH),increaseSizeKeyboardCombination:l?(0,mn.p)(pn.r.NPV_SIDEBAR_INCREASE_WIDTH):(0,mn.p)(pn.r.LEFT_SIDEBAR_INCREASE_WIDTH),afterResizing:h})};var _n=o(97036);const En={},xn=e=>null===e.match(/\/search\/(\w+|\W+){1,}/gi)?e:"search-result",An=({scrollNodeRef:e,children:t,scrollNodeChildRef:n})=>{const a=(0,f.useRef)(""),r=(0,ae.zy)(),i=(0,ae.wQ)(),s=(0,f.useCallback)((()=>{if(!e.current)return()=>{};const t=xn(r.pathname),n=En[t];let a;if(n&&"POP"===i){const t=Date.now(),r=()=>{!e.current||Date.now()>t+3e3?clearInterval(a):e.current.scrollHeight>=n+e.current.offsetHeight&&(e.current.scrollTop=n,clearInterval(a))};a=setInterval(r,50),r()}else e.current.scrollTop=0;return()=>{clearInterval(a)}}),[r.pathname,i,e]);(0,f.useMemo)((()=>{if(!e.current)return;const t=xn(a.current);En[t]=e.current.scrollTop,a.current=r.pathname}),[r.pathname,e]),(0,f.useLayoutEffect)((()=>s()),[r.pathname,s,e]);const o=(0,f.useMemo)((()=>({scrollNodeRef:e,scrollNodeChildRef:n})),[e,n]);return(0,I.jsx)(_n.bi.Provider,{value:o,children:t})},wn=f.createContext(null),Sn=({children:e})=>{const t=(0,f.useRef)(null);return(0,I.jsx)(wn.Provider,{value:t,children:e})};var In=o(21321),Nn=o(60247);var Cn=o(30111),Tn=o(41454),jn=o(67974),Ln=o(28191),Rn=o(28155),kn=o(24010);const On="T0fKO6B7LQSCE_VaSM1P",Pn={[Ln.E.SMALL]:0,[Ln.E.MEDIUM]:600,[Ln.E.LARGE]:1024},Dn=(0,f.forwardRef)((({children:e},t)=>{(0,jn.$)();const n=(0,f.useRef)(null);(0,f.useImperativeHandle)(t,(()=>n.current),[n]);const{breakpoint:a}=(0,kn.x)(Pn,n);return(0,I.jsx)("main",{ref:n,className:On,tabIndex:-1,children:(0,I.jsx)(Rn.o.Provider,{value:a,children:e})})}));var Mn=o(76624),Hn=o(67136),zn=o(615),Vn=o(51185);const Un="Root__top-container",Fn="Root__top-container--has-notice-bar";function Bn({children:e}){const n=(0,u.d4)((e=>e.ui.unsupportedBrowser.isOpen)),a=(0,zn.XB)(),r=(0,t.NC)(Ee.ZDY);return(0,I.jsx)("div",{className:Gt()(Un,{[Fn]:n}),"data-right-sidebar-hidden":!r&&a===Vn.Z.Disabled,children:e})}const qn="xlgKfueiF46Wo_sED8YA",Wn=(0,f.forwardRef)((function({gridRow:e,gridColumn:t,zIndex:n,children:a,className:r,debugLabel:i},s){return(0,I.jsx)("div",{ref:s,className:Gt()(qn,r),style:{gridRow:e,gridColumn:t,zIndex:n},children:a})})),Gn="Root__main-view-overlay",Qn=(0,f.forwardRef)((function({children:e,debugLabel:t},n){return(0,I.jsx)(Wn,{ref:n,className:Gn,gridRow:"global-nav / main-view",gridColumn:"left-sidebar / right-sidebar",zIndex:"var(--above-everything-except-now-playing-bar-z-index)",debugLabel:t,children:e})}));var Kn=o(13778);const $n=()=>(0,zn.Zf)(),Yn=()=>{const{property:e,value:t}=(()=>{const{size:e}=(0,Kn.y)();return(0,f.useMemo)((()=>({property:"--left-sidebar-width",value:e})),[e])})();return(0,f.useMemo)((()=>({[e]:t})),[e,t])},Zn=()=>{const{size:e}=$n(),n=(0,t.NC)(Ee.ZDY),a=(0,zn.XB)()===Vn.Z.Disabled&&n?24:e;return(0,f.useMemo)((()=>({property:"--right-sidebar-width",value:a})),[a])},Xn=()=>{const{property:e,value:t}=Zn();return(0,f.useMemo)((()=>({[e]:t})),[e,t])};let Jn=function(e){return e.Default="default",e.Tuna="tuna",e}({});const ea=({children:e})=>(0,I.jsx)(I.Fragment,{children:e}),ta=()=>({applicationMode:{mode:Jn.Default,params:{}},setApplicationMode:()=>{throw new Error("setApplicationMode must be used within a ApplicationModeProvider")}}),na="Root__nav-bar",aa="TkqXOzhmCCuE6YI3hlgA",ra="oDWO4yGAZ2kZlt3TTS4E",ia="p9p4xXN1mgRkvMNUhIWg";function sa({children:e}){const{leftSidebarRef:t}=(0,tn.JT)(),{applicationMode:n}=ta(),a=Yn(),r=(0,hn.S)()===un.z.LIBRARY;return n.mode!==Jn.Default?null:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:Gt()(ra,{[ia]:r}),style:a}),(0,I.jsx)("div",{id:"Desktop_LeftSidebar_Id",ref:t,className:Gt()(na,{[aa]:r}),style:a,children:e})]})}const oa="main-yourLibraryX-entryPoints",ca="main-yourLibraryX-library",la=(0,f.lazy)((async()=>{const{YourLibraryX:e}=await Promise.all([o.e(45),o.e(6457)]).then(o.bind(o,1408));return{default:e}})),da=()=>(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("div",{className:Gt()(oa,ca),children:(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(la,{})})})}),ua="main-navBar-mainNav";function ha(){return(0,I.jsx)("nav",{className:ua,"aria-label":i.Ru.get("sidebar.a11y.landmark-label"),children:(0,I.jsx)(da,{})})}const pa="Root__main-view";function ma({children:e}){const{applicationMode:t}=ta(),{mainContentRef:n}=(0,tn.JT)();return t.mode!==Jn.Default?null:(0,I.jsx)("div",{ref:n,className:pa,children:e})}var fa=o(84706),ga=o(32002),ba=o(82836),va=o(22061);const ya=()=>{const e=(0,ba.v)((e=>{const t=(0,ga.V)(e);return t.isPlayingRemotely&&void 0!==t.remoteDevice?.name&&void 0!==t.remoteDevice?.type})),t=(0,f.useContext)(va.a);return e||(t?.active??!1)},_a="Root__right-sidebar",Ea="OTBExwAsDgh_OEe7EAlu",xa="mYWHdrNeGjAdTOD28xSj",Aa="bENvsWd8JrCmuFulkXpg",wa="GS3Plog6THw80YGUPTYo";function Sa({children:e}){const{rightSidebarRef:t}=(0,tn.JT)(),n=(0,fa.h)(),a=(0,hn.S)(),r=(0,u.d4)((e=>e.ui.fullscreenMode.isOpen)),i=ya(),{applicationMode:s}=ta();return s.mode!==Jn.Default?null:(0,I.jsx)("div",{ref:t,className:Gt()(_a,{[Ea]:a===un.z.NOW_PLAYING_VIEW,[xa]:n,[Aa]:r,[wa]:i}),children:e})}const Ia="Root__now-playing-bar";function Na({children:e}){const{nowPlayingBarRef:t}=(0,tn.JT)(),{applicationMode:n}=ta();return n.mode!==Jn.Default?null:(0,I.jsx)("div",{ref:t,className:Ia,children:e})}var Ca=o(58280),Ta=o(8143);const ja=(0,f.lazy)((()=>new Promise((e=>{const t=Promise.all([o.e(9462),o.e(7488),o.e(4196),o.e(2620),o.e(8725),o.e(8719),o.e(3667)]).then(o.bind(o,61432)).then((e=>({default:e.PiPMiniPlayer}))),n=new Promise((e=>{setTimeout(e,300)}));Promise.all([t,n]).then((t=>{e(t[0])}))}))));var La=o(96283);const Ra=e=>{const t=(0,La.ZY)()??document;(0,f.useEffect)((()=>{if(!e)return;const n=e=>{const t=e.target;["INPUT","TEXTAREA"].includes(t.tagName)||e.preventDefault()};return t.addEventListener("contextmenu",n),()=>{t.removeEventListener("contextmenu",n)}}),[t,e])},ka=f.memo((()=>{const e=(0,u.d4)((e=>e.platform.isDeveloperMode));return Ra(!e),null}));var Oa=o(42179),Pa=o(71602),Da=o(52379);o(54615),o(89370);var Ma=o(39954),Ha=o(48459),za=o(41594),Va=o(35636),Ua=o(97137);const Fa="pip-mini-player",Ba={OS_MACOS:"spotify__os--is-macos",OS_WINDOWS:"spotify__os--is-windows",CONTAINER_DESKTOP:"spotify__container--is-desktop",CONTAINER_WEB:"spotify__container--is-web"};function qa(e,t,n){!function(e,t){e.querySelector("html")?.classList.remove(...t)}(n,Object.values(Ba));const a=function(e,t){const n=["no-focus-outline"];return t===Ha.f.macOS?n.push(Ba.OS_MACOS):t===Ha.f.Windows&&n.push(Ba.OS_WINDOWS),e===Ma.m.Desktop?n.push(Ba.CONTAINER_DESKTOP):e===Ma.m.Web&&n.push(Ba.CONTAINER_WEB),n}(e,t);!function(e,t){t.forEach((t=>{e.querySelector("html")?.classList.add(t)}))}(n,a)}const Wa=e=>{const t=Array.from(document.getElementsByTagName("script")).filter((e=>e.src?.includes("xpui.js")))?.[0]?.src.replace(/\/[^/]+$/,"")??"",n="-snapshot";return{scripts:[`${t}/${Fa}${n}.js`,`${t}/vendor~${Fa}${n}.js`],styles:[`${t}/${Fa}${n}.css`,`${t}/vendor~${Fa}${n}.css`]}},Ga=e=>{const t=(0,ge.mv)();(0,f.useLayoutEffect)((()=>{if(!e)return;const{pipResources:n}=(0,za.x)(Va.I4),{scripts:a,styles:r}=Wa();[{rel:"icon",href:(0,Da.bj)("images/icons/Spotify_32.png"),sizes:"32x32"}].forEach((t=>{const n=e.document.createElement("link");n.rel=t.rel,n.href=t.href,t.sizes&&n.setAttribute("sizes",t.sizes),e.document.head.appendChild(n)})),e.document.body.style.margin="0",e.document.body.style.padding="0",e.document.body.style.overflow="hidden",e.document.body.style.height="100%",qa(t.container,t.operatingSystem,e.document),Ua.M.setup(e.document),a.map((t=>((e,t)=>{const n=document.createElement("script");n.setAttribute("src",e),t.document.head.appendChild(n)})(t,e))),r.map((t=>((e,t)=>{const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),t.document.body.prepend(n)})(t,e)))}),[e,t])};var Qa=o(44048);const Ka=f.memo((()=>{const{capabilities:{isEnabled:e},isOpen:t,close:n}=(0,Qa.H)(),a=(0,f.useCallback)(n,[n]),r=window.documentPictureInPicture?.window??null;var i,s;if(Ga(r),i=r,s=window,(0,f.useEffect)((()=>{i&&s&&["lang","dir"].forEach((e=>{const t=s.document.documentElement.getAttribute(e);null!==t&&i.document.documentElement.setAttribute(e,t)}))}),[i,s]),(0,f.useEffect)((()=>{}),[]),!e||!t||!r)return null;const o=r;return(0,Ta.createPortal)((0,I.jsx)(m.s,{onError:a,children:(0,I.jsxs)(La.IF,{handle:o,children:[(0,I.jsx)(ka,{}),(0,I.jsx)(Pa.S,{children:(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(Oa.B,{}),children:(0,I.jsx)(ja,{})})})]})}),r.document.body)}));var $a=o(81110),Ya=o(97746);class Za extends Ya.V{}var Xa=o(93314),Ja=(o(48573),o(59328)),er=o(19492),tr=o(21577);const nr=640;class ar{_events=new Za;graphicsRef=null;currentImageUrl=null;getCapabilities(){return{isEnabled:!0,supportsVideo:!1,supportsAds:!1,supportsConnect:!1,supportsOffline:!1}}getEvents(){return this._events}async open(e){const t=this.getOrCreateGraphics();await this.updateGraphicsFromPlayerState(t,e);const n=this.getPictureInPictureElement();return n===t.video||(await this.requestPictureInPicture(t,(()=>{this.close()})),this._events.emitSync("visibility_change",!0)),n??null}async updateGraphicsFromPlayerState(e,t){const n=this.getImageURLFromPlayerState(t);null!==n?await this.drawImage(e,n):this.close()}close(){this.getPictureInPictureElement()&&document.exitPictureInPicture(),this.disposeGraphics(),this._events.emitSync("visibility_change",!1)}isAllowed(e,t,n){const a=e?.hasContext??!1,r=e?.item?.type===er.c.EPISODE&&"audio"!==e?.item.mediaType;return!!a&&(!!(n??!0)&&!r)}getCurrentState(){return this.getPictureInPictureElement()?"open":"closed"}syncWithPlayerState(e){const t=e?.hasContext??!1,n=e?.isPaused??!1,a=this.getPictureInPictureElement();!t||n?a?.pause():a?.play();const r=this.getOrCreateGraphics();this.updateGraphicsFromPlayerState(r,e)}getOrCreateGraphics(){return this.graphicsRef??=this.createGraphics(),this.graphicsRef}disposeGraphics(){this.graphicsRef=null,this.currentImageUrl=null}createGraphics(){const e=document.createElement("canvas");e.width=nr,e.height=nr;const t=e.getContext("2d"),n=document.createElement("video");return n.srcObject=e.captureStream(),n.muted=!0,{context:t,video:n}}async drawImage({context:e,video:t},n){if(this.currentImageUrl===n)return;this.currentImageUrl=n;const a=new Image;a.crossOrigin="anonymous",a.src=(0,tr.m)({imageUriOrUrl:n,desiredMosaicSize:nr}),await a.decode(),e.drawImage(a,0,0,nr,nr),await t.play()}getImageURLFromPlayerState(e){const t=e?.item?.images??[];return(0,Ja.h)(t,{desiredSize:nr})??null}async requestPictureInPicture({video:e},t){try{await e.requestPictureInPicture(),e.addEventListener("leavepictureinpicture",t,{once:!0})}catch(e){(0,Xa.v)(e)}}getPictureInPictureElement(){if(document.pictureInPictureElement)return document.pictureInPictureElement}static isSupported(){return!1}}var rr=o(53799),ir=o(1473),sr=o(9856),or=o.n(sr);class cr{#h=new Za;#p=null;#m;constructor(e=!1){this.#m=e}getCapabilities(){return{isEnabled:!0,supportsVideo:!0,supportsAds:!0,supportsConnect:!0,supportsOffline:this.#m}}getEvents(){return this.#h}async open(e){if(!cr.isSupported())return null;const t=this.getDocumentPictureInPictureElement()?.window;if(t){if(t===this.#p)return this.#p;t.close()}const{width:n,height:a}=this.getInitialWindowSize(e?.item),r=await this.createWindow(n,a);return void 0===r?(this.close(),null):(this.#p=r,this.#p.addEventListener("pagehide",(()=>{this.close()}),{once:!0}),this.#h.emitSync("visibility_change",!0),this.#p)}close(){this.#p&&(this.#p.close(),this.#p=null),this.#h.emitSync("visibility_change",!1)}isAllowed(e,t,n){return!(!(e?.hasContext??!1)&&t===ir.zP.NOT_CONNECTED)||!!(0,rr.HS)(e?.context??null)}getCurrentState(){return this.#p?"open":"closed"}syncWithPlayerState(e){}getInitialWindowSize(e){let t=300,n=300;if(e){(0,P.p)(e)&&("video"===e.mediaType||"mixed"===e.mediaType)&&(t=425,n=300)}return{width:t,height:n}}async createWindow(e,t){return await(this.getDocumentPictureInPictureElement()?.requestWindow({width:e,height:t}))}getDocumentPictureInPictureElement(){return window.documentPictureInPicture}static isSupported(){return"documentPictureInPicture"in window&&!0}}class lr{getCapabilities(){return{isEnabled:!1,supportsVideo:!1,supportsAds:!1,supportsConnect:!1,supportsOffline:!1}}getEvents(){return new Za}open(){return Promise.resolve(void 0)}close(){}isAllowed(e,t,n){return!1}getCurrentState(){return"closed"}syncWithPlayerState(){}}const dr=()=>{const e=(0,t.NC)(Ee.Tb_),[n]=(0,f.useState)((()=>{if(navigator.webdriver)return new lr;if(cr.isSupported()&&e){return new cr(!0)}return ar.isSupported()?new ar:new lr}));return n};var ur=o(5956),hr=o(41097);function pr(){if(mr())try{navigator.mediaSession.setActionHandler("enterpictureinpicture",null)}catch(e){}}function mr(){return"mediaSession"in navigator}const fr=f.memo((({pipInstance:e})=>((e=>{const{connectionStatus:t,isActiveDeviceLocal:n}=(0,ba.v)((e=>({connectionStatus:e.connectionStatus,isActiveDeviceLocal:e.activeDevice?.isLocal})),hr.a),a=(0,ur.o)((e=>e),((e,t)=>e?.hasContext===t?.hasContext&&e?.item?.uri===t?.item?.uri)),r=(0,f.useRef)(a);r.current=a;const i=(0,f.useMemo)((()=>e.isAllowed(a,t,n)),[t,n,e,a]);(0,f.useEffect)((()=>{if(mr()){try{i?navigator.mediaSession.setActionHandler("enterpictureinpicture",(t=>{e.open(r.current)})):pr()}catch(e){}return()=>{pr()}}}),[e,i])})(e),null)));var gr=o(60749),br=o(82335);const vr=f.createContext({}),yr=({children:e})=>{const[t,n]=f.useState(!0),a=(0,f.useMemo)((()=>({isGlobalNavDraggable:t,setIsGlobalNavDraggable:n})),[t,n]);return(0,I.jsx)(vr.Provider,{value:a,children:e})};var _r=o(35638),Er=o(77676),xr=o(59636),Ar=o(75322),wr=o(68443),Sr=o(12624),Ir=o(17013),Nr=o(14323),Cr=o(73480),Tr=o(56710);const jr="YyUcY0HTiYikUOwhh29d",Lr=(e,t)=>{if(!t)return null;const n=((e,t)=>{const[n=1,a=0,r=0,i=0]=e.split("."),[s=1,o=0,c=0,l=0]=t.split("."),d=1e9*Number(n)+1e6*Number(a)+1e4*Number(r)+Number(i);return 1e9*Number(s)+1e6*Number(o)+1e4*Number(c)+Number(l)-d})(e,t);return n>=2e4?"negative":n>=1e3?"warning":n>=500?"announcement":null},Rr=()=>{const e=(0,Cr.k)(),t=(0,Nr.t)(),n=(0,f.useCallback)((()=>{t.prepareUpdate()}),[t]),a=(0,f.useCallback)((()=>{t.applyUpdate()}),[t]),[r,s]=(0,f.useState)(null),o=e?.version;if((0,f.useEffect)((()=>{t.getVersionInfo().then((e=>{const t=e.containerVersion.split(".");5===t.length&&t.pop(),s(t.join("."))}))}),[t]),e?.state===Tr.D.UPDATE_NONE)return null;if(!r||!o)return null;const c=Lr(r,o);if(!c)return null;switch(e?.state){case Tr.D.UPDATE_AVAILABLE:return(0,I.jsx)(wr.Zp,{label:i.Ru.get("release-notifier.update-available",o),children:(0,I.jsx)(Er.$,{size:"small",colorSet:c,onClick:n,className:jr,children:o})});case Tr.D.UPDATE_PROCESSING:return(0,I.jsx)(wr.Zp,{label:i.Ru.get("release-notifier.update-processing",o),children:(0,I.jsx)(Er.$,{size:"small",colorSet:c,disabled:!0,className:jr,children:o})});case Tr.D.UPDATE_READY:return(0,I.jsx)(wr.Zp,{label:i.Ru.get("release-notifier.update-ready",o),children:(0,I.jsx)(Er.$,{size:"small",colorSet:c,onClick:a,className:jr,children:o})});default:return null}},kr=()=>{const e=(0,Sr.t)(),[{data:t}]=(0,Ir.K)(e.employee.isEmployee);return t?(0,I.jsx)(Rr,{}):null},Or=()=>(0,I.jsx)(kr,{});var Pr=o(17369),Dr=o(56065);function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Hr=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){(0,Dr.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o(47771).L),zr=o(4127),Vr=o(94079),Ur=o(35853),Fr=o(3081),Br=o(27871);const qr="400ms",Wr="main-topBarStatusIndicator-TopBarStatusIndicatorContainer",Gr="main-actionButtons-button",Qr="main-noConnection-isError",Kr="main-noConnection-isNotice",$r="main-topBarStatusIndicator-hasTooltip",Yr="main-topBarStatusIndicator-tooltipIsError",Zr="main-topBarStatusIndicator-enter",Xr="main-topBarStatusIndicator-enterActive",Jr="main-topBarStatusIndicator-exitActive",ei="main-topBarStatusIndicator-tooltipEnter",ti="main-topBarStatusIndicator-notMinimized",ni="main-topBarStatusIndicator-tooltipEnterActive";let ai=function(e){return e.ERROR="ERROR",e.NOTICE="NOTICE",e}({});const ri=(0,f.memo)((function(e){const{children:t,feedbackType:n,tooltip:a,itemId:r,display:i=!0,minimized:s=!1,renderInLine:o=!1,spec:c}=e,l=(0,f.useRef)(null),d=(0,Br.W)(),u=(0,Xe.s)();return(0,I.jsx)(Vr.A,{in:i,timeout:parseInt(qr,10),unmountOnExit:!0,onEnter:()=>{s||l.current?.classList.add(ei)},onEntered:()=>{s||l.current?.classList.add(ni)},onExited:()=>{s||l.current?.classList.remove(ni)},classNames:{enter:Zr,enterActive:Xr,exitActive:Jr},nodeRef:l,children:(0,I.jsx)("div",{className:Gt()(Wr,{[ti]:!s}),children:(0,I.jsx)(Fr.y,{offset:[-2,20],action:"toggle",trigger:"click",content:(0,I.jsx)(Ur.z,{className:Gt()({[Yr]:n===ai.ERROR}),children:(0,I.jsx)("div",{children:a})}),renderInline:o,children:(0,I.jsx)("button",{className:Gt()(Gr,{[$r]:a,[Qr]:n===ai.ERROR,[Kr]:n===ai.NOTICE}),onClick:()=>{d({intent:"toggle",type:"click"}),c&&u.logInteraction(c.hitUiReveal())},ref:l,"":r,children:t})})})})}));var ii=o(68007),si=o(61661),oi=o(77712),ci=o(56695),li=o(976);const di="P8EYxpJkrSRcmY5CFfgZ",ui="oMR8tk4wMj9_exGQeapz",hi="qq3uDmbXwv31FKawHDIg",pi="B64o12iyKiKF4s8uuClS";function mi(e){if(null===e)return null;const t=Math.abs(Date.now()-e.getTime());if(t<1e3)return null;const{hours:n,minutes:a,seconds:r}=(0,li.S)(t),s=(0,si.j)({h:n,m:a,s:r});return i.Ru.get("authorization-status.retrying",s)}const fi=({retryAt:e})=>{const t=(0,oi.v)(),[n,a]=(0,f.useState)(mi(e)),r=(0,h.Oj)();return(0,f.useEffect)((()=>{const t=window.setInterval((()=>{a(mi(e))}),500);return()=>{window.clearInterval(t)}}),[e,a]),(0,I.jsxs)("div",{className:di,children:[(0,I.jsx)(Pr.E,{as:"p",variant:"bodyMediumBold",children:i.Ru.get("authorization-status.title")}),(0,I.jsx)("span",{className:ui,children:n??i.Ru.get("authorization-status.reconnecting")}),(0,I.jsxs)("div",{className:hi,children:[(0,I.jsx)(_r.H,{semanticColor:"textBase",buttonSize:Hr.sm,onClick:()=>{r({type:"close"})},children:i.Ru.get("authorization-status.dismiss")}),(0,I.jsx)(Er.$,{className:pi,buttonSize:Hr.sm,onClick:()=>t.tryAuthorize(),children:i.Ru.get("authorization-status.retry")})]})]})},gi=({minimized:e,spec:n})=>{const a=(0,ii.n)(),{isAuthorized:r,retryAt:s}=(0,ci.Y)();return(0,t.NC)(Ee.ueo)?(0,I.jsxs)(ri,{feedbackType:ai.ERROR,minimized:e,display:a&&!r,spec:n,tooltip:(0,I.jsx)(fi,{retryAt:s}),itemId:"authorization-status-indicator",children:[(0,I.jsx)(zr.b,{size:"small"}),i.Ru.get("authorization-status.badge")]}):null};var bi=o(78921),vi=o(55965),yi=o(77599),_i=o(21661),Ei=o(17934),xi=o(17154);const Ai="PYPe3hJJmzsQV6XoN3Cl",wi="mqsHTSdyZwgRvD2Kylc1",Si=()=>{const e=(0,Xe.s)(),{spec:t}=(0,xi.r)(vi.V,{}),n=(0,h.Oj)(),a=(0,u.wA)(),r=(0,f.useCallback)((()=>{n({type:"close"}),a(_i.r8.actions.open()),e.logInteraction(t.learnMoreButtonFactory().hitUiReveal())}),[a,e,n,t]);return(0,I.jsxs)("div",{className:Ai,children:[(0,I.jsx)(Pr.E,{variant:"bodySmall",children:i.Ru.get("topBar.dsa-indicator")}),(0,I.jsx)(_r.H,{className:wi,onClick:r,condensedAll:!0,size:"small",semanticColor:"textBase",children:i.Ru.get("topBar.dsa-cta")})]})},Ii=({spec:e})=>{const t=(0,yi.p)();return(0,I.jsx)(Ei.r,{spec:e,children:(0,I.jsx)(ri,{feedbackType:ai.NOTICE,minimized:!0,display:!t,tooltip:(0,I.jsx)(Si,{}),itemId:"dsa-mode-status-indicator",spec:e,renderInLine:!0,children:(0,I.jsx)(bi.p,{size:"small"})})})};var Ni=o(61129);const Ci=({minimized:e,spec:t})=>{const n=!(0,ii.n)();return(0,I.jsxs)(ri,{feedbackType:ai.NOTICE,minimized:e,display:n,spec:t,tooltip:i.Ru.get("offline.callout-disconnected"),itemId:"offline-status-indicator",children:[(0,I.jsx)(Ni.P,{size:"small"}),i.Ru.get("offline.badge")]})};var Ti=o(43520),ji=o(68689),Li=o(65891);var Ri=o(34709);function ki(){const e=(0,Li.N)(ji.H),[t,n]=(0,f.useState)(!1),a=(0,Ri.a)();(0,f.useEffect)((()=>{const t=e.subscribeToPrivateSession((e=>{a()&&n(e)}));return()=>{t()}}),[e,a]);return{isPrivateSession:t,setPrivateSession:(0,f.useCallback)((t=>{e.setPrivateSession(t)}),[e])}}const Oi=({minimized:e,spec:t})=>{const{isPrivateSession:n}=ki();return(0,I.jsxs)(ri,{feedbackType:ai.NOTICE,minimized:e,display:n,tooltip:i.Ru.get("private-session.badge"),spec:t,itemId:"private-session-indicator",children:[(0,I.jsx)(Ti.y,{size:"small"}),i.Ru.get("private-session.badge")]})};var Pi=o(11933);const Di=f.memo((function(e){const t=(0,Pi.U)("(max-width: 1023px)"),n=(0,f.useMemo)((()=>e.spec?.privateSessionButtonFactory()),[e.spec]),a=(0,f.useMemo)((()=>e.spec?.offlineButtonFactory()),[e.spec]),r=(0,f.useMemo)((()=>e.spec?.authorizationButtonFactory()),[e.spec]),i=(0,f.useMemo)((()=>e.spec?.dsaModeButtonFactory()),[e.spec]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Oi,{spec:n,minimized:t}),(0,I.jsx)(Ci,{spec:a,minimized:t}),(0,I.jsx)(gi,{spec:r,minimized:t}),(0,I.jsx)(Ii,{spec:i})]})}));var Mi=o(10642),Hi=o(85815);function zi(e){return{name:"KmInteraction",environments:["browser"],data:e}}function Vi(e){return{name:"KmInteractionNonAuth",environments:["browsernonauth"],data:e}}var Ui=o(26930),Fi=o(13185);function Bi(e,t){switch(t.type){case"installed":return{...e,installed:!0};case"before-install":return{...e,deferredPrompt:t.prompt,canBeInstalled:!0};default:return e}}const qi=f.memo((({logger:e,spec:t})=>{const n=(0,u.wA)(),a=(0,ge.vh)(),r=(0,Fi.V)(),{enqueueSnackbar:s}=(0,Ui.d)(),[o,c]=(0,f.useReducer)(Bi,{deferredPrompt:void 0,installed:!1,canBeInstalled:!1});(0,f.useEffect)((()=>{const e=()=>{c({type:"installed"}),s(i.Ru.get("pwa.confirm"));const e={action_type:"unknown",action_intent:"pwa-installed",target_uri:"/pwa-install-confirmation",item_id:"pwa",view_uri:"/unknown",page:"/page"};a.send(r?Vi(e):zi(e))},t=e=>{e.preventDefault(),c({type:"before-install",prompt:e})};return window.addEventListener("beforeinstallprompt",t),window.addEventListener("appinstalled",e),()=>{window.removeEventListener("beforeinstallprompt",t),window.removeEventListener("appinstalled",e)}}),[n,s,a,r]);const l=(0,f.useCallback)((n=>{if(n.preventDefault(),t&&e){const n=t.installPwaButtonFactory().hitInstallApp({appName:"pwa"});e.logInteraction(n)}o.deferredPrompt&&o.deferredPrompt.prompt()}),[t,e,o.deferredPrompt]),{canBeInstalled:d,installed:h}=o;return!d||h?null:(0,I.jsx)(Er.$,{colorSet:"overMedia",size:"small",onClick:l,iconLeading:Mi.i,children:(0,I.jsx)(Pr.E,{variant:"bodySmallBold",className:"ellipsis-one-line",children:i.Ru.get("pwa.download-app")})})}));var Wi=o(92599);const Gi=f.memo((({shouldCalloutPWA:e,spec:t,logger:n})=>{const a=(0,f.useCallback)((()=>{if(!t||!n)return;const e=t.installAppButtonFactory().hitNavigateToExternalUri({destination:"/download"});n.logInteraction(e)}),[n,t]),[r,s]=(0,f.useState)(!1),o=(0,f.useRef)(null);if((0,Wi.w)({onResize:({width:e})=>{o.current?.scrollWidth&&e<o.current?.scrollWidth?s(!0):s(!1)},refOrElement:o}),!e){const e=(0,I.jsx)(_r.H,{size:"small",href:"/download",iconLeading:Mi.i,onClick:a,component:Hi.v,children:(0,I.jsx)(Pr.E,{variant:"bodySmallBold",className:"ellipsis-one-line",ref:o,children:i.Ru.get("navbar.install-app")})});return r?(0,I.jsx)(wr.Zp,{label:i.Ru.get("navbar.install-app"),children:e}):e}return(0,I.jsx)(qi,{logger:n,spec:t})}));var Qi=o(96448),Ki=o(83856),$i=o(33584),Yi=o(83534),Zi=o(35422);const Xi={isCTA:!1,placement:Ki.D.bottomLeft,shouldHideOnOutsideClick:({triggerAction:e})=>!e||e.type!==Zi.Gs,getTitle:({triggerAction:e})=>e?.type===Yi.no.SAVE_PRERELEASE?i.Ru.get("action-trigger.log-in-or-sign-up"):i.Ru.get("action-trigger.logged-out"),getDescription:({triggerAction:e})=>{switch(e?.type){case Qi.gK.ADD_TO_QUEUE:return i.Ru.get("action-trigger.logged-out-queue");case Yi.$k.START_RADIO:return i.Ru.get("action-trigger.logged-out-radio");case Yi.no.SAVE_TRACK:return i.Ru.get("action-trigger.log-in-like-action");case Yi.no.SAVE_ALBUM:return i.Ru.get("action-trigger.save-album");case Yi.no.SAVE_PRERELEASE:return i.Ru.get("web-player.prerelease.album_anonymous_presave");case Yi.tf.FOLLOW_USER:return i.Ru.get("action-trigger.log-in-follow-profile");case Zi.Gs:return"track"===e?.entityType?i.Ru.get("action-trigger.logged-out-full-track"):i.Ru.get("action-trigger.logged-out-synced");default:return i.Ru.get("action-trigger.logged-out-continue")}}},Ji=({children:e})=>(0,I.jsx)(Ki.y,{id:$i.d,options:Xi,children:e});var es=o(55712),ts=o(87612);const ns=({...e})=>{const{spec:t}=(0,es.D)(xr.x,{}),n=(0,f.useMemo)((()=>t.upgradeButtonFactory()),[t]),a=(0,ts.t)(n);return(0,I.jsx)(Er.$,{...e,style:{flexShrink:0},ref:a,size:"small",onClick:e.onClick,"aria-label":i.Ru.get("upgrade.tooltip.title"),title:i.Ru.get("upgrade.tooltip.title"),colorSet:"invertedLight","":"upgrade-button",children:i.Ru.get("upgrade.button")})};var as=o(74396),rs=o(52155),is=o(5968),ss=o(67125),os=o(34529);const cs="music",ls="3.1.0",ds="default",us="12.2.0";function hs(e){return new ps(e)}class ps{constructor(e){this._path=[{name:"desktop-user-widget-menu"}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}goToAccountPageRowFactory(){return new ps.GoToAccountPageRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}goToUserProfileRowFactory(){return new ps.GoToUserProfileRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}openEmployeePodcastModalRowFactory(){return new ps.OpenEmployeePodcastModalRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}goToUpgradePlanPageRowFactory(){return new ps.GoToUpgradePlanPageRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}togglePrivateSessionRowFactory(){return new ps.TogglePrivateSessionRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}goToSettingsRowFactory(){return new ps.GoToSettingsRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}goToInAppMessagingRowFactory(){return new ps.GoToInAppMessagingRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}updateClientRowFactory(){return new ps.UpdateClientRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}logOutRowFactory(){return new ps.LogOutRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}goToPlanManagementFactory(){return new ps.GoToPlanManagementEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ds,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ls,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}impression(){return{app:cs,generatorVersion:us,specificationVersion:ls,specificationMode:ds,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}!function(e){e.GoToAccountPageRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_account_page_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ds,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ls,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:cs,generatorVersion:us,interactionType:"hit",specificationMode:ds,specificationVersion:ls,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(ps||(ps={})),function(e){e.GoToUserProfileRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_user_profile_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ds,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ls,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:cs,generatorVersion:us,interactionType:"hit",specificationMode:ds,specificationVersion:ls,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(ps||(ps={})),function(e){e.OpenEmployeePodcastModalRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"open_employee_podcast_modal_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ds,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ls,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:cs,generatorVersion:us,interactionType:"hit",specificationMode:ds,specificationVersion:ls,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(ps||(ps={})),function(e){e.GoToUpgradePlanPageRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_upgrade_plan_page_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ds,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ls,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitNavigateToExternalUri({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"navigate_to_external_uri",actionVersion:1,app:cs,generatorVersion:us,interactionType:"hit",specificationMode:ds,specificationVersion:ls,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(ps||(ps={})),function(e){e.TogglePrivateSessionRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"toggle_private_session_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ds,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ls,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitSetSettingField(){return{actionName:"set_setting_field",actionVersion:1,app:cs,generatorVersion:us,interactionType:"hit",specificationMode:ds,specificationVersion:ls,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(ps||(ps={})),function(e){e.GoToSettingsRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_settings_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ds,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ls,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:cs,generatorVersion:us,interactionType:"hit",specificationMode:ds,specificationVersion:ls,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(ps||(ps={})),function(e){e.GoToInAppMessagingRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_in_app_messaging_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ds,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ls,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:cs,generatorVersion:us,interactionType:"hit",specificationMode:ds,specificationVersion:ls,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(ps||(ps={})),function(e){e.UpdateClientRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"update_client_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ds,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ls,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:cs,generatorVersion:us,interactionType:"hit",specificationMode:ds,specificationVersion:ls,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(ps||(ps={})),function(e){e.LogOutRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"log_out_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ds,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ls,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitLogout(){return{actionName:"logout",actionVersion:1,app:cs,generatorVersion:us,interactionType:"hit",specificationMode:ds,specificationVersion:ls,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(ps||(ps={})),function(e){e.GoToPlanManagementEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_plan_management"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ds,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ls,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitNavigateToExternalUri({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"navigate_to_external_uri",actionVersion:1,app:cs,generatorVersion:us,interactionType:"hit",specificationMode:ds,specificationVersion:ls,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(ps||(ps={}));var ms=o(19293),fs=o(61919),gs=o(96282),bs=o(26705);function vs(e,t){return t?(0,bs.r)(e):(0,gs._)(e)}var ys=o(56043),_s=o(80022),Es=o(6999);const xs=({divider:e,visible:t})=>{const n=(0,ge.vh)(),a=(0,Fi.V)(),r=(0,f.useCallback)((()=>{n.send(vs({category:"masthead",action:"click",label:"download-link",destination_url:_s.Kw,context:window.location.href,os:(0,Es.f)(),variant:"a"},a))}),[n,a]);return t?(0,I.jsx)(fs.D,{divider:e,role:"menuitem",href:_s.Kw,onClick:r,target:"_blank",trailingIcon:(0,I.jsx)(ys.p,{size:"small"}),children:i.Ru.get("download.download")}):null};var As=o(48972),ws=o(28239);const Ss=({divider:e,ubiLogger:t,ubiSpec:n})=>{const a=(0,u.wA)(),r=(0,ws.k)(),{url:s,isExternal:o}=r,c=(0,f.useCallback)((()=>{t.logInteraction(n.goToUpgradePlanPageRowFactory().hitNavigateToExternalUri({destination:s})),a((0,As.d)({action_type:"gtm.upgradeClick",action_intent:"upgrade-dwp",item_id:"dwp-top-bar",view_uri:""}))}),[t,n,s,a]);return o?(0,I.jsx)(fs.D,{divider:e,role:"menuitem",trailingIcon:(0,I.jsx)(ys.p,{size:"small"}),onClick:c,target:"_blank",href:s,children:i.Ru.get("navbar.premium")}):(0,I.jsx)(fs.D,{divider:e,role:"menuitem",onClick:c,to:s,children:i.Ru.get("navbar.premium")})},Is=({divider:e,visible:t})=>{const n=(0,ge.vh)(),a=(0,Fi.V)(),r=(0,f.useCallback)((()=>{n.send(vs({category:"masthead",action:"click",label:"support-link",destination_url:_s.nw,context:window.location.href,os:(0,Es.f)(),variant:"a"},a))}),[n,a]);return t?(0,I.jsx)(fs.D,{divider:e,role:"menuitem",href:_s.nw,onClick:r,target:"_blank",trailingIcon:(0,I.jsx)(ys.p,{size:"small"}),children:i.Ru.get("user.support")}):null},Ns="8px",Cs="main-userWidget-box",Ts="main-userWidget-box",js="main-userWidget-dropDownMenu",Ls="main-avatar-avatar",Rs="main-userWidget-screenReaderOnly",ks="main-userWidget-notificationDot",Os="tU7KjNh_lnoniCY_3zHQ",Ps="kD6L2BtiukbMHbIwCNef",Ds="main-userWidget-unableToUpdate",Ms="FZ4y0Q61kFpjJzUjCvSa",Hs="main-userWidget-setupPlan",zs="main-userWidget-hasAvatar",Vs=()=>{const e=(0,u.d4)((e=>e.platform.isDesktop)),{spec:t,logger:n}=(0,xi.r)(hs,{});return(0,f.useEffect)((()=>{n.logImpression(t.impression())}),[n,t]),e?null:(0,I.jsx)("div",{className:js,children:(0,I.jsxs)(ms.W,{children:[(0,I.jsx)(Ss,{ubiSpec:t,ubiLogger:n}),(0,I.jsx)(Is,{visible:!0}),(0,I.jsx)(xs,{visible:!0})]})})};function Us(e){if(null===e)return null;const t=e["multiuserplan-member-type"],n=parseInt(e["multiuserplan-current-size"]||"1",10);switch(t){case"FAMILY_MANAGER":return{plan:"family",currentSize:n};case"DUO_MANAGER":return{plan:"duo",currentSize:n};default:return null}}var Fs=o(55533);const Bs=({displayAvatar:e})=>(0,I.jsxs)("div",{className:Ms,children:[(0,I.jsx)("span",{className:Rs,children:i.Ru.get("user.update-available")}),(0,I.jsx)(Fs.Z,{className:Gt()(ks,{[Os]:!e},Ps)})]});var qs=o(39082);const Ws=`${_s.xD}?utm_source=spotify&utm_medium=menu&utm_campaign=your_account`,Gs=({divider:e,ubiLogger:t,ubiSpec:n})=>{const{openURLWithSessionTransfer:a}=(0,qs.L)();return(0,I.jsx)(fs.D,{divider:e,role:"menuitem",trailingIcon:(0,I.jsx)(ys.p,{size:"small"}),onClick:()=>{t.logInteraction(n.goToAccountPageRowFactory().hitUiNavigate({destination:Ws})),a(Ws)},children:i.Ru.get("user.account")})};var Qs=o(83317),Ks=o(84881),$s=o(55701);const Ys=()=>{const{show:e}=(0,Ks.j)();return(0,$s.R)()?(0,I.jsxs)(Qs.g,{displayText:"Debug Tools",children:[(0,I.jsx)(fs.D,{role:"menuitem",onClick:()=>e(),children:"Debug Window"}),!1,!1]}):null};var Zs=o(70501);const Xs=({divider:e,ubiLogger:t,ubiSpec:n})=>{const a=(0,u.wA)(),r=(0,f.useCallback)((()=>{t.logInteraction(n.logOutRowFactory().hitLogout()),a((0,Zs.wH)())}),[a,t,n]);return(0,I.jsx)(fs.D,{divider:e,role:"menuitem",onClick:r,"":"user-widget-dropdown-logout",children:i.Ru.get("user.log-out")})},Js=({divider:e,planAttributes:t,ubiSpec:n,ubiLogger:a})=>{const{openURLWithSessionTransfer:r}=(0,qs.L)(),s="duo"===t.plan?"https://www.spotify.com/account/duo/":"https://www.spotify.com/account/family/";return(0,I.jsx)(fs.D,{divider:e,role:"menuitem",trailingIcon:(0,I.jsx)(ys.p,{size:"small"}),onClick:()=>{a.logInteraction(n.goToPlanManagementFactory().hitNavigateToExternalUri({destination:s})),r(s)},children:(0,I.jsxs)("span",{className:Hs,children:["duo"===t.plan?i.Ru.get("user.setup-duo"):i.Ru.get("user.setup-family"),t.currentSize<=1&&(0,I.jsx)(Fs.Z,{className:ks,name:"dot-icon"})]})})},eo=({visible:e,divider:t,ubiSpec:n,ubiLogger:a})=>{const{isPrivateSession:r,setPrivateSession:s}=ki(),o=(0,f.useCallback)((()=>{a.logInteraction(n.togglePrivateSessionRowFactory().hitSetSettingField()),s(!r)}),[s,r,a,n]);return e?(0,I.jsx)(fs.D,{divider:t,role:"menuitemcheckbox","aria-checked":r,onClick:o,children:i.Ru.get("user.private-session")}):null},to="/preferences",no=({divider:e,ubiLogger:t,ubiSpec:n})=>(0,I.jsx)(fs.D,{divider:e,role:"menuitem",to,onClick:()=>{t.logInteraction(n.goToSettingsRowFactory().hitUiNavigate({destination:to}))},children:i.Ru.get("user.settings")}),ao=({divider:e,ubiLogger:t,ubiSpec:n})=>{const a=(0,Cr.k)(),r=(0,Nr.t)(),s=(0,f.useCallback)((()=>{t.logInteraction(n.updateClientRowFactory().hitUiHide()),r.applyUpdate()}),[r,t,n]);return a?.state!==Tr.D.UPDATE_READY?null:(0,I.jsx)(fs.D,{divider:e,role:"menuitem",onClick:s,trailingIcon:(0,I.jsx)(Fs.Z,{className:ks}),"":"user-widget-update-available",children:i.Ru.get("user.update-client")})},ro=({divider:e})=>{const t=(0,u.wA)(),n=(0,f.useCallback)((e=>{e.preventDefault(),t((0,l.as)())}),[t]);return(0,I.jsx)(fs.D,{divider:e,role:"menuitem",trailingIcon:(0,I.jsx)(Fs.Z,{className:Ds}),onClick:n,href:"",target:"_blank",children:i.Ru.get("user.unable-to-update")})};var io=o(1697),so=o(5082);const oo=({divider:e,ubiLogger:t,ubiSpec:n})=>{const a=(0,u.wA)(),r=(0,io.D)("loggedin_upgrade_menu"),s=(0,ws.k)(),{url:o,isExternal:c}=s,l=(0,f.useCallback)((()=>{t.logInteraction(n.goToUpgradePlanPageRowFactory().hitNavigateToExternalUri({destination:o})),a((0,As.d)({action_type:"gtm.upgradeClick",action_intent:"upgrade-dwp",item_id:"dwp-top-bar",view_uri:""}))}),[a,o,t,n]);return(0,u.d4)((e=>(0,so.Yb)(e)))?c?(0,I.jsx)(fs.D,{divider:e,role:"menuitem",trailingIcon:(0,I.jsx)(ys.p,{size:"small"}),onClick:l,target:"_blank",href:r(o),children:i.Ru.get("upgrade.tooltip.title")}):(0,I.jsx)(fs.D,{divider:e,role:"menuitem",onClick:l,to:r(o),children:i.Ru.get("upgrade.tooltip.title")}):null},co=({divider:e,ubiSpec:t,ubiLogger:n})=>{const a=(0,u.d4)((e=>e.session.user?.uri)),r=(0,k.z)();if(!a)return null;const s=(0,J.o_h)(a).toURLPath(!0);return(0,I.jsx)(fs.D,{divider:e,role:"menuitem",to:s,onClick:()=>{n.logInteraction(t.goToUserProfileRowFactory().hitUiNavigate({destination:s})),r.setReferrer("user_profile")},children:i.Ru.get("card.tag.profile")})};var lo=o(8335);const uo="KROerAKSuwZBbse9iJT_",ho="Sv1KnjVg3ekpKXQ06hx1",po="lgapDocKw68LlwEMOEe_",mo="X0f9yl0vfdlQU4bX4p2Q",fo="ELJKm9oK4ojPrEohxqWu",go="GRIcLOxMVgF_nrfnY4Uv",bo="ECeOpd1vpoOavSRlnAvd",vo="eUqphQq1C_Rpj86v0C76",yo="q_y6r1A1e8D5uNZ_Menz",_o="jG4F9TThOut3mIchASGW",Eo="SuKZtj8PyNFy4RV6GSem",xo="SO8ZVeRnaa3OYx4hD5WZ",Ao="FSi_NkGvBacIY9AQ3Enf",wo="RRTp4ESOekxPGhzyjzt5",So="KFhPNPSqzSZjHtAi0Kqz",Io="O84I6j6mdxtM8lakjPzR",No="WATiQKibA4mYnP3g6KaM",Co="y77CgOUQOe6c5bjVe4GX",To="QeUrkqvHAbXSveKN2wCu",jo=()=>(0,I.jsx)("div",{className:Gt()(mo,fo,go),children:(0,I.jsx)(Pr.E,{semanticColor:"textSubdued",variant:"marginal",children:i.Ru.get("web-player.notification-center.empty-state")})});var Lo=o(19145);const Ro=({lastItemRef:e})=>(0,I.jsx)("div",{className:Gt()(mo,fo),ref:e,children:(0,I.jsx)(Lo.a3,{semanticColor:"textSubdued","aria-labelledby":i.Ru.get("page.loading")})});var ko=o(66408),Oo=o(40381);const Po=({primaryImages:e})=>(0,I.jsx)("div",{className:_o,children:e.length>1?(0,I.jsx)("div",{className:Ao,children:e.map(((t,n)=>(0,I.jsx)("div",{className:wo,style:{zIndex:e.length-n},children:(0,I.jsx)(ss.e,{imageClassName:vo,placeholderClassName:vo,label:"notificationAvatar",width:32,images:[{url:t.image_url}],userIconSize:"medium",username:t.displayName,displayName:t.displayName})},n)))}):(0,I.jsx)(ss.e,{images:e.map((e=>({url:e.image_url}))),userIconSize:"large",label:"notificationAvatar",width:48,username:e[0]?.displayName,displayName:e[0]?.displayName})}),Do=({primaryImage:e,secondaryImage:t})=>(0,I.jsxs)("div",{className:_o,children:[(0,I.jsx)(ko.b,{className:Eo,images:[{url:e.image_url}],iconSize:"medium",size:Oo.Qe.SIZE_40,type:er.c.PLAYLIST,title:e.displayName}),(0,I.jsx)(ss.e,{className:xo,imageClassName:vo,placeholderClassName:vo,label:"notificationAvatar",width:24,images:[{url:t.image_url}],userIconSize:"small",username:t.displayName,displayName:t.displayName})]});var Mo=o(56386),Ho=o.n(Mo),zo=o(64141),Vo=o(29512);const Uo=({title:e,timestamp:t})=>{let n=0;const a=(0,f.useRef)(null),r=(0,zo.K)({ref:a}),i=(0,f.useMemo)((()=>(0,Vo.Z)(Date.parse(t)).replace(/\s+/g,"")),[t]);return(0,I.jsxs)("div",{className:So,children:[(0,I.jsx)(Pr.E,{variant:"bodySmall",semanticColor:"textBase",style:{"--timestamp-text":`'${i}'`},className:No,ref:a,children:Ho()(e.text?.text,/(\$\d+)/g,((t,a)=>{const r=(0,I.jsx)(Pr.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e.text_values[n]?.text},a);return n++,r}))}),r&&(0,I.jsx)(Pr.E,{variant:"marginal",semanticColor:"textSubdued",className:Io,children:i})]})},Fo=()=>(0,I.jsx)("div",{className:To});let Bo=function(e){return e.UNKNOWN_STATE="UNKNOWN_STATE",e.UNREAD="UNREAD",e.READ="READ",e.CLICKED="CLICKED",e[e.UNRECOGNIZED=NaN]="UNRECOGNIZED",e}({});const qo=({notification:e,markAsRead:t})=>{const{ref:n,inView:a}=(0,lo.Wx)();return(0,f.useEffect)((()=>{a&&e.state===Bo.UNREAD&&t(e.notification_id)}),[a,t,e.notification_id,e.state]),(0,I.jsxs)("div",{className:yo,ref:n,children:[(0,I.jsx)(Po,{primaryImages:e.primary_images}),(0,I.jsx)(Uo,{title:e.title,timestamp:e.event_timestamp}),e.state===Bo.UNREAD&&(0,I.jsx)("div",{className:Co,children:(0,I.jsx)(Fo,{})})]})},Wo=({notification:e,markAsRead:t})=>{const{ref:n,inView:a}=(0,lo.Wx)();return(0,f.useEffect)((()=>{a&&e.state===Bo.UNREAD&&t(e.notification_id)}),[a,t,e.notification_id,e.state]),(0,I.jsxs)("div",{className:yo,ref:n,children:[(0,I.jsx)(Do,{primaryImage:e.primary_image,secondaryImage:e.secondary_image}),(0,I.jsx)(Uo,{title:e.title,timestamp:e.event_timestamp}),e.state===Bo.UNREAD&&(0,I.jsx)("div",{className:Co,children:(0,I.jsx)(Fo,{})})]})};var Go=o(7865),Qo=o(11960);const Ko=async(e,t)=>{const n=Go.n.getInstance();await n.build().withHost(Qo.dv).withJsonContentType().withoutMarket().withMethod("POST").withBody({notification_ids:e,state:t}).withPath("/UpdateNotificationState").send()};var $o=o(88657);const Yo=()=>{const{data:e,isLoading:t,fetchNextPage:n,hasNextPage:a}=(0,$o.q)({queryKey:["notifications"],queryFn:async({pageParam:e})=>await(async e=>{const t=Go.n.getInstance();return(await t.build().withHost(Qo.dv).withJsonContentType().withoutMarket().withMethod("POST").withBody({check_further_unread:!0,cursor:e,limit:20}).withPath("/GetNotifications").send()).body})(e),initialPageParam:void 0,getPreviousPageParam:e=>e.reverse_cursor,getNextPageParam:e=>e.forward_cursor,gcTime:18e5,staleTime:6e5});return{notifications:e?.pages.map((e=>e.notifications)).flat()??[],isLoading:t,hasNextPage:a,fetchNextPage:n}};var Zo=o(88907),Xo=o(22302);const Jo=({notifications:e,fetchNextPage:t,hasNextPage:n})=>{const a=(0,ot.g)(),r=(0,h.Oj)(),{ref:s,inView:o}=(0,lo.Wx)();(0,f.useEffect)((()=>{o&&t()}),[t,o]);const c=(0,f.useCallback)((async e=>{Ko([e],Bo.READ)}),[]),l=(0,f.useCallback)((async e=>{Ko([e],Bo.CLICKED)}),[]),d=(0,f.useCallback)((e=>{const t="COMMENT_REACT"===e.single_notification?.event_type||"COMMENT_REPLY"===e.single_notification?.event_type?(e=>{const t=(0,J.o_h)(e,{parseUnknown:!0});return"unknown"===t?.type&&t.args?(0,J.iMK)(t.args.at(3)??"").toURI():""})(e.single_notification?.action?.uri??""):e.single_notification?.action?.uri??e.double_notification?.action?.uri;if(t){const e=(0,J.o_h)(t).toURLPath(!0);a(e),r({type:"close"})}}),[r,a]),u=(0,f.useCallback)((()=>e.map(((e,t)=>{const n=e.single_notification?.notification_id??e.double_notification?.notification_id;return(0,I.jsx)(Xo.u,{children:(0,I.jsx)(Zo.H,{role:"menuitem",className:Gt()(mo,bo),onClick:()=>{l(n),d(e)},children:(a=e,Object.prototype.hasOwnProperty.call(a,"single_notification")?(0,I.jsx)(qo,{notification:e.single_notification,markAsRead:c}):(0,I.jsx)(Wo,{notification:e.double_notification,markAsRead:c}))})},t);var a}))),[l,c,d,e]);return(0,I.jsxs)("div",{className:uo,children:[(0,I.jsx)(Pr.E,{variant:"bodyMediumBold",semanticColor:"textBase",className:po,children:i.Ru.get("web-player.notification-center.button-label")}),e.length>0?(0,I.jsxs)("div",{className:ho,children:[u(),n&&(0,I.jsx)(Ro,{lastItemRef:s})]}):(0,I.jsx)(jo,{})]})},ec=()=>{const{notifications:e,isLoading:t,hasNextPage:n,fetchNextPage:a}=Yo();return t?(0,I.jsx)("div",{className:uo,children:(0,I.jsx)(Ro,{})}):(0,I.jsx)(Jo,{notifications:e,hasNextPage:n,fetchNextPage:a})};var tc=o(47626);const nc=()=>{const{setIsGlobalNavDraggable:e}=(0,f.useContext)(vr),n=(0,u.d4)((e=>e.platform.isDesktop)),{spec:a,logger:r}=(0,xi.r)(hs,{});(0,f.useEffect)((()=>{r.logImpression(a.impression())}),[r,a]),(0,f.useEffect)((()=>(e?.(!1),()=>{e?.(!0)})),[e]);const i=(0,tc.k)(),s=Us(i.data),o=(0,t.NC)(Ee.y2l);return(0,I.jsx)("div",{"":"user-widget-menu",className:js,children:(0,I.jsxs)(ms.W,{children:[(0,I.jsx)(Gs,{ubiSpec:a,ubiLogger:r}),s&&(0,I.jsx)(Js,{planAttributes:s,ubiSpec:a,ubiLogger:r}),(0,I.jsx)(co,{ubiSpec:a,ubiLogger:r}),(0,I.jsx)(oo,{ubiSpec:a,ubiLogger:r}),(0,I.jsx)(Is,{visible:!0}),(0,I.jsx)(xs,{visible:!n}),(0,I.jsx)(eo,{visible:n,ubiSpec:a,ubiLogger:r}),(0,I.jsx)(no,{divider:"after",ubiSpec:a,ubiLogger:r}),i?.data?.["client-deprecated"]&&(0,I.jsx)(ro,{}),(0,I.jsx)(ao,{ubiSpec:a,ubiLogger:r})," ",(0,I.jsx)(Ys,{}),(0,I.jsx)(Xs,{ubiSpec:a,ubiLogger:r,divider:o?"after":void 0}),o&&(0,I.jsx)(ec,{})]})})},ac="Mfd_Z1fq10XbJnN0Fz6C",rc="bLHetMTwwHHeDXIUjSYi",ic="mbYYWaWS05FffVjDSqQP",sc=({percentage:e,label:t})=>(0,I.jsx)("div",{className:ac,style:{"--onboarding-circle-percentage":`${e}%`},children:(0,I.jsx)("div",{className:rc,children:(0,I.jsx)(Pr.E,{as:"span",variant:"titleSmall",semanticColor:"textSubdued",className:ic,children:t})})});var oc=o(83352);const cc="music",lc="3.0.0",dc="default",uc="16.2.6";function hc(e){return new pc(e)}class pc{constructor(e){this._path=[{name:"desktop-onboarding-checklist-menu"}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}tasksFactory(){return new pc.TasksEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}snackbarFactory(e){return new pc.SnackbarEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[dc,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[lc,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}impression(){return{app:cc,generatorVersion:uc,specificationVersion:lc,specificationMode:dc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}!function(e){e.TasksEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"tasks"}),t&&(this._parentAbsoluteLocation=t)}taskItemFactory(t){return new e.TasksEventFactory.TaskItemEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[dc,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[lc,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}}(pc||(pc={})),function(e){e.SnackbarEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"snackbar"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[dc,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[lc,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:cc,generatorVersion:uc,interactionType:"hit",specificationMode:dc,specificationVersion:lc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:cc,generatorVersion:uc,interactionType:"hit",specificationMode:dc,specificationVersion:lc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}impression(){return{app:cc,generatorVersion:uc,specificationVersion:lc,specificationMode:dc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(pc||(pc={})),function(e){!function(e){e.TaskItemEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"task_item"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[dc,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[lc,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitFocusInputField(){return{actionName:"focus_input_field",actionVersion:1,app:cc,generatorVersion:uc,interactionType:"hit",specificationMode:dc,specificationVersion:lc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:cc,generatorVersion:uc,interactionType:"hit",specificationMode:dc,specificationVersion:lc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:cc,generatorVersion:uc,interactionType:"hit",specificationMode:dc,specificationVersion:lc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitCreatePlaylist(){return{actionName:"create_playlist",actionVersion:1,app:cc,generatorVersion:uc,interactionType:"hit",specificationMode:dc,specificationVersion:lc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(e.TasksEventFactory||(e.TasksEventFactory={}))}(pc||(pc={}));var mc=o(15166);const fc="kRu_9FQvlKWWUwxVan3v",gc="OsPgVNwb3Fo6F1g2_hh0",bc="OImI6hJyJdsS02FJ98YU",vc="jGlYiZsdrAJfB3k6icct",yc="vlZ81rdxwEATJEumDZxh",_c="vAQqVvJRN5rwYjjHlxOT",Ec="ijX3uYDojJHVt3RI6c8t",xc=()=>{const{tasks:e,performTask:t}=(0,mc.V)(),n=(0,h.Oj)(),{spec:a,logger:r}=(0,xi.r)(hc,{});(0,f.useEffect)((()=>{r.logImpression(a.impression())}),[]);const i=e=>{t(e,(()=>{(e=>{const t=a.tasksFactory().taskItemFactory({identifier:e});switch(e){case"start-playing":r.logInteraction(t.hitFocusInputField());break;case"save-playlist":case"watch-a-video":r.logInteraction(t.hitUiNavigate({destination:"/search"}));break;case"create-playlist":r.logInteraction(t.hitCreatePlaylist());break;default:r.logInteraction(t.hitUiReveal())}})(e),n({type:"close"})}))};return(0,I.jsx)(f.Fragment,{children:e.map((e=>{const t=e.completed?oc.k:e.icon;return(0,I.jsx)(Xo.u,{onKeyDown:t=>{if("Enter"===t.key){if(t.preventDefault(),e.completed)return;i(e.id)}},children:(0,I.jsxs)("div",{role:"button","aria-disabled":e.completed,className:Gt()(fc,{[gc]:e.completed}),children:[(0,I.jsx)("div",{className:bc,children:(0,I.jsx)(t,{size:"large"})}),(0,I.jsxs)("div",{className:yc,children:[(0,I.jsxs)("div",{className:_c,children:[(0,I.jsx)(Pr.E,{as:"h3",variant:"bodyMediumBold",semanticColor:"textBase",className:Ec,children:e.title}),(0,I.jsx)("div",{className:vc,children:e.action&&(0,I.jsx)(Er.$,{size:"small",disabled:e.completed,onClick:()=>i(e.id),children:e.action})})]}),(0,I.jsx)(Pr.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:e.description})]})]})},e.id)}))})};var Ac=o(61057);const wc="R1LAYqlvoHyvSWVzo0lh",Sc="WnBTuOeFRF5dfvTx4eJV",Ic="hrs25CWx5fvA930Z7m3M",Nc="rwRzCTrfDh28F0JEWJ9U",Cc=()=>{const{completed:e,count:t,percentage:n}=(0,Ac.o)(),a=e===t;return(0,I.jsxs)(ms.W,{className:wc,children:[(0,I.jsx)("li",{children:(0,I.jsxs)("header",{className:Sc,children:[(0,I.jsxs)("div",{className:Ic,children:[(0,I.jsx)(Pr.E,{as:"h3",variant:"titleMedium",semanticColor:"textBase",children:a?i.Ru.get("web-player.onboarding-checklist.menu.title.complete"):i.Ru.get("web-player.onboarding-checklist.menu.title")}),(0,I.jsx)(Pr.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:a?i.Ru.get("web-player.onboarding-checklist.menu.text.complete"):i.Ru.get("web-player.onboarding-checklist.menu.text")})]}),(0,I.jsx)("div",{className:Nc,children:(0,I.jsx)(sc,{percentage:n,label:i.Ru.get("web-player.onboarding-checklist.progress",{completed:e,count:t})})})]})}),(0,I.jsx)(xc,{})]})};var Tc=o(8774),jc=o(93834),Lc=o(38689);const Rc=({taskId:e,onShowChecklist:t})=>{const{spec:n,logger:a}=(0,xi.r)(hc,{});return(0,f.useEffect)((()=>{a.logImpression(n.snackbarFactory({identifier:e}).impression())}),[]),(0,I.jsx)(Tc.O,{children:(0,I.jsx)(Lc.P,{center:(0,I.jsx)(jc.z,{children:i.Ru.get("web-player.onboarding-checklist.snackbar.message")}),trailing:(0,I.jsx)(_r.H,{semanticColor:"textBrightAccent",onClick:t,condensedAll:!0,"aria-hidden":"true",children:i.Ru.get("web-player.onboarding-checklist.snackbar.action")})})})};var kc=o(39880),Oc=o(80714),Pc=o(93510),Dc=o(49772),Mc=o(6528),Hc=o(3291);var zc=o(9645);const Vc="oA573BNFb8S9eT2dC_11",Uc="ZLmgOlSW3zMXC4WLEFQ_",Fc="cHDUBxSE2gSd9dYJbMMB",Bc="NCv0D4jsAJZQqnwZafDJ",qc="XPCpAdXbyFFm77bvi0Yg",Wc="By9LfOps_25hkeyFZcyQ",Gc="RziMgLvhmVlp7IVq7xvN",Qc="W6hUg4cqx063fqJBsujV",Kc=({userDisplayName:e,avatarContent:t,showUpdateNotification:n,displayAvatar:a,onAvatarClick:r})=>{const[s,o]=(0,f.useState)(null),{completed:c,count:l,percentage:d}=(0,Ac.o)(),h=(0,f.useRef)(null);return(()=>{const{completeTask:e,isTaskCompleted:t}=(0,mc.V)(),{enqueueCustomSnackbar:n}=(0,Oc.i)(),a=(0,kc.S)(),r=(0,f.useCallback)((()=>{a("openChecklist",{})}),[a]),i=(0,f.useCallback)((t=>{e(t),n((0,I.jsx)(Rc,{taskId:t,onShowChecklist:r}),{identifier:"onboarding-checklist"})}),[e,n,r]);(0,V.p)(z.gd.QUEUE_ACTION,(e=>{t("queue-it-up")||"add"===e.data.action&&i("queue-it-up")}));const s=t("watch-a-video"),o=(0,ur.o)((e=>("video"===e?.item?.mediaType||"video"===e?.item?.metadata?.track_player)&&(0,Dc.uW)(e)===Pc.i.PLAYING));(0,f.useEffect)((()=>{o&&!s&&i("watch-a-video")}),[i,s,o]);const c=t("start-playing"),l=(0,ur.o)((e=>"audio"===e?.item?.mediaType&&(0,Dc.uW)(e)===Pc.i.PLAYING));(0,f.useEffect)((()=>{l&&!c&&i("start-playing")}),[i,c,l]);const d=t("save-playlist");(0,Mc.b)(Hc.tD.OPERATION_COMPLETE,(e=>{d||"add"===e.data.operation&&e.data.uris.some(J.tbX)&&i("save-playlist")}));const h=t("create-playlist");(0,Mc.b)(Hc.tD.OPERATION_COMPLETE,(e=>{h||"create_playlist"===e.data.operation&&i("create-playlist")}));const p=t("become-a-pro"),m=(0,u.d4)((e=>e.ui.keyboardShortcutsHelpModal.isOpen));(0,f.useEffect)((()=>{m&&!p&&i("become-a-pro")}),[i,p,m]);const{isOpen:g}=(0,Qa.H)(),b=t("try-mini-player");(0,f.useEffect)((()=>{g&&!b&&i("try-mini-player")}),[i,b,g])})(),((e,t)=>{const n=(0,zc.R)(),a=(0,f.useRef)(t);(0,f.useEffect)((()=>{a.current=t}),[t]),(0,f.useEffect)((()=>n.addListener(e,(e=>{a.current&&a.current(e)}))),[e,n])})("openChecklist",(()=>{const e=h.current;if(!e)return;const t=e.querySelector("button");t?.click()})),(0,I.jsxs)("div",{className:Gt()(Vc,{[Uc]:"onboarding"===s,[Fc]:"user"===s}),children:[(0,I.jsx)("div",{className:Wc,ref:h,children:(0,I.jsx)(os.b,{onHide:()=>o(null),onShow:()=>o("onboarding"),offset:[0,8],placement:"bottom-end",menu:(0,I.jsx)(Cc,{}),children:(e,t,n)=>(0,I.jsx)(wr.Zp,{label:i.Ru.get("web-player.onboarding-checklist.widget.tooltip"),children:(0,I.jsx)(_r.H,{ref:n,className:Qc,condensedAll:!0,"aria-label":i.Ru.get("web-player.onboarding-checklist.widget.tooltip"),style:{"--onboarding-circle-percentage":`${d}%`},onClick:e=>{t(e)},"aria-expanded":e,children:(0,I.jsx)("span",{className:Bc,children:i.Ru.get("web-player.onboarding-checklist.progress",{completed:c,count:l})})})})})}),(0,I.jsx)("div",{className:qc,children:(0,I.jsx)(os.b,{onShow:()=>o("user"),onHide:()=>o(null),offset:[0,8],placement:"bottom-end",menu:(0,I.jsx)(nc,{}),children:(i,s,o)=>(0,I.jsx)(wr.Zp,{label:e,children:(0,I.jsxs)(_r.H,{ref:o,className:Gc,onClick:e=>{r?.(e),s(e)},condensedAll:!0,"aria-label":e,"":"user-widget-link",semanticColor:"textBase","aria-expanded":i,children:[t,n&&(0,I.jsx)(Bs,{displayAvatar:a})]})})})})]})};var $c=o(30675);const Yc=()=>{const e=(0,t.NC)(Ee.y2l),{data:n}=(0,$c.I)({queryKey:["notification-unread-status"],queryFn:async()=>await(async()=>{const e=Go.n.getInstance();return(await e.build().withHost(Qo.dv).withJsonContentType().withoutMarket().withMethod("POST").withPath("/GetUserHasUnreadNotification").send()).body})(),enabled:e,staleTime:6e5,refetchInterval:e=>!e.state.data?.userHasUnreadNotification&&108e5});return n?.userHasUnreadNotification??!1};var Zc=o(47990),Xc=o(8847),Jc=o(88278);const el=e=>{const n=(0,u.d4)((e=>e.session.user)),a=(0,Cr.k)(),r=Us((0,tc.k)().data),i=!!r&&r.currentSize<=1,s=(0,t.NC)(Ee.y2l),o=Yc(),c=s&&o,l=(0,Zc.q)(),d=(0,Xc.w)(),h=!l&&d.variant!==Ee.Vt9.Control;if(!n)return(0,I.jsx)(os.b,{offset:[0,parseInt(Ns,10)],placement:"bottom-end",menu:(0,I.jsx)(Vs,{}),children:(e,t,n)=>(0,I.jsx)("button",{className:Gt()(Cs),type:"button",onClick:t,ref:n,"":"unauth-user-widget-link",children:e?(0,I.jsx)(as.M,{size:"small","aria-hidden":"true"}):(0,I.jsx)(rs.d,{size:"small","aria-hidden":"true"})})});const p=n.display_name||n.id,m=n.display_name?.charAt(0).toUpperCase(),f=!!n?.images.length||!n.display_name,g=(0,Jc.nj)(n?.avatarBackgroundColor||0),b="var(--background-elevated-base)",v={backgroundColor:f?b:`#${g}`,color:is.Ql9,lineHeight:"32px"},y=f?(0,I.jsx)(ss.e,{label:p,width:n?.images.length?32:24,images:n?.images,userIconSize:"small",testID:"user-widget-avatar",transparent:!0,className:Gt()({[zs]:n?.images.length})}):(0,I.jsx)(Pr.E,{variant:"bodySmallBold","":"username-first-letter",style:v,className:Ls,children:m}),_=a?.state===Tr.D.UPDATE_READY||i||c;return h?(0,I.jsx)(Kc,{avatarContent:y,userDisplayName:p,showUpdateNotification:_,displayAvatar:f,onAvatarClick:t=>{e.onClick?.(t)}}):(0,I.jsx)(os.b,{offset:[0,parseInt(Ns,10)],placement:"bottom-end",menu:(0,I.jsx)(nc,{}),children:(t,n,a)=>(0,I.jsx)(wr.Zp,{label:p,children:(0,I.jsxs)(_r.H,{className:Ts,onClick:t=>{e.onClick?.(t),n(t)},style:{backgroundColor:b},ref:a,condensedAll:!0,"aria-label":p,"":"user-widget-link",semanticColor:"textBase","aria-expanded":t,children:[y,_&&(0,I.jsx)(Bs,{displayAvatar:f})]})})})};var tl=o(7643);function nl(e){var t,n,a,r,i,s=e.size?tl.$Z[e.size]:e.iconSize,o=(0,tl._C)([{size:16,svgContent:"<path d='M4.538 7.513c.16-.482.42-.925.761-1.3.072-.079.159-.139.237-.21l-.2-.113a.667.667 0 0 1-.179-1l.232-.278a2.836 2.836 0 0 0 .714-1.677 2.807 2.807 0 0 0-.106-.937A2.069 2.069 0 0 0 4.853.74a2.116 2.116 0 0 0-2.415.508 2.09 2.09 0 0 0-.435.75 2.78 2.78 0 0 0-.106.937c.047.622.298 1.212.714 1.677l.232.278a.666.666 0 0 1-.179 1l-1.331.768A2.668 2.668 0 0 0 0 8.968v.034h4.347a4.305 4.305 0 0 1 .191-1.489zm10.134-.856-1.331-.768a.666.666 0 0 1-.179-1l.232-.278a2.842 2.842 0 0 0 .714-1.677 2.806 2.806 0 0 0-.106-.937A2.068 2.068 0 0 0 12.858.739a2.116 2.116 0 0 0-2.415.508 2.09 2.09 0 0 0-.435.75 2.798 2.798 0 0 0-.106.937c.047.622.298 1.212.714 1.677l.232.278a.665.665 0 0 1-.179 1l-.2.113c.078.071.165.131.237.21.342.375.6.818.76 1.3.15.48.214.984.186 1.487H16v-.034a2.667 2.667 0 0 0-1.328-2.308zm-4 6-1.331-.769a.665.665 0 0 1-.179-1l.232-.278a2.724 2.724 0 0 0 .608-2.614 2.1 2.1 0 0 0-.435-.75 2.117 2.117 0 0 0-3.124 0 2.1 2.1 0 0 0-.435.75 2.78 2.78 0 0 0-.106.937c.047.622.298 1.212.714 1.677l.232.278a.666.666 0 0 1-.179 1l-1.331.769a2.666 2.666 0 0 0-1.333 2.309V15h8v-.034a2.666 2.666 0 0 0-1.333-2.305v-.004z'/>"},{size:24,svgContent:"<path d='m16.004 19.153-2-1.153a.999.999 0 0 1-.268-1.506l.347-.417c.624-.697 1-1.581 1.071-2.515a4.167 4.167 0 0 0-.159-1.406 3.144 3.144 0 0 0-.651-1.125 3.177 3.177 0 0 0-4.687 0 3.147 3.147 0 0 0-.652 1.125 4.167 4.167 0 0 0-.159 1.406c.07.934.447 1.818 1.071 2.515l.348.417A1 1 0 0 1 9.996 18l-2 1.153a4 4 0 0 0-2 3.464v.051h12v-.05a4 4 0 0 0-1.992-3.465zm-9.151-5.472a6.164 6.164 0 0 1 .262-2.168 5.24 5.24 0 0 1 .845-1.557.992.992 0 0 1-.22-1.462l.347-.417c.624-.697 1-1.581 1.071-2.515a4.167 4.167 0 0 0-.159-1.406 3.143 3.143 0 0 0-.651-1.125 3.178 3.178 0 0 0-4.687 0 3.146 3.146 0 0 0-.652 1.125 4.167 4.167 0 0 0-.159 1.406c.07.934.447 1.818 1.071 2.515l.348.417A1 1 0 0 1 4 10l-2 1.153a4 4 0 0 0-2 3.464v.051h6.993a5.847 5.847 0 0 1-.14-.987zm15.151-2.528-2-1.153a1 1 0 0 1-.268-1.506l.347-.417c.624-.697 1-1.581 1.071-2.515a4.167 4.167 0 0 0-.159-1.406 3.143 3.143 0 0 0-.651-1.125 3.178 3.178 0 0 0-4.687 0 3.146 3.146 0 0 0-.652 1.125 4.167 4.167 0 0 0-.159 1.406c.07.934.447 1.818 1.071 2.515l.348.417a.993.993 0 0 1-.221 1.462c.368.468.654.994.845 1.557.217.701.305 1.435.262 2.168-.02.332-.068.663-.143.987H24v-.05a4 4 0 0 0-1.996-3.465z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(tl.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var al=o(33977),rl=o(93727);const il="main-topBar-buddyFeed",sl=({onClick:e,tooltipLabel:t,ariaLabel:n,className:a,testId:r,children:i,restoreFocusKey:s,disabled:o})=>(0,I.jsx)(wr.Zp,{label:t,children:(0,I.jsx)(_r.H,{"aria-label":n,onClick:e,size:"small",condensedAll:!0,"":r,className:Gt()(il,a),"data-restore-focus-key":s,disabled:o,children:i})});var ol=o(76544),cl=o(49496);const ll=Re.$S.BUDDY_FEED_BUTTON_CLICK,dl=({spec:e})=>{const{isActive:t,panelSend:n}=(0,zn.AI)(Vn.Z.BuddyFeed,Vn.Z.BuddyFeedOverlay),{isSupported:a}=(0,Te.C)().getCapabilities(),r=(0,ii.n)(),s=(0,cl.K)(),o=(0,Xe.s)(),c=(0,f.useCallback)((()=>{if(!a)return void(s&&o.logInteraction(e.hitUiReveal()));const r=t;n(ll),r||(0,rl.I)("BUDDY-FEED")}),[a,t,n,s,o,e]),l=(0,I.jsx)(sl,{tooltipLabel:r?i.Ru.get("buddy-feed.friend-activity"):i.Ru.get("offline.feedback-text"),ariaLabel:i.Ru.get("buddy-feed.friend-activity"),onClick:c,testId:"friend-activity-button",restoreFocusKey:Vn.Z.BuddyFeed,disabled:!r,children:t?(0,I.jsx)(nl,{size:"small",semanticColor:"textBase"}):(0,I.jsx)(al.B,{size:"small"})});return a?l:s?(0,I.jsx)(ol.$,{type:"buddy-feed",children:l}):null};function ul(e){var t,n,a,r,i,s=e.size?tl.$Z[e.size]:e.iconSize,o=(0,tl._C)([{size:16,svgContent:"<path d='M8 0a5.5 5.5 0 0 0-5.5 5.5v3.069L.307 12.376A.75.75 0 0 0 .25 13h15.5a.75.75 0 0 0-.057-.624L13.5 8.567V5.5A5.5 5.5 0 0 0 8 0zm1.937 14.5H6.063a2 2 0 0 0 3.874 0z'/>"},{size:24,svgContent:"<path d='M9.261 21a2.75 2.75 0 1 0 5.478 0H9.26zM12 1a7.5 7.5 0 0 0-7.5 7.5v5.344L1.53 19h20.94l-2.97-5.158V8.5A7.5 7.5 0 0 0 12 1z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(tl.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}function hl(e){var t,n,a,r,i,s=e.size?tl.$Z[e.size]:e.iconSize,o=(0,tl._C)([{size:16,svgContent:"<path d='M8 1.5a4 4 0 0 0-4 4v3.27a.75.75 0 0 1-.1.373L2.255 12h11.49L12.1 9.142a.75.75 0 0 1-.1-.374V5.5a4 4 0 0 0-4-4zm-5.5 4a5.5 5.5 0 0 1 11 0v3.067l2.193 3.809a.75.75 0 0 1-.65 1.124H10.5a2.5 2.5 0 0 1-5 0H.957a.75.75 0 0 1-.65-1.124L2.5 8.569V5.5zm4.5 8a1 1 0 1 0 2 0H7z'/>"},{size:24,svgContent:"<path d='M12 3a5.5 5.5 0 0 0-5.5 5.5v5.878L4.414 18h15.173L17.5 14.377V8.5A5.5 5.5 0 0 0 12 3zM4.5 8.5a7.5 7.5 0 1 1 15 0v5.342L23.046 20h-7.582a3.5 3.5 0 1 1-6.929 0H.955L4.5 13.844V8.5zM10.585 20a1.5 1.5 0 1 0 2.83 0h-2.83z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(tl.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var pl=o(29494),ml=o(13425),fl=o(82417),gl=o(24983),bl=o(66796);const vl="agh_IHo91VhyFTnp5BzM",yl="XVC0Gr8G4SXM0a98jbqC",_l="K8ygfuFNcx2tNcNv09JH";function El(){const{name:e}=ml.lo;return[e]}const xl=()=>{const e=(0,ot.g)(),t=(0,fl.J)(),n=(0,ii.n)(),a=(0,gl._)((e=>"/content-feed"===e.pathname)),r=a,[s,o]=(0,f.useState)(!1),{request:c}=(0,f.useContext)(Ge.j),l=(0,Tt.jE)(),{spec:d,logger:u}=(0,xi.r)(pl.q,{});(0,f.useEffect)((()=>{let e=!1;const t=setInterval((async()=>{let t;try{t=await(0,bl.c)(c,ml.jF,{})}catch{return}if(t?.errors)return;const n=t?.data?.whatsNewFeedHasNewItems||!1;if(n&&!e){const e=d.notificationsBellToggleFactory().notificationsIndicatorFactory().impression();u.logImpression(e),o(!0),l.invalidateQueries({queryKey:El()})}e=n}),144e5);return()=>{clearInterval(t)}}),[u,l,c,d]);const h=()=>(0,I.jsxs)("div",{className:vl,"":"notification-dot",children:[(0,I.jsx)("span",{className:yl,children:i.Ru.get("new_releases")}),(0,I.jsx)(Fs.Z,{className:_l})]}),p=(0,f.useCallback)((()=>{a?(u.logInteraction(d.notificationsBellToggleFactory().hitUiNavigateBack()),t.length>1?t.goBack():e("/")):(o(!1),u.logInteraction(d.notificationsBellToggleFactory().hitUiNavigate({destination:"spotify:app:content-feed"})),e("/content-feed"))}),[a,u,d,t,e]);return(0,I.jsxs)(sl,{tooltipLabel:i.Ru.get("web-player.whats-new-feed.button-label"),ariaLabel:i.Ru.get("web-player.whats-new-feed.button-label"),testId:"whats-new-feed-button",onClick:p,disabled:!n,children:[r?(0,I.jsx)(ul,{size:"small",semanticColor:"textBase"}):(0,I.jsx)(hl,{size:"small"}),s&&(0,I.jsx)(h,{})]})};var Al=o(50481),wl=o(65739);const Sl=(0,f.forwardRef)((({className:e},t)=>{const n=(0,Br.W)(),a=(0,u.wA)(),r=(0,Fi.V)(),{spec:s,logger:o}=(0,es.D)(xr.x,{}),c=(0,Pi.U)("(max-width: 849px)"),l=r&&c,d=(0,f.useCallback)((()=>{a((0,Ar.Ai)()),n({intent:"signup",type:"click"})}),[a,n]),h=(0,f.useCallback)((()=>{a((0,Ar.zL)()),n({intent:"login",type:"click"})}),[a,n]),p=(0,f.useCallback)((()=>{a((0,Ar.NM)()),n({intent:"upgrade-to-premium",type:"click"})}),[a,n]),{openURLWithSessionTransfer:m}=(0,qs.L)(),g=(0,ot.g)(),b=(e,t)=>{t?m(e):g(e)},v=(0,f.useMemo)((()=>s.upgradeButtonFactory()),[s]),y=(0,f.useMemo)((()=>s.friendFeedButtonFactory()),[s]),{shouldShowUpgradeButton:_,onUpgradeClick:E}=(0,Al.i)(v,o),x=(0,Pi.U)("(min-width: 1024px)"),{isDesktop:A,isPWA:w,shouldCalloutPWA:S}=(0,u.d4)((e=>e.platform)),N=(0,f.useCallback)((()=>{o.logInteraction(s.profileButtonFactory().hitUiReveal())}),[o,s]);return(0,I.jsxs)("div",{className:Gt()(e,wl.A.topbarContentRight),ref:t,children:[(0,I.jsx)(Di,{spec:s}),r&&!c?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(_r.H,{condensed:!0,onClick:()=>{p()},children:i.Ru.get("navbar.premium")}),(0,I.jsx)(_r.H,{condensed:!0,onClick:()=>b(_s.nw,!0),children:i.Ru.get("user.support")}),(0,I.jsx)(_r.H,{condensed:!0,onClick:()=>b(_s.Kw,!0),children:i.Ru.get("download.download")}),(0,I.jsx)("div",{className:wl.A.topNavBarSeparator})]}):(0,I.jsx)(I.Fragment,{}),(0,I.jsx)(Or,{}),_&&x&&(0,I.jsx)(ns,{onClick:E,className:wl.A.UpgradeButton}),!A&&!w&&!(0,R.g)()&&(0,I.jsx)(Gi,{shouldCalloutPWA:S,logger:o,spec:s}),r&&(0,I.jsxs)("div",{className:wl.A.loginButtons,children:[(0,I.jsx)(_r.H,{className:wl.A.signupButton,onClick:d,"":"signup-button",size:"small",children:i.Ru.get("sign_up")}),(0,I.jsx)(Ji,{children:(0,I.jsx)(Er.$,{colorSet:"invertedLight",onClick:h,"":"login-button",children:i.Ru.get("login")})})]}),!r&&(0,I.jsxs)("div",{className:Gt()(wl.A.globalNavBar,wl.A.topBarRightButtonContainer),children:[(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(xl,{})}),(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(dl,{spec:y})})]}),(!r||l)&&(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(el,{onClick:N})})]})}));var Il=o(43726),Nl=o(13003);const Cl=(e,t)=>e[0]===t[0]&&e[1]===t[1],Tl=({className:e})=>{const{spec:t,logger:n}=(0,es.D)(xr.x,{}),a=(0,ot.g)(),[r,s]=(()=>{const[e,t]=(0,u.d4)((e=>[e.ui.history.canGoBack,e.ui.history.canGoForward]),Cl);return[e,t]})(),o=(0,f.useCallback)((()=>{n.logInteraction(t.backButtonFactory().hitUiNavigateBack()),a(-1)}),[n,a,t]),c=(0,f.useCallback)((()=>{n.logInteraction(t.forwardButtonFactory().hitUiNavigateForwardInHistory()),a(1)}),[n,a,t]);return(0,I.jsxs)("div",{className:Gt()(e,wl.A.globalNavBarHistoryButtonsContainer),children:[(0,I.jsx)(wr.Zp,{label:i.Ru.get("navbar.go-back"),children:(0,I.jsx)(_r.H,{size:"medium",iconOnly:Il.g,condensed:!0,"":"top-bar-back-button","aria-label":i.Ru.get("navbar.go-back"),disabled:!r,onClick:o})}),(0,I.jsx)(wr.Zp,{label:i.Ru.get("navbar.go-forward"),children:(0,I.jsx)(_r.H,{size:"medium",iconOnly:Nl.V,condensed:!0,"":"top-bar-forward-button","aria-label":i.Ru.get("navbar.go-forward"),disabled:!s,onClick:c})})]})};var jl=o(9890),Ll=o(22297),Rl=o(86827);const kl="fiHe04F7JrFVxwTtQKNC",Ol="OOmw6k8Nm2wxqdp3iMEi",Pl="VdaiGBErbfEB8WKT1_xB",Dl="MvkNePnKvq7odsvqZGGp",Ml="c1SbOcr3tYRrykXHia_i",Hl="G_BZRxrcmBjLCMT7rM7w",zl="blk4J9F0PVHYjLGdgxIB",Vl="fJA65AgTmNpHAUxb_CIl",Ul="QUV8gJ5njNR0opnIViHW",Fl="Root__globalNav",Bl="main-globalNav-navLink",ql="main-globalNav-navLinkActive",Wl="Dp3xccI7c2f_JSJ8OHYu",Gl="main-globalNav-historyButtonsContainer",Ql="nmAHq8nfXRtoQmKU1gaF",Kl="main-globalNav-searchSection",$l="main-globalNav-searchContainer",Yl="axu7kRtHOzwIb8b14FT6",Zl="link-subtle",Xl="pKJyyZ_7ei9TgOxrTFHX",Jl="BsOjYbxeNtBwDGjKRYG3",ed=({containerRef:e,contentRightRef:t,isSearchInputCollapsed:n,forceExpandSearchInput:a})=>{const{logOpenCreateMenu:r}=(0,Rl.q)(),s=(0,f.useRef)(null),o=(0,f.useRef)(null),[c,l]=(0,f.useState)(!1),d=(0,on.W)(),u=(0,f.useCallback)((()=>{if(s.current&&o.current&&t.current){const e=s.current.offsetWidth+o.current.offsetWidth,{left:n,right:a}=t.current.getBoundingClientRect(),{left:r,right:i}=s.current.getBoundingClientRect();let c=r+e>n;if(d){c=i-e<a}l(c)}}),[t,d]);(0,Wi.w)({refOrElement:e,onResize:u,observeOnMount:!0});const h=!c&&!(n&&a)||c&&n&&!a;return(0,I.jsx)(os.b,{menu:(0,I.jsx)(Ll.r,{}),onShow:()=>{r()},children:(e,t,n)=>(0,I.jsx)(wr.Zp,{label:i.Ru.get("web-player.global-nav-bar.create-button.tooltip"),children:(0,I.jsx)("div",{className:kl,ref:s,children:(0,I.jsxs)("button",{type:"button",ref:n,onClick:t,className:Gt()(Zl,Ol,e&&zl,Pl),children:[(0,I.jsx)(jl.u,{className:Vl}),(0,I.jsx)("span",{className:Gt()(Ml,{[Hl]:!h}),children:(0,I.jsx)("span",{className:Ul,children:(0,I.jsx)(Pr.E,{ref:o,variant:"bodyMediumBold",semanticColor:"textBase",className:Dl,children:i.Ru.get("web-player.global-nav-bar.create-button.label")})})})]})})})})};function td(e){var t,n,a,r,i,s=e.size?tl.$Z[e.size]:e.iconSize,o=(0,tl._C)([{size:16,svgContent:"<path d='M9.375.988a2.75 2.75 0 0 0-2.75 0l-5.25 3.03A1.75 1.75 0 0 0 .5 5.535v9.724c0 .415.336.75.75.75h4a.75.75 0 0 0 .75-.75V10h4v5.258c0 .415.336.75.75.75h4a.75.75 0 0 0 .75-.75V5.534a1.75 1.75 0 0 0-.875-1.515L9.375.988z'/>"},{size:24,svgContent:"<path d='M13.5 1.515a3 3 0 0 0-3 0L3 5.845a2 2 0 0 0-1 1.732V21a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6h4v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V7.577a2 2 0 0 0-1-1.732l-7.5-4.33z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(tl.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var nd=o(92239),ad=o(33720);const rd=({className:e})=>{const{spec:n,logger:a}=(0,es.D)(xr.x,{}),r=(0,ot.g)(),s=(0,ad.l)(),o=(0,t.NC)(Ee.gQu),c=(0,gl._)((e=>"/"===e.pathname||"/home"===e.pathname));return(0,I.jsx)(wr.Zp,{label:i.Ru.get("view.web-player-home"),children:(0,I.jsx)(_r.H,{iconOnly:c?td:nd.H,className:Gt()(e,Bl,Zl,{[ql]:c}),"aria-label":i.Ru.get("view.web-player-home"),"":"home-button",onClick:()=>{const e=n.homeButtonFactory().hitUiNavigate({destination:"spotify:app:home"});a.logInteraction(e),o&&!c||s(un.z.CLOSED),r("/")}})})},id="Kgjmt7IX5samBYUpbkBu",sd="B9lb86gGqGGFcSZZ95bA",od="CCIGxtpAreSdwWRo14FE",cd="TTB3lAVAhCK9Apl8quWw",ld="N9r2VuXMBlhRSVF5dCek",dd=({children:e})=>(0,I.jsx)("div",{className:cd,children:e}),ud=()=>(0,I.jsx)("div",{className:id}),hd=({children:e})=>(0,I.jsx)("div",{className:ld,children:e}),pd=()=>(0,I.jsx)("div",{className:sd}),md=()=>(0,I.jsx)("div",{className:od});var fd=o(40638),gd=o(11907),bd=o(38526);function vd(e){var t,n,a,r,i,s=e.size?tl.$Z[e.size]:e.iconSize,o=(0,tl._C)([{size:16,svgContent:"<path d='M2 1.2a.7.7 0 0 1 .7-.7h10.6a.7.7 0 0 1 .7.7V4H2V1.2zM.987 6a.75.75 0 0 0-.734.906l1.81 8.5a.75.75 0 0 0 .733.594h10.38a.75.75 0 0 0 .734-.594l1.81-8.5A.75.75 0 0 0 14.987 6h-14zM8 13c-1.657 0-3-.895-3-2s1.343-2 3-2 3 .895 3 2-1.343 2-3 2z'/>"},{size:24,svgContent:"<path d='M4 2a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v4H4V2zM1.513 9.37A1 1 0 0 1 2.291 9H21.71a1 1 0 0 1 .978 1.208l-2.17 10.208A2 2 0 0 1 18.562 22H5.438a2 2 0 0 1-1.956-1.584l-2.17-10.208a1 1 0 0 1 .201-.837zM12 17.834c1.933 0 3.5-1.044 3.5-2.333 0-1.289-1.567-2.333-3.5-2.333S8.5 14.21 8.5 15.5c0 1.289 1.567 2.333 3.5 2.333z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(tl.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}function yd(e){var t,n,a,r,i,s=e.size?tl.$Z[e.size]:e.iconSize,o=(0,tl._C)([{size:16,svgContent:"<path d='M.404 6.278A.75.75 0 0 1 .987 6h14a.75.75 0 0 1 .733.906l-1.81 8.5a.75.75 0 0 1-.733.594H2.797a.75.75 0 0 1-.734-.594l-1.81-8.5a.75.75 0 0 1 .15-.628zM1.914 7.5l1.49 7h9.166l1.49-7H1.913z'/><path d='M9.987 11c0 .736-.896 1.333-2 1.333-1.105 0-2-.597-2-1.333s.895-1.333 2-1.333c1.104 0 2 .597 2 1.333zM2 1.25A.75.75 0 0 1 2.75.5h10.5a.75.75 0 0 1 .75.75V4h-1.5V2h-9v2H2V1.25z'/>"},{size:24,svgContent:"<path d='M15 15.5c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z'/><path d='M1.513 9.37A1 1 0 0 1 2.291 9h19.418a1 1 0 0 1 .979 1.208l-2.339 11a1 1 0 0 1-.978.792H4.63a1 1 0 0 1-.978-.792l-2.339-11a1 1 0 0 1 .201-.837zM3.525 11l1.913 9h13.123l1.913-9H3.525zM4 2a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v4h-2V3H6v3H4V2z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(tl.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var _d=o(63420);const Ed="music",xd="2.1.0",Ad="default",wd="12.2.0";function Sd(e){return new Id(e)}class Id{constructor(e){this._path=[{name:"desktop-search-input"}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[Ad,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[xd,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}keyStrokeChangeSearchQuery({searchQueryString:e}){return{actionParameterNames:["search_query_string"],actionParameterValues:[e.toString()],actionName:"change_search_query",actionVersion:1,app:Ed,generatorVersion:wd,interactionType:"key_stroke",specificationMode:Ad,specificationVersion:xd,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}keyStrokeSearch(){return{actionName:"search",actionVersion:1,app:Ed,generatorVersion:wd,interactionType:"key_stroke",specificationMode:Ad,specificationVersion:xd,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitTextClear(){return{actionName:"text_clear",actionVersion:1,app:Ed,generatorVersion:wd,interactionType:"hit",specificationMode:Ad,specificationVersion:xd,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}var Nd=o(27424),Cd=o(92930),Td=o(84528),jd=o(36948),Ld=o(23157),Rd=o(55852),kd=o(44715),Od=o(30024),Pd=o(69774),Dd=o(48276),Md=o(65906),Hd=o(49358),zd=o(70719),Vd=o(74659),Ud=o(69146);const Fd="qgxVpjYtxLSzXuRb1DLt",Bd="ka4wGy_b04LNCthHIH1N",qd="CPqBiLSmPraw0XkjjBp6",Wd="XFJcBNfnUfPHtwtYAkdx",Gd="ZiBMct2Zn84xzTkEly_p",Qd="V5kle5COkVEN5X6CkL7q",Kd="c4tFCPbYwVHGfqMSeDbS",$d="dSiGMhFfPa7d2yEwV3yE",Yd="S37aRGXzbqbG049CEylp",Zd="yc0gfCvIaGSEMoWUQCVA",Xd="A5mSopU8ZkrqFtMhrJae",Jd="recent-searches-item-",eu=(0,f.memo)((({entity:e,index:t,focusedElement:n,isPlaying:a,onClearItemClick:r,onClick:s,onPlayClick:o})=>{const c=(0,Ud._)(),l=(0,f.useRef)(null);(0,f.useEffect)((()=>{n&&l.current?.scrollIntoView({behavior:"auto",block:"nearest"})}),[n]);const d=e.type===er.c.ARTIST||e.type===er.c.USER||e.type===er.c.AUTHOR?ko.u.CIRCLE:ko.u.ROUNDED_CORNERS,u=(0,Vd.ji)(e),h=e.type!==er.c.USER&&e.type!==er.c.PRE_RELEASE_ALBUM&&e.type!==er.c.PRE_RELEASE_BOOK&&e.type!==er.c.AUTHOR,p=Boolean(n),m="play-button"===n&&h,g="remove-item-button"===n;return(0,I.jsx)(Od.v,{ref:l,hasFocus:p,variant:"naked",hoverAnimationDuration:"0ms",hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedHighlight",size:"sm",onClick:s,isRedundantOnClick:!0,role:"link",id:`${Jd}${t}`,className:Gt()(Wd,{[Qd]:p}),media:(0,I.jsxs)("div",{className:Gt()({[Fd]:h}),children:[(0,I.jsx)(ko.b,{className:Gd,fadeIn:!0,images:c(u??[],48),shape:d,size:Oo.Qe.SIZE_48,iconSize:"medium",type:e.type,title:e.name,loadingMode:"eager"}),h&&(0,I.jsx)("div",{className:Gt()(Bd,{[qd]:d===ko.u.CIRCLE,[Yd]:m}),children:(0,I.jsx)(_r.H,{hover:m,focus:m,iconOnly:a?Pd._:Dd.A,onClick:o,"aria-label":a?i.Ru.get("playlist.a11y.pause",e.name):i.Ru.get("playlist.a11y.play",e.name),size:"medium",tabIndex:-1})})]}),subtitle:(0,I.jsxs)(Md.j,{"line-clamp":1,className:Zd,children:[(0,Vd.bA)(e),(0,I.jsx)("span",{className:Xd,children:(0,Vd.$F)(e)})]}),title:(0,I.jsx)(zd.N,{to:e.uri,tabIndex:-1,children:(0,I.jsx)(Hd.d,{lineClamp:1,children:e.name})}),trailing:(0,I.jsx)(_r.H,{className:Gt()(Kd,{[$d]:g}),focus:g,"aria-label":i.Ru.get("remove"),iconOnly:as.M,size:"small",onClick:()=>r(e.uri),tabIndex:-1})},e.uri)}));var tu=o(48801);const nu="_b3hhmbWtOY8_1M1mM1H",au="j4xi27AJ3oy5qZ8CGhhQ",ru="dM_TEJo05MxBvrLzfNrW",iu="ODl7TwNawIfBwiZv1Czg",su="main-topBar-searchBar",ou="upGmCR5y3yDImbt6sHOl",cu="IYex0sXu8fnCz1FqFbRe",lu="xlLQHgpip3xYOwRYpwun",du="nBGzYhSIK1A7qANmTnpk",uu="GimJ6fo6WOYPyWNVpSr1",hu="YxfuYxT7HHkLxLlty5O0",pu="sxCQ4toOdQ6hMN2rU8Kn",mu="b7r2WRiu5f9Q99qmyreh",fu="M9l40ptEBXPm03dU3X1k",gu="EJttP30F1zYHeAw7ISHb",bu="R69APjfNV0o9tAbfrWZf",vu="MdMAXXFPalD99eigsBug",yu="BV0jjn_h5TtMMl8YKuZ0",_u="recent-searches-dropdown",Eu=(0,f.memo)((({inputRef:e,setSelectedRecentSearchItemId:t})=>{const{searchHistory:n,clearSearchHistory:a}=(0,tu.k)(),{mainLandmarkRef:r}=(0,tn.JT)(),s=(0,f.useRef)(null),o=(0,ot.g)(),[c,l]=(0,f.useState)(!1),{spec:d,logger:u}=(0,xi.r)(Ld.a,{data:{uri:"spotify:app:recent-searches"}}),h=(0,f.useCallback)((e=>{const t=d.recentSearchesItemFactory({uri:e}).removeRecentSearchesItemButtonFactory().hitRemoveRecentSearchesItem();u.logInteraction(t),a(e)}),[a,d,u]),{isPlaying:p,currentlyPlayingContextUri:m}=(0,ur.o)((e=>({isPlaying:(0,Dc.uW)(e)===Pc.i.PLAYING,currentlyPlayingContextUri:e?.context.uri??null})),hr.a),g=(0,k.z)(),b=(0,f.useCallback)((e=>{const t=(0,J.o_h)(e.uri);if(null!==t){const n=d.recentSearchesItemFactory({uri:e.uri}).hitUiNavigate({destination:e.uri});u.logInteraction(n),o(t.toURLPath(!0)),requestAnimationFrame((()=>{r.current&&r.current.focus()}))}}),[u,r,o,d]),v=(0,f.useCallback)((e=>{const t=(0,J.o_h)(e);if(!(0,Vd.MB)(t?.type))return;const n=d.recentSearchesItemFactory({uri:e}),a=n.pauseRecentSearchesItemButtonFactory().hitPause({itemToBePaused:e}),r=n.playRecentSearchesItemButtonFactory().hitPlay({itemToBePlayed:e});p&&m===e?(g.pause({featureIdentifier:"search"}),u.logInteraction(a)):p||m!==e?(g.play({uri:e},{featureIdentifier:"search",referrerIdentifier:"search"}),u.logInteraction(r)):(g.resume({featureIdentifier:"search"}),u.logInteraction(r))}),[g,p,m,d,u]),[y,_]=(0,f.useState)(-1),[E,x]=(0,f.useState)("entire-item");return(0,f.useEffect)((()=>{-1===y&&s.current?.scrollIntoView()}),[y]),(0,f.useEffect)((()=>{const r=e.current,i=e=>{if(!(r?.value&&r?.value.length>0))switch(e.key){case"ArrowUp":(e=>{e.preventDefault();const n=Math.max(y-1,0);_(n),t(`${Jd}${n}`),x("entire-item")})(e);break;case"ArrowDown":(e=>{e.preventDefault();const a=Math.min(y+1,n.length-1);_(a),t(`${Jd}${a}`),x("entire-item")})(e);break;case"ArrowLeft":(e=>{e.preventDefault(),"entire-item"===E?x("play-button"):"remove-item-button"===E&&x("entire-item")})(e);break;case"ArrowRight":(e=>{e.preventDefault(),"entire-item"===E?x("remove-item-button"):"play-button"===E&&x("entire-item")})(e);break;case"Enter":(e=>{e.preventDefault();const t=n[y];t&&(e.shiftKey&&"entire-item"===E?v(t.uri):"entire-item"===E?b(t):"play-button"===E?v(t.uri):"remove-item-button"===E&&a(t.uri))})(e)}};r?.addEventListener("keydown",i);const s=()=>{_(-1),t(void 0)};return r?.addEventListener("focus",s),()=>{r?.removeEventListener("keydown",i),r?.removeEventListener("focus",s)}}),[a,e,b,n,n.length,y,E,t,v]),0===n.length?null:(0,I.jsxs)("div",{className:du,id:_u,role:"listbox",children:[(0,I.jsxs)(kd.a,{className:uu,children:[(0,I.jsx)(Pr.E,{as:"p",ref:s,variant:"bodyMediumBold",semanticColor:"textBase",className:hu,children:i.Ru.get("search.title.recent-searches")}),(0,I.jsx)(Td.b,{condensedAll:!0,role:"listbox",children:n.map(((e,t)=>(0,I.jsx)(eu,{focusedElement:y===t?E:void 0,entity:e,index:t,isPlaying:p&&m===e.uri,onClick:()=>b(e),onPlayClick:()=>v(e.uri),onClearItemClick:h},e.uri)))}),(0,I.jsx)(jd.n,{onClick:()=>{l(!0)},size:"small",className:pu,children:i.Ru.get("search.clear-recent-searches")})]}),(0,I.jsx)(Rd.T,{onClose:()=>{l(!1)},isOpen:c,onConfirm:()=>{(()=>{const e=d.clearButtonFactory().hitClearRecentSearches();u.logInteraction(e),a()})(),l(!1)},"aria-label":i.Ru.get("search.clear-recent-searches-dialog.title"),titleText:i.Ru.get("search.clear-recent-searches-dialog.title"),descriptionText:i.Ru.get("search.clear-recent-searches-dialog.description"),confirmText:i.Ru.get("search.clear-recent-searches-dialog.confirm-button"),cancelText:i.Ru.get("search.clear-recent-searches-dialog.cancel-button")})]})}));var xu=o(53288),Au=o(11024),wu=o(68371);const Su=(0,f.memo)((function({onFocus:e,onLeadingIconClick:t,inputRef:n}){const a=(0,ae.zy)(),r="/search"===a.pathname,s=(0,ot.g)(),{setIsGlobalNavDraggable:o}=(0,f.useContext)(vr),c=(0,f.useRef)(null),l=n||c,d=(0,f.useRef)(null),h=(0,_n.SF)(),{mainLandmarkRef:p}=(0,tn.JT)(),m=(0,u.wA)(),[{category:g,query:b},v]=(0,xu.o)(),y=(0,f.useCallback)((()=>l.current?.value||""),[l]),_=(0,f.useCallback)((e=>{l.current&&(l.current.value=e)}),[l]),[E,x]=(0,f.useState)(void 0),{spec:A}=(0,es.D)(xr.x,{}),{spec:w,logger:S}=(0,xi.r)(Sd,{}),[N,C]=(()=>{const[e,t]=(0,f.useState)(!1);return[e,e=>{"compositionstart"===e.type&&t(!0),"compositionend"===e.type&&t(!1)}]})(),T=(0,fd.YQ)((e=>{const t=w.keyStrokeChangeSearchQuery({searchQueryString:e}),{interactionId:n}=S.logInteraction(t);v(e,g,!b,n),h.current&&(h.current.scrollTop=0)}),200,{trailing:!0}),j=(0,f.useCallback)(((e=!1)=>{l.current!==document.activeElement&&(d.current=document.activeElement,l.current&&l.current.focus()),e&&l.current?.select()}),[l]);(0,wu.x)(Au.W.SHOW_SEARCH,(()=>j(!0))),(({location:e,searchQuery:t,setValue:n,isEnabled:a})=>{const r=(0,f.useRef)(e.key),i=e.key;(0,f.useEffect)((()=>{r.current!==i&&a&&(n(t),r.current=i)}),[i,t,n,a])})({location:a,searchQuery:b,setValue:_,isEnabled:!T.isPending()});const L=()=>{l.current&&l.current.focus();const e=w.hitTextClear();e&&S.logInteraction(e),o?.(!1),_("")},R=e=>{e.preventDefault();const t=y();t&&S.logInteraction(w.keyStrokeSearch());const n=(0,J.o_h)(t,{parseUnknown:!0});if(n?.type===J.NQG.AD){const e=(0,J.cEw)(n.id);if(n.id===e)return;m((0,Nd.gt)(n.id))}else n?(T.cancel(),s(`${n.toURLPath(!0)}${(e=>{try{return new URL(e).search}catch(e){return""}})(t)}`,{state:{preventMoveFocus:!0,redirectToHome:(0,J.crr)(n)}})):t?T(t):s("/search",{state:{preventMoveFocus:!0}});t&&p.current&&p.current.focus()},k=(0,In.Nf)();(0,f.useEffect)((()=>{const e=l.current,t=(0,mn.p)(pn.r.OPEN_SEARCH_MODAL);return e&&rn()(e).bind(t,(()=>{k({type:"OPEN"})})),()=>{rn()(e).unbind(t)}}),[l,k]);const O=i.Ru.get("search.search-for-label");return(0,I.jsx)("div",{className:nu,children:(0,I.jsx)(gd.E,{as:"form",onSubmit:R,role:"search",className:mu,onClick:t,iconLeading:(0,I.jsx)(wr.Zp,{label:i.Ru.get("navbar.search"),children:(0,I.jsxs)("div",{children:[(0,I.jsx)(_r.H,{className:gu,condensed:!0,iconOnly:bd.C,"aria-label":i.Ru.get("navbar.search"),onClick:t}),(0,I.jsx)(bd.C,{"":"search-icon",className:fu,"aria-hidden":!0,size:"xlarge"})]})}),iconTrailing:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(wr.Zp,{label:i.Ru.get("search.a11y.clear-input"),children:(0,I.jsx)(_r.H,{condensedAll:!0,className:vu,"":"clear-button",iconOnly:as.M,"aria-label":i.Ru.get("search.a11y.clear-input"),onClick:L})}),(0,I.jsx)(wr.Zp,{label:i.Ru.get("browse"),children:(0,I.jsx)("div",{className:yu,children:(0,I.jsx)(_r.H,{condensedAll:!0,"":"browse-button",iconOnly:r?vd:yd,"aria-label":i.Ru.get("browse"),onClick:e=>{const t=A.browseButtonFactory().hitUiNavigate({destination:"spotify:app:search"});S.logInteraction(t),e.preventDefault(),e.stopPropagation(),s("/search",{state:{fromBrowse:!0}})},className:r?au:""})})})]}),children:(0,I.jsxs)("div",{className:iu,children:[(0,I.jsx)(_d.Z,{role:"combobox","aria-owns":_u,"aria-controls":_u,"aria-expanded":!0,"aria-activedescendant":E,"":"search-input","aria-label":O,"data-top-bar-search":!0,className:Gt()(su,bu),type:"search",spellCheck:!1,placeholder:O,ref:l,onKeyDown:e=>{const t=y();if("Escape"===e.key&&(e.stopPropagation(),t&&L()),"Enter"===e.key&&""!==t){if(N)return;R(e)}},onFocus:()=>{const t=y();o?.(""!==t),e?.()},onBlur:()=>o?.(!0),onChange:e=>{if(!e.currentTarget)return;const t=e.currentTarget.value;o?.(""!==t),T(t)},onCompositionStart:C,onCompositionEnd:C}),(0,I.jsxs)("div",{className:Gt()(ru),"aria-hidden":"true",children:[(0,I.jsx)("span",{className:ou,children:O}),(0,I.jsx)("span",{className:cu,children:(0,mn.p)(pn.r.OPEN_SEARCH_MODAL).at(0)?.split("+").map((e=>(0,I.jsx)(Pr.E,{as:"kbd",variant:"bodyMedium",className:lu,children:(0,Cd.O)(e)},e)))})]}),(0,I.jsx)(Eu,{inputRef:l,setSelectedRecentSearchItemId:x})]})})})}));var Iu=o(28331);var Nu=o(23164);const Cu=e=>{if(!e.current)return!1;return e.current.offsetWidth>400},Tu=e=>!!e.current&&(e.current===document.activeElement||""!==e.current.value),ju=(e,t)=>!!e.current&&(e.current.offsetLeft<=t&&t<=e.current.offsetLeft+e.current.offsetWidth),Lu=({topBarRef:e,className:n})=>{const a=(0,Iu.c)(),r=(0,ge.mv)().operatingSystem===Nu.f.Windows,{isGlobalNavDraggable:i}=(0,f.useContext)(vr),s=(0,t.NC)(Ee.s_6,{loadingValue:Ee.G2o.NONE})===Ee.G2o.GLOBAL_NAV,[o,c]=(0,f.useState)(!1),[l,d]=(0,f.useState)(!1),[u,h]=(0,f.useState)(!1),p=(0,f.useRef)(null),m=(0,f.useRef)(null),g=(0,f.useRef)(null),b=(0,f.useRef)(null),v=(0,f.useRef)(null),y=(0,fa.h)(),_=(0,f.useRef)(!1);(0,f.useEffect)((()=>{m.current&&(m.current.tabIndex=l&&!u?-1:0)}),[l,u]);const E=(0,f.useCallback)((({width:t})=>{t&&(v?.current&&t!==v.current&&(_.current=t>v.current),v.current=t),((e,t,n,a,r,i)=>{if(!n.current||!t.current||!e.current)return;const s=n.current,o=Math.max(350,Math.min(i?604:546,.5*s.offsetWidth)),c=ju(e,s.offsetWidth/2-o/2)||ju(e,s.offsetWidth/2+o/2)||ju(t,s.offsetWidth/2-o/2)||ju(t,s.offsetWidth/2+o/2);a!==c&&r(c)})(g,b,e,o,c,s),((e,t,n,a)=>{e.current&&(Cu(e)&&!0===t&&n?a(!1):Cu(e)||!1!==t||n||a(!0))})(p,_.current,l,d),((e,t,n)=>{e.current&&Tu(e)&&(t||n(!0))})(m,u,h)}),[u,s,e,l,o]);var x,A,w;(0,Wi.w)({refOrElement:e,onResize:E}),x=b,A=()=>{e.current&&E({width:null})},w={subtree:!0,childList:!0},(0,f.useEffect)((()=>{if(x.current){const e=new MutationObserver(A);return e.observe(x.current,w),()=>e.disconnect()}return()=>{}}),[x,A,w]);const S=(0,f.useCallback)((e=>{e?.preventDefault(),e?.stopPropagation(),Tu(m)||h(!u);(!l||l&&!u)&&m.current?.focus()}),[u,l]);return(0,I.jsxs)("div",{className:Gt()(Fl,n,Xl,{[Zl]:!i,[Yl]:o||l,searchInputCollapsed:l,forceExpandSearchInput:u,[Jl]:y}),ref:e,id:"global-nav-bar","":"global-nav-bar",children:[(0,I.jsx)("div",{className:Gl,ref:g,children:a?(0,I.jsx)(gr.N_,{to:"/",className:Ql,children:(0,I.jsx)(br.G,{height:32,condensed:!0})}):(0,I.jsxs)(dd,{children:[r?(0,I.jsx)(pd,{}):(0,I.jsx)(ud,{}),(0,I.jsx)(Tl,{className:Zl})]})}),(0,I.jsx)("div",{className:Kl,children:(0,I.jsxs)("div",{className:$l,ref:p,children:[(0,I.jsx)(rd,{className:Wl}),(0,I.jsx)(Su,{inputRef:m,onLeadingIconClick:S,onFocus:()=>h(!0)}),s&&(0,I.jsx)(ed,{containerRef:e,contentRightRef:b,isSearchInputCollapsed:l,forceExpandSearchInput:u})]})}),(0,I.jsxs)(hd,{children:[(0,I.jsx)(Sl,{className:Zl,ref:b}),r&&!a?(0,I.jsx)(md,{}):(0,I.jsx)(I.Fragment,{})]})]})},Ru=e=>{const{applicationMode:t}=ta();return t.mode!==Jn.Default?null:(0,I.jsx)(Lu,{...e})};var ku=o(40767);const Ou=({elementRef:e})=>{const{item:t}=(0,ur.o)((e=>({item:e?.item})),((e,t)=>e.item?.uri===t.item?.uri)),{spec:n,logger:a}=(0,vn.$)(ku.t,{data:{uri:t?.uri??""}}),{min:r,max:s,size:o,setSize:c}=$n(),l=(0,f.useMemo)((()=>[[r,s]]),[r,s]),d=(0,zn.XB)(),u=(0,on.W)(),h=(0,f.useCallback)(((e,t)=>{e!==t&&a.logInteraction(n.npvUiResizeFactory().dragUiResize({startSizePx:e,endSizePx:t}))}),[a,n]);return d===Vn.Z.Disabled?null:(0,I.jsx)(dn,{elementRef:e,placement:"inline-start",label:i.Ru.get("resize.sidebar"),onResize:c,size:o,ranges:l,decreaseSizeKeyboardCombination:u?(0,mn.p)(pn.r.LEFT_SIDEBAR_DECREASE_WIDTH):(0,mn.p)(pn.r.NPV_SIDEBAR_DECREASE_WIDTH),increaseSizeKeyboardCombination:u?(0,mn.p)(pn.r.LEFT_SIDEBAR_INCREASE_WIDTH):(0,mn.p)(pn.r.NPV_SIDEBAR_INCREASE_WIDTH),afterResizing:h})},Pu=(0,f.createContext)(null);var Du=o(408),Mu=o(38823);const Hu=({children:e})=>{const[t,n]=(0,f.useState)(!1),[a,r]=(0,f.useState)(""),i=(0,f.useRef)(null),s=(0,Mu.O)(),o=(0,Du.C)(),c=(0,u.wA)(),d=(0,f.useCallback)((e=>{t?(o(a),r(""),n(!1),c((0,l.np)())):(e&&r(e),s.startActiveDiscovery(),n(!0),c((0,l.ae)()))}),[t,o,a,c,s]),h=(0,f.useMemo)((()=>({triggerRef:i,toggleDevicePicker:d,isPickerOpen:t})),[d,t]);return(0,I.jsx)(Pu.Provider,{value:h,children:e})};var zu=o(27272);const Vu=()=>((0,zu.q)(),null),Uu=()=>{const e=(0,L.S)().isOpen,{applicationMode:t}=ta();return e||t.mode===Jn.Tuna?null:(0,I.jsx)(Vu,{})},Fu=f.lazy((async()=>await Promise.all([o.e(4326),o.e(8757),o.e(3071),o.e(1206)]).then(o.bind(o,68396)).then((e=>({default:e.RootDialogs}))))),Bu=e=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Fu,{...e})}),qu=({children:e,debugLabel:t})=>(0,I.jsx)(Wn,{gridRow:"global-nav / now-playing-bar",gridColumn:"left-sidebar / right-sidebar",zIndex:"var(--above-everything-grid-area-z-index)",debugLabel:t,children:e});var Wu=o(73320);const Gu=()=>(0,I.jsx)("div",{id:Wu.K,style:{zIndex:"1"}}),Qu=()=>null,Ku=f.lazy((async()=>{const{NowPlayingBar:e}=await Promise.all([o.e(9462),o.e(7488),o.e(1461),o.e(2620),o.e(8725),o.e(8719),o.e(9416),o.e(2235),o.e(3322)]).then(o.bind(o,21636));return{default:e}})),$u=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Ku,{})});var Yu=o(81788);const Zu=f.lazy((async()=>{const{WatchFeedViewContainer:e}=await Promise.all([o.e(8832),o.e(2315),o.e(777)]).then(o.bind(o,85432));return{default:e}})),Xu=()=>{const{close:e}=(0,Yu.P)();return(0,I.jsx)(m.s,{onError:t=>{e({resumePlayback:!0}),(0,Nn.Jy)(t,"WatchFeedView")},children:(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Zu,{})})})},Ju=f.lazy((async()=>{const{SnackbarProvider:e}=await Promise.resolve().then(o.bind(o,57314));return{default:e}})),eh=e=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Ju,{...e})}),th=f.lazy((async()=>{const{FeedbackBar:e}=await o.e(8552).then(o.bind(o,21526));return{default:e}})),nh=e=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(th,{...e})}),ah=f.lazy((async()=>{const{PageErrorTemplate:e}=await o.e(352).then(o.bind(o,28502));return{default:e}})),rh=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(ah,{})}),ih=f.lazy((async()=>{const{TopBar:e}=await o.e(5094).then(o.bind(o,63116));return{default:e}})),sh=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(ih,{})}),oh=f.lazy((async()=>{const{Billboard:e}=await o.e(8588).then(o.bind(o,75994));return{default:e}})),ch=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(oh,{})}),lh=f.lazy((async()=>{const{LeaderboardComponent:e}=await o.e(9500).then(o.bind(o,76989));return{default:e}})),dh=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(lh,{})}),uh=f.lazy((async()=>{const{VideoPlayer:e}=await Promise.all([o.e(9462),o.e(2620),o.e(8725),o.e(7988)]).then(o.bind(o,71447));return{default:e}})),hh=e=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(uh,{...e})});var ph=o(98009);const mh=f.memo((()=>{const e=(0,ae.zy)(),t=(0,Tn.m)();return(0,f.useEffect)((()=>{t.notifyViewLoaded(e.pathname)}),[t,e.pathname]),null}));var fh=o(95816),gh=o(64607),bh=o(35041);const vh="music",yh="1.2.0",_h="default",Eh="16.1.6";function xh(e){return new Ah(e)}class Ah{constructor(e){this._path=[{name:"desktop-cinema-mode-npv"}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}peekButtonFactory(){return new Ah.PeekButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}toggleAudioVideoButtonFactory(e){return new Ah.ToggleAudioVideoButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}fullscreenButtonFactory(){return new Ah.FullscreenButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}subtitlesButtonFactory(){return new Ah.SubtitlesButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}closeButtonFactory(){return new Ah.CloseButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}switchVariantFactory(e){return new Ah.SwitchVariantEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}ambientModeFactory(){return new Ah.AmbientModeEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}contextTitleFactory(e){return new Ah.ContextTitleEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_h,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[yh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}impression(){return{app:vh,generatorVersion:Eh,specificationVersion:yh,specificationMode:_h,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}!function(e){e.PeekButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"peek_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_h,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[yh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:vh,generatorVersion:Eh,interactionType:"hit",specificationMode:_h,specificationVersion:yh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Ah||(Ah={})),function(e){class t{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"toggle_audio_video_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_h,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[yh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitPlay({itemToBePlayed:e}){return{actionParameterNames:["item_to_be_played"],actionParameterValues:[e.toString()],actionName:"play",actionVersion:1,app:vh,generatorVersion:Eh,interactionType:"hit",specificationMode:_h,specificationVersion:yh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}t.Identifier={SWITCH_TO_AUDIO:"switch_to_audio",SWITCH_TO_VIDEO:"switch_to_video"},e.ToggleAudioVideoButtonEventFactory=t}(Ah||(Ah={})),function(e){e.FullscreenButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"fullscreen_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_h,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[yh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:vh,generatorVersion:Eh,interactionType:"hit",specificationMode:_h,specificationVersion:yh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:vh,generatorVersion:Eh,interactionType:"hit",specificationMode:_h,specificationVersion:yh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Ah||(Ah={})),function(e){e.SubtitlesButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"subtitles_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_h,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[yh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:vh,generatorVersion:Eh,interactionType:"hit",specificationMode:_h,specificationVersion:yh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:vh,generatorVersion:Eh,interactionType:"hit",specificationMode:_h,specificationVersion:yh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Ah||(Ah={})),function(e){e.CloseButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"close_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_h,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[yh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:vh,generatorVersion:Eh,interactionType:"hit",specificationMode:_h,specificationVersion:yh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Ah||(Ah={})),function(e){class t{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"switch_variant"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_h,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[yh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:vh,generatorVersion:Eh,interactionType:"hit",specificationMode:_h,specificationVersion:yh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}t.Identifier={ARTWORK:"artwork",CANVAS:"canvas",HERO:"hero",VIDEO:"video"},e.SwitchVariantEventFactory=t}(Ah||(Ah={})),function(e){e.AmbientModeEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"ambient_mode"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_h,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[yh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}autoUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:vh,generatorVersion:Eh,interactionType:"auto",specificationMode:_h,specificationVersion:yh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}autoUiHide(){return{actionName:"ui_hide",actionVersion:1,app:vh,generatorVersion:Eh,interactionType:"auto",specificationMode:_h,specificationVersion:yh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Ah||(Ah={})),function(e){e.ContextTitleEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"context_title"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_h,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[yh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:vh,generatorVersion:Eh,interactionType:"hit",specificationMode:_h,specificationVersion:yh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Ah||(Ah={}));const wh=()=>{const{spec:e,logger:t}=(0,xi.r)(xh,{}),n=(0,f.useCallback)(((n,a="")=>{t.logInteraction(e.toggleAudioVideoButtonFactory({identifier:n}).hitPlay({itemToBePlayed:a}))}),[t,e]),a=(0,f.useCallback)((n=>{t.logInteraction(e.fullscreenButtonFactory()[n?"hitUiReveal":"hitUiHide"]())}),[t,e]),r=(0,f.useCallback)((n=>{t.logInteraction(e.subtitlesButtonFactory()[n?"hitUiReveal":"hitUiHide"]())}),[t,e]),i=(0,f.useCallback)((()=>{t.logInteraction(e.peekButtonFactory().hitUiReveal())}),[t,e]),s=(0,f.useCallback)((()=>{t.logInteraction(e.closeButtonFactory().hitUiHide())}),[t,e]),o=(0,f.useCallback)((n=>{t.logInteraction(e.switchVariantFactory({identifier:n}).hitUiReveal())}),[t,e]),c=(0,f.useCallback)((n=>{t.logInteraction(e.ambientModeFactory()[n?"autoUiReveal":"autoUiHide"]())}),[t,e]),l=(0,f.useCallback)((n=>{t.logInteraction(e.contextTitleFactory({uri:n}).hitUiNavigate({destination:n}))}),[t,e]);return(0,f.useMemo)((()=>({logAudioVideoToggleClick:n,logFullscreenButtonClick:a,logSubtitlesButtonClick:r,logShowNPVButtonClick:i,logCloseButtonClick:s,logSwitchVariantClick:o,logContextTitleClick:l,logAmbientModeTransition:c})),[c,n,s,l,a,i,r,o])};var Sh=o(28346);const Ih=(e,t)=>{t?document.documentElement.setAttribute(e,t):document.documentElement.removeAttribute(e)},Nh=(e,t)=>{for(const n of e)Ih(`data-transition-type-${n}`,t)};function Ch({transitionKey:e,transition:t,types:n=[],onTransitionFinished:a,onTransitionFinishedRejection:r}){if(!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&"startViewTransition"in document){Ih("data-transition",e),Nh(n,"before-snapshot");document.startViewTransition((()=>{(0,Ta.flushSync)((()=>{Nh(n,"after-snapshot"),t()}))})).finished.finally((()=>{Ih("data-transition",null),Nh(n,null)})).then(a,r)}else t(),a?.()}var Th=o(55910),jh=o(36801);var Lh=o(84040),Rh=o(70491);const kh="QgD5n5t4yCMPYSrZ9Ecl",Oh="KoFMRthETtDdYW3pCObX",Ph="kl0_TyO1NHFm45Umh87i",Dh="UnqxYX3t2DLqLrnAP4Jy";function Mh({children:e}){const{leftSidebarRef:n,mainContentRef:a,rightSidebarRef:r}=(0,tn.JT)(),i=(0,gl._)((e=>e.state?.cinemaState??Sh.z.CLOSED)),s=(0,ot.g)(),o=(0,gl.M)(),[c,l]=(0,f.useState)(Sh.z.CLOSED),d=(0,f.useRef)(c),[u,h]=(0,Lh.x)("cinema-media-preference","artwork"),p=(0,f.useRef)(null),[m,g]=(0,f.useState)(!1),{logAmbientModeTransition:b}=wh(),v=(0,Li.N)(jh.Z),y=Zn(),_=(0,f.useRef)(y);(0,f.useLayoutEffect)((()=>{_.current=y}),[y]);const{setVideoPlayerUIFlag:E}=(0,Th.d)(),x=(0,f.useRef)(!1),A=(0,t.NC)(Ee.gQu),w=(0,f.useCallback)((e=>{if(x.current!==e){e&&v.setWindowButtonsVisibility(!1),g(e),b(e);const t=null!==document.fullscreenElement;e||t||v.setWindowButtonsVisibility(!0)}x.current=e}),[b,v]),S=(0,f.useCallback)((e=>{if(e===c)return;const t=document.getElementById("global-nav-bar");t?.classList.add(Dh),n.current?.classList.add(Ph),n.current?.removeAttribute("inert"),r.current?.removeAttribute("inert"),a.current?.removeAttribute("inert");const{property:i,value:s}=_.current;n.current?.style.setProperty(i,`${s}`),a.current?.style.setProperty(i,`${s}`);const o=()=>{e===Sh.z.NOW_PLAYING_VIEW?(n.current?.setAttribute("inert",""),a.current?.setAttribute("inert","")):e===Sh.z.LIBRARY&&a.current?.setAttribute("inert",""),t?.classList.remove(Dh),n.current?.classList.remove(Ph);null!==document.fullscreenElement||v.setWindowButtonsVisibility(!0),d.current=e},u=function(e,t){if(e===Sh.z.NOW_PLAYING_VIEW&&t===Sh.z.LIBRARY||e===Sh.z.LIBRARY&&t===Sh.z.NOW_PLAYING_VIEW)return"cinema-library-npv";switch(e===Sh.z.CLOSED?t:e){case Sh.z.LIBRARY:return"cinema-library";case Sh.z.NOW_PLAYING_VIEW:default:return"cinema-npv"}}(e,d.current);let h=[];e===Sh.z.NOW_PLAYING_VIEW?h=["open"]:e===Sh.z.CLOSED&&(h=["close"]),Ch({transitionKey:u,types:h,transition:()=>{switch(e){case Sh.z.NOW_PLAYING_VIEW:a.current?.classList.toggle(kh,!0);break;case Sh.z.CLOSED:r.current?.classList.toggle(Oh,!1),a.current?.classList.toggle(kh,!1),a.current?.classList.toggle(Oh,!1),E(H.nP.cinema,!1),g(!1)}l(e)},onTransitionFinished:o,onTransitionFinishedRejection:o})}),[c,n,a,v,r,E]),N=(0,f.useCallback)((e=>{if(A||S(e),i===e)return;const t=o();s({...t,search:"?viewMode=1"}),s(t,{state:{cinemaState:e},replace:!0})}),[S,o,A,i,s]);(0,f.useEffect)((()=>{if(!A)return;(0,Rh.g)(Sh.z)(i)&&i!==c&&S(i)}),[i,S,c,A]);const C=(0,f.useCallback)((e=>{A?N(e):S(e)}),[S,A,N]),T=(0,f.useCallback)((e=>{e!==u&&(p.current=u,h(e))}),[u,h]),j=(0,f.useMemo)((()=>({currentVariant:u,previousVariant:p.current})),[u]);return(0,I.jsx)(gh.y.Provider,{value:C,children:(0,I.jsx)(gh.s.Provider,{value:c,children:(0,I.jsx)(fh.y.Provider,{value:w,children:(0,I.jsx)(fh.g.Provider,{value:m,children:(0,I.jsx)(bh.N.Provider,{value:T,children:(0,I.jsx)(bh.P.Provider,{value:j,children:e})})})})})})}var Hh=o(96535),zh=o(24818);const Vh="UP5xr3mJlsVHSQSt3MNi",Uh="UGUzQdLr0FOyK2iF4N99",Fh="f29Q3Tbod66t9VOxx__5",Bh="zd0ix0IBIqFTP6B95VIN",qh="UlZinSHPFkvRP0oFWGRZ",Wh="DJcMUKFwkFECf5ksmSfU",Gh="ENxGKtCpYhxr2iXP7IXH",Qh="EofCPtVE6SQxRFEovVtX";function Kh({children:e}){const t=(0,ur.o)((e=>e?.item?.uri)),n={appear:Qh,appearActive:Gh,appearDone:Wh,enter:qh,enterActive:Bh,enterDone:Fh,exit:Uh,exitActive:Vh},a=f.createRef();return(0,I.jsx)("div",{children:(0,I.jsx)(zh.A,{mode:"out-in",children:(0,I.jsx)(Vr.A,{classNames:n,nodeRef:a,appear:!0,addEndListener:e=>{a.current?.addEventListener("transitionend",e,!1)},children:(0,I.jsx)("div",{ref:a,children:e})},t)})})}var $h=o(41205);const Yh="nDASs8PnkRghxOlOdT4q",Zh="ZPBvrYZDkJvwrRfK_r5i",Xh="vYn7fv3RB7DSzS3yofOR";function Jh(){return(0,I.jsxs)("div",{className:Yh,children:[(0,I.jsx)("div",{className:Zh}),(0,I.jsx)("div",{className:Xh})]})}const ep="vcM9TMyqu0KxTFltxnJw";function tp({children:e,className:t}){return(0,I.jsx)("div",{className:Gt()(ep,t),children:e})}const np="H9xGogGpXHZx7IssSDnI",ap=({children:e})=>(0,I.jsx)(tp,{className:np,children:e});function rp({children:e}){const t=(0,f.useRef)(null),n=(0,f.useRef)(null);return(0,Wi.w)({refOrElement:n,onResize:({height:e})=>{0===e?t.current?.style.setProperty("position","absolute"):(t.current?.style.removeProperty("position"),t.current?.style.setProperty("grid-row-end",`span ${e+16}`))},observeOnly:"height"}),(0,I.jsx)("div",{ref:t,children:(0,I.jsx)("div",{ref:n,children:e})})}var ip=o(64947),sp=o(29025),op=o(30386),cp=o(6233),lp=o(52479),dp=o(50151),up=o(95202),hp=o(61728),pp=o(32360),mp=o(81469),fp=o(9676),gp=o(45395),bp=o(57115),vp=o(79945),yp=o(38701);const _p=({item:e})=>{const n={uri:e.uri,numberOfChapters:lp.Kp},{data:a,isLoading:r,error:i}=(0,mp.X)({queryKey:["queryNpvEpisode",n],staleTime:lp.Ff,gcTime:lp.CD,variables:n}),s=(0,vp.d)(),o=(0,t.NC)(Ee.xEc),c=(0,yp.d)(e.uri)?.episodeOrChapter,l=(0,fp.SB)(a?.episodeUnionV2),d=(0,fp.lz)(a?.episodeUnionV2);if(!e.uri||!l||r||i)return null;const u=c&&c.type===er.c.EPISODE&&c.transcript&&c.transcript.length>0;return(0,I.jsxs)(ap,{children:[s&&(0,I.jsx)(rp,{children:(0,I.jsx)(bp.TopCommentsCard,{uri:l.uri})}),(0,I.jsx)(rp,{children:(0,I.jsx)(op.N,{episode:l})}),!l.originalEpisode&&(0,I.jsx)(rp,{children:(0,I.jsx)(ip.c,{episode:l})}),(0,I.jsx)(rp,{children:(0,I.jsx)(dp.F,{episode:l})}),(0,I.jsx)(rp,{children:(0,I.jsx)(sp.I,{episode:l})}),o&&d&&(0,I.jsx)(rp,{children:(0,I.jsx)(up.m,{coverArt:d.coverArt||void 0,description:d.htmlDescription||"",name:d.name,publisher:d.publisher?.name,uri:d.uri})}),u&&(0,I.jsx)(rp,{children:(0,I.jsx)(gp.n,{episode:e})}),(0,I.jsx)(rp,{children:(0,I.jsx)(cp.A,{sectionGap:16})}),(0,I.jsx)(rp,{children:(0,I.jsx)(hp.T,{headerVariant:"bodyMediumBold",children:(0,I.jsx)(pp.K,{topics:d?.topics.items??[],logTopicNavigation:()=>{}})})})]})},Ep=({item:e})=>(0,ii.n)()?(0,I.jsx)(_p,{item:e}):(0,I.jsx)(I.Fragment,{});var xp=o(74734),Ap=o(10658),wp=o(72365),Sp=o(10751),Ip=o(26552);var Np=o(67380);const Cp="pFdYR3vuy4sSAW9Al1PK",Tp=({item:e,variant:n})=>{const a=(0,t.NC)(Ee.LX5),{loading:r,error:i,data:s}=(0,Np.i)(e);if(!e.uri||!(e=>"Artist"===e?.__typename)(s?.artistUnion)||!(e=>"Track"===e?.__typename)(s?.trackUnion)||r||i)return null;const{profile:o,stats:c,visuals:l,profile:{externalLinks:d}}=s.artistUnion,{credits:u,relatedVideos:h}=s.trackUnion,p=a&&(e=>"RelatedVideoPage"===e?.__typename)(h)&&h.totalCount>0,m=s.artistUnion.goods.concerts.totalCount>0,f=s.trackUnion.merch.totalCount>0;return(0,I.jsxs)(I.Fragment,{children:[p&&(0,I.jsx)("div",{className:Cp,style:{"--section-background-base":"transparent","--section-padding":0},children:(0,I.jsx)(Ip.a,{data:s,item:e,withRelatedVideosHeadingShadow:"video"===n,withRelatedVideosHeadingSpacingBottom:!0,fullBleedGap:48,carouselCardWidth:292})}),(0,I.jsxs)(ap,{children:[(0,I.jsx)(rp,{children:(0,I.jsx)(xp.F,{artistUri:s.artistUnion.uri,artist:o,stats:c,visuals:l,externalLinks:d.items,preferFullBleed:!0})}),u&&(0,I.jsx)(rp,{children:(0,I.jsx)(Ap.V,{data:u,trackUri:e.uri})}),m&&(0,I.jsx)(rp,{children:(0,I.jsx)(Sp.I,{artistId:s.artistUnion.id,data:s.artistUnion.goods.concerts})}),f&&(0,I.jsx)(rp,{children:(0,I.jsx)(wp.J,{artistId:s.artistUnion.id,artistUri:s.artistUnion.uri,merch:s.trackUnion.merch.items})}),(0,I.jsx)(rp,{children:(0,I.jsx)(cp.A,{sectionGap:16})})]})]})},jp=(0,f.createContext)({masonryItemRefs:{},addMasonryItemRef:()=>{},removeMasonryItemRef:()=>{}}),Lp=({children:e})=>{const[t,n]=(0,f.useState)({}),a=(0,f.useCallback)(((e,t)=>{t&&n((n=>({...n,[e]:t})))}),[]),r=(0,f.useCallback)((e=>{n((t=>{const{[e]:n,...a}=t;return a}))}),[]),i=(0,f.useMemo)((()=>({masonryItemRefs:t,addMasonryItemRef:a,removeMasonryItemRef:r})),[t,a,r]);return(0,I.jsx)(jp.Provider,{value:i,children:e})},Rp="XEQXyBqaaficCzDJ5AKf",kp="eIcGlWiPFlMFzz6B2c8s",Op="PSfSqBJX7klfij762bUE",Pp={cssStyles:{"--section-background-base":"var(--background-elevated-base)","--section-padding":$h.spacer24,"--section-border-radius":$h.spacer16},headerVariant:"titleSmall"};function Dp({item:e,variant:t}){const{cssStyles:n}=(0,hp.Y)(),a=(0,fa.h)();let r=null;return(0,F.v)(e)&&!e.isLocal?r=(0,I.jsx)(Tp,{item:e,variant:t}):(0,P.p)(e)&&(r=(0,I.jsx)(Ep,{item:e})),r?(0,I.jsxs)("div",{className:Gt()(Rp,{[Op]:a}),style:n,children:[(0,I.jsx)(Jh,{}),(0,I.jsx)("div",{className:kp,children:r})]}):null}function Mp({item:e,variant:n}){return(0,t.NC)(Ee.k8v)?(0,I.jsx)(Lp,{children:(0,I.jsx)(hp.T,{...Pp,children:(0,I.jsx)(Dp,{item:e,variant:n})})}):null}var Hp=o(22529);const zp=({title:e,link:t,onClick:n,className:a})=>e?t?(0,I.jsx)(gr.N_,{to:t,onClick:n,children:(0,I.jsx)(Vp,{title:e,className:a})}):(0,I.jsx)(Vp,{title:e,className:a}):null;function Vp({className:e,title:t}){return(0,I.jsx)(Pr.E,{variant:"bodyMediumBold",className:e,semanticColor:"textBase",children:t})}var Up=o(24220),Fp=o(79610),Bp=o(58803);function qp({item:e}){const n=(0,t.NC)(Ee.lDj);return(0,I.jsxs)("div",{className:Bp.A.adHeader,children:[(0,I.jsx)(Fp.A,{item:e,variant:"bodyMediumBold",semanticColor:"textBase",surface:"CINEMA_MODE"}),n&&(0,I.jsx)(Up.U,{item:e})]})}var Wp=o(31190),Gp=o(35834);const Qp="jGjBLNxG_YEiLQ03xZ92",Kp=({children:e,keyboardShortcut:t})=>(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{children:e}),(0,I.jsx)(Pr.E,{variant:"marginal",as:"kbd",className:Qp,children:t})]});var $p=o(79065),Yp=o(63850),Zp=o(13232),Xp=o(93018),Jp=o(31592),em=o(29728);const tm="_puuZ57esN_9Y2SCNbwo",nm="oANNzxABv28l2I8YF5pg",am="JVkIVMehzaPb8PLfQP6s",rm="AKCWrvmtzq3kz_PI9CNe",im="ML1_jx7SW0xHtTBfw1tZ",sm="hlDzKEohazBhJodv4mhe",om="QGXc_hHBwRUrhNYouZGq",cm="xdja48XruI6VfcoS9tui",lm="BVAIl9qXiMPGdPlcsIUS",dm="YAAoKkR7K4K9j_dfXQn_",um="Xk12RsFFZaxRGx3omay8",hm="htN0luSrJSq50lNucspA",pm="GtsjxQjzWHlFnDKgZlA7";function mm(e){return(0,F.v)(e)||(0,B.v)(e)||(0,P.p)(e)||(0,O.d)(e)?e.name:(0,U.N)(e)?"":(0,q.d)(e)}const fm=({item:e,context:t,UBICallbacks:n})=>{const{logFullscreenButtonClick:a,logCloseButtonClick:r}=n,s=(0,ad.l)(),o=(0,$p.h)(),{isInFullScreen:c,isFullScreenSupported:l,toggleFullScreen:d}=(0,Jp.H)({refOrElement:document.body,shouldWakeLockScreen:!0}),u=(0,ur.o)((e=>(0,U.N)(e?.item??void 0))),h=(0,f.useRef)(null);(0,em.i)({ref:h,preventScroll:!0});const p=(0,f.useCallback)((()=>{a(!c),d()}),[c,a,d]);return(0,I.jsxs)("div",{className:hm,children:[!u&&(0,I.jsx)(os.b,{menu:(0,I.jsx)(Xp.W,{context:t,item:e}),children:(0,I.jsx)(Gp.e,{className:dm,size:"small",condensed:!1,label:i.Ru.get("more.label.context",e?mm(e):"")})}),l&&!u&&(0,I.jsx)(wr.Zp,{label:c?(0,I.jsx)(Kp,{keyboardShortcut:"Esc",children:i.Ru.get("web-player.cinema-mode.fullscreen.exit")}):i.Ru.get("web-player.cinema-mode.fullscreen.enter"),children:(0,I.jsx)(_r.H,{className:dm,iconOnly:c?Yp.z:Zp.T,size:"small",onClick:p,"aria-label":c?i.Ru.get("web-player.cinema-mode.fullscreen.exit"):i.Ru.get("web-player.cinema-mode.fullscreen.enter")})}),!c&&(0,I.jsx)(wr.Zp,{label:(0,I.jsx)(Kp,{keyboardShortcut:"Esc",children:i.Ru.get("web-player.cinema-mode.minimize")}),children:(0,I.jsx)(_r.H,{ref:h,className:Gt()(dm,{[im]:o&&u}),iconOnly:Wp.b,size:"small",onClick:()=>{r(),(0,rl.I)("NPV_OPEN_CINEMA_MODE_BUTTON"),s(Sh.z.CLOSED)},"aria-label":i.Ru.get("web-player.cinema-mode.minimize")})})]})};function gm(e){var t,n,a,r,i,s=e.size?tl.$Z[e.size]:e.iconSize,o=(0,tl._C)([{size:16,svgContent:"<path d='M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z'/><path d='M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0Zm3 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z'/>"},{size:24,svgContent:"<path d='M12 10a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z'/><path d='M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12Zm8.159-2.816A3.987 3.987 0 0 0 8 12a3.987 3.987 0 0 0 1.184 2.841A3.987 3.987 0 0 0 12 16a3.987 3.987 0 0 0 2.816-1.159l.012-.013.013-.012A3.987 3.987 0 0 0 16 12a3.987 3.987 0 0 0-1.184-2.841A3.987 3.987 0 0 0 12 8a3.987 3.987 0 0 0-2.841 1.184Z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(tl.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var bm=o(10697),vm=o(17981),ym=o(51899);function _m(e){var t,n,a,r,i,s=e.size?tl.$Z[e.size]:e.iconSize,o=(0,tl._C)([{size:16,svgContent:"<path d='M0 16v-.672a3.999 3.999 0 0 1 2-3.463l3.112-1.8a1.2 1.2 0 0 0 .322-1.807l-.487-.585a5.367 5.367 0 0 1-1.353-3.175 5.3 5.3 0 0 1 .2-1.776c.172-.525.453-1.01.823-1.42a4.016 4.016 0 0 1 5.92 0c.37.41.65.895.823 1.42a5.3 5.3 0 0 1 .2 1.776 5.367 5.367 0 0 1-1.353 3.175l-.487.585A1.2 1.2 0 0 0 9.6 9.62l-.008.007A5.486 5.486 0 0 0 8.607 16H0zm14.72-9.029a.75.75 0 0 1 1.28.53v6a2.499 2.499 0 1 1-2.5-2.5h1V7.5a.75.75 0 0 1 .22-.53z'/>"},{size:24,svgContent:"<path d='M14.3 14.28a5.968 5.968 0 0 0 .237 7.717H1v-1.6a4 4 0 0 1 2-3.465l4.8-2.763a1.5 1.5 0 0 0 .4-2.26l-.7-.835a7.046 7.046 0 0 1-1.775-4.17 6.906 6.906 0 0 1 .264-2.33 5.211 5.211 0 0 1 1.08-1.865 5.27 5.27 0 0 1 7.77 0c.486.54.854 1.175 1.08 1.865.22.756.308 1.544.263 2.33a7.047 7.047 0 0 1-1.775 4.17l-.7.835a1.498 1.498 0 0 0 .4 2.26l.193.111zm5.993-4.686a1 1 0 0 1 1.707.707v7.666a3 3 0 1 1-3-3h1v-4.666a1 1 0 0 1 .293-.707z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(tl.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var Em=o(29603),xm=o(10843),Am=o(68300);const wm=({item:e,variant:t,hasHeroImage:n,hasCanvas:a,UBICallbacks:r,setPreferredVariant:s})=>{const{logSwitchVariantClick:o,logSubtitlesButtonClick:c}=r,l=(0,f.useCallback)((e=>{const t=e.currentTarget.value;s(t),o(t)}),[s,o]),d=(0,F.v)(e),u="video"===t,{isSupported:h,availableLanguages:p}=(0,Am.K)(),m=h&&0!==p.length,g="video"===t&&m;return u?null:(0,I.jsxs)("div",{role:"radiogroup","aria-label":i.Ru.get("web-player.cinema-mode.fullscreen.media-control-options"),className:hm,children:[d&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(wr.Zp,{label:i.Ru.get("web-player.cinema-mode.artwork-mode"),children:(0,I.jsx)(_r.H,{role:"radio",value:"artwork","aria-checked":"artwork"===t,className:Gt()(dm,{[um]:"artwork"===t}),iconOnly:"artwork"===t?gm:bm.I,size:"small","aria-label":i.Ru.get("web-player.cinema-mode.artwork-mode"),onClick:l})}),(0,I.jsx)(wr.Zp,{label:i.Ru.get("web-player.cinema-mode.canvas-mode"),children:(0,I.jsx)(_r.H,{role:"radio",value:"canvas","aria-checked":"canvas"===t,className:Gt()(dm,{[um]:"canvas"===t}),iconOnly:"canvas"===t?vm.C:ym.d,size:"small","aria-label":i.Ru.get("web-player.cinema-mode.canvas-mode"),onClick:l,disabled:!a})}),(0,I.jsx)(wr.Zp,{label:i.Ru.get("web-player.cinema-mode.hero-mode"),children:(0,I.jsx)(_r.H,{role:"radio",value:"hero","aria-checked":"hero"===t,className:Gt()(dm,{[um]:"hero"===t}),iconOnly:"hero"===t?_m:Em.r,size:"small","aria-label":i.Ru.get("web-player.cinema-mode.hero-mode"),onClick:l,disabled:!n})})]}),g&&(0,I.jsx)(xm.C,{iconSize:"small",renderInline:!0,noBackground:!0,className:Gt()("encore-over-media-set",pm),onToggle:c})]})},Sm=(e,t=!0)=>{(0,f.useEffect)((()=>{e&&t&&(e=>{(new Image).src=e})(e)}),[e,t])};var Im=o(36237);const Nm=e=>{const{data:t}=(0,Np.i)(e),n={artist:null,track:null};return"Artist"===t?.artistUnion.__typename&&(n.artist=t.artistUnion),"Track"===t?.trackUnion.__typename&&(n.track=t.trackUnion),n};function Cm(e){const t=e?.headerImage?.data;if("ImageV2"===t?.__typename)return(0,Im.g)(t.sources.map(Im.R))}var Tm=o(59018);const jm=e=>{const t=(0,f.useRef)(!1),{uri:n,isSongVideo:a}=(0,Tm.k)();return e===n&&(t.current=a),t.current};var Lm=o(87915),Rm=o(69083),km=o(55793);const Om="800",Pm="cinema-mode-container-animation",Dm="cinema-mode-container-animation-reverse",Mm="M8he015HRnzLwz3JDRfC",Hm="gIKzFuG_3N1rV0eFUi2h",zm="rYBVq3cPQnPx3qkqOL05",Vm="x9dJ3u2hhW9QgMGfdXtA",Um="IsRjGOZx7PxUfbBZO8RA",Fm=({context:e,item:n,variant:a,ambientMode:r,setPreferredVariant:i,className:s})=>{const{title:o,link:c}=(0,Rm.g)(n,e),l=(0,t.NC)(Ee.mZP),{artist:d,track:u}=Nm(n),h=Xn(),p=(0,Hp.H)(e.uri),m=wh(),g=(0,F.v)(n),b=u?.canvas,v=l&&!!b?.fileId,y=!!(0,f.useMemo)((()=>Cm(d)),[d]),{isAdPlaying:_,isPlayingVideoAd:E}=(0,ur.o)((e=>{const t=e?.item??void 0,n=(0,U.N)(t);return{isAdPlaying:n,isPlayingVideoAd:(0,Dc.A3)(e)&&n}}),hr.a),{logContextTitleClick:x,logAudioVideoToggleClick:A}=m,w=jm(n.uri),S=(0,km.w)({contrast:"highContrast"}),N="artwork"===a||"canvas"===a?{"--header-text-color":S?.["--text-subdued"],"--header-buttons-hover-bg":"var(--background-tinted-base)",...S}:{"--header-text-color":S?.["--text-base"],"--header-buttons-hover-bg":"var(--background-base)"};return(0,I.jsx)(I.Fragment,{children:!E&&(0,I.jsx)(Hh.h,{menu:(0,I.jsx)(Xp.W,{context:e,item:n}),children:(0,I.jsxs)("div",{className:Gt()(tm,zm,s,{[am]:"hero"===a||"video"===a,[nm]:r&&!_,[Vm]:r}),style:{...h,...N},children:[(0,I.jsx)(Hh.h,{menu:p,children:(0,I.jsx)("div",{className:om,children:(0,U.N)(n)?(0,I.jsx)(qp,{item:n}):(0,I.jsx)(zp,{title:o,link:c,onClick:()=>{x(e.uri)}})})}),(0,I.jsxs)("div",{className:sm,children:[(0,I.jsx)(wm,{variant:a,setPreferredVariant:i,item:n,hasHeroImage:y,hasCanvas:v,UBICallbacks:m}),g&&!w&&(0,I.jsx)("div",{className:cm,children:(0,I.jsx)("div",{className:rm})}),w&&(0,I.jsx)(Lm.L,{className:lm,onClick:A}),(0,I.jsx)(fm,{item:n,context:e,UBICallbacks:m})]})]})})})};var Bm=o(95079);const qm="GapdiNsdBIazVbcdXmNP";function Wm({children:e}){const t=(0,ur.o)((e=>e?.item?.uri)),n=parseInt(Om,10),a=(()=>{const{currentContextUri:e,currentItemUri:t,nextItemUri:n,previousItemUri:a}=(0,ur.o)((e=>({currentContextUri:e?.context.uri,currentItemUri:e?.item?.uri,nextItemUri:e?.nextItems.at(0)?.uri,previousItemUri:e?.previousItems.at(0)?.uri})),((e,t)=>e.currentContextUri===t.currentContextUri&&e.currentItemUri===t.currentItemUri&&e.nextItemUri===t.nextItemUri&&e.previousItemUri===t.previousItemUri)),r=(0,f.useRef)(e),i=(0,f.useRef)(n),s=(0,f.useRef)(a),o=(0,f.useMemo)((()=>{if(t){if(t===i.current)return"next";if(t===s.current)return"previous"}}),[t]);if(t&&e&&e===r.current)return i.current=n,s.current=a,r.current=e,o})();let r;return"next"===a?r=Pm:"previous"===a&&(r=Dm),t?(0,I.jsx)(Bm.A,{childFactory:e=>(0,f.cloneElement)(e,{classNames:r,timeout:n}),component:null,children:(()=>{const a=f.createRef();return(0,I.jsx)(Vr.A,{in:!0,appear:!1,timeout:n,classNames:r,nodeRef:a,children:(0,I.jsx)("div",{className:qm,ref:a,children:e})},t)})()}):(0,I.jsx)(I.Fragment,{children:e})}var Gm=o(60583),Qm=o(14862),Km=o(64861);const $m="a7Ka5yznvrbSDPk1G36o",Ym="vfrdRkOiUHFQZ8YxDEyK",Zm="JVoVebPNAPKBLKSlIBXw",Xm="fdPgA4PPp3NyCe5sMQzv",Jm="NLugTTXj517p1xOAgsur",ef="pd3cZQBgtgOFLAp9ns7Q",tf=({ambientMode:e,mediaVariant:n,children:a,style:r,onContextMenu:i})=>{const s=(0,t.NC)(Ee.k8v),o=(0,km.w)({contrast:"highContrast"}),c=(0,km.w)({contrast:"higherContrast"});let l={"--cinema-mode-bg-color-from":o?.["--background-base"],"--cinema-mode-bg-color-to":c?.["--background-base"],...r};return"artwork"!==n&&"canvas"!==n||(l={...l,...o}),(0,I.jsxs)("div",{className:Gt()($m,{[ef]:e,[Jm]:"video"===n,[Xm]:"hero"===n,[Zm]:s,"encore-over-media-set":"video"===n||"hero"===n}),style:l,onContextMenu:i,children:[(0,I.jsx)("div",{className:Ym}),a]})},nf=({imageUrl:e,...t})=>{const{data:n}=(0,Km.g)(e?[e]:[]);return(0,I.jsx)(Qm.d,{dynamicColors:n,children:(0,I.jsx)(tf,{...t})})};var af=o(23457);const rf="xT6oSRia2sXC94ckOTnF",sf="xTq_kta5CuULVPQZSRUN",of=({canvas:e,onError:t})=>{const[n,a]=(0,f.useState)(!0);return(0,I.jsx)(af.Gg,{fileId:e.fileId,canvasUrl:e.url,canvasType:e.type,canvasUri:e.uri,playerContainerClass:rf,playbackType:af.RT.LoopOnPlayback,allowAspectRatioFix:!0,onLoaded:()=>a(!1),onError:t,children:n&&(0,I.jsx)("div",{className:sf})})},cf="WRGTOibB8qNEkgPNtMxq",lf="DMm03qTsAQRiHan4x2_X",df="fOA8mVyHaHw2T808ZLpL",uf="evwKdhFvMDEaa9_x_PmY",hf="BlefThKb7viY6qEBS_vT",pf="dFz3mTMCEntyqsdPM0FF",mf="Fcj8mAN1eZK2tUKIgSB3",ff="pHKCWYLEfXteboHZwjIH",gf="CNxUJDLHdeb0t0Mckrca",bf="kflPy_mvGLyJR3mkh04x",vf="ELSmDYJtrr7_ktB1jf97",yf=f.memo((({variant:e})=>"hero"!==e?null:(0,I.jsx)("div",{className:Gt()(df,Hm)})));var _f=o(35580);var Ef=o(45605),xf=o(96431);const Af="gbmk2WQ9l8znVQyvUFBY",wf="Gi_KZDd1DK3BeebKNKI2",Sf=f.memo((()=>{const e=(()=>{const e=(0,ga.l)(),{videoPlayerMode:t}=(0,Th.d)();return!!(0,_f.L)()&&(t===H.Kz.documentPip||t===H.Kz.pip?"pip":!!e&&"connect")})(),t=f.useMemo((()=>{switch(e){case"pip":return(0,I.jsx)(Ef.k,{});case"connect":return(0,I.jsx)(xf.V,{});case!1:return null;default:return(0,q.k)(e),null}}),[e]);return t?(0,I.jsx)("div",{className:wf,children:t}):null})),If=f.memo((({variant:e})=>{const t="video"===e;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{hidden:!t,id:"VideoPlayerCinema_ReactPortal",className:Af}),t&&(0,I.jsx)(Sf,{})]})}));var Nf=o(75612),Cf=o(13927),Tf=o(5334),jf=o(79922),Lf=o(28719),Rf=o(47731);var kf=o(75859);const Of="xlarge",Pf=f.memo((({context:e,item:n,variant:a,ambientMode:r,onContextMenu:i,setPreferredVariant:s})=>{const o=(0,t.NC)(Ee.mZP),{setVideoPlayerUIFlag:c}=(0,Th.d)(),l=jm(n.uri),d=(0,rr.bJ)(e,n),u=Xn(),h=(0,_n.SF)(),p=(0,Ja.h)(n.images??void 0,{desiredSize:640,desiredLabel:Of});(0,f.useLayoutEffect)((()=>{c(H.nP.cinema,!0)}),[c]),(0,kf.M)({desiredSize:640,desiredLabel:Of}),(e=>{const t=(0,ur.o)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri)),n=(0,f.useMemo)((()=>(0,Ja.h)(t?.images??void 0,{desiredLabel:e?.desiredLabel,desiredSize:e?.desiredSize})),[t?.images,e?.desiredLabel,e?.desiredSize]);Sm(n)})({desiredSize:640,desiredLabel:Of}),(0,f.useEffect)((()=>{h.current&&(h.current.scrollTop=0)}),[n.uri,h]);const{artist:m,track:g}=Nm(n);(({prefetchHeroImage:e})=>{const t=(0,ur.o)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri)),{artist:n}=Nm(t),a=Cm(n);Sm(a?.url,e)})({prefetchHeroImage:"hero"===a});const b=(0,hn.S)();(()=>{const e=(0,k.z)(),t=(0,f.useRef)(!1),n=(0,f.useCallback)((n=>{t.current?t.current=!1:e[n](15e3)}),[e]),a=(0,f.useCallback)(((n,a)=>{n.repeat&&(e[a](5e3),t.current=!0)}),[e]),r=(0,f.useCallback)((()=>{n("seekForward")}),[n]),i=(0,f.useCallback)((()=>{n("seekBackward")}),[n]),s=(0,fd.dh)((e=>{a(e,"seekForward")}),100),o=(0,fd.dh)((e=>{a(e,"seekBackward")}),100);(0,zu.N)(["right"],r,{eventType:"keyup"}),(0,zu.N)(["right"],s,{allowRepeat:!0}),(0,zu.N)(["left"],i,{eventType:"keyup"}),(0,zu.N)(["left"],o,{allowRepeat:!0})})();const v=g?.canvas,y=o&&!!v?.fileId,_=(0,f.useMemo)((()=>Cm(m)),[m]),E={};"hero"===a&&!!_&&(E["--cinema-mode-bg-image"]=`url(${_.url})`);const{isAdPlaying:x,isPlayingVideoAd:A}=(0,ur.o)((e=>{const t=e?.item??void 0,n=(0,U.N)(t);return{isAdPlaying:n,isPlayingVideoAd:(0,Dc.A3)(e)&&n}}),hr.a),w=b===Sh.z.NOW_PLAYING_VIEW&&x&&!A,S=(0,U.N)(n),N=S?n.url??void 0:void 0,C=(0,f.useCallback)((()=>{S&&(window.location.href=N??"")}),[N,S]),T=(0,f.useCallback)((()=>{s("artwork")}),[s]),{images:j,isSecondary:L}=(0,Rf.u)(n);return(0,I.jsx)("div",{className:Gt()(cf,{[ff]:r}),children:(0,I.jsxs)(nf,{ambientMode:r,mediaVariant:a,imageUrl:p,style:E,onContextMenu:i,children:[(0,I.jsx)(yf,{variant:a}),"lyrics"===a&&(0,I.jsx)(Cf.A,{format:"cinema",item:n}),"artwork"===a&&(d?(0,I.jsx)("div",{className:Gt()(hf,Mm),children:(0,I.jsx)(Lf.aU,{})}):(0,I.jsx)(Gm.N,{className:Gt()(hf,pf,Mm,{[mf]:S}),placeholderClassName:uf,imgSrc:p,loading:"eager",onClick:C})),y&&"canvas"===a&&(0,I.jsx)(of,{canvas:v,onError:T}),(0,I.jsx)(If,{variant:a}),r&&!["video","lyrics"].includes(a)&&!x&&(0,I.jsx)("div",{className:Gt()(gf,Um),style:u,children:(0,I.jsxs)("div",{className:bf,children:[("hero"===a||"canvas"===a||L)&&(0,I.jsx)(Tf.b,{className:vf,desiredLabel:"small",size:92,images:j,type:n.type}),(0,I.jsx)(jf.d,{context:e,item:n,enableVideoButton:l,titleTypeVariant:"titleSmall",subtitleTypeVariant:"bodyMedium",subtitleSignifier:!0})]})}),w&&S&&(0,I.jsx)(Nf.h,{item:n,className:lf})]})})})),Df=e=>(0,I.jsx)(Pf,{...e});var Mf=o(73544);const Hf="YMsGXPVKmUe0oQtcmynz",zf="bJpCYqcWl8OpWl0MZ2aq",Vf="cxJRf5Rtrz506OnriHVw",Uf="t1zLmOYnTuqrLT7AR9d6",Ff="tdYP_Qnbyd45t0Kaxet1",Bf=({children:e,scrollNodeRef:t,variant:n})=>{const a=(0,f.useMemo)((()=>({scrollNodeRef:t})),[t]);return(0,f.useEffect)((()=>{"lyrics"!==n&&t.current?.scrollTo({top:0})}),[n,t]),(0,I.jsx)(_n.bi.Provider,{value:a,children:(0,I.jsx)(kd.a,{className:zf,scrollNodeRef:t,children:e})})};var qf=o(12875),Wf=o(45232),Gf=o(40751),Qf=o(10688);const Kf=(e,t,n,a)=>!!n||(!t||(!!(e=>{if(null===e)return!1;const t=document.elementFromPoint(e.x,e.y),n=t?.closest(Wf.nu);return n instanceof HTMLElement&&"false"!==n.dataset.preventsAmbientMode})(e)||(null!==document.activeElement?.closest(Wf.oj)||(!!document.querySelector("#context-menu")||(!!(()=>{const e=document.querySelectorAll(`[aria-modal="true"]:not([hidden]):not([aria-label="${i.Ru.get("ad-formats.advertisement")}"])`);if(0===e.length)return!1;for(const t of e){if(!("checkVisibility"in t)||"function"!=typeof t.checkVisibility)return!1;if(t.checkVisibility())return!0}return!1})()||!!a))))),$f=()=>{const e=(()=>{const e=(0,f.useContext)(fh.y);if(!e)throw new Error("useAmbientDispatch must be used within a CinemaProvider");return e})(),n=(0,Gf.j)(),a=(0,f.useRef)(null),r=(0,t.NC)(Ee.ikI),i=(0,f.useRef)(null),{isPlaying:s}=(0,Qf.GK)(),o=(0,f.useRef)(!1),c=(0,_n.SF)(),l=(0,qf.y)(c),d=(0,f.useCallback)((()=>!Kf(i.current,s,o.current,l)),[s,l]),u=(0,f.useCallback)((()=>{e(!0)}),[e]),h=(0,f.useCallback)((()=>{const e=1e3*r;function t(t){a.current&&clearTimeout(a.current),a.current=setTimeout(t,e)}const n=()=>{t(d()?()=>{d()?u():n()}:n)};n()}),[r,u,d]),p=(0,f.useCallback)((()=>{e(!1),h()}),[h,e]),m=(0,fd.YQ)(p,100,{leading:!0,trailing:!1,maxWait:1e3*(r-1)});(0,V.p)(z.gd.ERROR,p),(0,f.useEffect)((()=>{if(!n)return()=>{};const e=e=>{i.current={x:e.clientX,y:e.clientY},m()},t=e=>{"Tab"===e.key&&m()};return document.addEventListener("pointermove",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("pointermove",e),document.removeEventListener("keydown",t),a.current&&clearTimeout(a.current)}}),[m,n,e]),(0,f.useEffect)((()=>{const e=()=>{o.current=!0},t=()=>{o.current=!1};return document.addEventListener("pointerdown",e),document.addEventListener("pointerup",t),()=>{document.removeEventListener("pointerdown",e),document.removeEventListener("pointerup",t)}}),[]),(0,f.useEffect)((()=>{const e=()=>{i.current=null};return document.addEventListener("pointerleave",e),()=>{document.removeEventListener("pointerleave",e)}}),[]),(0,f.useEffect)((()=>{l||n||!d()?p():u()}),[u,p,n,d,l])};var Yf=o(32049),Zf=o(12629);var Xf=o(6481),Jf=o(60743);const eg=f.memo((({nowPlayingState:e,variant:t,ambientMode:n,setPreferredVariant:a})=>{const{isPlayingVideo:r}=(0,ur.o)((e=>({isPlayingVideo:(0,Dc.A3)(e)})),hr.a);(0,Zf.w)(),(0,Yf.x)((()=>{(0,rl.I)("NPV_OPEN_CINEMA_MODE_BUTTON")}));const{spec:i}=(0,xi.r)(xh,{});$f();const s=(0,I.jsx)(Hh.h,{menu:(0,I.jsx)(Xp.W,{context:e.context,item:e.item}),children:(0,I.jsx)(Df,{context:e.context,item:e.item,ambientMode:n,variant:t,setPreferredVariant:a})});return(0,I.jsxs)(Ei.r,{spec:i,children:[(0,I.jsx)("div",{className:Gt()(Hf,{[Vf]:["hero","video"].includes(t)}),children:r?s:(0,I.jsx)(Wm,{children:s})}),(0,I.jsx)(Kh,{children:"lyrics"!==t&&(0,I.jsx)(Mp,{item:e.item,variant:t})})]})})),tg=()=>{const e=function(){const e=(0,ur.o)((e=>e),_f.F),t=(0,f.useRef)(e?.item);if(null===e)return null;e.item&&(t.current=e.item);const{context:n,index:a}=e;return null===t.current||void 0===t.current?null:{context:n,item:t.current,index:a}}(),t=(0,ad.l)(),n=(0,Jf.F)(),{currentVariant:a}=(0,Xf.r)(),r=function(e,t){const{isPlayingVideo:n}=(0,ur.o)((e=>({isPlayingVideo:(0,Dc.A3)(e)})),hr.a),{track:a,artist:r}=Nm(t),i=!!(0,f.useMemo)((()=>Cm(r)),[r]),s=!!a?.canvas,{hasLyrics:o}=(0,Mf.f)(t?.uri);return"lyrics"===e&&o?"lyrics":n?"video":"hero"===e&&i?"hero":"canvas"===e&&s?"canvas":"artwork"}(a,e?.item),i=(0,f.useRef)(null),s=(0,qf.y)(i),o=(0,$p.h)();(0,f.useEffect)((()=>{e||t(Sh.z.CLOSED)}),[e,t]);const{data:c}=(0,Km.g)(e?.item.images?.[0]?.url?[e.item.images[0].url]:[]);if(!e)return null;const l=s||"hero"===r||"video"===r;return(0,I.jsxs)(_n.ql.Provider,{value:"now_playing_panel",children:[(0,I.jsx)(Qm.d,{dynamicColors:c,children:(0,I.jsx)(Fm,{context:e.context,item:e.item,variant:r,ambientMode:o,setPreferredVariant:n,className:Gt()(Uf,{[Ff]:l})})}),(0,I.jsx)(Bf,{scrollNodeRef:i,variant:r,children:(0,I.jsx)(eg,{nowPlayingState:e,variant:r,ambientMode:o,setPreferredVariant:n})})]})};var ng=o(45213),ag=o(11349);var rg=o(57314);const ig="QdB2YtfEq0ks5O4QbtwX",sg="PZX553lOrpQetFlWCrWO",og="FWlHsHhD0hSw1ldIXnOF",cg="poe3QmyrczMfT4aZNIok",lg="FKsek3qI2lalTOUrGVqP",dg="_6dEq1ZVxeUsyP_cwJlgR",ug=()=>{const e=(0,ng.S)(),t=(()=>{const e=(0,ng.S)(),t=(0,ag.l)(),n=(0,zn.XB)(),a=(0,f.useRef)(n),[r,i]=(0,f.useState)(n!==Vn.Z.Disabled&&n!==Vn.Z.NowPlayingView);return(0,f.useEffect)((()=>{e===Sh.z.NOW_PLAYING_VIEW&&a.current!==n?Ch({transitionKey:"right-sidebar-open",transition:()=>{i(n!==Vn.Z.Disabled&&n!==Vn.Z.NowPlayingView)}}):i(n!==Vn.Z.Disabled&&n!==Vn.Z.NowPlayingView),a.current=n}),[n,e,t]),r})(),n=(0,$p.h)(),a=(0,u.d4)((e=>e.ui.fullscreenMode.isOpen)),r=ya(),i=(0,rg.B)();return null===e||e===Sh.z.CLOSED||e===Sh.z.LIBRARY?null:(0,I.jsx)("div",{className:Gt()(ig,{[sg]:t,[og]:n,[cg]:a,[lg]:r,[dg]:e===Sh.z.NOW_PLAYING_VIEW}),ref:i,children:e===Sh.z.NOW_PLAYING_VIEW&&(0,I.jsx)(tg,{})})},hg="UQRh5VQzvqcMfTje1JUe",pg="vZEejECt3WMlIXNA9fj2",mg="xY0iJHKcHDzoJjeBKSdO",fg="ioc3t503ae97t5CDdGbB",gg="qxrH_qn4r4_azzuyVxbj",bg="EwLgE5CNgEGirtNknjHp";function vg({className:e}){return(0,I.jsxs)("div",{className:Gt()(hg,e),children:[(0,I.jsx)("div",{className:pg}),(0,I.jsx)("div",{className:mg}),(0,I.jsx)("div",{className:bg}),(0,I.jsx)("div",{className:fg}),(0,I.jsx)("div",{className:gg})]})}var yg=o(28727);function _g({children:e,UBICallbacks:n}){const{isExpanded:a}={isExpanded:(0,zn.XB)()!==Vn.Z.Disabled},r=(0,t.NC)(Ee.ZDY),s=(0,f.useDeferredValue)(a),{logShowNPVButtonClick:o}=n,c=(0,zn._Y)(),d=(0,u.wA)(),h=(0,f.useCallback)((()=>{o(),c(Re.$S.NPV_BUTTON_CLICK),d((0,l.Ym)())}),[d,o,c]);return r?(0,I.jsx)("div",{className:Gt()(yg.A.peek,{[yg.A.expanded]:a,[yg.A.collapsed]:!a,[yg.A.deferredCollapsed]:!s}),children:(0,I.jsxs)("div",{className:yg.A.overlayWrapper,children:[(0,I.jsx)(vg,{className:yg.A.fauxMainViewEnd}),(0,I.jsx)("div",{className:yg.A.peekContent,"aria-hidden":!a,inert:a?void 0:"",children:e}),(0,I.jsx)("div",{className:yg.A.overlay,onClick:h,children:(0,I.jsx)(wr.Zp,{label:i.Ru.get("web-player.cinema-mode.peek.show.now-playing-view"),children:(0,I.jsx)(_r.H,{"aria-label":i.Ru.get("web-player.cinema-mode.peek.show.now-playing-view"),iconOnly:Il.g,size:"small",className:yg.A.overlayButton})})})]})}):(0,I.jsx)(I.Fragment,{children:e})}const Eg=f.lazy((async()=>{const{PanelSection:e}=await Promise.all([o.e(5499),o.e(2124),o.e(8832),o.e(5286),o.e(9416),o.e(319)]).then(o.bind(o,95404));return{default:e}})),xg=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Eg,{})});var Ag=o(12096);const wg="XOawmCGZcQx4cesyNfVO";function Sg({children:e}){const n=(0,Ag.X)(),{size:a}=(0,zn.Zf)();let r=a;return(0,t.NC)(Ee.ZDY)||n!==Vn.Z.Disabled||(r=0),(0,I.jsx)("div",{style:{width:`${r}px`},className:wg,children:e})}const Ig=()=>{const e=wh();return(0,I.jsx)(_g,{UBICallbacks:e,children:(0,I.jsx)(Sg,{children:(0,I.jsx)(xg,{})})})};var Ng=o(66884);const Cg="cKAAyrqpVEsxnhtvNHou",Tg="HRQp773shLo1JL0Df_og",jg="zQW9tqtrDIkVB6G8W3OO",Lg="n0OfVH5OdDa9YY7NXzN1",Rg=({item:e})=>{const t=(0,u.wA)(),n=(0,ad.l)(),a=(0,fa.h)(),{setVideoPlayerUIFlag:r}=(0,Th.d)(),s=(0,f.useCallback)((()=>{(0,rl.I)("NPV_OPEN_CINEMA_MODE_BUTTON"),n(un.z.CLOSED),t((0,Ng.Oc)()),r(H.nP.cinema,!1)}),[t,n,r]);return(0,I.jsxs)("div",{className:Cg,children:[(0,I.jsx)(qp,{item:e}),(0,I.jsx)("div",{className:Tg,children:(0,I.jsx)(_r.H,{className:Gt()(jg,{[Lg]:a}),iconOnly:Wp.b,size:"small",onClick:s,"aria-label":i.Ru.get("web-player.cinema-mode.minimize")})})]})},kg=()=>{const e=(0,hn.S)(),t=(0,fa.h)(),{isPlayingVideoAd:n,item:a}=(0,ur.o)((e=>{const t=e?.item??void 0;return{isPlayingVideoAd:(0,Dc.A3)(e)&&(0,U.N)(t),item:t}}),((e,t)=>e.isPlayingVideoAd===t.isPlayingVideoAd&&e.item?.uid===t.item?.uid)),r=e===un.z.NOW_PLAYING_VIEW&&n;let i="main-view",s="left-sidebar / main-view",o="var(--above-main-and-now-playing-view-grid-area-z-index)";return r&&(s="left-sidebar / right-sidebar"),t&&(i="global-nav / now-playing-bar",s="left-sidebar / right-sidebar",o="var(--above-everything-grid-area-z-index)"),(0,I.jsxs)(Wn,{gridRow:i,gridColumn:s,zIndex:o,debugLabel:r?"VTO cinema mode ad":"VTO modal ad",children:[r&&a&&(0,U.N)(a)?(0,I.jsx)(Rg,{item:a}):null,(0,I.jsx)("div",{className:"VTO__modal-slot"})]})};var Og=o(93821),Pg=o(93381),Dg=o(46058),Mg=o(83868),Hg=o(33441),zg=o(42980),Vg=o(43123),Ug=o(64567),Fg=o(73427);const Bg=()=>{const{id:e}=(0,ae.g)(),t=(0,u.wA)(),n=(0,Ug.M)(),a=(0,Hg.C)();return(0,f.useEffect)((()=>{if(!e)return;const r=Gg(n,a,e);r&&t(r)}),[t,e,n,a]),(0,I.jsx)(zg.$,{to:"/"})},qg=()=>{const e=(0,Ug.M)(),t=(0,Hg.C)(),n=(0,Mg.Y)(),a=(0,ae.zy)();return(0,f.useEffect)((()=>{if(t===Fg.lz.PREMIUM&&e===Fg._H.ENABLED){const e=(0,J.o_h)(a.pathname);n(e&&(0,J.p3P)(e)?e:void 0)}}),[n,t,a.pathname,e]),(0,I.jsx)(zg.$,{to:"/"})},Wg=()=>{const{openQueue:e}=(0,Pg.R)();return(0,f.useEffect)((()=>{e(Og.p.PARTICIPANT_LIST)}),[e]),(0,I.jsx)(zg.$,{to:"/"})};function Gg(e,t,n){return t===Fg.lz.NONE?(0,l.A9)(Vg.EL.ERROR):e===Fg._H.RESTRICTED?(0,l.A9)(Vg.EL.REDIRECT,n):e===Fg._H.ENABLED?(0,l.A9)(Vg.EL.JOIN,n):null}const Qg=new Map,Kg=(e,t=[])=>{(0,f.useEffect)((()=>(Qg.set(e,!0),()=>{Qg.delete(e)})),[...t,e])},$g=e=>Object.values(Dg.S).includes(e),Yg=()=>{const e=(0,u.wA)(),t=(0,Ug.M)(),n=(0,ot.g)(),a=(0,Hg.C)(),r=(0,Mg.Y)(),{openQueue:i}=(0,Pg.R)();return Kg((s=>{const o=(0,J.o_h)(s.pathname??""),c=o&&(0,J.crr)(o)&&!$g(s.pathname),l=o&&(0,J.p3P)(o);if($g(s.pathname))return i(Og.p.PARTICIPANT_LIST),!0;if(l)return r(o),!0;if(c){const r=Gg(t,a,o.id);return!!r&&(e(r),s.state?.redirectToHome&&n("/"),!0)}return!1}),[t,a]),null},Zg=()=>{const{openQueue:e}=(0,Pg.R)();return Kg((t=>"/queue"===t.pathname?(e(Og.p.QUEUE),!0):"/history"===t.pathname&&(e(Og.p.HISTORY),!0))),null};var Xg=o(82390);const Jg=()=>{const e=(0,ng.S)(),t=(0,ad.l)();return Kg((n=>"/launch-cinema-mode"===n.pathname&&(e!==Sh.z.NOW_PLAYING_VIEW&&t(Sh.z.NOW_PLAYING_VIEW),!0))),null};var eb=o(74955);class tb extends Ya.V{}const nb=({children:e})=>{const t=(0,f.useMemo)((()=>new tb),[]);return(0,I.jsx)(eb.m.Provider,{value:t,children:e})};var ab=o(68441),rb=o(15952),ib=o(9866),sb=o(14973);const ob=1248,cb=(0,Rh.g)(Vn.Z),lb=(0,Rh.g)(ib.ZS),db=()=>(function(){const{size:e,setSize:n,minWidth:a,maxWidth:r,leftSidebarCollapsedStateNavbarWidth:i,leftSidebarDefaultStateNavbarWidth:s,leftSidebarExpandedStateNavbarWidth:o}=(0,Kn.y)(),{leftSidebarState:c,setLeftSidebarState:l,canCollapse:d}=(0,ib.ae)(),u=(0,zn.XB)(),h=(0,zn._Y)(),{min:p,max:m,size:g,setSize:b}=$n(),v=(0,sb.H)(),y=(0,f.useRef)(null),_=(0,f.useRef)(null),E=(0,f.useRef)(null),x=(0,t.NC)(Ee.ZDY)?ab.j:0;(0,f.useLayoutEffect)((()=>{const t=v-e-3*Ca.KV-(u!==Vn.Z.Disabled?g+Ca.KV:x),f={leftSidebarWidth:e,leftSidebarMinWidth:a,leftSidebarMaxWidth:r,leftSidebarState:c,leftSidebarStateRestoreTarget:y.current,rightSidebarWidth:g,rightSidebarMinWidth:p,rightSidebarMaxWidth:m,rightSidebarPanel:u,rightSidebarPanelRestoreTarget:_.current,storedCollapsedLeftSidebarWidth:i,storedDefaultLeftSidebarWidth:s,storedExpandedLeftSidebarWidth:o,clientWidth:v,mainContentWidth:t,canCollapse:d},A=E.current;if((0,$.j)(f,A))return;const w=function(e,t){let{leftSidebarWidth:n=0,rightSidebarWidth:a=0}=t;const{mainContentWidth:r=0,leftSidebarMinWidth:i=0,leftSidebarMaxWidth:s=0,leftSidebarState:o,leftSidebarStateRestoreTarget:c,rightSidebarMinWidth:l=0,rightSidebarMaxWidth:d=0,rightSidebarPanel:u,rightSidebarPanelRestoreTarget:h,storedCollapsedLeftSidebarWidth:p=0,storedDefaultLeftSidebarWidth:m=0,storedExpandedLeftSidebarWidth:f=0,clientWidth:g=0,canCollapse:b=!0}=t,v={},y=u!==Vn.Z.Disabled,_=void 0!==e?.leftSidebarWidth&&n>e.leftSidebarWidth,E=void 0!==e?.rightSidebarWidth&&a>e.rightSidebarWidth,x=void 0===e?.clientWidth?0:g-e.clientWidth,A=x<0,w=g>0,S=r<Ca.ev?Ca.ev-r:0;let I=A?-1*x:0;r>ob?I=Math.max(0,I-(r-ob)):S&&(I=S);const N=o===ib.ZS.EXPANDED&&e?.leftSidebarState!==ib.ZS.EXPANDED,C=o===ib.ZS.DEFAULT&&e?.leftSidebarState!==ib.ZS.DEFAULT;let T=n-i;_&&(T=N?n-rb.Z.EXPANDED_MIN:C?n-rb.Z.DEFAULT_MIN:0);let j=E?0:a-l;const L=I<=T+j;if(r<Ca.ev&&!L)y&&(_||A&&(o===ib.ZS.COLLAPSED||!b))?(v.rightSidebarPanel=Vn.Z.Disabled,v.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,I-=a,j=0):(o===ib.ZS.EXPANDED&&r+(n-rb.Z.DEFAULT_MIN)>Ca.ev?(v.leftSidebarState=ib.ZS.DEFAULT,I-=n-m,T=m-rb.Z.DEFAULT_MIN):(v.leftSidebarState=ib.ZS.COLLAPSED,I-=n-p,T=0),v.leftSidebarStateRestoreTarget=t.leftSidebarState);else if(u===Vn.Z.Disabled&&h!==Vn.Z.Disabled&&cb(h)&&u!==e?.rightSidebarPanelRestoreTarget&&r-a-Ca.KV>=Ca.ev)v.rightSidebarPanel=h,v.rightSidebarPanelRestoreTarget=null;else if(o===ib.ZS.DEFAULT&&c===ib.ZS.EXPANDED&&r-(f-n)>=Ca.ev)v.leftSidebarState=ib.ZS.EXPANDED,v.leftSidebarStateRestoreTarget=null;else if(o===ib.ZS.COLLAPSED&&c===ib.ZS.DEFAULT&&r-(m-n)>=Ca.ev)v.leftSidebarState=ib.ZS.DEFAULT,v.leftSidebarStateRestoreTarget=null;else if(w&&r>=800){let e=s-n,t=d-a;const r=Math.min(x,e+t);for(let i=0;i<r;i++)n<a&&n<s&&e>0?(n++,e--):a<d&&t>0&&(a++,t--)}o!==e?.leftSidebarState&&lb(c)&&c===e?.leftSidebarStateRestoreTarget&&(v.leftSidebarStateRestoreTarget=null);u!==e?.rightSidebarPanel&&cb(h)&&h===e?.rightSidebarPanelRestoreTarget&&(v.rightSidebarPanelRestoreTarget=null);if(I>0&&I<=T+j)for(let e=0;e<I;e++)n>a&&n>i&&T>0?(n--,T--):a>l&&j>0&&(a--,j--);n&&n!==t.leftSidebarWidth&&(v.leftSidebarWidth=n);a&&a!==t.rightSidebarWidth&&(v.rightSidebarWidth=a);return v}(A,f);void 0!==w.leftSidebarWidth&&n(w.leftSidebarWidth),lb(w.leftSidebarState)&&l(w.leftSidebarState),void 0!==w.leftSidebarStateRestoreTarget&&(y.current=w.leftSidebarStateRestoreTarget),void 0!==w.rightSidebarWidth&&0!==A?.rightSidebarWidth&&b(w.rightSidebarWidth),void 0!==w.rightSidebarPanel&&h((0,Re.MQ)(w.rightSidebarPanel)),void 0!==w.rightSidebarPanelRestoreTarget&&(_.current=w.rightSidebarPanelRestoreTarget),E.current=f}),[e,a,r,n,g,p,m,b,u,i,s,o,l,h,v,d,x,c])}(),null);var ub=o(72763),hb=o(24552),pb=o(12264);const mb=()=>{const e=(0,ub.o)(hb.P.CountryHubs,(0,ae.zy)()),n=(()=>{const e=(0,Iu.c)(),n=(0,t.NC)(Ee.$AL);return!!e&&n===Ee.a8u.Enabled})(),a=(0,pb.w2)(window.navigator.userAgent);return(e||n)&&!a};var fb=o(76358),gb=o(76541),bb=o(5028);let vb=function(e){return e.InView="in_view",e.OutOfView="out_of_view",e}({});var yb=o(86995);let _b=new class{get(){return yb.t5}};let Eb=new class{get(){return yb.wi}};var xb=o(63347);const Ab=()=>{const[e,t]=(0,f.useState)(!1),{pathname:n}=location,a=(0,u.d4)(bb.JJ),r=(0,Fi.V)(),[s,o]=(0,f.useState)(null),c=i.Ru.getLocaleForURLPath(),l=(0,xb.p)({urlLocale:c,type:"locale"}),{ref:d,inView:h}=(0,lo.Wx)({threshold:.5}),p=_b.get(),m=Eb.get(),g=(()=>{const e=(0,ge.vh)(),t=(0,Iu.c)(),n=(0,Fi.V)(),a=(0,u.d4)(so.F6),r=(0,u.d4)(bb.JJ);return(0,f.useCallback)(((i,s)=>{const o={category:i,action:"footer_view",variant:"none",label:"dwp",os:(0,Es.f)(),context:s,sp_t:(0,Ht.v8)("sp_t"),country:a?r:"",timestamp:(new Date).toISOString()};t&&(n?e.send((0,gb.r)(o)):e.send((0,fb._)(o)))}),[t,n,e,r,a])})(),b=mb();(0,f.useEffect)((()=>{o((0,pb.w2)(window.navigator.userAgent))}),[]),(0,f.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),1100);return()=>{t(!1),clearTimeout(e)}}),[n]),(0,f.useEffect)((()=>{g(h?vb.InView:vb.OutOfView,n)}),[h,g,n]);const v={countryHub:!0,openUrlLocale:l?c:void 0};return e&&null!==s?(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(p,{language:i.Ru.getLocaleForSmartling(),market:a.toLowerCase(),excludePlanLinks:s,...b&&v,children:(0,I.jsx)("div",{ref:d,children:(0,I.jsx)(m,{hideWebPlayerLink:!0,hideLegalLinks:r})})})}):(0,I.jsx)(I.Fragment,{})};var wb=o(78086);const Sb=f.memo((()=>{const e=function(e,t){return e!==Nu.m.Desktop&&(e!==Nu.m.PWA&&(!t&&!(0,R.g)()))}((0,wb.My)(),(0,gl._)((e=>"/lyrics"===e.pathname)));return e?(0,I.jsx)("div",{className:"main-view-container__mh-footer-container",children:(0,I.jsx)(Ab,{})}):null}));var Ib=o(35183);const Nb={"-200":.694444418,"-150":.7607257962,"-100":.8333333135,"-50":.9128709435,0:1,50:1.095445156,100:1.200000048,150:1.314534187,200:1.440000057,250:1.577440977,300:1.728000045,350:1.892929196,400:2.073600054};var Cb=o(50709),Tb=o(12087);function jb(e){return{name:"AutoPlayOnLoad",environments:["browser"],data:e}}var Lb=o(32040);const Rb="auto_play_on_load_attempted";function kb(){const e=(0,t.NC)(Lb.mR),n=(0,ae.zy)(),a=(0,k.z)(),r=(0,f.useRef)(!1),[i,s]=(0,gr.ok)(),o=(0,ge.vh)();(0,V.p)(z.gd.READY,(async()=>{if(!e)return;if(r.current)return;const t=new URLSearchParams(n.search);if(t.has(Rb))return;const i=t.get("utm_medium"),c=t.has("autoplay");if(!("gemini"===i||c))return;const l=(0,J.o_h)(n.pathname);if(!l)return void console.error("Attempted autoplay but URI is not parsable");const d=l.toString();s((e=>(e.set(Rb,"1"),e))),r.current=!0;let u=null;function h(){u&&(o.send(u),u=null,a.getEvents().removeListener(z.gd.UPDATE,g),a.getEvents().removeListener(z.gd.ERROR,f))}setTimeout((()=>{h()}),2500);const p=()=>{u||(console.log("Autoplay maybe successful",l),u=jb({entity_uri:d,page_url:n.pathname+n.search,success:!0}))},m=e=>{console.log("Autoplay failed",l,e),u=jb({entity_uri:d,page_url:n.pathname+n.search,success:!1,error_message:e}),h()};function f(e){m(e?.data?.cause?.message??"Failure with unknown error message")}function g(e){e.data?.item?.uri!==d&&e.data?.context?.uri!==d||e.data?.isPaused||p()}a.getEvents().addListener(z.gd.UPDATE,g),a.getEvents().addListener(z.gd.ERROR,f),console.log("Triggering autoplay",l),a.play({uri:d},{featureIdentifier:"auto_play_on_load",referrerIdentifier:"auto_play_on_load"})}))}var Ob=o(6170);const Pb=()=>{const e=(0,Li.N)(Ob.L),t=e.getCapabilities(),n=t.canZoomIn&&t.canZoomOut;(0,f.useEffect)((()=>{if(!n)return()=>{};const t=t=>{if(t.ctrlKey){t.preventDefault();const n=t.deltaY;if(0===n)return;n>0?e.zoomOut():e.zoomIn()}},a=e=>{"Control"===e.key&&window.addEventListener("wheel",t,{passive:!1})};window.addEventListener("keydown",a);const r=e=>{"Control"===e.key&&window.removeEventListener("wheel",t)};return window.addEventListener("keyup",r),()=>{window.removeEventListener("wheel",t),window.removeEventListener("keydown",a),window.removeEventListener("keyup",r)}}),[e,n])},Db=f.memo((({isDeveloperMode:e,onBrowserNotSupported:n,onReachUsableState:a})=>((e=>{const t=(0,ot.g)();(0,f.useEffect)((()=>{const n=n=>{e&&(3===n.button?(t(-1),n.preventDefault()):4===n.button&&t(1))};return document.addEventListener("mouseup",n),()=>{document.removeEventListener("mouseup",n)}}),[e,t])})(!0),Ra(!e),(({onBrowserNotSupported:e,onReachUsableState:t})=>{(0,f.useEffect)((()=>{const n=or().getParser(window.navigator.userAgent);n.satisfies({chrome:"<62"})||n.satisfies({edge:"<16"})?e(i.Ru.get("browser_upgrade_notice",n.getBrowserName())):t("home")}),[e,t])})({onBrowserNotSupported:n,onReachUsableState:a}),function(){const e=(0,Sr.t)(),[{data:t}]=(0,Ir.K)(e.viewportZoom),n=(0,Tn.m)();(0,f.useEffect)((()=>{const e=Math.round(t??0).toString(),a=Ib.b*Nb[e];n.setTitlebarHeight(a)}),[t,n])}(),Pb(),(()=>{const e=(0,Tn.m)(),n=(0,t.NC)(Ee.QxH),a=(0,t.NC)(Ee.fzW),r=(0,t.NC)(Ee.v2);(0,f.useEffect)((()=>{e.setPLEPorts(n,a,r)}),[e,n,a,r])})(),(()=>{const e=(0,Tt.jE)();(0,Mc.L)((()=>{e.invalidateQueries({queryKey:["useAddToPlaylistListData"]})}))})(),function(){const e=(0,f.useRef)(!0),t=(0,yi.p)(),n=(0,Tt.jE)();(0,f.useEffect)((()=>{e.current?e.current=!1:function(e){e.invalidateQueries(),e.removeQueries({type:"inactive"})}(n)}),[t,n])}(),(()=>{const e=(0,Tt.jE)(),t=(0,Tb.R)();(0,f.useEffect)((()=>t.getEvents().addListener(Cb.S.AVAILABILITY_UPDATE,(()=>{e.invalidateQueries({queryKey:["use-shuffle"]})}))),[e,t])})(),kb(),null)));var Mb=o(73195);const Hb=e=>{const{accessTokenIsSet:t,onClose:n,onBrowserNotSupported:a,onReachUsableState:r,isVideoSupported:i,isDesktop:s,billboardMinimized:o,isDeveloperMode:c,adsEnabled:l,children:d}=e,h=(0,Tn.m)(),p=(0,f.useRef)(null),g=(0,f.useRef)(null),b=(0,f.useRef)(null),v=(0,f.useRef)(null),y=(0,f.useRef)(null),_=(0,f.useRef)(null),E=(0,f.useRef)(null),x=(0,f.useRef)(null),A=(0,f.useRef)(null),w=(0,f.useRef)(null),S=(0,f.useRef)(null),N=(0,f.useRef)(null),C=(0,f.useRef)(null),T=dr(),j=(0,Sr.t)(),[{data:L}]=(0,Ir.K)(j.viewportZoom),{handleDrop:R,handleDragStart:k,handleDragEnd:O,handleDragOver:P}=(()=>{const e=(0,f.useCallback)((e=>{e.preventDefault(),document.body.removeAttribute("data-dragging-type")}),[]),t=(0,f.useCallback)((e=>{document.body.removeAttribute("data-dragging-type")}),[]),n=(0,f.useCallback)((e=>{e.preventDefault()}),[]);return{handleDrop:e,handleDragStart:(0,f.useCallback)((e=>{e.target instanceof Element&&"true"!==e.target.getAttribute("draggable")&&(e.preventDefault(),e.stopPropagation())}),[]),handleDragEnd:t,handleDragOver:n}})();(0,zn.bF)(),(0,f.useEffect)((()=>{window&&window.history&&window.history.scrollRestoration&&(window.history.scrollRestoration="manual")}),[]),(0,f.useEffect)((()=>{h.notifyReadyStateReached()}),[h]);const D=(0,f.useMemo)((()=>[(0,I.jsx)(An,{scrollNodeRef:N,scrollNodeChildRef:C}),(0,I.jsx)(Mn.X,{}),(0,I.jsx)(tn.ZC,{mainLandmarkRef:g,lyricsCinemaRef:E,leftSidebarRef:w,rightSidebarRef:S,nowPlayingBarRef:v,mainContentRef:y,topBarRef:b}),(0,I.jsx)(en,{}),(0,I.jsx)(Hu,{}),(0,I.jsx)(Xt,{}),(0,I.jsx)(Sn,{}),(0,I.jsx)(In.$y,{}),(0,I.jsx)(Cn.JI,{}),(0,I.jsx)(Mb.NT,{}),(0,I.jsx)(Hn.Ad,{}),(0,I.jsx)($a.n,{instance:T}),(0,I.jsx)(eh,{domRootRef:A}),(0,I.jsx)(va.F,{}),(0,I.jsx)(ea,{}),(0,I.jsx)(yr,{}),(0,I.jsx)(ph.r,{}),(0,I.jsx)(Mh,{}),(0,I.jsx)(nb,{})]),[T]),M=(0,u.d4)((e=>e.ui.unsupportedBrowser));return(0,I.jsxs)(Ve,{providers:D,children:[(0,I.jsxs)("div",{"":"root",className:Gt()("Root","global-nav","centered-layout"),style:{"--panel-gap":`${Ca.KV}px`,"--zoom-level":(0,Xg.I)(L??0)},onDrop:R,onDragOver:P,onDragStart:k,onDragEnd:O,ref:p,children:[(0,I.jsx)(nh,{message:M.isOpen?M.message:null,allowHTML:!0,onClose:n,isNotSupported:!0}),(0,I.jsxs)(Bn,{children:[(0,I.jsx)(db,{}),(0,I.jsx)(Ru,{topBarRef:b}),(0,I.jsxs)(sa,{children:[(0,I.jsx)(ha,{}),(0,I.jsx)(yn,{elementRef:w})]}),(0,I.jsx)(Na,{children:(0,I.jsx)($u,{})}),(0,I.jsxs)(ma,{children:[(0,I.jsx)(sh,{}),(0,I.jsxs)("div",{className:"main-view-container",children:[(0,I.jsx)("div",{className:"under-main-view"}),(0,I.jsx)(kd.a,{className:"main-view-container__scroll-node",scrollNodeRef:N,children:(0,I.jsx)("div",{ref:C,className:Gt()("main-view-container__scroll-node-child"),style:{minHeight:`calc(100vh - ${Ca.uC}px - ${Ca.fO}px - 519px)`},children:(0,I.jsx)(Dn,{ref:g,children:(0,I.jsxs)(m.s,{Fallback:()=>(0,I.jsx)(rh,{}),onError:e=>(0,Nn.Jy)(e,"Root"),children:[d,(0,I.jsx)(Sb,{})]})})})}),i&&(0,I.jsx)(hh,{fullscreenModeRef:x,cinemaModeRef:_})]}),t&&l&&(0,I.jsx)(dh,{}),s&&(0,I.jsx)("div",{className:Gt()("",{"Root__ads-container-desktop--is-hidden":!o}),children:(0,I.jsx)(ch,{})})]}),(0,I.jsxs)(Sa,{children:[(0,I.jsx)(Ig,{}),(0,I.jsx)(Ou,{elementRef:S})]}),(0,I.jsx)(ug,{}),(0,I.jsx)("div",{id:"lyrics-cinema",className:"Root__lyrics-cinema",ref:E}),(0,I.jsx)(Qn,{ref:_,debugLabel:"Video player cinema mode"}),(0,I.jsx)(Qn,{debugLabel:"Snackbar container",ref:A}),(0,I.jsx)(kg,{}),(0,I.jsx)(qu,{debugLabel:"Tuna root",children:(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Qu,{})})}),(0,I.jsx)(qu,{debugLabel:"Popover layer",children:(0,I.jsx)(Gu,{})})]}),(0,I.jsx)(Bu,{isDesktop:s}),(0,I.jsx)(Xu,{}),(0,I.jsx)(Ka,{}),(0,I.jsx)(fr,{pipInstance:T})]}),(0,I.jsx)(Yt,{}),(0,I.jsx)(Uu,{}),(0,I.jsx)(Yg,{}),(0,I.jsx)(Zg,{}),(0,I.jsx)(Jg,{}),(0,I.jsx)(mh,{}),(0,I.jsx)(Db,{isDeveloperMode:c,onBrowserNotSupported:a,onReachUsableState:r})]})};const zb=o(78316).ErrorPage;var Vb=o(3206);const Ub=function({children:e}){(()=>{const e=(0,t._r)();(0,f.useEffect)((()=>{const t=(0,Nn.sV)(),n=[...(0,Vb.v6)()].reduce(((t,n)=>{const a=e.getValue(n.name);return t[`rc.${n.name}`]=a,t}),{});t.setTags(n)}),[e])})();const n=(0,u.wA)(),a=(0,u.d4)((e=>e.session.accessToken)),r=(0,u.d4)((e=>e.ui.errorPage)),i=(0,Tn.m)(),s=(0,u.d4)((e=>e.platform.isDesktop?e.ads.root.adsEnabled:!!e.session.productState?.ads&&1===parseInt(e.session.productState.ads,10))),o=(0,u.d4)((e=>!!e.ads.billboard&&e.ads.billboard.isMinimized)),{isDesktop:c,isDeveloperMode:d,isVideoSupported:h}=(0,u.d4)((e=>e.platform)),p=r.isError,m=r.name,g=!!a,b=(0,f.useCallback)((e=>{i.notifyUsableStateReached(e)}),[i]),v=(0,f.useCallback)((()=>{n(l.BZ())}),[n]),y=(0,f.useCallback)((e=>{n(l.Gz(e))}),[n]);return p?(0,I.jsx)(zb,{errorName:m}):(0,I.jsx)(Hb,{billboardMinimized:o,isVideoSupported:h,onReachUsableState:b,accessTokenIsSet:g,onClose:v,onBrowserNotSupported:y,isDesktop:c,isDeveloperMode:d,adsEnabled:s,children:e})},Fb=({action:e,context:t,country:n,variant:a})=>({action:e,context:t,country:n,category:"brotli-exp-metrics",label:"dwp",sp_t:(0,Ht.v8)("sp_t"),os:(0,Es.f)(),variant:a});var Bb=o(39515),qb=(o(88747),o(55733));const Wb="open-local.spotify.com:8085",Gb=["open-exp.spotifycdn.com","open-exp-review.spotifycdn.com"],Qb=[Wb,...Gb,"open.spotifycdn.com","open-review.spotifycdn.com"],Kb=[...Object.values(qb.h).map((e=>`generated-locales/web-player/${e}`)),"/cdn/js/retargeting-pixels.js","/cdn/js/gtm.js","/cdn/images/"],$b=(e,t=!1)=>e.reduce(((e,n)=>{if(n.name.includes("node_modules"))return e;const a=(r=n.name,Kb.some((e=>r.includes(e))));var r;if(!(Qb.some((e=>n.name.includes(e)))||n.name.includes("/cdn/")))return e;if(t&&!(e=>[Wb,...Gb].some((t=>e.includes(t))))(n.name)&&!a)return e;const i=(e=>{let t=null;for(const n of Qb)if(e.includes(n)){const a=e.split(n);if(a.length>1){t=a[1].startsWith("/")?a[1].substring(1):a[1];break}}if(!t&&e.includes("/cdn/")){const n=e.split("/cdn/");n.length>1&&(t=n[1])}if(!t)return null;const n=t.split("/").pop();if(!n)return null;if(n.length>50){const e=n.split(".").pop()||"",t=n.split("_");return t.length>1?t[t.length-2]:`chunk.${e}`}return n.replace(/\.[a-f0-9]{8,}\.(js|css|woff2?|ttf|svg|png|jpe?g|gif|webp)$/,".$1")})(n.name);if(!i)return e;const s={b:n.transferSize,l:Number((n.responseEnd-n.responseStart).toFixed(1))};return 0===n.transferSize&&(s.c=1),e[i]=s,e}),{});var Yb=o(39705);const Zb=f.lazy((async()=>{const{SeeAllPlaylistLeavebehinds:e}=await o.e(5040).then(o.bind(o,18049));return{default:e}})),Xb=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Zb,{})}),Jb=f.lazy((async()=>{const{LoadingPage:e}=await Promise.resolve().then(o.bind(o,37461));return{default:e}})),ev=e=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Jb,{...e})}),tv=(0,f.lazy)((()=>o.e(8865).then(o.bind(o,97933)).then((e=>({default:e.AlbumPrerelease})))));var nv=o(43572);const av=e=>(0,I.jsx)(nv.e,{pageId:Yb.$h.PRERELEASE,children:e}),rv=()=>{const{id:e}=(0,ae.g)();if(!e)return av((0,I.jsx)(ev,{hasError:!0,errorMessage:i.Ru.get("error.not_found.title.album")}));const t=(0,J.jsG)(e);return av((0,I.jsx)(tv,{uri:t.toString()},e))},iv=()=>(0,I.jsx)(ae.qh,{path:"/prerelease/:id",element:(0,I.jsx)(rv,{})},"album-prerelease"),sv=f.lazy((async()=>{const{UpcomingReleasesErrorPage:e}=await o.e(2579).then(o.bind(o,40110));return{default:e}})),ov=({errorName:e})=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(sv,{errorName:e})}),cv=()=>(0,I.jsx)(ae.qh,{path:"/upcoming-releases",element:(0,I.jsx)(ov,{errorName:"upcoming_releases_not_supported"})},"upcoming-releases"),lv=f.lazy((async()=>{const{ErrorPage:e}=await o.e(2579).then(o.bind(o,78316));return{default:e}})),dv=({errorName:e})=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(lv,{errorName:e})}),uv=()=>[(0,I.jsx)(ae.qh,{path:"/artist-videos",element:(0,I.jsx)(dv,{errorName:"artist_videos_not_supported"})},"artist-videos")],hv=(0,f.lazy)((()=>Promise.all([o.e(3769),o.e(3937),o.e(6897),o.e(4395)]).then(o.bind(o,64935))));var pv=o(43725);function mv(e){return`spotify:section:${e.replace(/^section/,"")}`}const fv=(0,f.lazy)((()=>Promise.all([o.e(4588),o.e(1101),o.e(6266)]).then(o.bind(o,34322)).then((e=>({default:e.BrowsePage}))))),gv=(0,f.lazy)((()=>Promise.all([o.e(4588),o.e(1101),o.e(6266)]).then(o.bind(o,63654)).then((e=>({default:e.BrowseSection}))))),bv=({id:e})=>{if(e.startsWith("section"))return(0,I.jsx)(gv,{uri:mv(e)});const t=function(e){return/^(section)?[0-9A-Za-z_-]{22}$/.test(e)}(e)?function(e){return`spotify:page:${e}`}(e):function(e){return`spotify:genre:${e}`}(e);return(0,I.jsx)(fv,{uri:t})},vv=f.lazy((async()=>{const{CountryHub:e}=await Promise.all([o.e(3071),o.e(7275),o.e(2543)]).then(o.bind(o,8404));return{default:e}})),yv=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(vv,{})}),_v=f.lazy((async()=>{const{CountryHubSection:e}=await Promise.all([o.e(3071),o.e(7275),o.e(749)]).then(o.bind(o,2629));return{default:e}})),Ev=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(_v,{})}),xv=e=>`spotify:cultural-moment:hub:${e}`,Av=f.lazy((()=>o.e(3838).then(o.bind(o,7961)))),wv=()=>{const{id:e=""}=(0,ae.g)();return(0,I.jsx)(Av,{uri:xv(e),id:e})},Sv=f.lazy((async()=>{const{EpisodeMoreLikeThis:e}=await Promise.all([o.e(7194),o.e(7395),o.e(399)]).then(o.bind(o,82436));return{default:e}})),Iv=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Sv,{})});var Nv=o(99996);const Cv=f.lazy((async()=>{const{HomeChipsRowWithEmptyStates:e}=await Promise.all([o.e(4326),o.e(9290),o.e(1101),o.e(1907),o.e(5884),o.e(636),o.e(9319),o.e(2233)]).then(o.bind(o,56893));return{default:e}})),Tv=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Cv,{})}),jv=f.lazy((async()=>{const{HomeHeader:e}=await o.e(1602).then(o.bind(o,77683));return{default:e}})),Lv=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(jv,{})});var Rv=o(10556);const kv=f.lazy((async()=>{const{OfflineEmptyState:e}=await o.e(2630).then(o.bind(o,25333));return{default:e}})),Ov=({showDownloadInformation:e})=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(kv,{showDownloadInformation:e})});var Pv=o(55933),Dv=o(32485),Mv=o(97207);const Hv=(0,f.lazy)((()=>Promise.all([o.e(1597),o.e(5837),o.e(4312)]).then(o.bind(o,61487)))),zv=(0,f.lazy)((()=>o.e(5885).then(o.bind(o,41e3)))),Vv=(0,f.lazy)((()=>o.e(3569).then(o.bind(o,45545)))),Uv=(0,f.lazy)((()=>Promise.all([o.e(4326),o.e(9290),o.e(1101),o.e(1907),o.e(5884),o.e(636),o.e(9319)]).then(o.bind(o,94286)))),Fv=(0,f.lazy)((()=>Promise.all([o.e(4588),o.e(5884),o.e(1621)]).then(o.bind(o,8622)))),Bv=(0,f.lazy)((()=>o.e(3569).then(o.bind(o,96478)))),qv=(0,f.lazy)((async()=>{const{HomeSubfeedWithRedirect:e}=await Promise.all([o.e(4326),o.e(9290),o.e(1101),o.e(1907),o.e(5884),o.e(636),o.e(9319),o.e(347)]).then(o.bind(o,21008));return{default:e}})),Wv=()=>{const{sectionId:e}=(0,ae.g)();return(0,I.jsx)(Fv,{uri:`spotify:section:${e}`})},Gv=({isDesktop:e,isPremium:t,isOffline:n})=>n?e&&t?(0,I.jsx)(Vv,{}):(0,I.jsx)(Ov,{showDownloadInformation:!1}):(0,I.jsx)(Uv,{}),Qv=({isDesktop:e,isOffline:t})=>{const n=(0,Rv.f)()!==Nv.e,{allowSwitchingBetweenHomeAdsAndHpto:a}=xe();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Lv,{}),e&&n&&(a?(0,I.jsx)(zv,{}):(0,I.jsx)(Hv,{})),!t&&(0,I.jsx)(Tv,{}),(0,I.jsx)(ae.sv,{})]})},Kv="/launch-miniplayer",$v=()=>{const e=(()=>{const{open:e,isOpen:t,canOpen:n}=(0,Qa.H)();return(0,f.useCallback)((()=>{n&&!t&&e()}),[n,t,e])})();return(0,f.useEffect)((()=>{e()}),[e]),Kg((t=>t.pathname===Kv&&(e(),!0)),[e]),(0,I.jsx)(zg.$,{to:"/"})},Yv=f.lazy((async()=>{const{PlaylistFormatRedirectWithParams:e}=await o.e(2205).then(o.bind(o,36279));return{default:e}})),Zv=e=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(Yv,{...e})});var Xv=o(43526),Jv=o(22949),ey=o(31278);const ty=f.lazy((()=>Promise.all([o.e(928),o.e(9234),o.e(6488)]).then(o.bind(o,29234)))),ny=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(ty,{})}),ay=()=>(0,Xv.X)()?(0,I.jsx)(nv.e,{navigationalRoot:Pv.g.EXPLORE_PREMIUM,pageId:Yb.$h.PREMIUM,entityUri:"spotify:app:premium",children:(0,I.jsx)(ny,{})}):(0,I.jsx)(zg.$,{to:"/"});var ry=o(49078);const iy=({queueView:e})=>{const{openQueue:t}=(0,Pg.R)();return(0,f.useLayoutEffect)((()=>{t(e)}),[]),null},sy=()=>(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ae.qh,{path:"/queue",element:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(iy,{queueView:ry.p.QUEUE}),(0,I.jsx)(zg.$,{to:"/"})]})},"/queue"),(0,I.jsx)(ae.qh,{path:"/history",element:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(iy,{queueView:ry.p.HISTORY}),(0,I.jsx)(zg.$,{to:"/"})]})},"/history")]});var oy=o(68734);const cy=f.lazy((async()=>{const{ShowMoreLikeThisPage:e}=await o.e(9033).then(o.bind(o,55693));return{default:e}})),ly=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(cy,{})}),dy=()=>[(0,I.jsx)(ae.qh,{path:"/the-drop-weekly",element:(0,I.jsx)(dv,{errorName:"the_drop_weekly_not_supported"})},"the-drop-weekly")];var uy=o(90658),hy=o(79678),py=o(74101),my=o(77073);var fy=o(46719);const gy=()=>{const{trackId:e=""}=(0,ae.g)(),t=(0,py.n)(),n=(a=t)===Ee.ssn.AboveFansAlsoLike||a===Ee.ssn.AbovePopularReleases||a===Ee.ssn.AboveRecommendedBasedOnThisSong;var a;const r=(0,J.Mce)(e).toString(),s=(0,hy.D)({entityType:er.c.TRACK,componentType:"fullPage",uri:r});return(0,fy.L)({uri:r}),n?(0,I.jsx)(m.s,{onError:s,children:(0,I.jsxs)("div",{className:"contentSpacing",children:[(0,I.jsx)(uy.Q,{children:i.Ru.get("track-page.playlists-with-this-song")}),(0,I.jsx)(my.N$,{isFullPage:!0,limit:50,renderInVariant:t,uri:r})]})}):(0,I.jsx)(ae.C5,{to:"/",replace:!0})};var by=o(97895);const vy=f.memo((function(){const{trackId:e=""}=(0,ae.g)(),t=(e=>`spotify:track:${e}`)(e);return(0,I.jsxs)("div",{className:"contentSpacing",children:[(0,I.jsx)(uy.Q,{children:i.Ru.get("internal-link-recommender.more-recommended-releases")}),(0,I.jsx)(by.b,{uri:t,isFullPage:!0,title:i.Ru.get("internal-link-recommender.more-recommended-releases")})]})})),yy=f.lazy((async()=>{const{WhatsNewFeed:e}=await Promise.all([o.e(7194),o.e(4084)]).then(o.bind(o,55316));return{default:e}})),_y=()=>(0,I.jsx)(f.Suspense,{fallback:null,children:(0,I.jsx)(yy,{})}),Ey=()=>(0,Fi.V)()?(0,I.jsx)(zg.$,{to:"/"}):(0,I.jsx)(_y,{});var xy=o(1197),Ay=o(76924);const wy=`/playlist/${xy.wn}`,Sy=()=>{const{metadata:e,error:t,context:n}=(0,Ay._)(),{triggerPlay:a,isPlaying:r}=n,i=(0,u.wA)();return{isLoading:!e&&!t,callback:(0,f.useCallback)((()=>{e?r||a():i((0,l.eN)())}),[r,a,i,e])}},Iy=()=>{const{isLoading:e,callback:t}=Sy();return(0,f.useEffect)((()=>{e||t()}),[e,t]),e?null:(0,I.jsx)(zg.$,{to:"/"})};var Ny=o(36171),Cy=o(97919),Ty=o(86652),jy=o(78433);const Ly=(0,f.lazy)((()=>o.e(1845).then(o.bind(o,21538))));var Ry=o(69262);const ky=(0,f.lazy)((()=>o.e(1845).then(o.bind(o,21538))));function Oy(){const e=(0,ae.zy)(),t=`/${(0,ae.g)()["*"]??""}${e.search}`,n=e.pathname+e.search;return(0,I.jsx)(ae.C5,{to:t===n?`/${e.search}`:t,replace:!0})}var Py=o(99284),Dy=o(77813),My=o(27148);const Hy=f.lazy((()=>o.e(5962).then(o.bind(o,52548)))),zy=f.lazy((()=>Promise.resolve().then(o.bind(o,75407)))),Vy=f.lazy((()=>o.e(3890).then(o.bind(o,85312)))),Uy=f.lazy((()=>o.e(6863).then(o.bind(o,86093)))),Fy=f.lazy((()=>o.e(9480).then(o.bind(o,87579)))),By=f.lazy((()=>Promise.all([o.e(9038),o.e(8574),o.e(9209)]).then(o.bind(o,28415)))),qy=!1,Wy=f.lazy((()=>Promise.all([o.e(1368),o.e(4735),o.e(8828)]).then(o.bind(o,6950)))),Gy=f.lazy((()=>Promise.all([o.e(3937),o.e(4735),o.e(6080)]).then(o.bind(o,59187)))),Qy=f.lazy((()=>o.e(4389).then(o.bind(o,41683)))),Ky=f.lazy((()=>Promise.all([o.e(7246),o.e(5783)]).then(o.bind(o,13936)))),$y=f.lazy((()=>o.e(5853).then(o.bind(o,34430)))),Yy=f.lazy((()=>Promise.all([o.e(6634),o.e(1101),o.e(7194),o.e(7395),o.e(8463),o.e(7125)]).then(o.bind(o,26255)))),Zy=f.lazy((()=>Promise.all([o.e(1101),o.e(8463),o.e(2889)]).then(o.bind(o,10469)))),Xy=f.lazy((()=>Promise.all([o.e(3769),o.e(9884),o.e(7194),o.e(3937),o.e(1368),o.e(6897),o.e(2355)]).then(o.bind(o,22662)))),Jy=f.lazy((()=>o.e(4496).then(o.bind(o,73190)))),e_=f.lazy((()=>Promise.all([o.e(636),o.e(5663)]).then(o.bind(o,80636)))),t_=f.lazy((()=>Promise.all([o.e(196),o.e(6286),o.e(7395),o.e(3937),o.e(7937),o.e(8606)]).then(o.bind(o,20930)))),n_=f.lazy((()=>Promise.all([o.e(196),o.e(8119),o.e(7194),o.e(7395),o.e(7937),o.e(9528)]).then(o.bind(o,16924)))),a_=f.lazy((()=>o.e(1785).then(o.bind(o,52941)))),r_=f.lazy((()=>o.e(6505).then(o.bind(o,43799)))),i_=f.lazy((()=>o.e(42).then(o.bind(o,51327)))),s_=f.lazy((()=>o.e(42).then(o.bind(o,65563)))),o_=f.lazy((()=>o.e(8212).then(o.bind(o,49603)))),c_=f.lazy((()=>Promise.all([o.e(928),o.e(9234),o.e(1396)]).then(o.bind(o,38250)))),l_=f.lazy((()=>o.e(7241).then(o.bind(o,54840)))),d_=f.lazy((()=>o.e(5523).then(o.bind(o,70912)))),u_=e=>{const{viewId:t=""}=(0,ae.g)();return t===oy.r?(0,I.jsx)(e_,{...e}):(0,I.jsx)(bv,{id:t})},h_=({RoutesComponent:e=ae.BV})=>{const t=(0,My.o)();return(0,I.jsxs)(e,{children:[(0,I.jsx)(ae.qh,{path:"tracks",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.COLLECTION_SONGS,children:(0,I.jsx)(Wy,{})})}),(0,I.jsx)(ae.qh,{path:"episodes",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.COLLECTION_PODCASTS_EPISODES,children:(0,I.jsx)(Gy,{})})}),(0,I.jsx)(ae.qh,{path:"your-episodes",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.COLLECTION_PODCASTS_EPISODES,children:(0,I.jsx)(Gy,{})})}),t.canFetchAllTracks&&(0,I.jsx)(ae.qh,{path:"local-files",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.LOCALFILES,children:(0,I.jsx)(Qy,{})})}),(0,I.jsx)(ae.qh,{path:"/*",element:(0,I.jsx)(zg.$,{to:"/collection/tracks"})})]})},p_=e=>{const{playlistId:t}=(0,ae.g)();return(0,f.createElement)(Xy,{...e,key:t})},m_=e=>{const{artistId:t}=(0,ae.g)();return(0,f.createElement)(zy,{...e,key:t})},f_=e=>{const{albumId:t}=(0,ae.g)();return(0,f.createElement)(Hy,{...e,key:t})},g_=e=>{const{showId:t}=(0,ae.g)();return(0,f.createElement)(t_,{...e,key:t})},b_=({RoutesComponent:e=ae.BV})=>{const n=(0,ae.zy)();(()=>{const e=(0,fl.J)(),t=(0,f.useRef)("");(0,f.useEffect)((()=>e.block(((e,n)=>{let a=!1;for(const[t]of Qg)t(e,n)&&(a=!0);const r=e.pathname+e.search+e.hash;if("PUSH"===n&&t.current===r&&(a=!0),a)return!1;t.current=r}))),[e])})();const a=(0,u.d4)((e=>e.features.enableShows)),{isDesktop:r,isBrowser:s}=(0,u.d4)((e=>e.platform)),{isAnonymous:o,productState:c}=(0,u.d4)(so.Ht),d="premium"===c?.product,h=!(0,ii.n)();(0,Ny.K)(),(()=>{const e=(0,t.NC)(Ee.fLU),n=(0,ae.zy)(),a=(0,u.wA)(),r=(0,f.useRef)(n.pathname),i=(0,f.useCallback)((()=>{a((0,l.H2)())}),[a]);(0,f.useEffect)((()=>{if(r.current===n.pathname){if(e===Ee.KwA.AllPagesSoftWall){const e=setTimeout(i,200);return()=>clearTimeout(e)}if((e===Ee.KwA.EntityPagesSoftWall||e===Ee.KwA.EntityPagesSoftWallDelayed)&&"/"!==r.current.replace(/^\/intl-[A-Za-z]{2}/i,"")){const t=e===Ee.KwA.EntityPagesSoftWall?200:5e3,n=setTimeout(i,t);return()=>clearTimeout(n)}}return r.current=n.pathname,()=>{}}),[e,n.pathname,a,i])})();const{allEpisodeAdsRoute:p}={allEpisodeAdsRoute:(0,I.jsx)(ae.qh,{path:(0,Ty.c)(jy.ob),element:(0,I.jsx)(Ly,{surface:Cy.ui.PODCAST_SEE_ALL})},"all-episode-ads")},{allShowAdsRoute:m}={allShowAdsRoute:(0,I.jsx)(ae.qh,{path:(0,Ry.q)(jy.yA),element:(0,I.jsx)(ky,{surface:Cy.ui.PODCAST_SEE_ALL})},"all-show-ads")},g=(({isDesktop:e,isPremium:t,isOffline:n})=>{const a=(0,Dv.W)({type:"locale",uri:"home"});return[(0,I.jsxs)(ae.qh,{path:"/",element:(0,I.jsx)(nv.e,{navigationalRoot:Pv.g.HOME,pageId:Yb.$h.HOME,entityUri:"spotify:app:home",children:(0,I.jsx)(Qv,{isDesktop:e,isPremium:t,isOffline:n})}),children:[(0,I.jsx)(ae.qh,{path:"/home",element:(0,I.jsx)(qv,{})},"home-subfeed"),e&&t&&(0,I.jsx)(ae.qh,{path:"/music-downloads",element:(0,I.jsx)(Bv,{})},"music-downloads"),(0,I.jsx)(ae.qh,{index:!0,element:(0,I.jsx)(Gv,{isDesktop:e,isPremium:t,isOffline:n})})]},"home"),a?Mv.NW.map((a=>(0,I.jsxs)(ae.qh,{path:`/${Mv.CT}${a}`,element:(0,I.jsx)(nv.e,{navigationalRoot:Pv.g.HOME,pageId:Yb.$h.HOME,entityUri:"spotify:app:home",children:(0,I.jsx)(Qv,{isDesktop:e,isPremium:t,isOffline:n})}),children:[(0,I.jsx)(ae.qh,{path:`/${Mv.CT}${a}/home`,element:(0,I.jsx)(qv,{})},"home-subfeed"),(0,I.jsx)(ae.qh,{index:!0,element:(0,I.jsx)(Gv,{isDesktop:e,isPremium:t,isOffline:n})})]},"home-i18n"))):null,(0,I.jsx)(ae.qh,{path:"/section/:sectionId",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.HOME_DRILLDOWN,children:(0,I.jsx)(Wv,{})})},"home-section")]})({isDesktop:r,isPremium:d,isOffline:h}),b=(()=>{const{isLoading:e,callback:t}=Sy();return Kg((n=>n.pathname===wy&&(e||t(),!0)),[e,t]),(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(ae.qh,{path:wy,element:(0,I.jsx)(Iy,{})},wy)})})(),v=(0,I.jsx)(ae.qh,{path:Kv,element:(0,I.jsx)($v,{})},Kv),y=[(0,I.jsx)(ae.qh,{path:"/cultural-moment/hub/:id",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.CULTURALMOMENTSHUB,children:(0,I.jsx)(wv,{})})},"cultural-moment-hub")],_=iv(),E=sy(),x=(0,I.jsx)(ae.qh,{path:"/content-feed",element:(0,I.jsx)(Ey,{})}),A=(()=>{const e=i.Ru.getLocaleForURLPath(),t=(0,u.d4)(Jv.N),n=(0,xb.p)({entityFeatureFlag:t,urlLocale:e,entity:er.c.PREMIUM,type:"link"})?(0,ey.hF)("/premium"):"/premium";return(0,I.jsx)(ae.qh,{path:n,element:(0,I.jsx)(ay,{})})})(),w=[(0,I.jsx)(ae.qh,{path:Dg.S.PARTICIPANTS_PAGE,Component:Wg},"social-session-participant-page"),(0,I.jsx)(ae.qh,{path:"/socialsession/:id",Component:Bg},"social-session-invitation-fallback"),(0,I.jsx)(ae.qh,{path:"/jam/:contextType?/:id?/:play?",Component:qg},"jam-creation-fallback")],S=uv(),N=dy(),C=(0,t.NC)(Ee.DKh),T=!(0,R.g)(),j=cv(),L=(0,pv.H)(),k=mb();return(0,I.jsxs)(e,{children:[(0,I.jsx)(ae.qh,{path:"/user/:userId/collection/your-episodes",element:(0,I.jsx)(zg.$,{to:"/collection/episodes"})}),(0,I.jsx)(ae.qh,{path:"/user/:userId/collection/album/:albumId",element:(0,I.jsx)(zg.$,{to:"/album/:albumId"})}),(0,I.jsx)(ae.qh,{path:"/user/:userId/collection/artist/:artistId",element:(0,I.jsx)(zg.$,{to:"/artist/:artistId/saved"})}),(0,I.jsx)(ae.qh,{path:"/user/:userId/playlist/:playlistId",element:(0,I.jsx)(zg.$,{to:"/playlist/:playlistId"})}),(0,I.jsx)(ae.qh,{path:"/browse/genres",element:(0,I.jsx)(zg.$,{to:"/genre/hub-browse-grid"})}),(0,I.jsx)(ae.qh,{path:"/browse/newreleases",element:(0,I.jsx)(zg.$,{to:"/genre/new-releases-page"})}),(0,I.jsx)(ae.qh,{path:"/browse/discover",element:(0,I.jsx)(zg.$,{to:"/genre/discover-page"})}),(0,I.jsx)(ae.qh,{path:"/browse/charts",element:(0,I.jsx)(zg.$,{to:"/genre/browse-charts-tab"})}),(0,I.jsx)(ae.qh,{path:"/browse/featured",element:(0,I.jsx)(zg.$,{to:"/"})}),(0,I.jsx)(ae.qh,{path:"/browse",element:(0,I.jsx)(zg.$,{to:"/"})}),(0,I.jsx)(ae.qh,{path:`/playlist/${Dy.iU}`,element:(0,I.jsx)(zg.$,{to:"/collection/episodes"})}),(0,I.jsx)(ae.qh,{path:`/playlist/${Dy._J}`,element:(0,I.jsx)(zg.$,{to:"/collection/tracks"})}),Py.BG.map((e=>(0,I.jsx)(ae.qh,{path:e,element:(0,I.jsx)(zg.$,{to:Py.yf})},e))),(0,I.jsx)(ae.qh,{path:"/internal/recs/playlist/:playlistId",element:(0,I.jsx)(zg.$,{to:"/playlist/:playlistId"})}),(0,I.jsx)(ae.qh,{path:"/settings",element:(0,I.jsx)(zg.$,{to:"/"})}),o?[(0,I.jsx)(ae.qh,{path:"/collection/*",element:(0,I.jsx)(zg.$,{to:"/"})},"collection-redirect")]:[(0,I.jsx)(ae.qh,{path:"/collection",element:(0,I.jsx)(zg.$,{to:"/collection/tracks"})},"collection-redirect")],g,b,v,y,_,S,N,j,E,x,A,w,(0,I.jsx)(ae.qh,{path:"/user/:userId/collection",element:(0,I.jsx)(zg.$,{to:{search:n.search,pathname:"/collection/tracks"}})}),(0,I.jsx)(ae.qh,{path:"/search/*",element:(0,I.jsx)(nv.e,{navigationalRoot:Pv.g.SEARCH,children:(0,I.jsx)(Yy,{})})}),(0,I.jsx)(ae.qh,{path:"/recent-searches",element:(0,I.jsx)(nv.e,{navigationalRoot:Pv.g.SEARCH,pageId:Yb.$h.SEARCH_RECENT,children:(0,I.jsx)(Zy,{})})}),(0,I.jsx)(ae.qh,{path:"/collection/*",element:(0,I.jsx)(nv.e,{children:(0,I.jsx)(h_,{RoutesComponent:e})})}),(0,I.jsx)(ae.qh,{path:"/artist/:artistId/*",element:(0,I.jsx)(nv.e,{children:(0,I.jsx)(m_,{})})}),(0,I.jsx)(ae.qh,{path:"/album/:albumId/*",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.ALBUM,children:(0,I.jsx)(f_,{})})}),(0,I.jsx)(ae.qh,{path:"/playlist-format/:title",element:(0,I.jsx)(nv.e,{children:(0,I.jsx)(Zv,{isAnonymous:o})})}),(0,I.jsx)(ae.qh,{path:"/playlist-format/:title/:category",element:(0,I.jsx)(nv.e,{children:(0,I.jsx)(Zv,{isAnonymous:o})})}),(0,I.jsx)(ae.qh,{path:"/track/:trackId/*",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.TRACK,children:s?(0,I.jsx)(Uy,{}):(0,I.jsx)(Vy,{})})}),(0,I.jsx)(ae.qh,{path:"/track/:trackId/more-like-this",element:(0,I.jsx)(vy,{})},"more-like-this-track"),(0,I.jsx)(ae.qh,{path:"/track/:trackId/playlists-with-this-song",element:(0,I.jsx)(gy,{})},"playlists-with-this-song"),(0,I.jsx)(ae.qh,{path:"/playlist/:playlistId/see-all-ads",element:(0,I.jsx)(Xb,{})}),(0,I.jsx)(ae.qh,{path:"/playlist/:playlistId/*",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.PLAYLIST,children:(0,I.jsx)(p_,{})})}),!1,(0,I.jsx)(ae.qh,{path:"/user/:username/folder/:folderId",element:(0,I.jsx)(zg.$,{to:"/"})}),(0,I.jsx)(ae.qh,{path:"/folder/:folderId/*",element:(0,I.jsx)(zg.$,{to:"/"})}),(0,I.jsx)(ae.qh,{path:"/user/:userId/*",element:(0,I.jsx)(nv.e,{children:(0,I.jsx)(Fy,{})})}),(0,I.jsx)(ae.qh,{path:"/genre/corona_news_podcasts",element:(0,I.jsx)(zg.$,{to:"/genre/corona_news_podcasts-page"})}),(0,I.jsx)(ae.qh,{path:"/genre/:viewId",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.GENRE,children:(0,I.jsx)(u_,{})})}),(0,I.jsx)(ae.qh,{path:"/view/:viewId",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.HOME_DRILLDOWN,children:(0,I.jsx)(u_,{})})}),(0,I.jsx)(ae.qh,{path:"/concerts-page",element:(0,I.jsx)(zg.$,{to:"/concerts"})}),(0,I.jsx)(ae.qh,{path:"/concerts/location/:location",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.CONCERTS,children:(0,I.jsx)(Ky,{})})}),(0,I.jsx)(ae.qh,{path:"/concerts/location/:location/genre/:id",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.CONCERTS,children:(0,I.jsx)(Ky,{})})}),(0,I.jsx)(ae.qh,{path:"/concerts/genre/:id",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.CONCERTS,children:(0,I.jsx)(Ky,{})})}),(0,I.jsx)(ae.qh,{path:"/concerts/:slug",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.CONCERTS,children:(0,I.jsx)($y,{})})}),(0,I.jsx)(ae.qh,{path:"/concerts",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.CONCERTS,children:(0,I.jsx)(Ky,{})})}),(0,I.jsx)(ae.qh,{path:"/concert/:concertId",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.CONCERTS_CONCERT,children:(0,I.jsx)(By,{})})}),C&&(0,I.jsx)(ae.qh,{path:"/venue/:venueId",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.VENUE,children:(0,I.jsx)(l_,{})})}),T&&qy,(0,I.jsx)(ae.qh,{path:"/lyrics",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.LYRICS,children:(0,I.jsx)(r_,{})})}),(0,I.jsx)(ae.qh,{path:"/preferences",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.SETTINGS,navigationalRoot:Pv.g.SETTINGS,children:(0,I.jsx)(a_,{})})}),(0,I.jsx)(ae.qh,{path:"/premium",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.PREMIUM,entityUri:"spotify:app:premium",children:(0,I.jsx)(c_,{})})}),(0,I.jsx)(ae.qh,{path:"/radio/:entity/:id",element:(0,I.jsx)(zg.$,{to:"/:entity/:id"})}),(0,I.jsx)(ae.qh,{path:"/station/:entity/:id",element:(0,I.jsx)(zg.$,{to:"/:entity/:id"})}),(0,I.jsx)(ae.qh,{path:"/new/playlist",element:(0,I.jsx)(nv.e,{children:(0,I.jsx)(Jy,{})})}),(0,I.jsx)(ae.qh,{path:"/blend/taste-match/:invitationId",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.BLEND_TASTE_MATCH,children:(0,I.jsx)(i_,{})})}),(0,I.jsx)(ae.qh,{path:"/blend/invitation",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.BLEND_INVITATION,children:(0,I.jsx)(s_,{})})}),(0,I.jsx)(ae.qh,{path:"/_pong",element:(0,I.jsx)(o_,{})}),(0,I.jsx)(ae.qh,{path:"/blend/invitation-page",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.BLEND_INVITATION,children:(0,I.jsx)(s_,{})})}),(0,I.jsx)(ae.qh,{path:"/blend/ci/:playlistId",element:(0,I.jsx)(zg.$,{to:"/playlist/:playlistId"})}),(0,I.jsx)(ae.qh,{path:"/__noul__",element:(0,I.jsx)(Oy,{})}),(0,I.jsx)(ae.qh,{path:"/__noul__/*",element:(0,I.jsx)(Oy,{})}),a?[(0,I.jsx)(ae.qh,{path:"/browse/podcasts",element:(0,I.jsx)(zg.$,{to:"/genre/podcasts-web"})},"podcasts"),m,(0,I.jsx)(ae.qh,{path:jy.e2,element:(0,I.jsx)(g_,{})},jy.e2),(0,I.jsx)(ae.qh,{path:"/show/:showId/more-like-this",element:s?(0,I.jsx)(ly,{}):(0,I.jsx)(zg.$,{to:"/"})},"more-like-this-shows"),(0,I.jsx)(ae.qh,{path:"/episode/:episodeId/more-like-this",element:s?(0,I.jsx)(Iv,{}):(0,I.jsx)(zg.$,{to:"/"})},"more-like-this-episodes"),p,(0,I.jsx)(ae.qh,{path:jy.Ch,element:(0,I.jsx)(n_,{})},"episode")]:[(0,I.jsx)(ae.qh,{path:"/browse/podcasts",element:(0,I.jsx)(zg.$,{to:"/"})},"podcasts"),(0,I.jsx)(ae.qh,{path:"/show/*",element:(0,I.jsx)(zg.$,{to:"/"})},"show"),(0,I.jsx)(ae.qh,{path:"/episode/*",element:(0,I.jsx)(zg.$,{to:"/"})},"episode")],(0,I.jsx)(ae.qh,{path:"/site/:lookupToken",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.THESTAGE,children:(0,I.jsx)(d_,{})})}),(0,I.jsx)(ae.qh,{path:"/presents/:lookupToken",element:(0,I.jsx)(nv.e,{pageId:Yb.$h.THESTAGE,children:(0,I.jsx)(d_,{})})}),(0,I.jsx)(ae.qh,{path:"/popular-in/:country",element:k?(0,I.jsx)(yv,{}):(0,I.jsx)(zg.$,{to:"/"})}),(0,I.jsx)(ae.qh,{path:"/popular-all/:contentId/:country",element:k?(0,I.jsx)(Ev,{}):(0,I.jsx)(zg.$,{to:"/"})}),Mv.NW.map((e=>((e,t,n)=>[(0,I.jsx)(ae.qh,{path:`/${Mv.CT}${t}/track/:trackId`,element:(0,I.jsx)(nv.e,{pageId:Yb.$h.TRACK,children:e?(0,I.jsx)(Uy,{}):(0,I.jsx)(Vy,{})})},"locale_track"),(0,I.jsx)(ae.qh,{path:`/${Mv.CT}${t}/track/:trackId/more-like-this`,element:(0,I.jsx)(nv.e,{pageId:Yb.$h.TRACK,children:(0,I.jsx)(vy,{})})},"locale_track_more_like_this"),(0,I.jsx)(ae.qh,{path:`/${Mv.CT}${t}/artist/:artistId/*`,element:(0,I.jsx)(nv.e,{children:(0,I.jsx)(m_,{})})},"locale_artist"),(0,I.jsx)(ae.qh,{path:`/${Mv.CT}${t}/album/:albumId`,element:(0,I.jsx)(nv.e,{pageId:Yb.$h.ALBUM,children:(0,I.jsx)(Hy,{})})},"locale_album"),(0,I.jsx)(ae.qh,{path:`/${Mv.CT}${t}/premium`,element:(0,I.jsx)(nv.e,{pageId:Yb.$h.PREMIUM,entityUri:"spotify:app:premium",children:(0,I.jsx)(c_,{})})},"locale_premium"),(0,I.jsx)(ae.qh,{path:`/${Mv.CT}${t}/popular-in/:country`,element:n?(0,I.jsx)(yv,{}):(0,I.jsx)(zg.$,{to:"/"})},"locale_country_hub"),(0,I.jsx)(ae.qh,{path:`/${Mv.CT}${t}/popular-all/:contentId/:country`,element:n?(0,I.jsx)(Ev,{}):(0,I.jsx)(zg.$,{to:"/"})},"locale_country_hub_section")])(s,e,k))),null,!1,L?(0,I.jsx)(ae.qh,{path:"/author/:authorId/*",element:(0,I.jsx)(hv,{})}):null]})},v_=(0,f.memo)((function(){return(()=>{const[e,n]=(0,f.useState)(),a=(0,ge.vh)(),r=(0,u.d4)(bb.JJ),i=(0,Fi.V)(),s=(0,t.NC)(Ee.HI4),o=(0,f.useCallback)((()=>{const e=performance.mark("pageEnd");n(e.startTime/1e3)}),[n]);(0,f.useEffect)((()=>(window.addEventListener("load",o),()=>{window.removeEventListener("load",o)})),[o]),(0,f.useEffect)((()=>{if(e){const t=Fb({action:"load-time",context:JSON.stringify({loadTime:`${e.toFixed(2)}s`}),country:r,variant:s});i?a.send((0,gb.r)(t)):a.send((0,fb._)(t))}}),[r,a,i,e,s])})(),(()=>{const e=(0,ge.vh)(),n=(0,u.d4)(bb.JJ),a=(0,Fi.V)(),r=(0,t.NC)(Ee.HI4),i=(0,Bb.d)();(0,f.useEffect)((()=>{const t=setTimeout((()=>{const t=$b(performance.getEntriesByType("resource"),i);if(Object.keys(t).length>0){const i=Fb({action:"bytes-transferred-latency-per-resource",context:JSON.stringify(t),country:n,variant:r});a?e.send((0,gb.r)(i)):e.send((0,fb._)(i))}}),1e4);return()=>clearTimeout(t)}),[n,e,a,i,r])})(),(0,I.jsx)(Ub,{children:(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(qt.LoadingPage,{hasError:!1,errorMessage:"",loadOffline:!0}),children:(0,I.jsx)(b_,{})})})}));var y_=o(83607),__=o(33006),E_=o(92826);const x_=({registry:e,children:t})=>{const n=(0,f.useContext)(__.N);return null!==n&&(e=(0,E_.I)([e,n])),(0,I.jsx)(__.N.Provider,{value:e,children:t})};var A_=o(13184);const w_=({store:e,platform:t})=>{const n=[(0,I.jsx)(La.IF,{}),(0,I.jsx)(y_.G,{}),(0,I.jsx)(rt.GM,{}),(0,I.jsx)(d.vd,{}),(0,I.jsx)(Bt,{platform:t}),(0,I.jsx)(lt.xy,{}),(0,I.jsx)(j.wI,{}),(0,I.jsx)(le.Pj,{}),(0,I.jsx)(at.nI,{}),(0,I.jsx)(h.SF,{}),(0,I.jsx)(p.id,{}),(0,I.jsx)(A_.k7,{}),(0,I.jsx)(st.o,{}),(0,I.jsx)(Ud.yd,{isWebPSupported:t.isWebPSupported}),(0,I.jsx)(it.d,{eventSender:t.getEventSender()})];return(0,I.jsx)(ct,{history:t.getHistory(),children:(0,I.jsx)(m.s,{onError:e=>(0,Nn.Jy)(e,"App"),Fallback:T,children:(0,I.jsx)(u.Kq,{store:e,children:(0,I.jsx)(x_,{registry:t.getRegistry(),children:(0,I.jsxs)(nt,{platform:t,children:[(0,I.jsx)(se,{eventSender:t.getEventSender()}),(0,I.jsxs)(Ve,{providers:n,children:[(0,I.jsx)(K,{}),(0,I.jsx)(D,{}),(0,I.jsx)(v_,{})]})]})})})})})},S_="POP",I_="PUSH",N_="REPLACE";function C_(e,t){return{canGoBack:e>0,canGoForward:e<t.length-1}}var T_=o(42618);const j_=!1;function L_(e){j_}var R_=o(79537);var k_=o(4006);const O_=e=>{window?.performance?.mark&&e&&window.performance.mark(e)},P_=(e,t,n)=>window?.performance?.measure&&window?.performance?.getEntriesByName&&e&&t&&n?(window.performance.measure(n,e,t),window.performance.getEntriesByName(n)):[];function D_(e){return e.container===Ma.m.Desktop}var M_=o(12322),H_=o(88335);const z_=(0,M_._C)((()=>{const e=1e3*(0,H_.zf)();return{name:"SessionTiming",processEvent(t){const n=1e3*(0,H_.zf)();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}}));var V_=o(1587),U_=o(88283),F_=o(10928),B_=o(92397),q_=o(8141),W_=o(60603),G_=o(66664),Q_=o(43642),K_=o(18305),$_=o(58252),Y_=o(98935);const Z_=(e,t,n,a)=>{let r,i;return s=>{t.value>=0&&(s||a)&&(i=t.value-(r||0),(i||void 0===r)&&(r=t.value,t.delta=i,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},X_=(e=!0)=>{const t=W_.j.performance&&W_.j.performance.getEntriesByType&&W_.j.performance.getEntriesByType("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},J_=()=>{const e=X_();return e&&e.activationStart||0},eE=(e,t)=>{const n=X_();let a="navigate";n&&(W_.j.document&&W_.j.document.prerendering||J_()>0?a="prerender":W_.j.document&&W_.j.document.wasDiscarded?a="restore":n.type&&(a=n.type.replace(/_/g,"-")));return{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v4-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:a}},tE=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const a=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return a.observe(Object.assign({type:e,buffered:!0},n||{})),a}}catch(e){}},nE=e=>{const t=t=>{("pagehide"===t.type||W_.j.document&&"hidden"===W_.j.document.visibilityState)&&e(t)};W_.j.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},aE=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let rE=-1;const iE=e=>{"hidden"===W_.j.document.visibilityState&&rE>-1&&(rE="visibilitychange"===e.type?e.timeStamp:0,sE())},sE=()=>{removeEventListener("visibilitychange",iE,!0),removeEventListener("prerenderingchange",iE,!0)},oE=()=>(W_.j.document&&rE<0&&(rE="hidden"!==W_.j.document.visibilityState||W_.j.document.prerendering?1/0:0,addEventListener("visibilitychange",iE,!0),addEventListener("prerenderingchange",iE,!0)),{get firstHiddenTime(){return rE}}),cE=e=>{W_.j.document&&W_.j.document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},lE=[1800,3e3],dE=[.1,.25],uE=(e,t={})=>{((e,t={})=>{cE((()=>{const n=oE(),a=eE("FCP");let r;const i=tE("paint",(e=>{e.forEach((e=>{"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<n.firstHiddenTime&&(a.value=Math.max(e.startTime-J_(),0),a.entries.push(e),r(!0)))}))}));i&&(r=Z_(e,a,lE,t.reportAllChanges))}))})(aE((()=>{const n=eE("CLS",0);let a,r=0,i=[];const s=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=i[0],n=i[i.length-1];r&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,i.push(e)):(r=e.value,i=[e])}})),r>n.value&&(n.value=r,n.entries=i,a())},o=tE("layout-shift",s);o&&(a=Z_(e,n,dE,t.reportAllChanges),nE((()=>{s(o.takeRecords()),a(!0)})),setTimeout(a,0))})))},hE=[100,300];let pE=0,mE=1/0,fE=0;const gE=e=>{e.forEach((e=>{e.interactionId&&(mE=Math.min(mE,e.interactionId),fE=Math.max(fE,e.interactionId),pE=fE?(fE-mE)/7+1:0)}))};let bE;const vE=()=>{"interactionCount"in performance||bE||(bE=tE("event",gE,{type:"event",buffered:!0,durationThreshold:0}))},yE=[],_E=new Map;const EE=()=>(bE?pE:performance.interactionCount||0)-0,xE=[],AE=e=>{if(xE.forEach((t=>t(e))),!e.interactionId&&"first-input"!==e.entryType)return;const t=yE[yE.length-1],n=_E.get(e.interactionId);if(n||yE.length<10||t&&e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===(n.entries[0]&&n.entries[0].startTime)&&n.entries.push(e);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};_E.set(t.id,t),yE.push(t)}yE.sort(((e,t)=>t.latency-e.latency)),yE.length>10&&yE.splice(10).forEach((e=>_E.delete(e.id)))}},wE=e=>{const t=W_.j.requestIdleCallback||W_.j.setTimeout;let n=-1;return e=aE(e),W_.j.document&&"hidden"===W_.j.document.visibilityState?e():(n=t(e),nE(e)),n},SE=[200,500],IE=(e,t={})=>{"PerformanceEventTiming"in W_.j&&"interactionId"in PerformanceEventTiming.prototype&&cE((()=>{vE();const n=eE("INP");let a;const r=e=>{wE((()=>{e.forEach(AE);const t=(()=>{const e=Math.min(yE.length-1,Math.floor(EE()/50));return yE[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,a())}))},i=tE("event",r,{durationThreshold:null!=t.durationThreshold?t.durationThreshold:40});a=Z_(e,n,SE,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),nE((()=>{r(i.takeRecords()),a(!0)})))}))},NE=[2500,4e3],CE={},TE=[800,1800],jE=e=>{W_.j.document&&W_.j.document.prerendering?cE((()=>jE(e))):W_.j.document&&"complete"!==W_.j.document.readyState?addEventListener("load",(()=>jE(e)),!0):setTimeout(e,0)},LE={},RE={};let kE,OE,PE,DE,ME;function HE(e,t=!1){return GE("cls",e,UE,kE,t)}function zE(e,t){return QE(e,t),RE[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);tE(e,(t=>{VE(e,{entries:t})}),t)}(e),RE[e]=!0),KE(e,t)}function VE(e,t){const n=LE[e];if(n&&n.length)for(const a of n)try{a(t)}catch(t){$_.T&&Q_.vF.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${(0,Y_.qQ)(a)}\nError:`,t)}}function UE(){return uE((e=>{VE("cls",{metric:e}),kE=e}),{reportAllChanges:!0})}function FE(){return((e,t={})=>{cE((()=>{const n=oE(),a=eE("FID");let r;const i=e=>{e.startTime<n.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),r(!0))},s=e=>{e.forEach(i)},o=tE("first-input",s);r=Z_(e,a,hE,t.reportAllChanges),o&&nE(aE((()=>{s(o.takeRecords()),o.disconnect()})))}))})((e=>{VE("fid",{metric:e}),OE=e}))}function BE(){return((e,t={})=>{cE((()=>{const n=oE(),a=eE("LCP");let r;const i=e=>{t.reportAllChanges||(e=e.slice(-1)),e.forEach((e=>{e.startTime<n.firstHiddenTime&&(a.value=Math.max(e.startTime-J_(),0),a.entries=[e],r())}))},s=tE("largest-contentful-paint",i);if(s){r=Z_(e,a,NE,t.reportAllChanges);const n=aE((()=>{CE[a.id]||(i(s.takeRecords()),s.disconnect(),CE[a.id]=!0,r(!0))}));["keydown","click"].forEach((e=>{W_.j.document&&addEventListener(e,(()=>wE(n)),{once:!0,capture:!0})})),nE(n)}}))})((e=>{VE("lcp",{metric:e}),PE=e}),{reportAllChanges:!0})}function qE(){return((e,t={})=>{const n=eE("TTFB"),a=Z_(e,n,TE,t.reportAllChanges);jE((()=>{const e=X_();e&&(n.value=Math.max(e.responseStart-J_(),0),n.entries=[e],a(!0))}))})((e=>{VE("ttfb",{metric:e}),DE=e}))}function WE(){return IE((e=>{VE("inp",{metric:e}),ME=e}))}function GE(e,t,n,a,r=!1){let i;return QE(e,t),RE[e]||(i=n(),RE[e]=!0),a&&t({metric:a}),KE(e,t,r?i:void 0)}function QE(e,t){LE[e]=LE[e]||[],LE[e].push(t)}function KE(e,t,n){return()=>{n&&n();const a=LE[e];if(!a)return;const r=a.indexOf(t);-1!==r&&a.splice(r,1)}}var $E=o(68676);function YE(e){return"number"==typeof e&&isFinite(e)}function ZE(e,t,n,{...a}){const r=(0,V_.et)(e).start_timestamp;return r&&r>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),(0,$E.hb)(e,(()=>{const e=(0,$E.Uk)({startTime:t,...a});return e&&e.end(n),e}))}function XE(e){const t=(0,G_.KU)();if(!t)return;const{name:n,transaction:a,attributes:r,startTime:i}=e,{release:s,environment:o}=t.getOptions(),c=t.getIntegrationByName("Replay"),l=c&&c.getReplayId(),d=(0,G_.o5)(),u=d.getUser(),h=void 0!==u?u.email||u.id||u.ip_address:void 0;let p;try{p=d.getScopeData().contexts.profile.profile_id}catch(e){}const m={release:s,environment:o,user:h||void 0,profile_id:p||void 0,replay_id:l||void 0,transaction:a,"user_agent.original":W_.j.navigator&&W_.j.navigator.userAgent,...r};return(0,$E.Uk)({name:n,attributes:m,startTime:i,experimental:{standalone:!0}})}function JE(){return W_.j&&W_.j.addEventListener&&W_.j.performance}function ex(e){return e/1e3}function tx(){let e,t,n=0;if(!function(){try{return PerformanceObserver.supportedEntryTypes.includes("layout-shift")}catch(e){return!1}}())return;let a=!1;function r(){a||(a=!0,t&&function(e,t,n){$_.T&&Q_.vF.log(`Sending CLS span (${e})`);const a=ex((H_.k3||0)+(t&&t.startTime||0)),r=(0,G_.o5)().getScopeData().transactionName,i=t?(0,F_.Hd)(t.sources[0]&&t.sources[0].node):"Layout shift",s=(0,K_.Ce)({[U_.JD]:"auto.http.browser.cls",[U_.uT]:"ui.webvital.cls",[U_.jG]:t&&t.duration||0,"sentry.pageload.span_id":n}),o=XE({name:i,transaction:r,attributes:s,startTime:a});o&&(o.addEvent("cls",{[U_.Sn]:"",[U_.xc]:e}),o.end(a))}(n,e,t),i())}const i=HE((({metric:t})=>{const a=t.entries[t.entries.length-1];a&&(n=t.value,e=a)}),!0);nE((()=>{r()})),setTimeout((()=>{const e=(0,G_.KU)();if(!e)return;const n=e.on("startNavigationSpan",(()=>{r(),n&&n()})),a=(0,V_.Bk)(),i=a&&(0,V_.zU)(a),s=i&&(0,V_.et)(i);s&&"pageload"===s.op&&(t=i.spanContext().spanId)}),0)}let nx,ax,rx=0,ix={};function sx({recordClsStandaloneSpans:e}){const t=JE();if(t&&H_.k3){t.mark&&W_.j.performance.mark("sentry-tracing-init");const n=GE("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=ex(H_.k3),a=ex(t.startTime);ix.fid={value:e.value,unit:"millisecond"},ix["mark.fid"]={value:n+a,unit:"second"}}),FE,OE),a=function(e,t=!1){return GE("lcp",e,BE,PE,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ix.lcp={value:e.value,unit:"millisecond"},nx=t)}),!0),r=function(e){return GE("ttfb",e,qE,DE)}((({metric:e})=>{e.entries[e.entries.length-1]&&(ix.ttfb={value:e.value,unit:"millisecond"})})),i=e?tx():HE((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ix.cls={value:e.value,unit:""},ax=t)}),!0);return()=>{n(),a(),r(),i&&i()}}return()=>{}}function ox(e,t){const n=JE();if(!n||!n.getEntries||!H_.k3)return;const a=ex(H_.k3),r=n.getEntries(),{op:i,start_timestamp:s}=(0,V_.et)(e);if(r.slice(rx).forEach((t=>{const n=ex(t.startTime),r=ex(Math.max(0,t.duration));if(!("navigation"===i&&s&&a+n<s))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((a=>{cx(e,t,a,n)})),cx(e,t,"secureConnection",n,"TLS/SSL"),cx(e,t,"fetch",n,"cache"),cx(e,t,"domainLookup",n,"DNS"),function(e,t,n){const a=n+ex(t.requestStart),r=n+ex(t.responseEnd),i=n+ex(t.responseStart);t.responseEnd&&(ZE(e,a,r,{op:"browser.request",name:t.name,attributes:{[U_.JD]:"auto.ui.browser.metrics"}}),ZE(e,i,r,{op:"browser.response",name:t.name,attributes:{[U_.JD]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,t,a);break;case"mark":case"paint":case"measure":{!function(e,t,n,a,r){const i=X_(!1),s=ex(i?i.requestStart:0),o=r+Math.max(n,s),c=r+n,l=c+a,d={[U_.JD]:"auto.resource.browser.metrics"};o!==c&&(d["sentry.browser.measure_happened_before_request"]=!0,d["sentry.browser.measure_start_time"]=o);ZE(e,o,l,{name:t.name,op:t.entryType,attributes:d})}(e,t,n,r,a);const i=oE(),s=t.startTime<i.firstHiddenTime;"first-paint"===t.name&&s&&(ix.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&s&&(ix.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,a,r,i){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const s=(0,q_.Dl)(n),o={[U_.JD]:"auto.resource.browser.metrics"};lx(o,t,"transferSize","http.response_transfer_size"),lx(o,t,"encodedBodySize","http.response_content_length"),lx(o,t,"decodedBodySize","http.decoded_response_content_length");const c=t.deliveryType;null!=c&&(o["http.response_delivery_type"]=c);const l=t.renderBlockingStatus;l&&(o["resource.render_blocking_status"]=l);s.protocol&&(o["url.scheme"]=s.protocol.split(":").pop());s.host&&(o["server.address"]=s.host);o["url.same_origin"]=n.includes(W_.j.location.origin);const d=i+a,u=d+r;ZE(e,d,u,{name:n.replace(W_.j.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:o})}(e,t,t.name,n,r,a)}})),rx=Math.max(r.length-1,0),function(e){const t=W_.j.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),YE(n.rtt)&&(ix["connection.rtt"]={value:n.rtt,unit:"millisecond"}));YE(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`);YE(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===i){!function(e){const t=X_(!1);if(!t)return;const{responseStart:n,requestStart:a}=t;a<=n&&(e["ttfb.requestTime"]={value:n-a,unit:"millisecond"})}(ix);const n=ix["mark.fid"];n&&ix.fid&&(ZE(e,n.value,n.value+ex(ix.fid.value),{name:"first input delay",op:"ui.action",attributes:{[U_.JD]:"auto.ui.browser.metrics"}}),delete ix["mark.fid"]),"fcp"in ix&&t.recordClsOnPageloadSpan||delete ix.cls,Object.entries(ix).forEach((([e,t])=>{(0,B_.X)(e,t.value,t.unit)})),e.setAttribute("performance.timeOrigin",a),e.setAttribute("performance.activationStart",J_()),function(e){nx&&(nx.element&&e.setAttribute("lcp.element",(0,F_.Hd)(nx.element)),nx.id&&e.setAttribute("lcp.id",nx.id),nx.url&&e.setAttribute("lcp.url",nx.url.trim().slice(0,200)),null!=nx.loadTime&&e.setAttribute("lcp.loadTime",nx.loadTime),null!=nx.renderTime&&e.setAttribute("lcp.renderTime",nx.renderTime),e.setAttribute("lcp.size",nx.size));ax&&ax.sources&&ax.sources.forEach(((t,n)=>e.setAttribute(`cls.source.${n+1}`,(0,F_.Hd)(t.node))))}(e)}nx=void 0,ax=void 0,ix={}}function cx(e,t,n,a,r=n){const i=function(e){if("secureConnection"===e)return"connectEnd";if("fetch"===e)return"domainLookupStart";return`${e}End`}(n),s=t[i],o=t[`${n}Start`];o&&s&&ZE(e,a+ex(o),a+ex(s),{op:`browser.${r}`,name:t.name,attributes:{[U_.JD]:"auto.ui.browser.metrics"}})}function lx(e,t,n,a){const r=t[n];null!=r&&r<2147483647&&(e[a]=r)}const dx=[],ux=new Map;function hx(){if(JE()&&H_.k3){const e=GE("inp",(({metric:e})=>{if(null==e.value)return;const t=e.entries.find((t=>t.duration===e.value&&px[t.name]));if(!t)return;const{interactionId:n}=t,a=px[t.name],r=ex(H_.k3+t.startTime),i=ex(e.value),s=(0,V_.Bk)(),o=s?(0,V_.zU)(s):void 0,c=(null!=n?ux.get(n):void 0)||o,l=c?(0,V_.et)(c).description:(0,G_.o5)().getScopeData().transactionName,d=XE({name:(0,F_.Hd)(t.target),transaction:l,attributes:(0,K_.Ce)({[U_.JD]:"auto.http.browser.inp",[U_.uT]:`ui.interaction.${a}`,[U_.jG]:t.duration}),startTime:r});d&&(d.addEvent("inp",{[U_.Sn]:"millisecond",[U_.xc]:e.value}),d.end(r+i))}),WE,ME);return()=>{e()}}return()=>{}}const px={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};var mx=o(4004),fx=o(85402),gx=o(44165),bx=o(5285),vx=o(25895),yx=o(39399);const _x={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function Ex(e,t={}){const n=new Map;let a,r=!1,i="externalFinish",s=!t.disableAutoFinish;const o=[],{idleTimeout:c=_x.idleTimeout,finalTimeout:l=_x.finalTimeout,childSpanTimeout:d=_x.childSpanTimeout,beforeSpanEnd:u}=t,h=(0,G_.KU)();if(!h||!(0,gx.w)())return new vx.w;const p=(0,G_.o5)(),m=(0,V_.Bk)(),f=function(e){const t=(0,$E.Uk)(e);return(0,bx.r)((0,G_.o5)(),t),fx.T&&Q_.vF.log("[Tracing] Started span is an idle span"),t}(e);function g(){a&&(clearTimeout(a),a=void 0)}function b(e){g(),a=setTimeout((()=>{!r&&0===n.size&&s&&(i="idleTimeout",f.end(e))}),c)}function v(e){a=setTimeout((()=>{!r&&s&&(i="heartbeatFailed",f.end(e))}),d)}function y(e){r=!0,n.clear(),o.forEach((e=>e())),(0,bx.r)(p,m);const t=(0,V_.et)(f),{start_timestamp:a}=t;if(!a)return;(t.data||{})[U_.fs]||f.setAttribute(U_.fs,i),Q_.vF.log(`[Tracing] Idle span "${t.op}" finished`);const s=(0,V_.xO)(f).filter((e=>e!==f));let d=0;s.forEach((t=>{t.isRecording()&&(t.setStatus({code:yx.TJ,message:"cancelled"}),t.end(e),fx.T&&Q_.vF.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=(0,V_.et)(t),{timestamp:a=0,start_timestamp:r=0}=n,i=r<=e,s=a-r<=(l+c)/1e3;if(fx.T){const e=JSON.stringify(t,void 0,2);i?s||Q_.vF.log("[Tracing] Discarding span since it finished after idle span final timeout",e):Q_.vF.log("[Tracing] Discarding span since it happened after idle span was finished",e)}s&&i||((0,V_.VS)(f,t),d++)})),d>0&&f.setAttribute("sentry.idle_span_discarded_spans",d)}return f.end=new Proxy(f.end,{apply(e,t,n){u&&u(f);const[a,...r]=n,i=a||(0,H_.zf)(),s=(0,V_.cI)(i),o=(0,V_.xO)(f).filter((e=>e!==f));if(!o.length)return y(s),Reflect.apply(e,t,[s,...r]);const c=o.map((e=>(0,V_.et)(e).timestamp)).filter((e=>!!e)),d=c.length?Math.max(...c):void 0,h=(0,V_.et)(f).start_timestamp,p=Math.min(h?h+l/1e3:1/0,Math.max(h||-1/0,Math.min(s,d||1/0)));return y(p),Reflect.apply(e,t,[p,...r])}}),o.push(h.on("spanStart",(e=>{if(r||e===f||(0,V_.et)(e).timestamp)return;var t;(0,V_.xO)(f).includes(e)&&(t=e.spanContext().spanId,g(),n.set(t,!0),v((0,H_.zf)()+d/1e3))}))),o.push(h.on("spanEnd",(e=>{var t;r||(t=e.spanContext().spanId,n.has(t)&&n.delete(t),0===n.size&&b((0,H_.zf)()+c/1e3))}))),o.push(h.on("idleSpanEnableAutoFinish",(e=>{e===f&&(s=!0,b(),n.size&&v())}))),t.disableAutoFinish||b(),setTimeout((()=>{r||(f.setStatus({code:yx.TJ,message:"deadline_exceeded"}),i="finalTimeout",f.end())}),l),f}var xx=o(7347),Ax=o(41115);let wx=!1;function Sx(){const e=(0,V_.Bk)(),t=e&&(0,V_.zU)(e);if(t){const e="internal_error";fx.T&&Q_.vF.log(`[Tracing] Root span: ${e} -> Global error occurred`),t.setStatus({code:yx.TJ,message:e})}}Sx.tag="sentry_tracingErrorCallback";var Ix=o(26327),Nx=o(33414),Cx=o(97470),Tx=o(62571),jx=o(54536),Lx=o(78027);var Rx=o(74772),kx=o(27972),Ox=o(82186),Px=o(7330),Dx=o(86928),Mx=o(63560),Hx=o(18611);function zx(e={}){const t=(0,G_.KU)();if(!(0,Hx.Ol)()||!t)return{};const n=(0,Mx.E)(),a=(0,Dx.h)(n);if(a.getTraceData)return a.getTraceData(e);const r=(0,G_.o5)(),i=e.span||(0,V_.Bk)(),s=i?(0,V_.Qh)(i):function(e){const{traceId:t,sampled:n,spanId:a}=e.getPropagationContext();return(0,Nx.TC)(t,a,n)}(r),o=i?(0,Cx.k1)(i):(0,Cx.ao)(t,r),c=(0,Px.De)(o);return Nx.MI.test(s)?{"sentry-trace":s,baggage:c}:(Q_.vF.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function Vx(e,t,n,a,r="auto.http.browser"){if(!e.fetchData)return;const i=(0,gx.w)()&&t(e.fetchData.url);if(e.endTimestamp&&i){const t=e.fetchData.__span;if(!t)return;const n=a[t];return void(n&&(!function(e,t){if(t.response){(0,yx.N8)(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:yx.TJ,message:"internal_error"});e.end()}(n,e),delete a[t]))}const{method:s,url:o}=e.fetchData,c=function(e){try{return new URL(e).href}catch(e){return}}(o),l=c?(0,q_.Dl)(c).host:void 0,d=!!(0,V_.Bk)(),u=i&&d?(0,$E.Uk)({name:`${s} ${o}`,attributes:{url:o,type:"fetch","http.method":s,"http.url":c,"server.address":l,[U_.JD]:r,[U_.uT]:"http.client"}}):new vx.w;if(e.fetchData.__span=u.spanContext().spanId,a[u.spanContext().spanId]=u,n(e.fetchData.url)){const t=e.args[0],n=e.args[1]||{},a=Ux(t,n,(0,gx.w)()&&d?u:void 0);a&&(e.args[1]=n,n.headers=a)}return u}function Ux(e,t,n){const a=zx({span:n}),r=a["sentry-trace"],i=a.baggage;if(!r)return;const s=t.headers||(function(e){return"undefined"!=typeof Request&&(0,Ox.tH)(e,Request)}(e)?e.headers:void 0);if(s){if(function(e){return"undefined"!=typeof Headers&&(0,Ox.tH)(e,Headers)}(s)){const e=new Headers(s);if(e.set("sentry-trace",r),i){const t=e.get("baggage");if(t){const n=Fx(t);e.set("baggage",n?`${n},${i}`:i)}else e.set("baggage",i)}return e}if(Array.isArray(s)){const e=[...s.filter((e=>!(Array.isArray(e)&&"sentry-trace"===e[0]))).map((e=>{if(Array.isArray(e)&&"baggage"===e[0]&&"string"==typeof e[1]){const[t,n,...a]=e;return[t,Fx(n),...a]}return e})),["sentry-trace",r]];return i&&e.push(["baggage",i]),e}{const e="baggage"in s?s.baggage:void 0;let t=[];return Array.isArray(e)?t=e.map((e=>"string"==typeof e?Fx(e):e)).filter((e=>""===e)):e&&t.push(Fx(e)),i&&t.push(i),{...s,"sentry-trace":r,baggage:t.length>0?t.join(","):void 0}}}return{...a}}function Fx(e){return e.split(",").filter((e=>!e.split("=")[0].startsWith(Px.sv))).join(",")}var Bx=o(95627);const qx=new WeakMap,Wx=new Map,Gx={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Qx(e,t){const{traceFetch:n,traceXHR:a,trackFetchStreamPerformance:r,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:o}={traceFetch:Gx.traceFetch,traceXHR:Gx.traceXHR,trackFetchStreamPerformance:Gx.trackFetchStreamPerformance,...t},c="function"==typeof i?i:e=>!0,l=e=>function(e,t){const n=Lx.jf.location&&Lx.jf.location.href;if(n){let a,r;try{a=new URL(e,n),r=new URL(n).origin}catch(e){return!1}const i=a.origin===r;return t?(0,Bx.Xr)(a.toString(),t)||i&&(0,Bx.Xr)(a.pathname,t):i}{const n=!!e.match(/^\/(?!\/)/);return t?(0,Bx.Xr)(e,t):n}}(e,o),d={};n&&(e.addEventProcessor((e=>("transaction"===e.type&&e.spans&&e.spans.forEach((e=>{if("http.client"===e.op){const t=Wx.get(e.span_id);t&&(e.timestamp=t/1e3,Wx.delete(e.span_id))}})),e))),r&&(0,kx.B$)((e=>{if(e.response){const t=qx.get(e.response);t&&e.endTimestamp&&Wx.set(t,e.endTimestamp)}})),(0,kx.ur)((e=>{const t=Vx(e,c,l,d);if(e.response&&e.fetchData.__span&&qx.set(e.response,e.fetchData.__span),t){const n=Yx(e.fetchData.url),a=n?(0,q_.Dl)(n).host:void 0;t.setAttributes({"http.url":n,"server.address":a})}s&&t&&Kx(t)}))),a&&(0,Rx.Mn)((e=>{const t=function(e,t,n,a){const r=e.xhr,i=r&&r[Rx.Er];if(!r||r.__sentry_own_request__||!i)return;const s=(0,gx.w)()&&t(i.url);if(e.endTimestamp&&s){const e=r.__sentry_xhr_span_id__;if(!e)return;const t=a[e];return void(t&&void 0!==i.status_code&&((0,yx.N8)(t,i.status_code),t.end(),delete a[e]))}const o=Yx(i.url),c=o?(0,q_.Dl)(o).host:void 0,l=!!(0,V_.Bk)(),d=s&&l?(0,$E.Uk)({name:`${i.method} ${i.url}`,attributes:{type:"xhr","http.method":i.method,"http.url":o,url:i.url,"server.address":c,[U_.JD]:"auto.http.browser",[U_.uT]:"http.client"}}):new vx.w;r.__sentry_xhr_span_id__=d.spanContext().spanId,a[r.__sentry_xhr_span_id__]=d,n(i.url)&&function(e,t){const{"sentry-trace":n,baggage:a}=zx({span:t});n&&function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader("baggage",n)}catch(e){}}(e,n,a)}(r,(0,gx.w)()&&l?d:void 0);return d}(e,c,l,d);s&&t&&Kx(t)}))}function Kx(e){const{url:t}=(0,V_.et)(e).data||{};if(!t||"string"!=typeof t)return;const n=zE("resource",(({entries:a})=>{a.forEach((a=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(a)&&a.name.endsWith(t)){const t=function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",a="";for(const r of e){if("/"===r){[t,n]=e.split("/");break}if(!isNaN(Number(r))){t="h"===a?"http":a,n=e.split(a)[1];break}a+=r}a===e&&(t=a);return{name:t,version:n}}(e.nextHopProtocol),a=[];if(a.push(["network.protocol.version",n],["network.protocol.name",t]),!H_.k3)return a;return[...a,["http.request.redirect_start",$x(e.redirectStart)],["http.request.fetch_start",$x(e.fetchStart)],["http.request.domain_lookup_start",$x(e.domainLookupStart)],["http.request.domain_lookup_end",$x(e.domainLookupEnd)],["http.request.connect_start",$x(e.connectStart)],["http.request.secure_connection_start",$x(e.secureConnectionStart)],["http.request.connection_end",$x(e.connectEnd)],["http.request.request_start",$x(e.requestStart)],["http.request.response_start",$x(e.responseStart)],["http.request.response_end",$x(e.responseEnd)]]}(a);t.forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function $x(e=0){return((H_.k3||performance.timeOrigin)+e)/1e3}function Yx(e){try{return new URL(e,Lx.jf.location.origin).href}catch(e){return}}const Zx={..._x,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...Gx},Xx=(e={})=>{wx||(wx=!0,(0,xx.L)(Sx),(0,Ax.r)(Sx));const{enableInp:t,enableLongTask:n,enableLongAnimationFrame:a,_experiments:{enableInteractions:r,enableStandaloneClsSpans:i},beforeStartSpan:s,idleTimeout:o,finalTimeout:c,childSpanTimeout:l,markBackgroundSpan:d,traceFetch:u,traceXHR:h,trackFetchStreamPerformance:p,shouldCreateSpanForRequest:m,enableHTTPTimings:f,instrumentPageLoad:g,instrumentNavigation:b}={...Zx,...e},v=sx({recordClsStandaloneSpans:i||!1});t&&hx(),a&&Ix.O.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver((e=>{const t=(0,V_.Bk)();if(t)for(const n of e.getEntries()){if(!n.scripts[0])continue;const e=ex(H_.k3+n.startTime),{start_timestamp:a,op:r}=(0,V_.et)(t);if("navigation"===r&&a&&e<a)continue;const i=ex(n.duration),s={[U_.JD]:"auto.ui.browser.metrics"},o=n.scripts[0],{invoker:c,invokerType:l,sourceURL:d,sourceFunctionName:u,sourceCharPosition:h}=o;s["browser.script.invoker"]=c,s["browser.script.invoker_type"]=l,d&&(s["code.filepath"]=d),u&&(s["code.function"]=u),-1!==h&&(s["browser.script.source_char_position"]=h),ZE(t,e,e+i,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:s})}})).observe({type:"long-animation-frame",buffered:!0}):n&&zE("longtask",(({entries:e})=>{const t=(0,V_.Bk)();if(!t)return;const{op:n,start_timestamp:a}=(0,V_.et)(t);for(const r of e){const e=ex(H_.k3+r.startTime),i=ex(r.duration);"navigation"===n&&a&&e<a||ZE(t,e,e+i,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[U_.JD]:"auto.ui.browser.metrics"}})}})),r&&zE("event",(({entries:e})=>{const t=(0,V_.Bk)();if(t)for(const n of e)if("click"===n.name){const e=ex(H_.k3+n.startTime),a=ex(n.duration),r={name:(0,F_.Hd)(n.target),op:`ui.interaction.${n.name}`,startTime:e,attributes:{[U_.JD]:"auto.ui.browser.metrics"}},i=(0,F_.xE)(n.target);i&&(r.attributes["ui.component_name"]=i),ZE(t,e,e+a,r)}}));const y={name:void 0,source:void 0};function _(e,t){const n="pageload"===t.op,a=s?s(t):t,r=a.attributes||{};t.name!==a.name&&(r[U_.i_]="custom",a.attributes=r),y.name=a.name,y.source=r[U_.i_];const d=Ex(a,{idleTimeout:o,finalTimeout:c,childSpanTimeout:l,disableAutoFinish:n,beforeSpanEnd:e=>{v(),ox(e,{recordClsOnPageloadSpan:!i})}});function u(){["interactive","complete"].includes(Lx.jf.document.readyState)&&e.emit("idleSpanEnableAutoFinish",d)}return n&&Lx.jf.document&&(Lx.jf.document.addEventListener("readystatechange",(()=>{u()})),u()),d}return{name:"BrowserTracing",afterAllSetup(e){let n,a=Lx.jf.location&&Lx.jf.location.href;function i(){n&&!(0,V_.et)(n).timestamp&&(jx.T&&Q_.vF.log(`[Tracing] Finishing current active span with op: ${(0,V_.et)(n).op}`),n.end())}e.on("startNavigationSpan",(t=>{(0,G_.KU)()===e&&(i(),n=_(e,{op:"navigation",...t}))})),e.on("startPageLoadSpan",((t,a={})=>{if((0,G_.KU)()!==e)return;i();const r=a.sentryTrace||eA("sentry-trace"),s=a.baggage||eA("baggage"),o=(0,Nx.kM)(r,s);(0,G_.o5)().setPropagationContext(o),n=_(e,{op:"pageload",...t})})),e.on("spanEnd",(e=>{const t=(0,V_.et)(e).op;if(e!==(0,V_.zU)(e)||"navigation"!==t&&"pageload"!==t)return;const n=(0,G_.o5)(),a=n.getPropagationContext();n.setPropagationContext({...a,sampled:void 0!==a.sampled?a.sampled:(0,V_.pK)(e),dsc:a.dsc||(0,Cx.k1)(e)})})),Lx.jf.location&&(g&&Jx(e,{name:Lx.jf.location.pathname,startTime:H_.k3?H_.k3/1e3:void 0,attributes:{[U_.i_]:"url",[U_.JD]:"auto.pageload.browser"}}),b&&(0,mx._)((({to:t,from:n})=>{void 0===n&&a&&-1!==a.indexOf(t)?a=void 0:n!==t&&(a=void 0,function(e,t){(0,G_.rm)().setPropagationContext({traceId:(0,Tx.el)()}),(0,G_.o5)().setPropagationContext({traceId:(0,Tx.el)()}),e.emit("startNavigationSpan",t),(0,G_.o5)().setTransactionName(t.name);const n=(0,V_.Bk)();n&&(0,V_.et)(n).op}(e,{name:Lx.jf.location.pathname,attributes:{[U_.i_]:"url",[U_.JD]:"auto.navigation.browser"}}))}))),d&&(Lx.jf&&Lx.jf.document?Lx.jf.document.addEventListener("visibilitychange",(()=>{const e=(0,V_.Bk)();if(!e)return;const t=(0,V_.zU)(e);if(Lx.jf.document.hidden&&t){const e="cancelled",{op:n,status:a}=(0,V_.et)(t);jx.T&&Q_.vF.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),a||t.setStatus({code:yx.TJ,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}})):jx.T&&Q_.vF.warn("[Tracing] Could not set up background tab detection due to lack of global document")),r&&function(e,t,n,a){let r;const i=()=>{const i="ui.action.click",s=(0,V_.Bk)(),o=s&&(0,V_.zU)(s);if(o){const e=(0,V_.et)(o).op;if(["navigation","pageload"].includes(e))return void(jx.T&&Q_.vF.warn(`[Tracing] Did not create ${i} span because a pageload or navigation span is in progress.`))}r&&(r.setAttribute(U_.fs,"interactionInterrupted"),r.end(),r=void 0),a.name?r=Ex({name:a.name,op:i,attributes:{[U_.i_]:a.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n}):jx.T&&Q_.vF.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`)};Lx.jf.document&&addEventListener("click",i,{once:!1,capture:!0})}(o,c,l,y),t&&function(){const e=({entries:e})=>{const t=(0,V_.Bk)(),n=t&&(0,V_.zU)(t);e.forEach((e=>{if(!function(e){return"duration"in e}(e)||!n)return;const t=e.interactionId;if(null!=t&&!ux.has(t)){if(dx.length>10){const e=dx.shift();ux.delete(e)}dx.push(t),ux.set(t,n)}}))};zE("event",e),zE("first-input",e)}(),Qx(e,{traceFetch:u,traceXHR:h,trackFetchStreamPerformance:p,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:m,enableHTTPTimings:f})}}};function Jx(e,t,n){e.emit("startPageLoadSpan",t,n),(0,G_.o5)().setTransactionName(t.name);const a=(0,V_.Bk)();return"pageload"===(a&&(0,V_.et)(a).op)?a:void 0}function eA(e){const t=(0,F_.NX)(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}o(31035);let tA,nA,aA,rA,iA,sA=!1;const oA=new WeakSet;function cA(e){return function(e,t){const n=Xx({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:a,useLocation:r,useNavigationType:i,createRoutesFromChildren:s,matchRoutes:o,stripBasename:c,instrumentPageLoad:l=!0,instrumentNavigation:d=!0}=e;return{...n,setup(){tA=a,nA=r,aA=i,iA=o,rA=s,sA=c||!1},afterAllSetup(e){n.afterAllSetup(e);const a=Lx.jf&&Lx.jf.location&&Lx.jf.location.pathname;l&&a&&Jx(e,{name:a,attributes:{[U_.i_]:"url",[U_.uT]:"pageload",[U_.JD]:`auto.pageload.react.reactrouter_v${t}`}}),d&&oA.add(e)}}}(e,"6")}const lA={version:"1.1.64.510",date:new Date(2021,6,20)};function dA(){if((0,wb.My)()!==Ma.m.Desktop)return!0;const e=function(){const e=window.navigator.userAgent.match(wb.aS);return e?.groups?.version??null}();if(!e)return!0;const t=function(e){const t=lA.version.split(".")[2]??"",[,n="",a=""]=e.split(".");if("1"!==n)return new Date;const r=parseInt(t,10),i=parseInt(a,10);if(isNaN(i))return new Date;const s=i-r,o=new Date(lA.date.getTime());return o.setDate(o.getDate()+14*s),o}(e);return n=t,((new Date).getTime()-n.getTime())<0;var n}const uA=e=>{const t=(e.transaction||"").replace(/^\/intl-[A-Za-z]{2}/i,"/");return e.transaction=t,e};var hA=o(24522),pA=o(43288),mA=o(23504);var fA=o(9070),gA=o(97992),bA=o(37813),vA=o(3074),yA=o.n(vA);function _A(){return yA().create().hex.replace(/-/g,"").substr(0,16)}const EA=(e,t)=>{const n=e.url.searchParams.get("dlsi")??_A(),a=navigator.userAgent,r={link:e.url.toString(),entity_uri:e.uri.toURI(),source:a,deeplink_session_id:n};t.send((0,bA.N)(r))},xA=e=>e.searchParams.has("si")||"1"===e.searchParams.get("go")||"1"===e.searchParams.get("wta_deep_link"),AA=e=>xA(e)&&!(e=>e.searchParams.has("_branch_match_id")||e.searchParams.has("_branch_referrer")||e.searchParams.has("link_click_id"))(e);function wA(e){const t=function(e){const t="https://open.spotify.com/",n="spotify://";return e.startsWith(n)?e.replace(n,t):e.startsWith("spotify:")?(e.replaceAll(":","/"),e.replace("spotify/",t)):e}(e),n=(0,J.o_h)(t,{parseUnknown:!0});if(!n)return null;const a=function(e){try{return new URL(e).search}catch{return""}}(t),r=new URLSearchParams(a),i=new URL(n.toURL());return r.forEach(((e,t)=>{i.searchParams.set(t,e)})),{url:i,uri:n}}async function SA(e,t){const{uri:n,url:a}=t,r=a.searchParams.get("pt"),i=a.searchParams.get("prid"),s=n.toString();if(r){const t=e.resolve(fA.Ki);e.resolve(gA.O).claimPermissions(s,r),await t.resync(s)}i&&await async function(e,t,n){await e.build().withHost(Qo.p1).withMethod("POST").withPath(`/shared?playlistId=${t}&sharedEntityUri=${n}`).withEndpointIdentifier("/shared").withoutMarket().withResponseType("text").send()}(Go.n.getInstance(),s,i)}var IA=o(333);function NA(e){return function(t){var n=t.dispatch,a=t.getState;return function(t){return function(r){return"function"==typeof r?r(n,a,e):t(r)}}}}var CA=NA();CA.withExtraArgument=NA;const TA=CA;var jA=o(47537),LA=o(68475),RA=o(84798),kA=o(27860);const OA=(e,t,n)=>a=>r=>async i=>{const s=r(i);switch(i.type){case Nd.QN.ADS_ENABLED:{const r={create:e=>{a.dispatch((0,LA.PS)(e))},canShow:()=>{const e=t.location.pathname,r=n.getState(),i="/"===e,s=(0,J.o_h)(e)?.type===J.NQG.PLAYLIST_V2,o=!i&&!(0,Dc.A3)(r)&&!(0,kA.Qv)(r);if(s){const t=a.getState().ads;return!(0,RA.$)(t.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"),e)&&o}return o},isActive:()=>Boolean(a.getState().ads.billboard?.isOpen),minimize:()=>{a.dispatch((0,LA.lb)())},destroy:()=>(a.dispatch((0,LA.c3)()),Promise.resolve())};await e.enable(r);break}case Nd.QN.ADS_DISABLED:await e.disable();break;case LA.QN.MINIMIZE_BILLBOARD_AD_VIEW:if(a.getState().ads.sponsoredPlaylist.isVisible)return a.dispatch((0,LA.c3)()),Promise.resolve();e.minimize();break;case LA.QN.CLICK_BILLBOARD_AD_VIEW:e.adClick();break;case LA.QN.IMAGE_LOADED_BILLBOARD_AD_VIEW:e.onRender();break;case LA.QN.ERROR_BILLBOARD_AD_VIEW:e.onError();break;case LA.QN.FINISH_BILLBOARD_AD_VIEW:e.onFinish()}return s};var PA=o(61434);const DA=e=>e instanceof Error?e:"string"==typeof e?new Error(e):new Error("An unknown error occurred"),MA=e=>t=>n=>async a=>{const{embeddedAdManager:r,adEventLogger:i,embeddedAdErrorLogger:s}=e,o=n(a),{canShowAd:c,ad:l,isOpen:d}=t.getState()?.ads.embeddedAd??{},u=!!l;switch(a.type){case Nd.QN.ADS_ENABLED:await r.enable((e=>t.dispatch((0,PA.SL)(e))),(e=>(e=>{i.log("errored",l,{event_reason:`Error enabling slot ${e.message}`}),s.log("error",l,{error_message:`Error enabling slot ${e.message}`})})(DA(e))));break;case Nd.QN.ADS_DISABLED:r.disable();break;case PA.bp.TRY_FETCH:if(!u&&c)try{await r.fetchSlot()}catch(e){t.dispatch((0,PA.T)(`Failed to fetch: ${DA(e).message}`))}break;case PA.bp.FETCH_SUCCESS:c&&t.dispatch((0,PA.Nz)());break;case PA.bp.CAN_SHOW_EMBEDDED_AD_VIEW:!0!==a.payload||d||t.dispatch((0,PA.Nz)());break;case PA.bp.TRIGGER_SLOT:if(u&&c)try{await r.triggerSlot()}catch(e){t.dispatch((0,PA.T)(`Failed to trigger slot: ${DA(e).message}`))}break;case PA.bp.SLOT_INTERACTION_ERROR:i.log("errored",l,{event_reason:a.payload.errorMessage}),s.log("error",l,{error_message:a.payload.errorMessage})}return o};var HA=o(36823);function zA(e){return t=>t=>async n=>{const a=t(n);switch(n.type){case Nd.QN.ADS_ENABLED:break;case Nd.QN.ADS_DISABLED:case HA.Ws:e.disableLeaderboard();break;case HA.KK:e.setLeaderboardElement(n.element),e.enableLeaderboard();break;case HA.a4:e.onNavigationChanged()}return a}}const VA="SET_AUDIO_AD_INFO";var UA=o(46125),FA=o(93331);function BA(e,t){return t?{enableAudioIfNotAlreadyEnabled(){if(!t.getEnabled())return t.enable((t=>e.dispatch({type:VA,info:t})))},disableAudioIfNotAlreadyDisabled(){if(t.getEnabled())return t.disable()}}:{}}function qA(e,t,n){return t.getEvents().addListener(FA._.VOLUME,(({data:{volume:e,isLocal:t}})=>{t&&UA.adsCoreConnector.logAudioVolume(e)})),t=>{const{enableAudioIfNotAlreadyEnabled:a,disableAudioIfNotAlreadyDisabled:r}=BA(t,e);return t=>async i=>{const s=t(i);switch(i.type){case Nd.QN.ADS_ENABLED:a?.();break;case Nd.QN.ADS_DISABLED:r?.();break;case Nd.QN.LOG_NOW_PLAYING_AD_CLICK:(0,kA.qc)(n.getState())&&e.logClick(i.eventReason,i.eventSource)}return s}}}var WA=o(71991),GA=o(18160),QA=o(31559);const KA=e=>t=>n=>async a=>{const r=n(a),i=t.getState();switch(a.type){case GA.QN.HPTO_CONTAINER_LOAD:e.subscribeToPreview((e=>{t.dispatch((0,GA.DZ)(e)),t.dispatch((0,GA.zi)())})),e.onRefresh((async()=>{const n=await e.fetchTemplate();t.dispatch((0,GA.bK)(n)),t.dispatch((0,GA.Yg)())}));break;case WA.R:t.dispatch((0,GA.bK)(a.template)),t.dispatch((0,GA.Yg)());break;case GA.QN.HPTO_CONTAINER_MOUNTED:{const n=await e.fetchTemplate();t.dispatch((0,GA.bK)(n)),t.dispatch((0,GA.Yg)());break}case GA.QN.FETCH_CREATIVE:if(i.ads.hpto.preview)break;if(i.ads.hpto.creativeFetchingState===QA.C.FETCHING)break;if(!i.ads.hpto.template)break;if(!i.ads.hpto.hptoContainerMounted)break;if(i.ads.root.isPremium&&i.ads.root.isHptoHidden)break;try{t.dispatch((0,GA.QL)()),await e.fetchCreative(i.ads.hpto.template).then((e=>{t.dispatch((0,GA.Q5)(e))}))}catch(e){console.error(e),t.dispatch((0,GA.Fi)())}break;case GA.t3:e.viewRendered(a.element);break;case GA.QN.HPTO_COMPONENT_NEW_AD_RENDERED:e.logViewed();break;case GA.QN.HPTO_COMPONENT_UNMOUNTED:e.viewDestroyed();break;case Nd.QN.ADS_POST_HIDE_HPTO:e.logEvent("event_collapsed");break;case GA.Q6:e.logEvent(a.event,a.context);break;case GA.$4:e.logErrorEvent(a.error);break;case GA.QN.DEBUG_FORCE_REFRESH_HPTO:{const n=await e.fetchTemplate();t.dispatch((0,GA.bK)(n)),t.dispatch((0,GA.Yg)());break}}return r};var $A=o(87428);function YA(e){return t=>n=>async a=>{const r=n(a);switch(a.type){case Nd.QN.ADS_ENABLED:e.enable((e=>{t.dispatch((0,$A.Lc)(e))}));break;case Nd.QN.ADS_DISABLED:e.disable();break;case $A.Uy:try{const n=await e.requestSponsoredPlaylists();t.dispatch((0,$A.lj)(n))}catch(e){t.dispatch((0,$A.Ei)(e instanceof Error?e:new Error("Unknown error object")))}break;case $A.nk:try{const n=a.playlistUri,r=await e.requestSponsoredPlaylistAd(n);t.dispatch((0,$A.DD)(n,r))}catch(e){t.dispatch((0,$A.wz)(e instanceof Error?e:new Error("Unknown error object")))}break;case $A.zB:e.logEvent(a.message);break;case $A.zc:t.dispatch((0,$A.Lc)(null))}return r}}function ZA(e){if(!e)return;const t=e.getElementsByTagName("video"),n=function(e,t){for(const n of e)if(t(n))return n}(t,(e=>"none"!==getComputedStyle(e).display));if(n)return n;const a=t?.[0];return a?(r=a,"none"===getComputedStyle(r).display&&(r.style.display="inline"),a):void 0;var r}const XA=(e,t)=>{if(!t)return;if(!(null===e?.ads?.vto?.info||t.isPaused)){const e=document.getElementsByClassName("VideoPlayer__container")[0];ZA(e)?.play()}};var JA=o(22637),ew=o(17950);const tw=(e,t)=>{e.getState().ads.vto.isMinimized||(e.dispatch((0,Ng.Oc)()),t.logEvent(JA.ee.COLLAPSED))};function nw(e,t,n){return n?{enableVideoTakeoverIfNotAlreadyEnabled(){if(n.getEnabled())return;const a={onCreated(){e.dispatch((0,Ng.Pu)())},onInfo(t){e.dispatch((0,Ng.gW)(t))},onFirstReady(){XA(e.getState(),t.getState())},onStarted(){},onEnded:()=>{e.dispatch((0,Ng.gW)(null)),e.dispatch((0,Ng.W_)()),e.dispatch((0,ew.R)(H.Kz.none))}};return n.enable(a)},disableVideoTakeoverIfNotAlreadyDisabled(){if(n.getEnabled())return n.disable()}}:{}}const aw=(e,t)=>n=>{const{enableVideoTakeoverIfNotAlreadyEnabled:a,disableVideoTakeoverIfNotAlreadyDisabled:r}=nw(n,t,e);return i=>async s=>{const o=i(s);switch(s.type){case Nd.QN.ADS_ENABLED:await(a?.());break;case Nd.QN.ADS_DISABLED:await(r?.());break;case Ng.QN.VTO_LOG_EVENT:e.logEvent(s.event,s.eventReason,s.eventSource),s.event===JA.ee.CLICKED&&tw(n,e);break;case Nd.QN.LOG_NOW_PLAYING_AD_CLICK:(0,kA.Tv)(t.getState())&&(e.logEvent(JA.ee.CLICKED,s.eventReason,s.eventSource),tw(n,e));break;case Ng.QN.VTO_NAVIGATION_CHANGE:tw(n,e);break;case Ng.QN.MAXIMIZE_VIDEO_AD_VIEW:case Ng.QN.MINIMIZE_VIDEO_AD_VIEW:XA(n.getState(),t.getState())}return o}},rw=["/","/premium","/site/:id/:path?","/presents/:id/:path?"],iw=e=>0===e.length?e=>!1:t=>e.some((e=>(0,Y.B6)(e,t))),sw="ui.hide_hpto";class ow{constructor(e,t){this.adsCoreConnector=e,this.prefs=t}requestPreviewAd(e){return this.adsCoreConnector.getPreviewAd(e)}subscribeToAdsProductState(e){return this.adsCoreConnector.subscribeToProductState("ads",e)}subscribeToPremiumState(e){return this.adsCoreConnector.subscribeToProductState("catalogue",e)}fakeSubscribe(){}subscribeToHpto(e){const t=sw;return this.prefs.sub({key:t},(({entries:n})=>e({[t]:!!n[t]?.bool})))}async hideHpto(){const e=sw;await this.prefs.set({entries:{[e]:{bool:!0}}})}}class cw{requestPreviewAd(){return Promise.resolve({})}subscribeToAdsProductState(){return{cancel:()=>{}}}subscribeToPremiumState(){return{cancel:()=>{}}}subscribeToHpto(){return{cancel:()=>{}}}async hideHpto(){}fakeSubscribe(e,t){e(t)}}const lw={subscription:void 0};function dw(e){const t=e?.item??void 0;return(0,P.p)(t)?"audio"===t.mediaType||"mixed"===t.mediaType:!!(0,U.N)(t)&&t.isPodcastAd}const uw=({store:e,adManagers:t,isDesktop:n,playerAPI:a})=>({adsEnabled:r=e.getState().ads.root.adsEnabled,playerState:i=a.getState(),isPodcastContent:s=dw(i)}={})=>{r!==e.getState().ads.root.adsEnabled&&e.dispatch((r?Nd.s3:Nd.Nb)());const{enableVideoTakeoverIfNotAlreadyEnabled:o,disableVideoTakeoverIfNotAlreadyDisabled:c}=nw(e,a,t?.vto.manager),{enableAudioIfNotAlreadyEnabled:l,disableAudioIfNotAlreadyDisabled:d}=BA(e,t?.audio);return Promise.all(n&&(s||r)?[o?.(),l?.()]:[c?.(),d?.()])};function hw({rootApi:e,store:t,adManagers:n,isDesktop:a,playerAPI:r,toggleAdManagers:i=uw({store:t,adManagers:n,isDesktop:a,playerAPI:r})}){async function s({playerState:e=r.getState(),isPodcastContent:t=dw(e)}={}){return await i({playerState:e,isPodcastContent:t}),function(...[{ads:n}]){return i({adsEnabled:"1"===n,playerState:e,isPodcastContent:t})}}let o=dw(r.getState());return{handleAdsProductState:s,activateAdsProductStateSubscription:async function(t){const n=dw(t);return null===t||o!==n?(o=n,lw.subscription?.cancel(),lw.subscription=e.subscribeToAdsProductState(await s({playerState:t,isPodcastContent:n}))):lw.subscription}}}function pw(e,t){e&&t.dispatch((0,PA.Xo)())}var mw=o(66622),fw=o(86483);const gw=({history:e,isBlockedPath:t,rootApi:n,adManagers:a,isDesktop:r,playerAPI:i})=>s=>{const{handleAdsProductState:o,activateAdsProductStateSubscription:c}=hw({rootApi:n,store:s,adManagers:a,isDesktop:r,playerAPI:i});return i.getEvents().addListener(z.gd.UPDATE,(async({data:e})=>{await c(e)})),a=>async r=>{switch(r.type){case fw.xM:await c(null);break;case mw.O:n.fakeSubscribe(await o(),r.data)}const l=a(r),d=s.getState();if(!d.ads.root.adsEnabled)return l;const u=function(e){const t=e.platform.isDesktop;return{isDesktop:t,billboardShowing:t&&Boolean(e.ads.billboard?.isOpen),sponsoredPlaylistVisible:Boolean(e.ads.sponsoredPlaylist.isVisible),embeddedAdIsVisible:Boolean(e.ads.embeddedAd?.isOpen),leaderboardEnabled:Boolean(e.ads.leaderboard.isEnabled),isCinemaMode:(0,M.c)(e)===H.Kz.cinema,npvModeActive:Boolean(e.ui.videoPlayer.uiFlags.npv),isOnDemandTrial:"1"===e?.session?.productState?.["on-demand-trial-in-progress"]}}(d);switch(function(e,t,n,a){(n||a)&&(t.billboardShowing&&e.dispatch((0,LA.ZQ)()),t.leaderboardEnabled&&e.dispatch((0,HA.Vp)()))}(s,u,t(e.location.pathname),(0,kA.Qv)(i.getState())),function(e,t,n,a){!n&&!a&&t.isDesktop&&!t.leaderboardEnabled&&!t.billboardShowing&&!t.sponsoredPlaylistVisible&&!t.isCinemaMode&&!t.embeddedAdIsVisible&&!t.isOnDemandTrial&&e.dispatch((0,HA.yU)())}(s,u,t(e.location.pathname),(0,kA.Qv)(i.getState())),function(e,t,n){t.isDesktop&&!t.billboardShowing&&!t.sponsoredPlaylistVisible&&!t.isCinemaMode&&!n.ads.embeddedAd?.canShowAd&&t.npvModeActive&&e.dispatch((0,PA.qx)(!0)),t.npvModeActive||pw(Boolean(n.ads.embeddedAd?.isOpen),e)}(s,u,d),r.type){case H.kX.SET_VIDEO_UI_FLAG:!function(e,t,n,a){n===H.nP.cinema&&a&&e.dispatch((0,HA.Vp)()),n===H.nP.cinema&&(a&&t.ads.embeddedAd?.canShowAd?e.dispatch((0,PA.qx)(!1)):a||t.ads.embeddedAd?.canShowAd||e.dispatch((0,PA.qx)(!0))),n===H.nP.npv&&(a&&!t.ads.embeddedAd?.canShowAd?e.dispatch((0,PA.qx)(!0)):!a&&t.ads.embeddedAd?.canShowAd&&e.dispatch((0,PA.qx)(!1)))}(s,d,r.key,r.value);break;case LA.QN.SHOW_BILLBOARD_AD_VIEW:case LA.QN.FINISH_BILLBOARD_AD_VIEW:!function(e,t,n,a){n===LA.QN.SHOW_BILLBOARD_AD_VIEW?(e.dispatch((0,HA.Vp)()),e.dispatch((0,PA.qx)(!1)),pw(Boolean(t.ads.embeddedAd?.isOpen),e)):n!==LA.QN.FINISH_BILLBOARD_AD_VIEW||a||t.ads.embeddedAd?.canShowAd||e.dispatch((0,PA.qx)(!0))}(s,d,r.type,u.sponsoredPlaylistVisible);break;case $A.Xv:!function(e,t){e.dispatch((0,HA.Vp)()),e.dispatch((0,LA.ZQ)()),t.ads.embeddedAd?.canShowAd&&(e.dispatch((0,PA.qx)(!1)),pw(Boolean(t.ads.embeddedAd?.isOpen),e))}(s,d);break;case PA.bp.SHOW_EMBEDDED_AD_VIEW:!function(e){e.dispatch((0,HA.Vp)())}(s);break;case GA.QN.HPTO_PREVIEW_HOME_NAVIGATION:!function(e){"/"===e.location.pathname||e.push("/")}(e)}return l}},bw=({newOrchestratorMiddlewareEnabled:e,history:t,isBlockedPath:n,rootApi:a,adManagers:r,isDesktop:i,playerAPI:s})=>e?gw({newOrchestratorMiddlewareEnabled:e,history:t,isBlockedPath:n,rootApi:a,adManagers:r,isDesktop:i,playerAPI:s}):e=>{const{handleAdsProductState:o,activateAdsProductStateSubscription:c}=hw({rootApi:a,store:e,adManagers:r,isDesktop:i,playerAPI:s});return s.getEvents().addListener(z.gd.UPDATE,(async({data:e})=>{await c(e)})),r=>async i=>{switch(i.type){case fw.xM:await c(null);break;case mw.O:a.fakeSubscribe(await o(),i.data)}const l=r(i),d=e.getState();let u=!1;if(d?.session?.productState&&(u="1"===d?.session?.productState["on-demand-trial-in-progress"]),!d.ads.root.adsEnabled)return l;const h=d.platform.isDesktop,p=h&&d.ads.billboard?.isOpen,m=d.ads.sponsoredPlaylist.isVisible,f=d.ads.embeddedAd?.isOpen,g=d.ads.leaderboard.isEnabled,b=(0,M.c)(d)===H.Kz.cinema,v=d.ui.videoPlayer.uiFlags.npv;switch(n(t.location.pathname)||(0,kA.Qv)(s.getState())?(p&&e.dispatch((0,LA.ZQ)()),g&&e.dispatch((0,HA.Vp)())):!h||g||p||m||b||f||u||e.dispatch((0,HA.yU)()),!h||p||m||b||d.ads.embeddedAd?.canShowAd||!v||e.dispatch((0,PA.qx)(!0)),v||pw(Boolean(d.ads.embeddedAd?.isOpen),e),i.type){case H.kX.SET_VIDEO_UI_FLAG:{const{key:t,value:n}=i;t===H.nP.cinema&&n&&e.dispatch((0,HA.Vp)()),t===H.nP.cinema&&(n&&d.ads.embeddedAd?.canShowAd?e.dispatch((0,PA.qx)(!1)):n||d.ads.embeddedAd?.canShowAd||e.dispatch((0,PA.qx)(!0))),t===H.nP.npv&&(n&&!d.ads.embeddedAd?.canShowAd?e.dispatch((0,PA.qx)(!0)):!n&&d.ads.embeddedAd?.canShowAd&&e.dispatch((0,PA.qx)(!1)));break}case LA.QN.SHOW_BILLBOARD_AD_VIEW:e.dispatch((0,HA.Vp)()),e.dispatch((0,PA.qx)(!1)),pw(Boolean(d.ads.embeddedAd?.isOpen),e);break;case LA.QN.FINISH_BILLBOARD_AD_VIEW:m||d.ads.embeddedAd?.canShowAd||e.dispatch((0,PA.qx)(!0));break;case $A.Xv:e.dispatch((0,HA.Vp)()),e.dispatch((0,LA.ZQ)()),d.ads.embeddedAd?.canShowAd&&(e.dispatch((0,PA.qx)(!1)),pw(Boolean(d.ads.embeddedAd?.isOpen),e));break;case PA.bp.SHOW_EMBEDDED_AD_VIEW:e.dispatch((0,HA.Vp)());break;case GA.QN.HPTO_PREVIEW_HOME_NAVIGATION:"/"===t.location.pathname||t.push("/");break}return l}};var vw=o(29987);let yw,_w;const Ew=({rootApi:e})=>t=>n=>async a=>{const r=n(a);switch(a.type){case fw.xM:(0,wb.My)()===Ma.m.Desktop&&(0,vw.z)({_debugForceRefreshHpto:()=>t.dispatch((0,GA.BH)())}),yw||(yw=e.subscribeToPremiumState((({catalogue:e})=>{const n="premium"===e;t.dispatch((0,Nd.CW)(n))}))),_w||(_w=e.subscribeToHpto((e=>t.dispatch((0,Nd.yx)(e["ui.hide_hpto"])))));break;case Nd.QN.ADS_POST_HIDE_HPTO:e.hideHpto();break;case mw.O:e.fakeSubscribe((async({catalogue:e})=>{const n="premium"===e;t.dispatch((0,Nd.CW)(n)),t.dispatch((0,Nd.yx)(!1))}),a.data);break;case Nd.QN.TRIGGER_PREVIEW_AD:e.requestPreviewAd(a.adUriHexId)}return r};var xw=o(68550);const Aw=(e,t,n,a,r,i,s)=>{const o=t?new ow(UA.adsCoreConnector,(0,jA.dn)((0,xw.X)())):new cw,c=t?rw:[],{root:l=Ew,sponsoredPlaylist:d=YA,orchestrator:u=bw,leaderboard:h=zA,billboard:p=OA,hpto:m=KA,audio:f=qA,videoTakeover:g=aw,embeddedAd:b=MA}=s??{},v=e.getRemoteConfigurationWithLocalOverrides().getValue(Ee.krn);return[l({rootApi:o}),d(a.sponsoredPlaylist),u({newOrchestratorMiddlewareEnabled:v,history:n,isBlockedPath:iw(c),rootApi:o,adManagers:a,isDesktop:t,playerAPI:i}),...t?[h(a.leaderboard),p(a.billboard,n,i),m(a.hpto),f(a.audio,r,i),g(a.vto.manager,i),...a.embeddedAd?[b(a.embeddedAd)]:[]]:[]]},ww={isOpen:!1,imageLoaded:!1,isMinimized:!1,data:{}},Sw=(e=ww,t)=>{switch(t.type){case LA.QN.SHOW_BILLBOARD_AD_VIEW:return{...e,isOpen:!0,data:t?.data};case LA.QN.HIDE_BILLBOARD_AD_VIEW:return{...e,isOpen:!1,isMinimized:!1,imageLoaded:!1};case LA.QN.IMAGE_LOADED_BILLBOARD_AD_VIEW:return{...e,imageLoaded:!0};case LA.QN.MANAGER_MINIMIZE_BILLBOARD_AD_VIEW:case LA.QN.MINIMIZE_BILLBOARD_AD_VIEW:return{...e,isMinimized:!0};default:return e}},Iw={isOpen:!1,ad:void 0,errorMessage:void 0,canShowAd:!1,lastTimeInView:void 0},Nw=(e=Iw,t)=>{switch(t.type){case PA.bp.CAN_SHOW_EMBEDDED_AD_VIEW:return{...e,canShowAd:t?.payload.canShowAd};case PA.bp.SHOW_EMBEDDED_AD_VIEW:return{...e,isOpen:!0};case PA.bp.DISCARD_EMBEDDED_AD_VIEW:return{...e,isOpen:!1,ad:void 0,lastTimeInView:Date.now()};case PA.bp.FETCH_SUCCESS:return{...e,ad:t?.payload.ad};case PA.bp.CLEAR_STORE:return Iw;case PA.bp.SLOT_INTERACTION_ERROR:return{...e,errorMessage:t?.payload.errorMessage,ad:void 0};default:return e}},Cw={isEnabled:!1};function Tw(e=Cw,t){switch(t.type){case HA.TN:return{...e,isEnabled:!0};case HA.Ws:return{...e,isEnabled:!1};default:return e}}const jw={info:null},Lw=(e=jw,t)=>t.type===VA?{...e,info:t.info}:e,Rw={hptoEnabled:!1,template:null,creative:null,preview:null,creativeFetchingState:QA.C.NOT_FETCHING,hptoContainerMounted:!1,hptoIsStable:!0},kw=(e=Rw,t)=>{switch(t.type){case Nd.QN.ADS_ENABLED:return{...e,hptoEnabled:!0};case WA.R:case GA.QN.HPTO_CONTAINER_MOUNTED:return{...e,hptoContainerMounted:!0};case GA.QN.HPTO_COMPONENT_UNMOUNTED:return{...e,preview:null,creativeFetchingState:QA.C.NOT_FETCHING,creative:t.data.clearCreative?null:e.creative};case GA.QN.HPTO_CONTAINER_UNMOUNTED:return{...e,hptoContainerMounted:!1};case GA.QN.GOT_TEMPLATE:return{...e,template:t.data};case GA.QN.SET_HPTO_PREVIEW:return{...e,hptoIsStable:!0,preview:t.data};case GA.QN.GOT_CREATIVE:return{...e,creative:t.data,creativeFetchingState:QA.C.FETCHED,hptoIsStable:!0};case GA.QN.FETCHING_CREATIVE:return{...e,creativeFetchingState:QA.C.FETCHING,creative:null};case GA.QN.CREATIVE_FETCH_FAILED:return{...e,creativeFetchingState:QA.C.FAILED,hptoIsStable:!1};default:return e}},Ow={sponsoredPlaylist:new Map,isVisible:!1,previewAd:null};function Pw(e=Ow,t){switch(t.type){case $A.Um:return function(e,t){return{...e,sponsoredPlaylist:e.sponsoredPlaylist.set("allSponsorships",t.sponsorships)}}(e,t);case $A.Rl:return function(e,t){return{...e,sponsoredPlaylist:e.sponsoredPlaylist.set(t.playlistUri,t.ad)}}(e,t);case $A.Xv:return{...e,isVisible:!0};case $A.zc:return{...e,isVisible:!1};case $A.Uh:return{...e,previewAd:t.previewAd};default:return e}}const Dw={isMinimized:!1,isHidden:!0,info:null},Mw=(e=Dw,t)=>{switch(t.type){case Ng.QN.MINIMIZE_VIDEO_AD_VIEW:return{...e,isMinimized:!0};case Ng.QN.MAXIMIZE_VIDEO_AD_VIEW:return{...e,isMinimized:!1};case Ng.QN.HIDE_VIDEO_AD_VIEW:return{...e,isHidden:!0};case Ng.QN.SHOW_VIDEO_AD_VIEW:return{...e,isHidden:!1};case Ng.QN.VTO_SET_INFO:return{...e,info:t.info};default:return e}};var Hw=o(5545),zw=o(90775);const Vw=(0,Hw.vy)({adId:null,liked:!1,disliked:!1,feedback:null},(e=>{e.addCase(zw.CJ.LIKE_AD,((e,t)=>{zw.F$.match(t)&&(e.adId=t.payload.adId,e.liked=!0,e.disliked=!1,t.payload.reason&&(e.feedback=t.payload.reason))})).addCase(zw.CJ.DISLIKE_AD,((e,t)=>{zw.NI.match(t)&&(e.adId=t.payload.adId,e.disliked=!0,e.liked=!1,t.payload.reason&&(e.feedback=t.payload.reason))})).addCase(zw.CJ.CANCEL_LIKE_AD,((e,t)=>{zw.D$.match(t)&&(e.liked=!1,e.feedback=null)})).addCase(zw.CJ.CANCEL_DISLIKE_AD,((e,t)=>{zw.vA.match(t)&&(e.disliked=!1,e.feedback=null)}))})),Uw={adsEnabled:!1,isPremium:!1,isHptoHidden:!0},Fw=(e=Uw,t)=>{switch(t.type){case Nd.QN.ADS_ENABLED:return{...e,adsEnabled:!0};case Nd.QN.ADS_DISABLED:return{...e,adsEnabled:!1};case Nd.QN.ADS_PREMIUM:return{...e,isPremium:!!t.isPremium};case Nd.QN.ADS_HPTO_HIDDEN:return{...e,isHptoHidden:!!t.isHptoHidden};default:return e}};var Bw=o(52766);const qw={isOpen:!1},Ww=(e=qw,t)=>{switch(t.type){case Bw.QN.SHOW_REPORT_ISSUE_MODAL:return{...e,isOpen:!0};case Bw.QN.HIDE_REPORT_ISSUE_MODAL:return{...e,isOpen:!1};default:return e}};var Gw=o(78469);const Qw={env:Gw.x,message:null,showPreviewTool:!1},Kw=(e=Qw,t)=>{switch(t.type){case Gw.Q.SHOW_IN_APP_MESSAGE:return{...e,message:t.message};case Gw.Q.DISMISS_IN_APP_MESSAGE:return{...e,message:null};case Gw.Q.SET_IN_APP_MESSAGING_ENV:return{...e,env:t.env};case Gw.Q.SHOW_PREVIEW_TOOL:return{...e,showPreviewTool:t.show};default:return e}};var $w=o(11028);const Yw=e=>t=>n=>async a=>{const r=n(a);if(a.type===$w.QN.GET_AGE_RESTRICTION_MODAL)try{const n=await e.getDialog(a.uri);t.dispatch((0,$w.eK)(n))}catch{}return r};function Zw(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Xw(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Jw(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function eS(e,t){Xw(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function tS(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function nS(e,t){return e<<32-t|e>>>t}function aS(e,t){return e<<t|e>>>32-t>>>0}const rS=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function iS(e){for(let n=0;n<e.length;n++)e[n]=(t=e[n])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function sS(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),Xw(e),e}class oS{clone(){return this._cloneInto()}}function cS(e){const t=t=>e().update(sS(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}class lS extends oS{update(e){return Jw(this),this.iHash.update(e),this}digestInto(e){Jw(this),Xw(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:a,destroyed:r,blockLen:i,outputLen:s}=this;return e.finished=a,e.destroyed=r,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Zw(e.outputLen),Zw(e.blockLen)}(e);const n=sS(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,r=new Uint8Array(a);r.set(n.length>a?e.create().update(n).digest():n);for(let e=0;e<r.length;e++)r[e]^=54;this.iHash.update(r),this.oHash=e.create();for(let e=0;e<r.length;e++)r[e]^=106;this.oHash.update(r),r.fill(0)}}const dS=(e,t,n)=>new lS(e,t).update(n).digest();function uS(e,t,n){return e&t^~e&n}function hS(e,t,n){return e&t^e&n^t&n}dS.create=(e,t)=>new lS(e,t);class pS extends oS{update(e){Jw(this);const{view:t,buffer:n,blockLen:a}=this,r=(e=sS(e)).length;for(let i=0;i<r;){const s=Math.min(a-this.pos,r-i);if(s!==a)n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===a&&(this.process(t,0),this.pos=0);else{const t=tS(e);for(;a<=r-i;i+=a)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Jw(this),eS(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:a,isLE:r}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>a-i&&(this.process(n,0),i=0);for(let e=i;e<a;e++)t[e]=0;!function(e,t,n,a){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,a);const r=BigInt(32),i=BigInt(4294967295),s=Number(n>>r&i),o=Number(n&i),c=a?4:0,l=a?0:4;e.setUint32(t+c,s,a),e.setUint32(t+l,o,a)}(n,a-8,BigInt(8*this.length),r),this.process(n,0);const s=tS(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,l[e],r)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:a,finished:r,destroyed:i,pos:s}=this;return e.length=a,e.pos=s,e.finished=r,e.destroyed=i,a%t&&e.buffer.set(n),e}constructor(e,t,n,a){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=tS(this.buffer)}}const mS=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),fS=new Uint32Array(80);class gS extends pS{get(){const{A:e,B:t,C:n,D:a,E:r}=this;return[e,t,n,a,r]}set(e,t,n,a,r){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|a,this.E=0|r}process(e,t){for(let n=0;n<16;n++,t+=4)fS[n]=e.getUint32(t,!1);for(let e=16;e<80;e++)fS[e]=aS(fS[e-3]^fS[e-8]^fS[e-14]^fS[e-16],1);let{A:n,B:a,C:r,D:i,E:s}=this;for(let e=0;e<80;e++){let t,o;e<20?(t=uS(a,r,i),o=1518500249):e<40?(t=a^r^i,o=1859775393):e<60?(t=hS(a,r,i),o=2400959708):(t=a^r^i,o=3395469782);const c=aS(n,5)+t+s+o+fS[e]|0;s=i,i=r,r=aS(a,30),a=n,n=c}n=n+this.A|0,a=a+this.B|0,r=r+this.C|0,i=i+this.D|0,s=s+this.E|0,this.set(n,a,r,i,s)}roundClean(){fS.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,20,8,!1),this.A=0|mS[0],this.B=0|mS[1],this.C=0|mS[2],this.D=0|mS[3],this.E=0|mS[4]}}const bS=cS((()=>new gS)),vS=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yS=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_S=new Uint32Array(64);class ES extends pS{get(){const{A:e,B:t,C:n,D:a,E:r,F:i,G:s,H:o}=this;return[e,t,n,a,r,i,s,o]}set(e,t,n,a,r,i,s,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|a,this.E=0|r,this.F=0|i,this.G=0|s,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)_S[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=_S[e-15],n=_S[e-2],a=nS(t,7)^nS(t,18)^t>>>3,r=nS(n,17)^nS(n,19)^n>>>10;_S[e]=r+_S[e-7]+a+_S[e-16]|0}let{A:n,B:a,C:r,D:i,E:s,F:o,G:c,H:l}=this;for(let e=0;e<64;e++){const t=l+(nS(s,6)^nS(s,11)^nS(s,25))+uS(s,o,c)+vS[e]+_S[e]|0,d=(nS(n,2)^nS(n,13)^nS(n,22))+hS(n,a,r)|0;l=c,c=o,o=s,s=i+t|0,i=r,r=a,a=n,n=t+d|0}n=n+this.A|0,a=a+this.B|0,r=r+this.C|0,i=i+this.D|0,s=s+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,a,r,i,s,o,c,l)}roundClean(){_S.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,32,8,!1),this.A=0|yS[0],this.B=0|yS[1],this.C=0|yS[2],this.D=0|yS[3],this.E=0|yS[4],this.F=0|yS[5],this.G=0|yS[6],this.H=0|yS[7]}}class xS extends ES{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const AS=cS((()=>new ES)),wS=cS((()=>new xS)),SS=BigInt(2**32-1),IS=BigInt(32);function NS(e,t=!1){return t?{h:Number(e&SS),l:Number(e>>IS&SS)}:{h:0|Number(e>>IS&SS),l:0|Number(e&SS)}}function CS(e,t=!1){let n=new Uint32Array(e.length),a=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:s}=NS(e[r],t);[n[r],a[r]]=[i,s]}return[n,a]}const TS=(e,t,n)=>e<<n|t>>>32-n,jS=(e,t,n)=>t<<n|e>>>32-n,LS=(e,t,n)=>t<<n-32|e>>>64-n,RS=(e,t,n)=>e<<n-32|t>>>64-n;const kS={fromBig:NS,split:CS,toBig:(e,t)=>BigInt(e>>>0)<<IS|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:TS,rotlSL:jS,rotlBH:LS,rotlBL:RS,add:function(e,t,n,a){const r=(t>>>0)+(a>>>0);return{h:e+n+(r/2**32|0)|0,l:0|r}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,a)=>t+n+a+(e/2**32|0)|0,add4L:(e,t,n,a)=>(e>>>0)+(t>>>0)+(n>>>0)+(a>>>0),add4H:(e,t,n,a,r)=>t+n+a+r+(e/2**32|0)|0,add5H:(e,t,n,a,r,i)=>t+n+a+r+i+(e/2**32|0)|0,add5L:(e,t,n,a,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(a>>>0)+(r>>>0)},[OS,PS]=(()=>kS.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),DS=new Uint32Array(80),MS=new Uint32Array(80);class HS extends pS{get(){const{Ah:e,Al:t,Bh:n,Bl:a,Ch:r,Cl:i,Dh:s,Dl:o,Eh:c,El:l,Fh:d,Fl:u,Gh:h,Gl:p,Hh:m,Hl:f}=this;return[e,t,n,a,r,i,s,o,c,l,d,u,h,p,m,f]}set(e,t,n,a,r,i,s,o,c,l,d,u,h,p,m,f){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|a,this.Ch=0|r,this.Cl=0|i,this.Dh=0|s,this.Dl=0|o,this.Eh=0|c,this.El=0|l,this.Fh=0|d,this.Fl=0|u,this.Gh=0|h,this.Gl=0|p,this.Hh=0|m,this.Hl=0|f}process(e,t){for(let n=0;n<16;n++,t+=4)DS[n]=e.getUint32(t),MS[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|DS[e-15],n=0|MS[e-15],a=kS.rotrSH(t,n,1)^kS.rotrSH(t,n,8)^kS.shrSH(t,n,7),r=kS.rotrSL(t,n,1)^kS.rotrSL(t,n,8)^kS.shrSL(t,n,7),i=0|DS[e-2],s=0|MS[e-2],o=kS.rotrSH(i,s,19)^kS.rotrBH(i,s,61)^kS.shrSH(i,s,6),c=kS.rotrSL(i,s,19)^kS.rotrBL(i,s,61)^kS.shrSL(i,s,6),l=kS.add4L(r,c,MS[e-7],MS[e-16]),d=kS.add4H(l,a,o,DS[e-7],DS[e-16]);DS[e]=0|d,MS[e]=0|l}let{Ah:n,Al:a,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:l,Eh:d,El:u,Fh:h,Fl:p,Gh:m,Gl:f,Hh:g,Hl:b}=this;for(let e=0;e<80;e++){const t=kS.rotrSH(d,u,14)^kS.rotrSH(d,u,18)^kS.rotrBH(d,u,41),v=kS.rotrSL(d,u,14)^kS.rotrSL(d,u,18)^kS.rotrBL(d,u,41),y=d&h^~d&m,_=u&p^~u&f,E=kS.add5L(b,v,_,PS[e],MS[e]),x=kS.add5H(E,g,t,y,OS[e],DS[e]),A=0|E,w=kS.rotrSH(n,a,28)^kS.rotrBH(n,a,34)^kS.rotrBH(n,a,39),S=kS.rotrSL(n,a,28)^kS.rotrBL(n,a,34)^kS.rotrBL(n,a,39),I=n&r^n&s^r&s,N=a&i^a&o^i&o;g=0|m,b=0|f,m=0|h,f=0|p,h=0|d,p=0|u,({h:d,l:u}=kS.add(0|c,0|l,0|x,0|A)),c=0|s,l=0|o,s=0|r,o=0|i,r=0|n,i=0|a;const C=kS.add3L(A,S,N);n=kS.add3H(C,x,w,I),a=0|C}({h:n,l:a}=kS.add(0|this.Ah,0|this.Al,0|n,0|a)),({h:r,l:i}=kS.add(0|this.Bh,0|this.Bl,0|r,0|i)),({h:s,l:o}=kS.add(0|this.Ch,0|this.Cl,0|s,0|o)),({h:c,l}=kS.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:d,l:u}=kS.add(0|this.Eh,0|this.El,0|d,0|u)),({h,l:p}=kS.add(0|this.Fh,0|this.Fl,0|h,0|p)),({h:m,l:f}=kS.add(0|this.Gh,0|this.Gl,0|m,0|f)),({h:g,l:b}=kS.add(0|this.Hh,0|this.Hl,0|g,0|b)),this.set(n,a,r,i,s,o,c,l,d,u,h,p,m,f,g,b)}roundClean(){DS.fill(0),MS.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}}class zS extends HS{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const VS=cS((()=>new HS)),US=cS((()=>new zS)),FS=[],BS=[],qS=[],WS=BigInt(0),GS=BigInt(1),QS=BigInt(2),KS=BigInt(7),$S=BigInt(256),YS=BigInt(113);for(let e=0,t=GS,n=1,a=0;e<24;e++){[n,a]=[a,(2*n+3*a)%5],FS.push(2*(5*a+n)),BS.push((e+1)*(e+2)/2%64);let r=WS;for(let e=0;e<7;e++)t=(t<<GS^(t>>KS)*YS)%$S,t&QS&&(r^=GS<<(GS<<BigInt(e))-GS);qS.push(r)}const[ZS,XS]=CS(qS,!0),JS=(e,t,n)=>n>32?LS(e,t,n):TS(e,t,n),eI=(e,t,n)=>n>32?RS(e,t,n):jS(e,t,n);class tI extends oS{keccak(){rS||iS(this.state32),function(e,t=24){const n=new Uint32Array(10);for(let a=24-t;a<24;a++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const a=(t+8)%10,r=(t+2)%10,i=n[r],s=n[r+1],o=JS(i,s,1)^n[a],c=eI(i,s,1)^n[a+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],r=e[3];for(let n=0;n<24;n++){const a=BS[n],i=JS(t,r,a),s=eI(t,r,a),o=FS[n];t=e[o],r=e[o+1],e[o]=i,e[o+1]=s}for(let t=0;t<50;t+=10){for(let a=0;a<10;a++)n[a]=e[t+a];for(let a=0;a<10;a++)e[t+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=ZS[a],e[1]^=XS[a]}n.fill(0)}(this.state32,this.rounds),rS||iS(this.state32),this.posOut=0,this.pos=0}update(e){Jw(this);const{blockLen:t,state:n}=this,a=(e=sS(e)).length;for(let r=0;r<a;){const i=Math.min(t-this.pos,a-r);for(let t=0;t<i;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:a}=this;e[n]^=t,128&t&&n===a-1&&this.keccak(),e[a-1]^=128,this.keccak()}writeInto(e){Jw(this,!1),Xw(e),this.finish();const t=this.state,{blockLen:n}=this;for(let a=0,r=e.length;a<r;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,r-a);e.set(t.subarray(this.posOut,this.posOut+i),a),this.posOut+=i,a+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Zw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(eS(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:a,rounds:r,enableXOF:i}=this;return e||(e=new tI(t,n,a,i,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=a,e.enableXOF=i,e.destroyed=this.destroyed,e}constructor(e,t,n,a=!1,r=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=a,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Zw(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}}const nI=(e,t,n)=>cS((()=>new tI(t,e,n))),aI=nI(6,144,28),rI=nI(6,136,32),iI=nI(6,104,48),sI=nI(6,72,64),oI=(()=>{if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"__GLOBALTHIS__",{get(){return this},configurable:!0});try{if("undefined"!=typeof __GLOBALTHIS__)return __GLOBALTHIS__}finally{delete Object.prototype.__GLOBALTHIS__}return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0})(),cI={SHA1:bS,SHA224:wS,SHA256:AS,SHA384:US,SHA512:VS,"SHA3-224":aI,"SHA3-256":rI,"SHA3-384":iI,"SHA3-512":sI},lI=e=>{switch(!0){case/^(?:SHA-?1|SSL3-SHA1)$/i.test(e):return"SHA1";case/^SHA(?:2?-)?224$/i.test(e):return"SHA224";case/^SHA(?:2?-)?256$/i.test(e):return"SHA256";case/^SHA(?:2?-)?384$/i.test(e):return"SHA384";case/^SHA(?:2?-)?512$/i.test(e):return"SHA512";case/^SHA3-224$/i.test(e):return"SHA3-224";case/^SHA3-256$/i.test(e):return"SHA3-256";case/^SHA3-384$/i.test(e):return"SHA3-384";case/^SHA3-512$/i.test(e):return"SHA3-512";default:throw new TypeError(`Unknown hash algorithm: ${e}`)}},dI="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",uI=e=>{let t=(e=e.replace(/ /g,"")).length;for(;"="===e[t-1];)--t;e=(t<e.length?e.substring(0,t):e).toUpperCase();const n=new ArrayBuffer(5*e.length/8|0),a=new Uint8Array(n);let r=0,i=0,s=0;for(let t=0;t<e.length;t++){const n=dI.indexOf(e[t]);if(-1===n)throw new TypeError(`Invalid character found: ${e[t]}`);i=i<<5|n,r+=5,r>=8&&(r-=8,a[s++]=i>>>r)}return a},hI=e=>{let t=0,n=0,a="";for(let r=0;r<e.length;r++)for(n=n<<8|e[r],t+=8;t>=5;)a+=dI[n>>>t-5&31],t-=5;return t>0&&(a+=dI[n<<5-t&31]),a},pI=e=>{e=e.replace(/ /g,"");const t=new ArrayBuffer(e.length/2),n=new Uint8Array(t);for(let t=0;t<e.length;t+=2)n[t/2]=parseInt(e.substring(t,t+2),16);return n},mI=e=>{let t="";for(let n=0;n<e.length;n++){const a=e[n].toString(16);1===a.length&&(t+="0"),t+=a}return t.toUpperCase()},fI=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=255&e.charCodeAt(t);return n},gI=e=>{let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},bI=oI.TextEncoder?new oI.TextEncoder:null,vI=oI.TextDecoder?new oI.TextDecoder:null,yI=e=>{if(!bI)throw new Error("Encoding API not available");return bI.encode(e)},_I=e=>{if(!vI)throw new Error("Encoding API not available");return vI.decode(e)};class EI{static fromLatin1(e){return new EI({buffer:fI(e).buffer})}static fromUTF8(e){return new EI({buffer:yI(e).buffer})}static fromBase32(e){return new EI({buffer:uI(e).buffer})}static fromHex(e){return new EI({buffer:pI(e).buffer})}get buffer(){return this.bytes.buffer}get latin1(){return Object.defineProperty(this,"latin1",{enumerable:!0,writable:!1,configurable:!1,value:gI(this.bytes)}),this.latin1}get utf8(){return Object.defineProperty(this,"utf8",{enumerable:!0,writable:!1,configurable:!1,value:_I(this.bytes)}),this.utf8}get base32(){return Object.defineProperty(this,"base32",{enumerable:!0,writable:!1,configurable:!1,value:hI(this.bytes)}),this.base32}get hex(){return Object.defineProperty(this,"hex",{enumerable:!0,writable:!1,configurable:!1,value:mI(this.bytes)}),this.hex}constructor({buffer:e,size:t=20}={}){this.bytes=void 0===e?(e=>{if(oI.crypto?.getRandomValues)return oI.crypto.getRandomValues(new Uint8Array(e));throw new Error("Cryptography API not available")})(t):new Uint8Array(e),Object.defineProperty(this,"bytes",{enumerable:!0,writable:!1,configurable:!1,value:this.bytes})}}class xI{static get defaults(){return{issuer:"",label:"OTPAuth",issuerInLabel:!0,algorithm:"SHA1",digits:6,counter:0,window:1}}static generate({secret:e,algorithm:t=xI.defaults.algorithm,digits:n=xI.defaults.digits,counter:a=xI.defaults.counter}){const r=((e,t,n)=>{if(dS){const a=cI[e]??cI[lI(e)];return dS(a,t,n)}throw new Error("Missing HMAC function")})(t,e.bytes,(e=>{const t=new ArrayBuffer(8),n=new Uint8Array(t);let a=e;for(let e=7;e>=0&&0!==a;e--)n[e]=255&a,a-=n[e],a/=256;return n})(a)),i=15&r[r.byteLength-1];return(((127&r[i])<<24|(255&r[i+1])<<16|(255&r[i+2])<<8|255&r[i+3])%10**n).toString().padStart(n,"0")}generate({counter:e=this.counter++}={}){return xI.generate({secret:this.secret,algorithm:this.algorithm,digits:this.digits,counter:e})}static validate({token:e,secret:t,algorithm:n,digits:a=xI.defaults.digits,counter:r=xI.defaults.counter,window:i=xI.defaults.window}){if(e.length!==a)return null;let s=null;const o=i=>{const o=xI.generate({secret:t,algorithm:n,digits:a,counter:i});((e,t)=>{{if(e.length!==t.length)throw new TypeError("Input strings must have the same length");let n=-1,a=0;for(;++n<e.length;)a|=e.charCodeAt(n)^t.charCodeAt(n);return 0===a}})(e,o)&&(s=i-r)};o(r);for(let e=1;e<=i&&null===s&&(o(r-e),null===s)&&(o(r+e),null===s);++e);return s}validate({token:e,counter:t=this.counter,window:n}){return xI.validate({token:e,secret:this.secret,algorithm:this.algorithm,digits:this.digits,counter:t,window:n})}toString(){const e=encodeURIComponent;return"otpauth://hotp/"+(this.issuer.length>0?this.issuerInLabel?`${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?`)+`secret=${e(this.secret.base32)}&`+`algorithm=${e(this.algorithm)}&`+`digits=${e(this.digits)}&`+`counter=${e(this.counter)}`}constructor({issuer:e=xI.defaults.issuer,label:t=xI.defaults.label,issuerInLabel:n=xI.defaults.issuerInLabel,secret:a=new EI,algorithm:r=xI.defaults.algorithm,digits:i=xI.defaults.digits,counter:s=xI.defaults.counter}={}){this.issuer=e,this.label=t,this.issuerInLabel=n,this.secret="string"==typeof a?EI.fromBase32(a):a,this.algorithm=lI(r),this.digits=i,this.counter=s}}class AI{static get defaults(){return{issuer:"",label:"OTPAuth",issuerInLabel:!0,algorithm:"SHA1",digits:6,period:30,window:1}}static counter({period:e=AI.defaults.period,timestamp:t=Date.now()}={}){return Math.floor(t/1e3/e)}counter({timestamp:e=Date.now()}={}){return AI.counter({period:this.period,timestamp:e})}static remaining({period:e=AI.defaults.period,timestamp:t=Date.now()}={}){return 1e3*e-t%(1e3*e)}remaining({timestamp:e=Date.now()}={}){return AI.remaining({period:this.period,timestamp:e})}static generate({secret:e,algorithm:t,digits:n,period:a=AI.defaults.period,timestamp:r=Date.now()}){return xI.generate({secret:e,algorithm:t,digits:n,counter:AI.counter({period:a,timestamp:r})})}generate({timestamp:e=Date.now()}={}){return AI.generate({secret:this.secret,algorithm:this.algorithm,digits:this.digits,period:this.period,timestamp:e})}static validate({token:e,secret:t,algorithm:n,digits:a,period:r=AI.defaults.period,timestamp:i=Date.now(),window:s}){return xI.validate({token:e,secret:t,algorithm:n,digits:a,counter:AI.counter({period:r,timestamp:i}),window:s})}validate({token:e,timestamp:t,window:n}){return AI.validate({token:e,secret:this.secret,algorithm:this.algorithm,digits:this.digits,period:this.period,timestamp:t,window:n})}toString(){const e=encodeURIComponent;return"otpauth://totp/"+(this.issuer.length>0?this.issuerInLabel?`${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?`)+`secret=${e(this.secret.base32)}&`+`algorithm=${e(this.algorithm)}&`+`digits=${e(this.digits)}&`+`period=${e(this.period)}`}constructor({issuer:e=AI.defaults.issuer,label:t=AI.defaults.label,issuerInLabel:n=AI.defaults.issuerInLabel,secret:a=new EI,algorithm:r=AI.defaults.algorithm,digits:i=AI.defaults.digits,period:s=AI.defaults.period}={}){this.issuer=e,this.label=t,this.issuerInLabel=n,this.secret="string"==typeof a?EI.fromBase32(a):a,this.algorithm=lI(r),this.digits=i,this.period=s}}var wI=o(84686).hp;const SI=function(e){const t=e.map(((e,t)=>e^t%33+9)),n=wI.from(t.join(""),"utf8").toString("hex");return EI.fromHex(n)}([12,56,76,33,88,44,88,33,78,78,11,66,22,22,55,69,54]);new AI({period:30,digits:6,algorithm:"SHA1",secret:SI});const II=e=>t=>n=>{const a=t(n);switch(n.type){case fw.xM:Ut((()=>e.dispatch({type:fw.tQ})));break;case fw.tQ:(r=Go.n.getInstance(),r.build().withHost(Qo.Go).withHostIdentifier("https://open.spotify.com").withPath("/logout").withoutMarket().withoutAuthorization().withEndpointIdentifier("/logout").send()).then((()=>{e.dispatch((0,Zs.oM)()),window.location.assign("/")}),((e,t=!1)=>n=>(console.error(n),e&&e(n),t?Promise.reject(n):Promise.resolve(void 0)))())}var r;return a};var NI=o(55569),CI=o.n(NI);var TI=o(26460),jI=o(2585);const LI="urn:x-cast:com.spotify.chromecast.secure.v1";let RI=!1;const kI=()=>window.cast?.framework.CastContext.getInstance(),OI=e=>CI()(e),PI=(e,t)=>{e.send({name:"CastTransfer",environments:["device","browser"],data:t})},DI=(e,t,n)=>{if(!window.cast){window.__onGCastApiAvailable=a=>{a&&!RI&&(((e,t,n)=>{const a=kI();a&&(a.setOptions({receiverApplicationId:"CC32E753",autoJoinPolicy:"page_scoped",androidReceiverCompatible:n}),e.dispatch(TI.dK(a.getCastState())),a.addEventListener(window.cast?.framework.CastContextEventType.CAST_STATE_CHANGED,(({castState:t})=>e.dispatch(TI.dK(t)))),a.addEventListener(window.cast?.framework.CastContextEventType.SESSION_STATE_CHANGED,(({sessionState:n,session:a})=>{if(n===window.cast?.framework.SessionState.SESSION_STARTING)PI(t,{step:"transfer_requested"});else if(n===window.cast?.framework.SessionState.SESSION_STARTED){let n=null;a?.getCastDevice()?.friendlyName&&(n=OI(a.getCastDevice().friendlyName)),e.dispatch(TI.$e(n)),PI(t,{step:"receiver_app_started"})}})))})(e,t,n),RI=!0)};const a=document.createElement("script");a.async=!0,a.src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.body.appendChild(a)}},MI=async(e,t,n,a)=>{const r=await t.request("https://spclient.wg.spotify.com/device-auth/v1/refresh",{method:"POST",authorize:!0,payload:JSON.stringify({clientId:"d7df0887fb71494ea994202cb473eae7",deviceId:e})});if(null===r.body)throw new Error("Invalid response from device-auth!");((e,t,n)=>{const a={tokenType:"accesstoken",blob:t.accessToken};e.sendMessage(LI,{type:"addUser",payload:a}),PI(n,{step:"message_from_sender"})})(n,JSON.parse(r.body),a)},HI=(e,t,n)=>{const a=kI().getCurrentSession();if(null===a)return;a.addMessageListener(LI,((r,i)=>{const s=JSON.parse(i);PI(n,{step:"message_from_receiver"});try{if("getInfoResponse"===s.type){const t=s.payload;MI(t.deviceID,e,a,n)}else if("addUserResponse"===s.type){const e=s.payload;t.dispatch((0,Qi.VR)(e.deviceId))}else if(s.type.endsWith("Error"))throw new Error(s.payload.status)}catch(e){console.error("Failed to transfer playback to Cast device!",e)}})),((e,t)=>{const n=e.getCastDevice(),a={remoteName:n.friendlyName,deviceID:OI(n.friendlyName),deviceAPI_isGroup:n.capabilities.includes(chrome?.cast?.Capability.MULTIZONE_GROUP)};e.sendMessage(LI,{type:"getInfo",payload:a}),PI(t,{step:"message_from_sender"})})(a,n)};function zI(e,t,n){return a=>r=>i=>{switch(i.type){case fw.xM:DI(a,t,n);break;case TI.gK.TOGGLE_CAST:(()=>{const e=kI();e&&e.requestSession()})();break;case TI.gK.CAST_STATE_CHANGED:((e,t,n,{castState:a})=>{a===window.cast?.framework.CastState.CONNECTED&&HI(e,t,n)})(e,a,t,i);break;case Qi.gK.DEVICE_INFO_CHANGED:((e,t,{deviceInfo:n})=>{if(n&&n.is_active&&(0,jI.Mp)(n.type)){const a=kI()?.getCastState()===window.cast?.framework.CastState.CONNECTED,r=e.getState().playback?.connectingCastDeviceId;a&&n.id===r&&(PI(t,{step:"transfer_finished"}),e.dispatch(TI.iY()))}})(a,t,i)}return r(i)}}var VI=o(72516);var UI=o(13674),FI=o(5170),BI=o(77957);const qI=e=>t=>n=>async a=>{const r=n(a);switch(a.type){case UI.QN.CHECK_DUPLICATE_TRACKS:{const{playlistUri:n,uris:r,position:s={after:"end"}}=a;try{const{name:a}=await e.getMetadata(n),o=await e.getContents(n);let c=[...r];if((0,J._Tv)(r[0])){const e=(0,BI.lY)(Go.n.getInstance()),{trackUris:t}=await(0,FI.s)(r[0],0,e);c=t}const l=o.items.map((e=>e?.uri)),{duplicates:d,newUris:u}=(i=l,c.reduce(((e,t)=>{const n=i.includes(t);return{duplicates:n?[...e.duplicates,t]:e.duplicates,newUris:n?e.newUris:[...e.newUris,t]}}),{duplicates:[],newUris:[]}));0===d.length?e.add(n,c,s):1===c.length?t.dispatch((0,UI.xM)({playlistName:a,playlistUri:n,uri:c[0],position:s})):t.dispatch((0,UI.xM)({playlistName:a,playlistUri:n,uris:c,newUris:u,position:s}))}catch(t){e.add(n,r,s),window.console.error(t)}break}}var i;return r},WI=(e,t=!0)=>n=>a=>r=>{const i=a(r),{type:s}=r;if(t&&s===As.g.LOG_INTERACTION){const{session:t}=n.getState(),{isAnonymous:a}=t,i=a?Vi(r.logData):zi(r.logData);e.send(i)}return i},GI=()=>e=>t=>{const n=e(t);if(t.type===As.g.LOG_INTERACTION){const{logData:e}=t;(0,re.$)(e.action_type,e.action_intent,e.item_id)}return n};var QI,KI=o(86185),$I=o(68);!function(e){e.USER_INFO_REQUEST_EMPTY_RESPONSE="USER_INFO_REQUEST_EMPTY_RESPONSE",e.USER_INFO_REQUEST_FAILED_WITH_STATUS="USER_INFO_REQUEST_FAILED_WITH_STATUS",e.HARMONY_NO_TRACKS_LOADED="HARMONY_NO_TRACKS_LOADED",e.HARMONY_OPERATION_FORBIDDEN="HARMONY_OPERATION_FORBIDDEN",e.HARMONY_LOCAL_PLAYER_DISABLED="HARMONY_LOCAL_PLAYER_DISABLED",e.HARMONY_INVALID_DESCRIPTOR_ID="HARMONY_INVALID_DESCRIPTOR_ID",e.HARMONY_INVALID_MEDIA_TYPE="HARMONY_INVALID_MEDIA_TYPE",e.CONNECTAPI_CLIENT_INVALID_ARGUMENTS="CONNECTAPI_CLIENT_INVALID_ARGUMENTS",e.CONNECTAPI_CLIENT_MISSING_DEVICE_ID="CONNECTAPI_CLIENT_MISSING_DEVICE_ID",e.CONNECTAPI_CLIENT_NO_CONNECTION_ID="CONNECT_API_CLIENT_NO_CONNECTION_ID",e.CONNECTAPI_CLIENT_NO_DEVICE="CONNECTAPI_CLIENT_NO_DEVICE",e.CONNECTAPI_CLIENT_NO_SESSION_ID="CONNECTAPI_CLIENT_NO_SESSION_ID",e.CONNECTAPI_CLIENT_NO_STATE="CONNECTAPI_CLIENT_NO_STATE",e.CONNECTAPI_CLIENT_INVALID_POSITION="CONNECT_API_CLIENT_INVALID_POSITION",e.CONNECTAPI_CLIENT_INVALID_VOLUME="CONNECT_API_CLIENT_INVALID_VOLUME",e.CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED="CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED",e.CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS="CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS",e.CONNECTAPI_CLIENT_ACK_TIMEOUT="CONNECTAPI_CLIENT_ACK_TIMEOUT",e.CP_NO_DEVICE_DESCRIPTOR="CP_NO_DEVICE_DESCRIPTOR",e.CP_NO_CONNECTION_ID="CP_NO_CONNECTION_ID",e.CP_REGISTRATION_FAILED_WITH_STATUS="CP_REGISTRATION_FAILED_WITH_STATUS",e.CP_REGISTRATION_FAILED_NON_PREMIUM="CP_REGISTRATION_FAILED_NON_PREMIUM",e.CP_REQUEST_FAILED_WITH_STATUS="CP_REQUEST_FAILED_WITH_STATUS",e.CP_NO_DEVICE_ID="CP_NO_DEVICE_ID",e.CP_NO_RESPONSE_BODY="CP_NO_RESPONSE_BODY",e.CP_NO_TRACKING_DATA="CP_NO_TRACKING_DATA",e.CP_INVALID_STATE="CP_INVALID_STATE",e.CP_NO_PLAYBACK_ID="CP_NO_PLAYBACK_ID",e.QUEUE_MANAGER_NO_STATE="QUEUE_MANAGER_NO_STATE",e.QUEUE_OPERATION_FORBIDDEN="QUEUE_OPERATION_FORBIDDEN",e.QUEUE_OPERATION_STALE_REVISION="QUEUE_OPERATION_STALE_REVISION",e.TP_NO_RESPONSE_BODY="TP_NO_RESPONSE_BODY",e.TP_REGISTRATION_FAILED_NON_PREMIUM="TP_REGISTRATION_FAILED_NON_PREMIUM",e.TP_REGISTRATION_FAILED_WITH_STATUS="TP_REGISTRATION_FAILED_WITH_STATUS",e.TP_STATE_UPDATE_FAILED="TP_STATE_UPDATE_FAILED",e.TP_MAX_SUBSCRIPTIONS_REACHED="TP_MAX_SUBSCRIPTIONS_REACHED",e.TP_UPDATE_REQUEST_EMPTY_RESPONSE="TP_UPDATE_REQUEST_EMPTY_RESPONSE",e.TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS="TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS",e.TP_SET_OPTIONS_FAILED_WITH_STATUS="TP_SET_OPTIONS_FAILED_WITH_STATUS",e.TP_UNKNOWN_COMMAND="TP_UNKNOWN_COMMAND",e.TP_CANNOT_CREATE_STATE_REF="TP_CANNOT_CREATE_STATE_REF",e.TP_MISSING_INITIAL_STATE="TP_MISSING_INITIAL_STATE",e.TP_INVALID_STATE_REFERENCE="TP_INVALID_STATE_REFERENCE",e.TP_CONFLICT_REQUEST_FAILED_WITH_STATUS="TP_CONFLICT_REQUEST_FAILED_WITH_STATUS"}(QI||(QI={}));o(32688);var YI=o(35870);o(1058),o(97735),o(66932);var ZI,XI,JI,eN;!function(e){e.AUTHENTICATED="authenticated",e.AUTHENTICATION_ERROR="authentication_error",e.AUTOPLAY_FAILED="autoplay_failed",e.BEFORE_DISCONNECT="before_disconnect",e.BEFORE_VOLUME_CHANGE="before_volume_change",e.BUFFER_STALLED="stalled",e.BUFFERING_END="buffering_end",e.BUFFERING_START="buffering_start",e.REBUFFERING_END="rebuffering_end",e.REBUFFERING_START="rebuffering_start",e.CONNECTED="connected",e.CONNECTION_ERROR="connection_error",e.DEVICES_CHANGED="devices_changed",e.DEVICE_DEACTIVATED="device_deactivated",e.DEVICE_DESCRIPTOR_CHANGED="descriptor_changed",e.DISCONNECTED="disconnected",e.DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.DURATION_CHANGED="duration_changed",e.ERROR="error",e.LAST_ACTIVE_DEVICE_INFO_CHANGED="last_active_device_info_changed",e.LOCAL_CONTEXT_ENDED="local_context_ended",e.LOCAL_PLAYER_DISABLED="local_player_disabled",e.LOCAL_PLAYER_ENABLED="local_player_enabled",e.LOCAL_PLAYER_LOGGED_OUT="local_player_logged_out",e.LOGGED_OUT="logged_out",e.MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.MAX_SUBSCRIPTIONS_REACHED="max_subscriptions_reached",e.PLAYBACK_CAPPED="playback_capped",e.PLAYER_INITIALIZATION_DONE="player_initialization_done",e.PLAYER_INITIALIZATION_FAILED="player_initialization_failed",e.PLAYING_PROFILE_CHANGED="playing_profile_changed",e.PRODUCT_STATE_CHANGED="product_state_changed",e.PROGRESS="progress",e.PLAYER_QUEUE_CHANGED="player_queue_changed",e.RECONNECTED="reconnected",e.RECONNECTING="reconnecting",e.REMOTE_OBSERVER_DISABLED="remote_observer_disabled",e.REMOTE_OBSERVER_ENABLED="remote_observer_enabled",e.REPORTING_START="reporting_start",e.REPORTING_FIRST_QUARTILE="reporting_first_quartile",e.REPORTING_MIDPOINT="reporting_midpoint",e.REPORTING_THIRD_QUARTILE="reporting_third_quartile",e.REPORTING_COMPLETE="reporting_complete",e.REPORTING_PAUSE="reporting_pause",e.REPORTING_RESUME="reporting_resume",e.REPORTING_CREATIVE_VIEW="reporting_creative_view",e.REPORTING_ERROR="reporting_error",e.SERVICE_REGISTRATION_ERROR="service_registration_error",e.SPEED_CHANGED="speed_changed",e.STATE_CHANGED="state_changed",e.STOPPED_ON_BACKGROUND="stopped_on_background",e.SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.TRACK_ENDED="track_ended",e.UNRECOVERABLE_FAILURE="unrecoverable_failure",e.VIDEO_ELEMENT_APPENDED="video_element_appended",e.VIDEO_ELEMENT_REMOVED="video_element_removed",e.VOLUME_CHANGED="volume_changed",e.MEDIA_PLAYBACK_MODE_CHANGED="media_playback_mode_changed",e.PLAYER_VISIBILITY_CHANGED="visibility_changed"}(ZI||(ZI={})),function(e){e.CLOUD_PLAYBACK="cloud-playback",e.CONNECT_API="connect-api",e.HARMONY="harmony",e.PLAYBACK="playback",e.TRACK_PLAYBACK="track-playback",e.TRANSPORT="transport"}(XI||(XI={})),function(e){e[e.OFF=0]="OFF",e[e.CONTEXT=1]="CONTEXT",e[e.TRACK=2]="TRACK"}(JI||(JI={})),function(e){e.INCOMPATIBLE="incompatible",e.UNAVAILABLE="unavailable",e.AD_PLAYING="ad_playing",e.NARRATION="narration",e.WAKING_UP="waking_up",e.TIMED_OUT_WAKEUP="timed_out_wakeup",e.PREMIUM_REQUIRED="premium_required",e.NOT_INSTALLED="not_installed",e.UNSUPPORTED="unsupported",e.NOT_AUTHORIZED="not_authorized"}(eN||(eN={}));Error;Error;YI.bk;o(47173);YI.bk;var tN,nN,aN=o(7662);o(68448),o(30010);!function(e){e.FILE_URLS_MP3="file_urls_mp3",e.FILE_URLS_EXTERNAL="file_urls_external",e.FILE_IDS_MP3="file_ids_mp3",e.FILE_IDS_MP4="file_ids_mp4",e.FILE_IDS_MP4_DUAL="file_ids_mp4_dual",e.FILE_IDS_CBCS="file_ids_mp4_cbcs",e.FILE_IDS_MP4FLAC="file_ids_mp4flac",e.MANIFEST_IDS_VIDEO="manifest_ids_video",e.MANIFEST_URLS_VIDEO_AD="manifest_urls_video_ad",e.MANIFEST_URLS_AUDIO_AD="manifest_urls_audio_ad"}(tN||(tN={})),function(e){e.UNKNOWN="unknown",e.COMPUTER="computer",e.TABLET="tablet",e.SMARTPHONE="smartphone",e.SPEAKER="speaker",e.TV="tv",e.AVR="avr",e.STB="stb",e.AUDIO_DONGLE="audio_dongle",e.GAME_CONSOLE="game_console",e.CAST_VIDEO="cast_video",e.CAST_AUDIO="cast_audio",e.AUTOMOBILE="automobile",e.SMARTWATCH="smartwatch",e.CHROMEBOOK="chromebook"}(nN||(nN={}));o(58954);YI.bk;o(13792);aN.m.forTag("harmonyclient");YI.bk;var rN=o(20466);aN.m.forTag("media_session");YI.bk;Error;var iN,sN;!function(e){e.ON="ON",e.OFF="OFF",e.NONE="NONE"}(iN||(iN={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON",e[e.SMART=2]="SMART"}(sN||(sN={}));aN.m.forTag("tp.stream.PlaybackStateObserver");YI.bk;tN.FILE_URLS_MP3,rN.oz.MP3,tN.FILE_URLS_EXTERNAL,rN.oz.MP3,tN.FILE_IDS_MP3,rN.oz.MP3,tN.FILE_IDS_MP4,rN.oz.MP4,tN.FILE_IDS_MP4_DUAL,rN.oz.MP4,tN.FILE_IDS_CBCS,rN.oz.MP4_CBCS,tN.FILE_IDS_MP4FLAC,rN.oz.MP4_FLAC,tN.MANIFEST_IDS_VIDEO,rN.oz.MANIFEST_ID,tN.MANIFEST_URLS_VIDEO_AD,rN.oz.AD_MANIFEST,tN.MANIFEST_URLS_AUDIO_AD,rN.oz.AD_MANIFEST;var oN,cN;o(5482),o(7527),o(92376);!function(e){e.TRACK_DATA_FINALIZED="track_data_finalized",e.DEREGISTER="deregister",e.REGISTER="register",e.BEFORE_TRACK_LOAD="before_track_load",e.CAPPED="capped",e.ERROR="error",e.PAUSE="pause",e.RESUME="resume",e.PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.POSITION_CHANGED="position_changed",e.SPEED_CHANGED="speed_changed",e.STARTED_PLAYING="started_playing",e.PROGRESS="progress",e.PING="ping",e.MODIFY_CURRENT_STATE="modify_current_state",e.STATE_CLEAR="state_clear"}(oN||(oN={})),function(e){e.FATAL="Fatal",e.ERROR="Error",e.WARNING="Warning"}(cN||(cN={}));aN.m.forTag("tpapiclient"),aN.m.forTag("tpapiclient.endsong"),aN.m.forTag("tpapiclient.endsongs");YI.bk;var lN;o(7671);!function(e){e.LOCAL_PLAYER_DISABLED="local_player_disabled",e.STOPPED="stopped",e.REMOTE_ACTIVATED="remote_activated",e.UNKNOWN="unknown"}(lN||(lN={}));Error;o(70799);aN.m.forTag("harmony.controller"),rN.d2.UNKNOWN,rN.d2.DEFAULT,rN.d2.LOW,rN.d2.NORMAL,rN.d2.NORMAL,rN.d2.HIGH,rN.d2.VERY_HIGH,rN.d2.HIFI,iN.ON,iN.OFF,iN.NONE;YI.bk;var dN;o(72394);!function(e){e.PREMIUM="premium",e.TFT="tft"}(dN||(dN={}));var uN;!function(e){e.NOT_PLAYING_LOCALLY="not_playing_locally",e.NOT_PLAYING_CONTEXT="not_playing_context",e.NOT_PLAYING_TRACK="not_playing_track",e.NOT_PLAYING_MEDIA="not_playing_media",e.NO_PREV_TRACK="no_prev_track",e.NO_NEXT_TRACK="no_next_track",e.NO_SPECIFIC_TRACK="no_specific_track",e.ALREADY_PAUSED="already_paused",e.NOT_PAUSED="not_paused",e.NARRATION="narration",e.PLAYER_CONTEXT_DISALLOW="context_player_disallow",e.MFT_DISALLOW="mft_disallow",e.AD_DISALLOW="ad_disallow",e.PROTOCOL_LIMITATIONS="protocol_limitations",e.UNKNOWN="unknown",e.ALREADY_PLAYING="already_playing",e.THROTTLED="throttled",e.ENDLESS_CONTEXT="endless_context"}(uN||(uN={}));uN.AD_DISALLOW,eN.AD_PLAYING,uN.NARRATION,eN.NARRATION;YI.bk;o(45332);var hN;!function(e){e.SUCCESS="success",e.ACK_TIMEOUT="ack_timeout",e.HTTP_ERROR="http_error",e.SYSTEM_ERROR="system_error",e.PLAYER_ERROR="player_error",e.UNKNOWN_ERROR="unknown_error"}(hN||(hN={}));const pN=Object.assign(Object.assign(Object.assign({},QI),$I.L),KI.I);var mN=o(41350),fN=o(5437);const gN="playback";let bN=null;var vN=o(18603);let yN=null,_N=!1;let EN,xN=[],AN=[];const wN=e=>{try{(0,vN.fE)({metric_type:mN.MetricTypes.COUNTER,what:"harmony-error",value:1,tags:{type:e}})}catch(e){}},SN=(e,t)=>(EN=function(){if(null===bN)throw new Error("Missing `instance`. Have you called `createHarmony` yet?");return bN}(),EN.on(ZI.LOCAL_PLAYER_ENABLED,(()=>{const e=(()=>{try{const e=localStorage.getItem(gN);if(null===e)return null;const{volume:t}=JSON.parse(e);return t||null}catch(e){return null}})();null!==e&&EN.setVolume(e,"@local");try{O_("playback_load_end");const e=P_("playback_load_start","playback_load_end","time_to_playback_ready"),[{duration:t}={duration:void 0}]=e;t&&(0,vN.fE)({metric_type:mN.MetricTypes.TIMER,what:"playback-ready",value:mN.Time.fromMillis(t).asNanos()}).catch((()=>({})))}catch(e){}})),EN.on(ZI.AUTHENTICATION_ERROR,(()=>{wN(ZI.AUTHENTICATION_ERROR)})),EN.on(ZI.UNRECOVERABLE_FAILURE,(({data:t})=>{const n=t.error.message||"";if(navigator.userAgent.indexOf("Edge")>-1)e.dispatch(Qi.tS()),(0,Nn.UD)(t.error),wN(Qi.gK.CDM_ERROR);else if(t.source===XI.PLAYBACK){const a=t.name||t.error?.name||t.error?.code||"unknown";e.dispatch(Qi.CZ(a,t.source,n))}wN(ZI.UNRECOVERABLE_FAILURE)})),EN.on(ZI.ERROR,(({data:t})=>{if(t.error.code===pN.EME_LICENSE_REQUEST_WIDEVINE_ERROR&&e.dispatch(l.rN()),t.error.code===pN.MEDIA_DECODING_ERROR&&!_N){const n="media_decoding_error",a=t.source,r=t.error.message||"";e.dispatch(Qi.CZ(n,a,r))}const n=t.name||t.error?.name||t.error?.code||"unknown";wN(n)})),EN.on(ZI.PLAYER_INITIALIZATION_DONE,(()=>{t.triggerActions(),e.dispatch((0,fN.H2)())})),EN.on(ZI.PLAYER_INITIALIZATION_FAILED,(({data:t})=>{if(!navigator.webdriver&&(wN(Qi.gK.CDM_ERROR),t.error)){if(t.error.message&&t.error.message.indexOf("0x80004005")>=0)return;e.dispatch(Qi.tS()),(0,Nn.UD)(t.error)}})),EN.on(ZI.MAX_SUBSCRIPTIONS_REACHED,(({data:t})=>{e.dispatch(Qi.fj(t.source??"unknown")),wN(ZI.MAX_SUBSCRIPTIONS_REACHED)})),EN.on(ZI.PRODUCT_STATE_CHANGED,(()=>{})),EN.on(ZI.STATE_CHANGED,(e=>{if(e.data.state&&e.data.state.context&&e.data.state.context.uri&&(e.data.state.context.uri=e.data.state.context.uri.replace(/:user:([^:]+):playlist:/g,":playlist:")),0===xN.length)try{O_("playback_load_update"),xN=P_("playback_load_start","playback_load_update","time_to_playback_fetched");const[{duration:e}={duration:void 0}]=xN;e&&(0,vN.fE)({metric_type:mN.MetricTypes.TIMER,what:"playback-fetched",value:mN.Time.fromMillis(e).asNanos()}).catch((()=>({})))}catch(e){}!e.data.state?.paused&&AN.length})),EN.on(ZI.LAST_ACTIVE_DEVICE_INFO_CHANGED,(t=>{const n=t.data.deviceInfo;n&&e.dispatch(Qi.rD(n))})),EN.on(ZI.PROGRESS,(()=>{_N=!0})),EN),IN=(e,t)=>{const n=e.getState(),{isAnonymous:a}=(0,so.Ht)(n);return a?null:SN(e,t)};var NN=o(29136),CN=o(17219),TN=o(37760);const jN="STORE_SEARCH",LN="SEARCH_HISTORY_CLEAR_DATA";var RN=o(47074);const kN=()=>e=>t=>{if(t.type===LN)localStorage.removeItem(RN.C);return e(t)},ON="REQUEST_SEO_EXPERIMENT_DATA",PN="SET_SEO_EXPERIMENT_DATA",DN="SET_SEO_EXPERIMENT_ERROR";const MN=()=>e=>t=>async n=>{const a=t(n);if(n.type===ON)try{const t=await(i=Go.n.getInstance(),s=`/${(0,J.o_h)(n.uri).toURLPath()}`,i.build().withHost(Qo.Go).withHostIdentifier("https://open.spotify.com").withPath("/seo").withQueryParameters({entityURL:s}).withoutMarket().withoutAuthorization().withEndpointIdentifier("/seo").send());e.dispatch((r=t?.body,{type:PN,data:r}))}catch(t){e.dispatch({type:DN})}var r,i,s;return a},HN=e=>()=>t=>n=>{const a=t(n);if(n.type===fw.tQ)e(n);return a};function zN(e){return t=>n=>a=>{const r=n(a);switch(a.type){case fw.tQ:{e.finalFlush(),t.dispatch((0,Qi.MW)()),t.dispatch({type:LN});const n=document.getElementById("session");n&&n.remove();break}}return r}}const VN=()=>e=>t=>{const n=e(t);switch(t.type){case l.gK.ENTER_FULLSCREEN:document.documentElement.classList.add("fullscreen");break;case l.gK.LEAVE_FULLSCREEN:document.documentElement.classList.remove("fullscreen")}return n};var UN=o(6368);const FN={isOpen:!1},BN=(e=FN,t)=>{switch(t.type){case UN.QN.SHOW_ABOUT_RECS_MODAL:return{...e,isOpen:!0};case UN.QN.HIDE_ABOUT_RECS_MODAL:return{...e,isOpen:!1};default:return e}};var qN=o(84963);const WN={isOpen:!1},GN=(e=WN,t)=>{switch(t.type){case qN.QN.SHOW_ABOUT_SPOTIFY_MODAL:return{...e,isOpen:!0};case qN.QN.HIDE_ABOUT_SPOTIFY_MODAL:return{...e,isOpen:!1};default:return e}},QN={isOpen:!1,uri:"",dialog:void 0},KN=(e=QN,t)=>{switch(t.type){case $w.QN.SHOW_AGE_RESTRICTION_MODAL:return{...e,isOpen:!0,dialog:t.dialog};case $w.QN.GET_AGE_RESTRICTION_MODAL:return{...e,uri:t.uri};case $w.QN.HIDE_AGE_RESTRICTION_MODAL:return{...e,isOpen:!1};default:return e}},$N={isOpen:!1,playlistUri:void 0,uri:void 0,uris:void 0,position:void 0,playlistName:void 0,newUris:void 0},YN=(e=$N,t)=>{switch(t.type){case UI.QN.SHOW_DUPLICATE_TRACKS_DIALOG:return{...e,isOpen:!0,playlistUri:t.playlistUri,uri:t.uri,uris:t.uris,position:t.position,playlistName:t.playlistName,newUris:t.newUris};case UI.QN.HIDE_DUPLICATE_TRACKS_DIALOG:return{...e,isOpen:!1};default:return e}},ZN={ads:!1},XN=(e,t)=>(t.type,e||ZN);var JN=o(67464);const eC={isOpen:!1},tC=(e=eC,t)=>{switch(t.type){case JN.QN.SHOW_LICENSES_MODAL:return{...e,isOpen:!0};case JN.QN.HIDE_LICENSES_MODAL:return{...e,isOpen:!1};default:return e}},nC=e=>{const t=(0,wb.My)();return{isBrowser:t===Ma.m.Web,isPWA:t===Ma.m.PWA,isDesktop:t===Ma.m.Desktop,shouldCalloutPWA:(0,wb.wD)(),isDeveloperMode:e.isDeveloperMode,isVideoSupported:e.isVideoSupported,isWebPSupported:e.isWebPSupported}},aC=e=>(t=nC(e),n)=>n.type===s?nC(e):t;const rC={device:null,castState:o(31288).xP.NO_DEVICES_AVAILABLE,connectingCastDeviceId:null},iC=(e,t)=>{const n=t.deviceInfo;return n&&isNaN(n.volume)&&(n.volume=0),{...e,device:n}},sC=(e,t)=>({...e,castState:t.castState}),oC=(e,t)=>({...e,connectingCastDeviceId:t.deviceId}),cC=e=>({...e,connectingCastDeviceId:null}),lC=e=>(localStorage.removeItem(gN),{...e}),dC=(()=>{const e={[Qi.gK.DEVICE_INFO_CHANGED]:iC,[Qi.gK.PLAYBACK_CLEAR_DATA]:lC,[TI.gK.CAST_STATE_CHANGED]:sC,[TI.gK.SET_CONNECTING_CAST_DEVICE_ID]:oC,[TI.gK.RESET_CONNECTING_CAST_DEVICE_ID]:cC};return(t,n)=>{let a=null;return n.type in e&&(a=e[n.type](a||t,n)),a||t||rC}})(),uC="searchHistory",hC={contexts:(()=>{const e=localStorage.getItem(uC);return e?JSON.parse(e).filter((e=>"uri"in e)):[]})()},pC=(e=hC,t)=>{switch(t.type){case jN:{const n=t.uri?((e,t,n,a)=>[{uri:e,name:t,image:n}].concat(a.filter((t=>t.uri!==e))).splice(0,4))(t.uri,t.name,t.image,e.contexts):e.contexts;try{localStorage.setItem(uC,JSON.stringify(n))}catch(e){}return{...e,contexts:n}}case LN:return localStorage.removeItem(uC),{...e,contexts:[]};default:return e}},mC={},fC=(e=mC,t)=>{switch(t.type){case ON:return{...e,uri:t.uri};case PN:return{...e,...t.data};default:return e}},gC={isAnonymous:!0,accessToken:"",accessTokenExpirationTimestampMs:0,tokenType:"",user:null,locale:qb.h.en,productState:null,market:"",valid:!1,overrides:null};function bC(e=gC,t){switch(t.type){case mw.J:return{...e,user:t.data};case mw.O:return{...e,productState:t.data};case fw.ro:return{...e,accessToken:t.authData.accessToken,accessTokenExpirationTimestampMs:t.authData.accessTokenExpirationTimestampMs,tokenType:t.authData.tokenType,isAnonymous:t.authData.isAnonymous,valid:!0};case fw.Zz:return e.user?{...e,user:{...e.user,display_name:t.name}}:e;case fw.L0:return e.user?{...e,user:{...e.user,images:t.images}}:e;case fw.Vx:return{...e,overrides:{...e.overrides,country:t.country}};case fw.dD:return{...e,overrides:{...e.overrides,locale:t.locale}};default:return e}}const vC=e=>!(e.type===fN.l_.PLAY||e.type===fN.l_.PLAYING),yC=e=>!(e.type===fN.l_.PLAY||e.type===fN.l_.USER_INVESTMENT),_C=e=>t=>n=>a=>{const r=n(a);switch(a.type){case fN.Jf:{const{storeAction:t,actionIntent:n}=a;e.storeAction((e=>((e,t)=>{const{type:n}=t;switch(n){case fN.l_.PLAY:return[t];case fN.l_.PLAYING:return[...e.filter(vC),t];case fN.l_.USER_INVESTMENT:return[...e.filter(yC),t];default:return[t]}})(e,{storeAction:t,type:n})));break}case fN.f6:{const n=e.pullAction()||null;t.dispatch({type:"PLAY_AT_FIRST_TAP_HAD_DEFERRED_ACTIONS",had:!!n&&n.length>0}),n&&n.forEach((({storeAction:e})=>{t.dispatch(e)}));break}}return r},EC=IA.Zz,xC=(e,t)=>{const{session:n,features:a}=e,{actionStoreApi:r,adManagers:i,ageRestrictionApi:s,deferredAction:o,eventSender:c,followApi:d,history:u,libraryApi:h,offlineApi:p,platform:m,playbackApi:f,playerApi:g,playlistApi:b,rootlistApi:v,serviceWorkerMessenger:y,socialConnectApi:_,transport:E}=t,x=D_(m),A=[];x?A.push((e=>()=>t=>n=>{const a=t(n);return n.type===fw.tQ&&e.finalFlush().finally(VI.r),a})(c)):(n?.isAnonymous||A.push((e=>t=>n=>a=>{const r=n(a),i=t.getState(),s=i.session;if(a.type in Qi.gK){const{hasOccurred:e,isOpen:n}=t.getState().ui.playbackNotSupportedErrorDialog;if(e&&!n)return t.dispatch(l.rN()),r}switch(a.type){case fw.xM:!yN&&s.accessToken&&(yN=IN(t,e),t.getState().features&&t.getState().features.mwp&&window.addEventListener("focus",(()=>{yN&&yN._controller&&!yN._controller._state?yN=IN(t,e):yN?.getCurrentState().then((n=>{n||(yN=IN(t,e))}))})));break;case Qi.gK.SET_ACTIVE_DEVICE:i.playback.device&&i.playback.device.id===a.id||yN?.transfer(a.id)}return r})(r)),A.push(II),A.push(zI(E,c,m.enableCastConnect)));const w="boolean"!=typeof a?.isInteractionLoggerEnabled||a.isInteractionLoggerEnabled;return[(0,Yi.oU)(g,h,v,d,r),(I=p,e=>(I.getEvents().addListener(CN.I.ERROR,(t=>{t.data.code===TN.O4.DEVICE_LIMIT_REACHED&&e.dispatch((0,l.j4)())})),e=>async t=>{e(t)})),(S=u.push,e=>t=>n=>{const{pathname:a,search:r,hash:i}=window.location,{dispatch:s}=e,o=e.getState(),c=new RegExp(ne),{OPEN_SIGNUP_PROMPT_DIALOG:d,CLOSE_SIGNUP_PROMPT_DIALOG:u,UPDATE_UI_HISTORY_STATE:h}=l.gK;switch(n.type){case d:S({pathname:a,search:r,state:{},hash:ne});break;case u:S({pathname:a,search:r,state:{},hash:""});break;case h:(0,te.GP)(o)&&!c.test(i)&&s((0,l.BU)())}return t(n)}),_C(o),...A,...Aw(m,x,u,i,f,g),HN(y),Yw(s),qI(b),zN(c),VN,(0,NN.f0)(u,g,_),kN,WI(c,w),GI,MN(),TA];var S,I};function AC(e,t){const{platform:n}=t,a=xC(e,t);return(0,IA.y$)((e=>{return(0,IA.HY)({playback:dC,session:bC,ui:(0,_i.JQ)(e),searchHistory:pC,features:XN,duplicateTracks:YN,ageRestriction:KN,platform:aC(e),ads:(t=e.container,(0,IA.HY)({sponsoredPlaylist:Pw,leaderboard:Tw,root:Fw,adFeedback:Vw,...t===Ma.m.Desktop?{billboard:Sw,hpto:kw,vto:Mw,audio:Lw,embeddedAd:Nw}:{}})),inAppMessaging:Kw,aboutRecs:BN,seoExperiment:fC,...e.container===Ma.m.Desktop&&{aboutSpotify:GN,licenses:tC,reportIssue:Ww}});var t})(n),e,EC((0,IA.Tw)(...a)))}class wC{constructor(e){this.spotifyTransport=e}async getDialog(e){const t=await((e,t)=>e.build().withMethod("GET").withHost(Qo.d).withPath(`/dialog/${t}`).withEndpointIdentifier("/dialog/${uri}").withoutMarket().send())(this.spotifyTransport,e),{r:n,g:a,b:r}=this.getColorRGB(t.body.color);return{backgroundColor:`rgb(${n}, ${a}, ${r})`,providerUrl:t.body.provider_url}}getColorRGB(e){return{r:e>>>16&255,g:e>>>8&255,b:e>>>0&255}}}var SC=o(18052);const IC=(e,t)=>{let n=[];return{storeAction:a=>{n=a(n),e.setItem(t,JSON.stringify(n))},pullAction:()=>{const a=e.getItem(t);if(e.removeItem(t),n=[],a)try{return JSON.parse(a)}catch(e){return null}return null}}};var NC=o(93236),CC=o(70252),TC=o(70897);var jC=o(5756),LC=o(65732),RC=o(78996),kC=o(70208),OC=o(2830),PC=o(31330);const DC=e=>{const t=e.pathname.split("/"),n=t.pop(),a=t.pop();if(a&&n)return(0,J.o_h)(`spotify:${a}:${n}`)?.toURI()};var MC,HC,zC,VC,UC,FC=-1,BC=function(e){addEventListener("pageshow",(function(t){t.persisted&&(FC=t.timeStamp,e(t))}),!0)},qC=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},WC=function(){var e=qC();return e&&e.activationStart||0},GC=function(e,t){var n=qC(),a="navigate";return FC>=0?a="back-forward-cache":n&&(document.prerendering||WC()>0?a="prerender":document.wasDiscarded?a="restore":n.type&&(a=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:a}},QC=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var a=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return a.observe(Object.assign({type:e,buffered:!0},n||{})),a}}catch(e){}},KC=function(e,t,n,a){var r,i;return function(s){t.value>=0&&(s||a)&&((i=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},$C=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},YC=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},ZC=function(e){var t=!1;return function(){t||(e(),t=!0)}},XC=-1,JC=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},eT=function(e){"hidden"===document.visibilityState&&XC>-1&&(XC="visibilitychange"===e.type?e.timeStamp:0,nT())},tT=function(){addEventListener("visibilitychange",eT,!0),addEventListener("prerenderingchange",eT,!0)},nT=function(){removeEventListener("visibilitychange",eT,!0),removeEventListener("prerenderingchange",eT,!0)},aT=function(){return XC<0&&(XC=JC(),tT(),BC((function(){setTimeout((function(){XC=JC(),tT()}),0)}))),{get firstHiddenTime(){return XC}}},rT=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},iT=[1800,3e3],sT=function(e,t){t=t||{},rT((function(){var n,a=aT(),r=GC("FCP"),i=QC("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<a.firstHiddenTime&&(r.value=Math.max(e.startTime-WC(),0),r.entries.push(e),n(!0)))}))}));i&&(n=KC(e,r,iT,t.reportAllChanges),BC((function(a){r=GC("FCP"),n=KC(e,r,iT,t.reportAllChanges),$C((function(){r.value=performance.now()-a.timeStamp,n(!0)}))})))}))},oT=[.1,.25],cT=0,lT=1/0,dT=0,uT=function(e){e.forEach((function(e){e.interactionId&&(lT=Math.min(lT,e.interactionId),dT=Math.max(dT,e.interactionId),cT=dT?(dT-lT)/7+1:0)}))},hT=function(){return MC?cT:performance.interactionCount||0},pT=[],mT=new Map,fT=0,gT=[],bT=function(e){if(gT.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=pT[pT.length-1],n=mT.get(e.interactionId);if(n||pT.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var a={id:e.interactionId,latency:e.duration,entries:[e]};mT.set(a.id,a),pT.push(a)}pT.sort((function(e,t){return t.latency-e.latency})),pT.length>10&&pT.splice(10).forEach((function(e){return mT.delete(e.id)}))}}},vT=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=ZC(e),"hidden"===document.visibilityState?e():(n=t(e),YC(e)),n},yT=[200,500],_T=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},rT((function(){var n;"interactionCount"in performance||MC||(MC=QC("event",uT,{type:"event",buffered:!0,durationThreshold:0}));var a,r=GC("INP"),i=function(e){vT((function(){e.forEach(bT);var t=function(){var e=Math.min(pT.length-1,Math.floor((hT()-fT)/50));return pT[e]}();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,a())}))},s=QC("event",i,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});a=KC(e,r,yT,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),YC((function(){i(s.takeRecords()),a(!0)})),BC((function(){fT=hT(),pT.length=0,mT.clear(),r=GC("INP"),a=KC(e,r,yT,t.reportAllChanges)})))})))},ET=[2500,4e3],xT={},AT=[800,1800],wT=function e(t){document.prerendering?rT((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},ST=function(e,t){t=t||{};var n=GC("TTFB"),a=KC(e,n,AT,t.reportAllChanges);wT((function(){var r=qC();r&&(n.value=Math.max(r.responseStart-WC(),0),n.entries=[r],a(!0),BC((function(){n=GC("TTFB",0),(a=KC(e,n,AT,t.reportAllChanges))(!0)})))}))},IT={passive:!0,capture:!0},NT=new Date,CT=function(e,t){HC||(HC=t,zC=e,VC=new Date,LT(removeEventListener),TT())},TT=function(){if(zC>=0&&zC<VC-NT){var e={entryType:"first-input",name:HC.type,target:HC.target,cancelable:HC.cancelable,startTime:HC.timeStamp,processingStart:HC.timeStamp+zC};UC.forEach((function(t){t(e)})),UC=[]}},jT=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){CT(e,t),r()},a=function(){r()},r=function(){removeEventListener("pointerup",n,IT),removeEventListener("pointercancel",a,IT)};addEventListener("pointerup",n,IT),addEventListener("pointercancel",a,IT)}(t,e):CT(t,e)}},LT=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,jT,IT)}))},RT=[100,300];const kT=[{regExp:/^\/$/,pageIdentifier:"/home"},{regExp:/^\/genre/,pageIdentifier:"/genre"},{regExp:/^\/view/,pageIdentifier:"/view"},{regExp:/^\/browse/,pageIdentifier:"/browse"},{regExp:/^\/search/,pageIdentifier:"/search"},{regExp:/^\/upsell/,pageIdentifier:"/upsell"},{regExp:/^\/collection/,pageIdentifier:"/collection"},{regExp:/^\/artist/,pageIdentifier:"/artist"},{regExp:/^\/playlist/,pageIdentifier:"/playlist"},{regExp:/^\/album/,pageIdentifier:"/album"},{regExp:/^\/episode/,pageIdentifier:"/episode"},{regExp:/^\/show/,pageIdentifier:"/show"},{regExp:/^\/user/,pageIdentifier:"/user"},{regExp:/^\/track/,pageIdentifier:"/track"},{regExp:/^\/concerts/,pageIdentifier:"/concerts"},{regExp:/^\/concert\//,pageIdentifier:"/concert"},{regExp:/^\/made-for-you/,pageIdentifier:"/made-for-you"},{regExp:/^\/prerelease/,pageIdentifier:"/prerelease"}],OT=(e="")=>{const t=kT.find((({regExp:t})=>t.test(e)));return t?.pageIdentifier??"unknown"};function PT(e){mN.BrowserMetrics.getPageLoadTime().then((e=>{(0,vN.fE)({metric_type:mN.MetricTypes.TIMER,what:"time-to-page-load-nanoseconds",value:(0,mN.asNanoseconds)(mN.Time.fromMillis(e).asNanos()),tags:{route:OT(window.location.pathname)}})})).catch((()=>{})),mN.BrowserMetrics.getTimeToFirstPaint().then((e=>{(0,vN.fE)({metric_type:mN.MetricTypes.TIMER,what:"time-to-first-paint-nanoseconds",value:(0,mN.asNanoseconds)(mN.Time.fromMillis(e).asNanos()),tags:{route:OT(window.location.pathname)}})})).catch((()=>{})),mN.BrowserMetrics.getTimeToFirstContentfulPaint().then((e=>{(0,vN.fE)({metric_type:mN.MetricTypes.TIMER,what:"time-to-first-contentful-paint-nanoseconds",value:(0,mN.asNanoseconds)(mN.Time.fromMillis(e).asNanos()),tags:{route:OT(window.location.pathname)}})})).catch((()=>{}));const t=t=>{const n=OT(window.location.pathname);if((0,vN.fE)(mN.BrowserMetrics.getWebVitalsMetric({...t,label:t.name},{route:n})),e&&t.value>0){const a=e.makeTimeMeasurementBuilder("web_vitals");a.addPoint({identifier:t.name,durationInMicroseconds:Math.round(1e3*t.value)}).addDimension("page-identifier",n),e.send(a.build())}};var n,a;n=t,a=a||{},rT((function(){var e,t=aT(),r=GC("FID"),i=function(n){n.startTime<t.firstHiddenTime&&(r.value=n.processingStart-n.startTime,r.entries.push(n),e(!0))},s=function(e){e.forEach(i)},o=QC("first-input",s);e=KC(n,r,RT,a.reportAllChanges),o&&(YC(ZC((function(){s(o.takeRecords()),o.disconnect()}))),BC((function(){var t;r=GC("FID"),e=KC(n,r,RT,a.reportAllChanges),UC=[],zC=-1,HC=null,LT(addEventListener),t=i,UC.push(t),TT()})))})),function(e,t){t=t||{},sT(ZC((function(){var n,a=GC("CLS",0),r=0,i=[],s=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=i[0],n=i[i.length-1];r&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,i.push(e)):(r=e.value,i=[e])}})),r>a.value&&(a.value=r,a.entries=i,n())},o=QC("layout-shift",s);o&&(n=KC(e,a,oT,t.reportAllChanges),YC((function(){s(o.takeRecords()),n(!0)})),BC((function(){r=0,a=GC("CLS",0),n=KC(e,a,oT,t.reportAllChanges),$C((function(){return n()}))})),setTimeout(n,0))})))}(t),function(e,t){t=t||{},rT((function(){var n,a=aT(),r=GC("LCP"),i=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<a.firstHiddenTime&&(r.value=Math.max(e.startTime-WC(),0),r.entries=[e],n())}))},s=QC("largest-contentful-paint",i);if(s){n=KC(e,r,ET,t.reportAllChanges);var o=ZC((function(){xT[r.id]||(i(s.takeRecords()),s.disconnect(),xT[r.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return vT(o)}),{once:!0,capture:!0})})),YC(o),BC((function(a){r=GC("LCP"),n=KC(e,r,ET,t.reportAllChanges),$C((function(){r.value=performance.now()-a.timeStamp,xT[r.id]=!0,n(!0)}))}))}}))}(t),_T(t),sT(t),ST(t)}o(93376);async function DT(e,t,n){const a=(0,Nn.sV)();if(null===e||null===t)return null===e&&a.setUser({id:"anonymous",username:"anonymous"}),void(null===t&&a.setTag("product","logged_out"));const r=(0,wb.My)(),i=await PC.V.hash(e.username);switch(r){case Ma.m.Desktop:a.setUser({id:i});break;case Ma.m.Web:case Ma.m.PWA:{const e=(0,za.x)(Va.I4);e?.correlationId&&a.setUser({id:e.correlationId})}}var s;a.setTag("product",t.product),n.dispatch((s={country:t.country,uri:e.uri,id:e.username,display_name:e.displayName||void 0,images:e.images.map((({url:e,width:t,height:n})=>({url:e,width:t||null,height:n||null}))),product:t.product,policies:{opt_in_trial_premium_only_market:"1"===t["opt-in-trial-premium-only-market"]},type:"user",avatarBackgroundColor:e.avatarBackgroundColor},{type:mw.J,data:s})),n.dispatch(function(e){return{type:mw.O,data:e}}(t))}function MT(){if(dA()){const e="xpui-snapshot_2025-05-16_1747395131143_0a9b557";(0,Nn.ig)("https://de32132fc06e4b28965ecf25332c3a25@o22381.ingest.sentry.io/114855",e,function(){const{error:e,transaction:t}={error:.001,transaction:0};return{sampleRate:e,tracesSampleRate:t,debug:!1,beforeSendTransaction:uA}}(),(0,wb.My)(),function(){const e=[];return e.push(z_()),e.push(cA({useEffect:f.useEffect,useLocation:ae.zy,useNavigationType:ae.wQ,createRoutesFromChildren:ae.AV,matchRoutes:Y.ue})),e}())}}O_("playback_load_start"),(0,n.Cd)(),async function(){MT(),function(){const e=document.getElementById("remoteConfig");e&&e.textContent?(JSON.parse(atob(e.textContent)),L_()):L_(Ee.apO.Control)}();const d=await async function(){const e=(0,wb.My)();{const{createPlatformDesktop:t}=await Promise.resolve().then(o.bind(o,41311));return t(e)}}(),u=d.getFeatureFlags(),h=d.getRegistry(),p=d.getSession(),f=d.getHistory(),g=d.getSEOExperiments(),b=h.resolve(Ib.u);Ua.M.setup(),(0,T_.O)(d.container,d.operatingSystem);const v=d.getEventSender();b.getEvents().addListener("message",(e=>{e.data.type===Au.W.NAVIGATION?async function(e,t){if(!t)return;const n=wA(t);if(!n)return;const{url:a}=n;if(AA(a)){const t=e.resolve(mA.KM);EA(n,t)}await SA(e,n);const r=`${a.pathname}${a.search}`;e.resolve(mA.Fi).push(r,{referrer:"deeplink"})}(h,e.data.data):e.data.type===Au.W.LOG_DEEP_LINK&&function(e,t){if(!t)return;const n=wA(t);if(!n)return;const{url:a}=n;if(AA(a)){const t=e.resolve(mA.KM);EA(n,t)}}(h,e.data.data)})),(0,TC.X)()&&!u.mwp&&(window.location.href="https://www.spotify.com");const{gtmId:y,market:_,locale:E,userCountry:x}=(0,za.x)(Va.I4),A=D_(d),w=d.getTransport(),S=await d.getServiceWorkerMessenger(),N=Spicetify.Platform.ReduxStore=h.resolve(R_.JD),C=h.resolve(k_.t),j=h.resolve(NC.Ho),L=h.resolve(CC.v),R=h.resolve(jC.B),k=h.resolve(LC.H),O=h.resolve(fA.Ki),P=h.resolve(RC.Yi),D=h.resolve(kC.j),M=h.resolve(SC.T),H=h.resolve(hA.B),z=AC({session:p,features:u,seoExperiment:g},{platform:d,history:f,playbackApi:R,playerApi:k,rootlistApi:P,playlistApi:O,followApi:C,libraryApi:j,actionStoreApi:N,serviceWorkerMessenger:S,offlineApi:L,transport:w,eventSender:v,adManagers:d.getAdManagers(),deferredAction:IC(sessionStorage,"ANONYMOUS_DEFERRED_ACTION_KEY"),ageRestrictionApi:new wC(Go.n.getInstance()),socialConnectApi:D});w.on(r.TransportEvent.ACCESS_TOKEN,(async()=>{const e=await M.getToken({preferCached:!0});null!==e&&(Go.n.setSession(e),z.dispatch((0,Zs.a7)(e)))}));let V=!1;w.on(r.TransportEvent.RECONNECTING,(()=>{V=!0})),w.on(r.TransportEvent.RECONNECTED,(()=>{V=!1})),w.on(r.TransportEvent.AUTHENTICATION_FAILED,(async()=>{if(!V&&!A){const e=await M.getToken({preferCached:!0});null!==e&&e.isAnonymous||z.dispatch((0,Zs.wH)())}})),(0,vN.q6)("desktop-web-player",w),PT(H),A||(()=>{const e=new URL(window.location.href);return xA(e)||((t=e).searchParams.has("utm_source")||t.searchParams.has("utm_medium")||t.searchParams.has("utm_campaign"))&&!(e=>"/"===e.pathname&&"pwa_install"===e.searchParams.get("utm_source"))(e)||!(e=>"/"===e.pathname||"/__noul__"===e.pathname||/\/intl-[A-Za-z][A-Za-z]$/.test(e.pathname))(e);var t})()&&(((e,t)=>{const n=new URL(window.location.href),a=n.searchParams.get("dlsi")||_A(),r={link:window.location.href,entity_uri:DC(n),source:window.navigator.userAgent,deeplink_session_id:a};t?e.send({name:"DeeplinkOpenNonAuth",environments:["browsernonauth","devicenonauth"],data:r}):e.send((0,bA.N)(r))})(v,p.isAnonymous),f.location.state={..."object"==typeof f.location.state?f.location.state:{},referrer:"deeplink"},k.setReferrer("deeplink"));const U=i.Ru.getLocaleForTranslation();if(z.dispatch((0,Zs.Hh)()),z.dispatch((0,c.zA)(U)),A){document.documentElement.setAttribute("lang",U)}(e=>{const t=window.matchMedia("(display-mode: standalone)");t.addEventListener?t.addEventListener("change",(t=>e(t.matches))):t.addListener((t=>e(t.matches)))})((()=>{z.dispatch({type:s})})),function(e,t){const n=[];let a=0;n.push(e.location),e.listen(((e,r)=>{r===I_&&(a+=1,n.splice(a),n.push(e)),r===S_&&(a=n.findIndex((t=>t.key===e.key))),r===N_&&n.splice(a,1,e),t(C_(a,n))})),t(C_(a,n))}(f,(e=>{z.dispatch((0,l.hp)(e))})),await DT(d.initialUser,d.initialProductState,z);const F=(0,pA.e)(!0);(0,OC.lM)(),(0,e.H)(F).render((0,I.jsx)(t.Gu,{configuration:null,children:(0,I.jsx)(m.s,{onError:e=>(0,Nn.Jy)(e,"App"),Fallback:T,children:(0,I.jsx)(w_,{store:z,platform:d})})})),!A&&y&&(0,a.track)({dataLayerPushInitial:!0,googleTagManagerId:y,language:E?.locale,market:_,loggedIn:!p.isAnonymous,oneTrust:"1"===((0,Ht.v8)("client-web_one-trust")??"1"),userCountry:x}),(0,T_.W)(d.operatingSystem)&&z.dispatch((0,l.Kk)()),(0,n.Lj)("UI init phase is done for logged-in experience"),p.isAnonymous||v.send({name:"WindowSize",environments:["desktop","browser"],data:{width:window.outerWidth,height:window.outerHeight,mode:0,duration:0}},{flush:!1})}().catch((n=>{(0,Nn.OV)(n),console.error(n);const a=(0,pA.e)(!0);(0,e.H)(a).render((0,I.jsx)(t.Gu,{configuration:null,children:(0,I.jsx)(T,{})}))}))})(),c=o.O(c)})();
//# sourceMappingURL=xpui-snapshot.js.map