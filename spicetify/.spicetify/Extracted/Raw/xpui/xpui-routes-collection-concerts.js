"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5783],{7690:(e,t,n)=>{n.d(t,{R:()=>S});var s=n(30758),a=n(97500),i=n.n(a),r=n(35244),o=n(76274),l=n(97614),c=n(23575),d=n(51198),u=n(86851),m=n(54843);const g="C3jVNGQUUZcUp5kTEOC0",h="pdLDCowVOiUIfeu9hihi",p="Sm3POgzbjs7wFj7tyYNh",v="vZSm_8xsDxBqMzp1tqmn",x="NXBXbVfJboNI6xdrNIDB",f="bF2GZTmgrRQLsrDcIZXd",j="qI009QzTkvisAXqhbw74",y="qIb0IOmZs9KwEeOkpvg1";var C=n(86070);const b=(0,s.memo)((({title:e,titleUri:t,titleMediaCircle:n,subtitle:a,pretitle:c,titleMedia:u,trailing:m,collapsable:b,children:S,className:N="",testId:k="component",id:_,seeAllUri:I,seeAllLabel:R,alwaysShowSeeAll:w=!1,showSeeAll:D=!0,onClickShelfTitle:U,onClickShelfSeeAll:A,elementRef:E,renderSubHeader:M,withEncoreCards:F=!0})=>{const B=(0,s.useRef)(null),T=!!D&&(w||D),L=b?{"data-shelf-collapsable":!0}:{},[P,z]=(0,s.useState)(!0),O=(0,d.W)();(0,s.useLayoutEffect)((()=>{if(B.current){const e=(0,o.X)(B.current,O);e?B.current.removeAttribute("data-shelf-notatedge"):B.current.setAttribute("data-shelf-notatedge","true"),z(e)}}),[E,O]);const H=P?"0px var(--margin, 0px)":"0px";return(0,C.jsxs)("section",{ref:e=>{B.current=e,"function"==typeof E&&E(e)},className:i()(N,g,{[p]:F}),"data-shelf":"carousel","data-testid":`${k}-shelf`,"aria-label":e??"",...L,children:[e&&(0,C.jsx)("div",{className:v,children:(0,C.jsx)(l.k,{seeAllUri:I,seeAllLabel:R,pageId:_,showSeeAll:T,onClickTitle:U,onClickSeeAll:A,title:e,titleUri:t,subtitle:a,pretitle:c,titleMedia:u,trailing:m,titleMediaCircle:n})}),M&&(0,C.jsx)("div",{className:x,children:M()}),(0,C.jsx)(r.FN,{className:h,chevronsClassName:y,scrollContentClassName:j,scrollerClassName:f,scrollingMethod:r.Hv.SNAP,scrollPadding:H,scrollSnapAlign:"start",wheelScrollEnabled:!1,showButtons:r.C_.ON_HOVER,edgeGradients:r.TB.LINEAR_GRADIENT,scrollSnapByItems:3,children:S})]})})),S=({index:e,logShelfImpressions:t=!1,...n})=>{const{seeAllUri:s,id:a}=n,{onClickShelfTitle:i,onClickShelfSeeAll:r,spec:o}=(0,c.w)({seeAllUri:s,index:e,id:a}),l=(0,m.t)(o,t);return(0,C.jsx)(u.r,{spec:o,children:(0,C.jsx)(b,{...n,elementRef:l,onClickShelfTitle:i,onClickShelfSeeAll:r})})}},21722:(e,t,n)=>{n.d(t,{DL:()=>o,Qe:()=>l,bU:()=>c,nm:()=>r});var s=n(42534);const a=(e,t)=>{if(!e.includes(t))return;const n=e.split("/"),s=n.findIndex((e=>e===t));return n[s+1]},i=(e,t)=>{const n=["/concerts"];return(t.location||e.includes("location")&&null!==t.location)&&(n.push("location"),n.push(String(t.location??a(e,"location")))),(t.genre||e.includes("genre")&&null!==t.genre)&&(n.push("genre"),n.push(String(t.genre??a(e,"genre")))),n.join("/")},r=(e,t,n)=>{if(!t)return i(e,{location:null});const s=n?.normalize().replaceAll(/\W+/g,"-");return i(e,s?{location:`${t}-${s}`}:{location:t})},o=(e,t,n)=>{if(!t)return i(e,{genre:null});const s=n?.normalize().replaceAll(/\W+/g,"-");return i(e,s?{genre:`${t}-${s}`}:{genre:t})},l=e=>{if(!e)return;const t=e.split("-"),[n]=t;return{id:`spotify:concept:${n}`,name:t.reduce(((e,t,n)=>0===n?e:`${e} ${t}`),"").trim()}},c=e=>(0,s.x)(e,{representation:"date"})},37143:(e,t,n)=>{n.d(t,{p:()=>k});var s=n(30758),a=n(97500),i=n.n(a),r=n(39629),o=n(60992),l=n(80902),c=n(45370);const d="(min-width: 0px)",u="(min-width: 0px) and (max-width: 767px)",m="(min-width: 768px)",g="(min-width: 768px) and (max-width: 1023px)",h="(min-width: 1024px)",p="(min-width: 1024px) and (max-width: 1279px)",v="(min-width: 1280px)",x="(min-width: 1280px) and (max-width: 1919px)",f="(min-width: 1920px)",j="FvfvGU3jvHRskUU9v9_8",y="Q9AlbZn2EGzy3MTWXa8X",C="mxmxS0y8LiwSs5nueKPT",b="GXxVAveNFStY3pBI_NO4",S="eHcXC2s97InYP7rMNT0H";var N=n(86070);const k=(0,s.memo)((function(e){const{children:t,message:n,title:s,linkTitle:a,linkTo:k,onClick:_,renderInline:I=!1}=e,{isXSOnly:R,isSMOnly:w}={isXS:(0,c.U)(d),isXSOnly:(0,c.U)(u),isSM:(0,c.U)(m),isSMOnly:(0,c.U)(g),isMD:(0,c.U)(h),isMDOnly:(0,c.U)(p),isLG:(0,c.U)(v),isLGOnly:(0,c.U)(x),isXL:(0,c.U)(f)},D=R||w;return(0,N.jsxs)("section",{className:i()(j,{[y]:I}),children:[t,(0,N.jsx)(r.E,{as:"h1",variant:D?"titleSmall":"titleMedium",className:b,children:s}),(0,N.jsx)(r.E,{variant:D?"bodySmall":"bodyMedium",className:S,children:n}),a&&(k||_)&&(0,N.jsx)(o.$,{colorSet:"invertedLight",className:C,href:k,onClick:_,component:l.v,children:a})]})}))},54571:(e,t,n)=>{n.d(t,{A:()=>y});var s=n(30758),a=n(47207),i=n(39629),r=n(9239),o=n(79462),l=n(75802),c=n(33033);const d="wedRUk4eiBo9n9vqXLhU",u="hMbtEskyvMbDiwq1EScA",m="HYVIJaYYiCTgSCHie70L",g="SPbe_Q1wtiZQCmo0QKUy",h="TRp4tgG7_cymGIXDevIP",p="tC1Y_nwyyly7cpIGqF5K",v="l93AfoV_qHnMQSQBB5GK",x="DgDBmSR2sbwji2UfqxIf",f="EkGb0ZzhswreSvpZoioY";var j=n(86070);const y=(0,s.memo)((e=>{const{uri:t,title:n,imageUrl:s,date:y,subTitle:C,firstParty:b,onClick:S}=e,N=y?(0,l.l4)(y):void 0;return(0,j.jsx)(o.N,{to:t,className:d,"data-testid":"concert-card",onClick:S,children:(0,j.jsxs)("div",{className:u,children:[(0,j.jsx)(c.b,{children:(0,j.jsx)("div",{role:"img",className:f,style:{backgroundImage:`url(${s})`},children:!s&&(0,j.jsx)(a.r,{role:"img",size:"xxlarge",semanticColor:"textSubdued"})})}),N&&(0,j.jsxs)("time",{className:m,dateTime:y,children:[(0,j.jsx)(i.E,{as:"div",variant:"bodySmall",children:(0,l.tj)(N)}),(0,j.jsx)(i.E,{as:"div",variant:"bodyMediumBold",children:(0,l.Py)(N)})]}),(0,j.jsxs)("div",{className:g,dir:"auto",children:[(0,j.jsx)(i.E,{as:"h3",variant:"bodyMedium",className:h,children:n}),(0,j.jsxs)("div",{className:p,children:[b&&(0,j.jsx)("span",{className:x,children:(0,j.jsx)(r.D,{size:"small"})}),(0,j.jsx)(i.E,{as:"span",className:v,variant:"bodySmall","data-testid":"location-name",semanticColor:"textSubdued",children:C})]})]})]})})}))},63102:(e,t,n)=>{n.d(t,{I:()=>d});var s=n(30758),a=n(76082),i=n(87579),r=n(23674),o=n(81372),l=n(75802),c=n(97485);const d=e=>{const t=(0,c.s)(),n=(0,s.useMemo)((()=>{const t=(0,a.o_h)((0,r.$V)(e)?e.data.uri:"");return e.spec?.eventCardFactory({identifier:t?.id,position:e.position,uri:t?.toURI()??""})}),[e]);if(!(0,r.$V)(e))return;return{imageUrl:(0,o.Q)(e.data.artists.items)??"",uri:e.data.uri,title:e.data.title,subTitle:[e.data.location.name,e.data.location.city].join(i.Ru.getSeparator()),date:e.data.startDateIsoString,dateRange:(0,l.Y)(new Date(e.data.startDateIsoString)),handleClick:()=>n&&t.logInteraction(n.hitUiNavigate({destination:e.data.uri}))}}},76274:(e,t,n)=>{n.d(t,{X:()=>s});const s=(e,t)=>{const n=e.parentElement.getBoundingClientRect(),s=e.getBoundingClientRect(),a=t?n.right:n.left,i=t?s.right:s.left;return!(e instanceof HTMLElement&&Math.abs(i-a)>48)}},81372:(e,t,n)=>{n.d(t,{Q:()=>s});const s=e=>{const[t]=e;if(!("visuals"in t.data))return;const[n]=t.data.visuals.avatarImage?.sources??[];return n?.url}},87077:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ts});var s=n(30758),a=n(97500),i=n.n(a),r=n(62411),o=n(64180),l=n(4882),c=n(51313),d=n(96237),u=n(21428),m=n(87579),g=n(44904),h=n(1214),p=n(3364),v=n(22923),x=n(11738),f=n(50498),j=n(83332),y=n(85387),C=n(60749),b=n(60992),S=n(69568),N=n(76082),k=n(45592),_=n(39629),I=n(49363),R=n(80656),w=n(29323);const D="gTBBvHPsmI4wQAMvZkZg",U="oH8142OCLHWFsonR04W8",A="mihrHMZQtbUQfLDbept_",E="vnpiTOiF2um7QiJAcpgw",M="uTm3fSPtqqJzQkcfn4yA",F="x4_6X4ZJHSGg6IAuXsXv",B="qYpxg7GtXdhucrIHtFHs";var T=n(86070);const L=e=>{const t=(0,s.useMemo)((()=>e.spec?.genreButtonFactory({position:e.position,uri:e.uri})),[e.spec,e.position,e.uri]);return(0,T.jsx)(w.v,{variant:e.isSelected?"contrasting":"tinted",onClick:()=>{t&&t.hitUiElementToggle(),e.onClick()},children:(0,T.jsx)("div",{className:F,children:e.name})},e.uri)},P=e=>void 0!==e&&Object.keys(e).includes("data"),z=e=>void 0!==e&&Object.keys(e).includes("uri"),O=e=>{const[t,n]=(0,s.useState)(e.defaultConcepts),a=(0,s.useMemo)((()=>e.spec?.genreDoneButtonFactory()),[e.spec]),i=(0,s.useMemo)((()=>e.spec?.genreClearButtonFactory()),[e.spec]),r=e.concepts.filter(P).sort(((e,t)=>t.weight-e.weight)),o=r.filter((e=>0!==e.weight)),c=r.filter((e=>!o.includes(e)));return(0,T.jsx)(R.A,{contentLabel:m.Ru.get("live_events.label"),isOpen:!0,className:D,onRequestClose:e.onClose,children:(0,T.jsxs)("section",{className:U,children:[(0,T.jsx)("div",{className:E,children:(0,T.jsx)(l.H,{"aria-label":m.Ru.get("close"),iconOnly:k.M,size:"small",onClick:e.onClose})}),(0,T.jsx)("div",{className:A,children:(0,T.jsx)(_.E,{as:"h3",variant:"bodyMediumBold",semanticColor:"textBase",children:m.Ru.get("concerts.genres.genres")})}),o.length>0&&(0,T.jsxs)("div",{"data-testid":"top-genres",children:[(0,T.jsxs)("div",{className:B,children:[(0,T.jsx)(_.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",children:m.Ru.get("concerts.genres.top_genres")}),(0,T.jsx)(l.H,{onClick:()=>{i&&i.hitUiDeselect(),n([])},size:"small",disabled:0===t.length,children:m.Ru.get("concerts.genres.clear")})]}),(0,T.jsx)(I.I,{mode:"multi-select",layout:"multi-line","aria-label":"",children:o.map(((s,a)=>{if(!z(s.data))return null;const{uri:i,name:r}=s.data;return(0,T.jsx)(L,{uri:i,name:r,position:a+1,spec:e.spec,isSelected:t.includes(i),onClick:()=>n((e=>e.includes(i)?e.filter((e=>e!==i)):[...e,i]))},i)}))})]}),(0,T.jsxs)("div",{"data-testid":"all-genres",children:[(0,T.jsxs)("div",{className:B,children:[(0,T.jsx)(_.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",children:m.Ru.get("concerts.genres.all_genres")}),0===o.length&&(0,T.jsx)(l.H,{onClick:()=>{i&&i.hitUiDeselect(),n([])},size:"small",disabled:0===t.length,children:m.Ru.get("concerts.genres.clear")})]}),(0,T.jsx)(I.I,{mode:"multi-select",layout:"multi-line","aria-label":"",children:c.map(((s,a)=>{if(!z(s.data))return null;const{uri:i,name:r}=s.data;return(0,T.jsx)(L,{uri:i,name:r,position:a+1,spec:e.spec,isSelected:t.includes(i),onClick:()=>n((e=>e.includes(i)?e.filter((e=>e!==i)):[...e,i]))},i)}))})]}),(0,T.jsx)("div",{className:M,children:(0,T.jsx)(b.$,{onClick:()=>{a&&a.hitUiSelect(),e.onSave(t)},size:"medium",children:m.Ru.get("concerts.genres.show_events")})})]})})},H=(e,t,n)=>{const s=n&&n?.length>1?"+"+(n?.length-1):"";return e&&z(e)?[e.name,s].join(" ").trim():t?[t,s].join(" ").trim():m.Ru.get("concerts.genres.all_genres")};var K=n(48692),Q=n(37007);const X=Spicetify.GraphQL.Definitions["concertConcepts"]=new K.l("concertConcepts","query","a409c1eb39b6345e7993d424d2408b65a6699bafc2b8a03217033e517cd76b72",null);var q=n(21722);const V=()=>{const{id:e}=(0,y.g)(),[t]=(0,C.ok)(),n=(0,q.Qe)(e),s=t.getAll("genres").map((e=>(0,N.dDZ)(e).toString()));return{displayName:n?.name,conceptUris:[...new Set(n?[n.id,...s]:s)],urlConceptUri:n?.id}};var Y=n(20924);const Z=e=>{const t=(0,Y.g)(),[n]=(0,C.ok)(),{pathname:a}=(0,y.zy)(),{displayName:i,conceptUris:r,urlConceptUri:o}=V(),l=(0,s.useMemo)((()=>e.spec?.genrePickerButtonFactory()),[e.spec]),{data:c}=(d={geohash:e.geohash??"",conceptUri:o??null},(0,Q.I)(X,d,u));var d,u;const m=(g=c?.concertConcepts,void 0!==g&&Object.keys(g).includes("items")?c.concertConcepts.items.filter(P):[]);var g;const[h,p]=(0,s.useState)(!1),[v,x]=(0,s.useState)(r),[f]=v,j=m.find((e=>z(e.data)&&e.data.uri===f)),k=j||i?b.$:S.n;return(0,T.jsxs)("div",{children:[(0,T.jsx)(k,{size:"small",onClick:()=>{l&&l.hitUiReveal(),p((e=>!e))},className:F,children:H(j?.data,i,v)}),h&&(0,T.jsx)(O,{spec:l,onClose:()=>p(!1),onSave:e=>{n.delete("genres");const[s]=e,i=m.find((e=>z(e.data)&&e.data.uri===s))?.data;if(i&&z(i)){const s=(0,N.o_h)(i.uri);e.length>1&&e.forEach((e=>n.append("genres",(0,N.o_h)(e)?.id))),t({pathname:(0,q.DL)(a,s?.id,i.name),search:new URLSearchParams(n).toString()})}else t({pathname:(0,q.DL)(a,void 0,void 0),search:new URLSearchParams(n).toString()});x(e),p(!1)},concepts:m,defaultConcepts:v})]})};var G=n(46991),W=n(73155),$=(n(66596),n(70043)),J=n(67017),ee=n(14366),te=n(3091),ne=n(17176),se=n(6924),ae=n(95034),ie=n(94222),re=n(96644),oe=n(87584),le=n(63514),ce=n(16856),de=n(54869),ue=n(96132),me=n(24808),ge=n(47613),he=n(2283),pe=n(88593),ve=n(56708),xe=n(64416),fe=n(79494),je=n(38408),ye=n(62224),Ce=n(63240),be=n(45523),Se=n(10632),Ne=n(54701),ke=n(80675),_e=n(72861),Ie=n(76804),Re=n(55128),we=n(53406),De=n(15643),Ue=n(1467),Ae=n(24428),Ee=n(48199),Me=n(61845),Fe=n(83536),Be=n(70756),Te=n(86236),Le=n(1103),Pe=n(96344),ze=n(38903),Oe=n(17530),He=n(33140),Ke=n(64741),Qe=n(71418),Xe=n(44135),qe=n(6729),Ve=n(32409),Ye=n(67031),Ze=n(98045),Ge=n(86111),We=n(11554),$e=n(61753),Je=n(87318),et=n(89949),tt=n(22180),nt=n(85428);const st={af:$.af,am:J.c,ar:ee.ar,arEG:te.m,arMA:ne.E,arSA:se.G,az:ae.az,bg:ie.bg,bn:re.bn,bho:J.c,bs:oe.bs,ca:le.ca,cs:ce.cs,da:de.da,de:ue.de,el:me.el,en:J.c,enGB:ge.b,es419:he.es,es:he.es,esAR:he.es,esMX:he.es,et:pe.et,eu:ve.eu,fa:xe.$,fi:fe.fi,fil:J.c,frCA:je.V,fr:ye.fr,gl:Ce.gl,gu:be.gu,he:Se.he,hi:Ne.hi,hr:ke.hr,hu:_e.hu,id:Ie.id,is:Re.is,it:we.it,ja:De.ja,kn:Ue.kn,ko:Ae.ko,lt:Ee.lt,lv:Me.lv,mk:Fe.mk,ml:J.c,mr:J.c,ms:Be.ms,nb:Te.nb,ne:J.c,nl:Le.nl,or:J.c,paIN:J.c,paPK:J.c,pl:Pe.pl,ptBR:ze.F,ptPT:Oe.pt,ro:He.ro,ru:Ke.ru,sk:Qe.sk,sl:Xe.sl,sr:qe.sr,sv:Ve.sv,sw:J.c,ta:Ye.ta,te:Ze.te,th:Ge.th,tr:We.tr,uk:$e.uk,ur:J.c,vi:Je.vi,zhCN:et.g,zhHK:tt.a,zhTW:nt.G,zu:J.c},at=e=>(e=>Object.keys(st).includes(e))(e)?st[e]:J.c;var it=n(12058),rt=n(42534);const ot=e=>{const t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));const n=new Date(t);return n.setDate(t.getDate()+2),{from:t,to:n}},lt=e=>{const t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));const n=new Date(t);n.setDate(t.getDate()+7);const s=new Date(n);return s.setDate(n.getDate()+2),{from:n,to:s}},ct=(e,t)=>!!(e?.from&&e?.to&&t?.from&&t?.to)&&((0,it.r)(e.from,t.from)&&(0,it.r)(e.to,t.to)),dt=e=>(0,rt.x)(e,{representation:"date"});var ut=n(51198),mt=n(97485),gt=n(54843);const ht="C1USyigFSYyc22_BmsgB",pt="Cwo5ZgH_QLzFbSjWjglf",vt="iL7PRv0yTC9UFjHfDJDW",xt="oxBa3kaduGMhYxc9I_Uu",ft="x0xbkRE3CyGK_i406MSX",jt="zT6EzYpjnj9pMKhMFQB7",yt="YOLVSXg5_gdh0VfL2oNl",Ct="ynXemVsankd4H506x8D2",bt={formatCaption:e=>m.Ru.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>m.Ru.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>m.Ru.formatDate(e,{weekday:"short"})},St=(0,s.memo)((e=>{const{onDone:t,onClose:n,spec:a}=e,[i,r]=(0,s.useState)(e.dateRange),o=(0,ut.W)(),c=(0,gt.t)(a),d=(0,mt.s)(),u=new Date,g=ot(u),h=lt(u),p=ct(i,g),v=ct(i,h),x=new Date;return x.setFullYear(x.getFullYear()+1),(0,T.jsx)("div",{ref:c,children:(0,T.jsx)(R.A,{isOpen:!0,children:(0,T.jsxs)("section",{className:ht,children:[(0,T.jsx)(l.H,{className:pt,iconOnly:k.M,size:"small",onClick:n,"aria-label":m.Ru.get("close_button_action")}),(0,T.jsxs)("div",{className:vt,children:[(0,T.jsx)(_.E,{as:"h3",variant:"bodyMediumBold",children:m.Ru.get("live_events.date_picker_dialog_title")}),(0,T.jsxs)("div",{className:xt,children:[(0,T.jsx)(w.v,{className:ft,size:"md",selectedColorSet:"brightAccent",selected:p,onClick:()=>{r(p?void 0:g),a&&d.logInteraction(a.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:m.Ru.get("live_events.this_weekend_preset")}),(0,T.jsx)(w.v,{className:ft,size:"md",selectedColorSet:"brightAccent",selected:v,onClick:()=>{r(v?void 0:h),a&&d.logInteraction(a.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:m.Ru.get("live_events.next_weekend_preset")})]})]}),(0,T.jsx)(W.hv,{mode:"range",selected:i,onSelect:r,numberOfMonths:2,defaultMonth:e.dateRange?.from,fromDate:new Date,toDate:x,formatters:bt,dir:o?"rtl":"ltr",modifiersClassNames:{today:jt},locale:at(m.Ru.getLocaleForFormatting())}),(0,T.jsxs)("div",{className:yt,children:[(0,T.jsx)(l.H,{className:Ct,size:"small",onClick:()=>{r(void 0)},disabled:!i?.from,children:m.Ru.get("live_events.date_picker_dialog_clear")}),(0,T.jsx)(b.$,{size:"small",onClick:()=>{if(i?.from){const{from:e,to:n}=i;t({from:e,to:n||e})}else t()},children:m.Ru.get("live_events.date_picker_dialog_done")})]})]})})})})),Nt=e=>{const t=e?.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,n,s,a]=t;return new Date(parseInt(n,10),parseInt(s,10)-1,parseInt(a,10))},kt=()=>{const[e]=(0,C.ok)(),t=e.get("startDate")?.trim(),n=e.get("endDate")?.trim(),s=Nt(t),a=Nt(n);return s&&a&&{from:s,to:a}};var _t=n(75802);const It="WnIhxhr9MIQjVvkvUQTf",Rt="ETRYfT8oEUJuUDLgOBUX",wt="qdpaG8_efSSt25IhC0r_",Dt=e=>{const[t,n]=(0,s.useState)(!1),[a,i]=(0,C.ok)(),r=(0,mt.s)(),o=(0,s.useMemo)((()=>e.spec?.datePickerModalFactory()),[e.spec]),l=(0,s.useMemo)((()=>e.spec?.headerFactory()),[e.spec]),c=kt(),d=ot(new Date),u=lt(new Date),g=(0,s.useCallback)((e=>{if(e){if(a.set("startDate",dt(e.from)),a.set("endDate",dt(e.to)),o){const e=a.toString();r.logInteraction(o.doneButtonFactory({uri:e}).hitUiNavigate({destination:e}))}}else a.delete("startDate"),a.delete("endDate");n(!1),i(a),o&&r.logInteraction(o.doneButtonFactory({uri:a.toString()}).hitUiHide())}),[i,a,o,r]),h=(0,s.useCallback)((e=>{ct(c,e)?(a.delete("startDate"),a.delete("endDate")):(a.set("startDate",dt(e.from)),a.set("endDate",dt(e.to))),i(a)}),[c,a,i]),p=c?b.$:S.n;return(0,T.jsxs)("div",{className:It,children:[(0,T.jsx)("div",{children:(0,T.jsx)(p,{className:Rt,iconLeading:G.R,onClick:()=>{n(!0),l&&r.logInteraction(l.datePickerButtonFactory().hitUiReveal())},size:"small",children:c?(0,_t.tX)(c):m.Ru.get("live_events.date_picker_button_text")})}),t&&(0,T.jsx)(St,{onClose:()=>{n(!1),o&&r.logInteraction(o.closeButtonFactory().hitUiHide())},onDone:g,dateRange:c,spec:o}),(0,T.jsxs)("div",{className:wt,children:[(0,T.jsx)("div",{children:(0,T.jsx)(w.v,{size:"sm",selectedColorSet:"brightAccent",selected:ct(c,d),onClick:()=>{if(h(d),l){a.set("startDate",dt(d.from)),a.set("endDate",dt(d.to));const e=a.toString();r.logInteraction(l.datePresetButtonFactory({uri:e,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:e}))}},className:Rt,children:m.Ru.get("live_events.this_weekend_preset")})}),(0,T.jsx)("div",{children:(0,T.jsx)(w.v,{size:"sm",selectedColorSet:"brightAccent",selected:ct(c,u),onClick:()=>{if(h(u),l){a.set("startDate",dt(u.from)),a.set("endDate",dt(u.to));const e=a.toString();r.logInteraction(l.datePresetButtonFactory({uri:e,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:e}))}},className:Rt,children:m.Ru.get("live_events.next_weekend_preset")})})]})]})};var Ut=n(37143),At=n(24454),Et=n(7690),Mt=n(54571),Ft=n(63102);const Bt=e=>{const t=(0,Ft.I)(e);return t?(0,T.jsx)(Mt.A,{uri:t.uri,title:t.title,subTitle:t.subTitle,imageUrl:t.imageUrl,date:t.date,onClick:t.handleClick}):null};var Tt=n(86403),Lt=n(88129),Pt=n(8993),zt=n(79462);const Ot="Ig5vKQ7dYBd1EvrAFxNe",Ht="h_q319q68ujja24YIoXY",Kt="dFTQKQt3imsoOza3VE4G",Qt="M8LA1p3y53Qnge37zUmz",Xt="HZi6Ziy6mVJMFZsPf4wk",qt="KNX0R2c0r90zNTPYZm6X",Vt="JI0woT5IN6EnNKnilhcg",Yt="kAi1CfiOMYDExKkXuw44",Zt="Zwr6T4ceJI7KfyNxa4tS",Gt="mW3O8RnDMDY6MfRJKqd5",Wt="raQK_4Eaqa5Zj06_aBm7",$t="AOuYgrCnrYvPKsyzxqVy",Jt="P1dra4DUpn36RnCkuwa_",en="zBCfaF04WlTsiUcov2oJ",tn="JxTPZX9AoptKanJg0zIw",nn=(0,s.memo)((e=>{const{concert:t,position:n,modalSpec:a}=e,i=(0,_t.l4)(e.concert.startDateIsoString),r=(0,N.o_h)(e.concert.uri),o=(0,s.useMemo)((()=>a?.eventRowFactory({position:n,uri:t.uri})),[a,n,t]),l=(0,mt.s)();return(0,T.jsxs)(zt.N,{to:`/concert/${r?.id}`,className:Yt,onClick:()=>{o&&l.logInteraction(o.hitUiNavigate({destination:`/concert/${r?.id}`}))},children:[(0,T.jsxs)("div",{className:Zt,"aria-hidden":!0,children:[(0,T.jsx)(_.E,{as:"div",variant:"marginalBold",className:Gt,children:(0,_t.tj)(i)}),(0,T.jsx)(_.E,{as:"div",variant:"bodyMediumBold",className:Wt,children:(0,_t.Py)(i)})]}),(0,T.jsxs)("div",{className:$t,children:[(0,T.jsx)(_.E,{as:"div",variant:"bodySmallBold",className:Jt,"data-testid":"event-title",children:t.title}),(0,T.jsx)(Pt.s,{children:(0,_t.Fn)(i)}),(0,T.jsxs)(_.E,{as:"div",variant:"bodySmall",className:en,children:[(0,_t.VJ)(i)," • ",(0,_t.WB)(i)]}),(0,T.jsx)(_.E,{as:"div",variant:"bodySmall",className:tn,"data-testid":"event-venue",children:[t.location.venue,t.location.city].join(m.Ru.getSeparator())})]})]},t.uri)})),sn=e=>{const t=(0,s.useMemo)((()=>e.feedSpec?.groupedEventModalFactory({uri:e.artist.uri||""})),[e.feedSpec,e.artist]),n=(0,mt.s)(),a=(0,gt.t)(t),i=()=>{t&&n.logInteraction(t.closeButtonFactory().hitUiHide()),e.onClose()};return(0,T.jsx)(R.A,{contentLabel:m.Ru.get("live_events.label"),isOpen:!0,className:Ot,onRequestClose:i,children:(0,T.jsxs)("section",{className:Ht,ref:a,children:[(0,T.jsx)("div",{className:Kt,children:(0,T.jsx)(an,{"aria-label":m.Ru.get("close"),iconOnly:k.M,size:"small",onClick:i})}),(0,T.jsxs)("div",{className:Qt,children:[(0,T.jsx)(Lt._,{height:"48",width:"48",className:Xt,src:e.artist.imageUri}),(0,T.jsxs)("div",{className:qt,children:[(0,T.jsx)(_.E,{as:"h3",variant:"bodyMediumBold",className:Vt,"data-testid":"event-venue",children:e.artist.name}),(0,T.jsx)(_.E,{as:"h3",variant:"bodySmall","data-testid":"event-venue",children:m.Ru.get("concerts.count_near_location",e.concerts.length,e.location.city)})]})]}),e.concerts.map(((e,n)=>(0,T.jsx)(nn,{concert:e,position:n,modalSpec:t},e.uri)))]})})};var an=(0,Tt.Ay)(l.H).withConfig({displayName:"ConcertModal___StyledButtonTertiary",componentId:"sc-179c8vh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),rn=n(23674),on=n(81372);const ln=e=>{const[t,n]=(0,s.useState)(!1),a=(0,s.useMemo)((()=>{if(!(0,rn.ys)(e))return;const[t]=e.concerts;if(!(0,rn.$V)(t))return;const n=(0,N.o_h)(t.data.uri);return e.spec?.eventCardFactory({identifier:n?.id,position:e.position,uri:t.data.uri})}),[e]),i=(0,mt.s)(),r=(0,gt.t)(a);if(!(0,rn.ys)(e))return;const[o]=e.concerts;if(!(0,rn.$V)(o))return;const[l]=o.data.artists.items,c=(0,on.Q)(o.data.artists.items),{startDate:d,endDate:u}=(0,_t.Vi)(e.concerts);return{isModalOpen:t,handleClick:e=>{e.preventDefault(),n(!0),a&&i.logInteraction(a.hitUiReveal())},handleClose:()=>n(!1),concert:{uri:o.data.uri,title:o.data.title,imageUrl:c,dateRange:(0,_t.WZ)(d,u),startDateIsoString:o.data.startDateIsoString},artist:{uri:"uri"in l.data?l.data.uri:"",name:"profile"in l.data?l.data.profile.name:"",imageUri:c??""},location:{city:o.data.location.city,venue:o.data.location.name},totalConcerts:e.concerts.length,concerts:e.concerts.map((e=>(0,rn.$V)(e)?{uri:e.data.uri,title:e.data.title,location:{city:e.data.location.city,venue:e.data.location.name},startDateIsoString:e.data.startDateIsoString}:null)).filter(rn.se),ref:r}},cn=e=>{const t=ln(e);return t?(0,T.jsxs)("div",{ref:t.ref,children:[(0,T.jsx)(Mt.A,{onClick:t.handleClick,uri:t.concert.uri,title:t.concert.title,imageUrl:t.concert.imageUrl,subTitle:`${t.concert.dateRange} • ${m.Ru.get("concerts.count",t.totalConcerts)}`}),t.isModalOpen&&(0,T.jsx)(sn,{onClose:t.handleClose,artist:t.artist,location:t.location,concerts:t.concerts})]}):null};var dn=n(34949);const un=e=>{const t=ln(e);return t?(0,T.jsxs)("div",{ref:t.ref,children:[(0,T.jsx)(dn.A,{onClick:t.handleClick,uri:t.concert.uri,title:t.concert.title,image:t.concert.imageUrl??"",subTitle:m.Ru.get("concerts.count",t.concerts.length),dateRange:t.concert.dateRange}),t.isModalOpen&&(0,T.jsx)(sn,{onClose:t.handleClose,artist:t.artist,location:t.location,concerts:t.concerts})]}):null};var mn=n(55085);const gn=e=>{if(void 0===(t=e.data)||!Object.keys(t).includes("uri"))return null;var t;const[n]=e.data.images.items;return(0,T.jsx)(mn.B,{uri:e.data.uri,name:e.data.name,images:e.data.images.items.flatMap((e=>e.sources)),color:n?.extractedColors?.colorDark.hex,description:e.data.description,authorName:null,isPlayable:!0,logCardImpressions:!0,index:e.position})};var hn=n(72717);const pn="r9pZATnIA0vfb26moOSE",vn="kOfWkKuha0KPE6O5zPgU",xn="WSryB2nAyCVspMyI4hft",fn="EwxEfHdxTzVoxfzYTQaP",jn="IBAOIOOtlpQVPo9F5FgR",yn="uErMtJ7mMK76G0Y_2Nrm",Cn=e=>{const t=(0,Ft.I)({...e,...e.concert});return t?(0,T.jsxs)(zt.N,{to:t.uri,"data-testid":"concert-promo",onClick:t.handleClick,className:pn,children:[(0,T.jsx)(Lt._,{src:t.imageUrl,className:vn}),(0,T.jsxs)("div",{className:xn,children:[(0,T.jsxs)("div",{className:fn,children:[(0,T.jsx)(_.E,{variant:"titleMedium",semanticColor:"textBase",as:"div",className:jn,children:t.title}),(0,T.jsx)(_.E,{as:"div",semanticColor:"textBase",variant:"bodySmall",className:jn,children:t.subTitle})]}),(0,T.jsx)("div",{className:yn,children:(0,T.jsx)(b.$,{"aria-label":t.title,iconOnly:hn.h,size:"small",colorSet:"invertedLight"})})]})]}):null},bn={ConcertGroup:un,ConcertV2ResponseWrapper:e=>{const t=(0,Ft.I)(e);return t?(0,T.jsx)(dn.A,{uri:t.uri,title:t.title,subTitle:t.subTitle,image:t.imageUrl,date:t.date,onClick:t.handleClick}):null},PlaylistResponseWrapper:gn,ConcertPromo:Cn},Sn={ConcertGroup:cn,ConcertV2ResponseWrapper:Bt,PlaylistResponseWrapper:gn,ConcertPromo:Cn},Nn=({concert:e,position:t,spec:n,type:s})=>{if(a=e.__typename,!Object.keys(bn).includes(a??""))return null;var a;const i=("grid"===s?Sn:bn)[e.__typename];return(0,T.jsx)(i,{position:t,spec:n,...e})},kn=e=>{const t={"recommended-events":m.Ru.get("concerts_recommended_for_you"),"popular-events":m.Ru.get("concerts_popular"),"concerts-near-you":m.Ru.get("concerts.discover_near_you")};return e in t?t[e]:m.Ru.get("concerts")},_n="YJ_lZ7Vqhu9QBfyOclOx",In="FlsDpqinw8SF_Bgf0yWA",Rn="bvJZOAXCfadBunfTLqeX",wn="P33NLJX3lEygr0Z07qIg",Dn="dEaB7T6y5kFQVzk17Ib_",Un="QLxo4g8cCxlsbu3SALAE",An=e=>{const t=(0,s.useMemo)((()=>e.spec?.eventSectionFactory({identifier:"carousel",position:0})),[e.spec]),n=(0,gt.t)(t);return!(0,rn.Lw)(e.data)||(0,rn.Lw)(e.data)&&0===e.data.concerts.length?null:(0,T.jsx)("div",{ref:n,className:Dn,children:(0,T.jsx)(Et.R,{title:kn(e.data.key),index:0,id:e.data.key,seeAllUri:e.data.uri??void 0,seeAllLabel:m.Ru.get("shelf.see-all"),className:Un,withEncoreCards:!1,children:e.data.concerts.map(((e,n)=>(0,T.jsx)(Nn,{concert:e,position:n,spec:t,type:"grid"},n))).filter(rn.se)})})},En=e=>{const t=(0,s.useMemo)((()=>e.spec?.eventSectionFactory({identifier:"all",position:e.position??0})),[e.spec,e.position]),n=(0,gt.t)(t);return 0===e.concerts.length?null:(0,T.jsxs)("div",{ref:n,className:Dn,children:[(0,T.jsx)(_.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:e.title}),e.concerts.map(((e,n)=>(0,T.jsx)(Nn,{type:"list",concert:e,position:n,spec:t},n))).filter(rn.se)]})};var Mn=n(87368);const Fn=e=>{const t=(0,s.useMemo)((()=>e.spec?.eventSectionFactory({identifier:"all",position:e.position??0})),[e.spec,e.position]),n=(0,gt.t)(t);return(0,T.jsx)("div",{ref:n,children:(0,T.jsx)(Mn.$,{total:e.concerts.length,title:e.title,showAll:!0,withEncoreCards:!1,children:e.concerts.map(((e,n)=>(0,T.jsx)(Nn,{type:"grid",concert:e,position:n,spec:t},n))).filter(rn.se)})})},Bn=e=>{if(!(0,rn.eO)(e.data))return null;const t="grid"===e.layout?Fn:En;return(0,T.jsx)(t,{title:kn(e.data.key),concerts:e.data.concerts,spec:e.spec})},Tn="_twZ6XqHC7VdQQiSBeMQ",Ln=e=>{if(!e?.match(/^(\d{4})-(\d{2})-(\d{2})$/))return m.Ru.get("live_events.all_events_tab");const[t,n,s]=e.split("-");return(0,_t.Fn)(new Date(Number(t),Number(n)-1,Number(s)))},Pn=e=>{if(!(0,rn.dR)(e.data))return null;const t="grid"===e.layout?Fn:En;return(0,T.jsxs)("div",{children:[e.data.sections.map(((n,s)=>(0,T.jsx)(t,{position:s,title:Ln(n.key),concerts:n.concerts,spec:e.spec},s))),e.fetchNextPage&&(0,T.jsx)(S.n,{className:Tn,onClick:()=>e.fetchNextPage&&e.fetchNextPage(),children:m.Ru.get("concerts.load_more")})]})};var zn=n(98405);const On=Spicetify.GraphQL.Definitions["concertFeed"]=new K.l("concertFeed","query","7758a7a55d29f81be9145b1b0e32344187508a0f216059aa099309518b75445d",null);var Hn=n(30118),Kn=n(7767);const Qn=(e,t=zn.q)=>{const{request:n}=(0,s.useContext)(Hn.j),a=t({queryKey:["concert-feed",e.geoHash,e.geonameId,e.dateRange,e.conceptUris,e.radiusInKm],queryFn:({pageParam:t})=>(0,Kn.c)(n,On,{...e,paginationKey:""===t?null:t}),staleTime:6e4,gcTime:6e4,enabled:!!e.geoHash||!!e.geonameId,initialPageParam:"",getNextPageParam:e=>{if(!(0,rn.Bw)(e?.data?.liveEventsFeed))return"";const t=e.data.liveEventsFeed.sections.find((e=>"AllEvents"===e.__typename))??{};return(0,rn.dR)(t)?t.paginationKey:""}}),i=(e=>{const t=e?.reduce(((e,t)=>{const n=e?.liveEventsFeed,s=t?.data?.liveEventsFeed;if(!(0,rn.Bw)(s)||!(0,rn.Bw)(n))return e;const a=n.sections.find((e=>"AllEvents"===e.__typename))??{},i=(0,rn.dR)(a)?a.sections:[],r=s.sections.find((e=>"AllEvents"===e.__typename))??{},o=[...i,...(0,rn.dR)(r)?r.sections:[]].reduce(((e,t)=>{const n=e[t.key]??[];return(0,rn.ys)(t)?{...e,[t.key]:[...n,...t.concerts]}:e}),{}),l=Object.entries(o).map((([e,t])=>({key:e,concerts:t})));return{liveEventsFeed:{sections:s.sections.map((e=>"AllEvents"===e.__typename||(0,rn.dR)(e)?{sections:l,__typename:"AllEvents"}:e))}}}),{liveEventsFeed:{sections:[]}});return t})(a.data?.pages),r=a.data?.pages[a.data.pages.length-1]?.data?.liveEventsFeed,o=(0,rn.Bw)(r)?r.sections.find((e=>"AllEvents"===e.__typename)):void 0;return{...a,fetchNextPage:o&&(0,rn.dR)(o)&&o?.paginationKey?a.fetchNextPage:void 0,data:i}},Xn={AllEvents:Pn,LiveEventSection:Bn,ConcertCarousel:An},qn=e=>{const{data:t,isLoading:n,error:s,fetchNextPage:a}=Qn({geoHash:e.location.geoHash||null,geonameId:e.location.geonameId||null,dateRange:e.dateRange?.from&&e.dateRange?.to?{from:(0,q.bU)(e.dateRange?.from),to:(0,q.bU)(e.dateRange.to)}:null,conceptUris:e.conceptUris,radiusInKm:e.location.radiusInKm??null});return n?(0,T.jsx)(At.LoadingPage,{hasError:!1,errorMessage:""}):!(0,rn.Bw)(t?.liveEventsFeed)||0===t.liveEventsFeed.sections.length||s?(0,T.jsx)(Ut.p,{title:m.Ru.get("concerts.error.no_concerts_found_title"),message:m.Ru.get("concerts.error.no_concerts_found_message",e.location.name),renderInline:!0}):(0,T.jsx)("div",{children:t?.liveEventsFeed.sections.map(((t,n)=>{if(!(0,rn.w1)(t))return null;const s=Xn[t.__typename];return(0,T.jsx)(s,{layout:e.layout,spec:e.spec,fetchNextPage:a,data:t},n)})).filter(rn.se)})};var Vn=n(8905),Yn=n(5191);const Zn=Spicetify.GraphQL.Definitions["concertLocationDetails"]=new K.l("concertLocationDetails","query","b13f195349f188fee25480ae889d782852d68663bf07743c654244454750d681",null);var Gn=n(15817);const Wn=e=>{if(!e||!("items"in e))return;const[t]=e.items;return t},$n=(e=y.g)=>{const{isAnonymous:t}=(0,r.d4)(Gn.Ht),{location:n}=e(),[a]=(0,C.ok)(),{pathname:i}=(0,y.zy)(),o=(0,Y.g)(),[,l]=n?.match(/^(\d+)/)??[],[c,d]=(0,s.useState)(l?{geonameId:Number(l)}:void 0),{data:u}=(m={geonameId:c?.geonameId?String(c?.geonameId):null,isAnonymous:t},(0,Q.I)(Zn,m,g));var m,g;const h=e=>{d(e),e.radiusInKm&&a.set("radius",String(e.radiusInKm)),e?.geonameId&&o({pathname:String(e.geonameId)===u?.me?.profile?.location?.geonameId?(0,q.nm)(i,void 0,void 0):(0,q.nm)(i,e.geonameId,e.fullName),search:new URLSearchParams(a).toString()})};if(c){const e=Wn(u?.concertLocations);return{location:{geonameId:c.geonameId??Number(e?.geonameId),geohash:c.geohash??e?.geoHash,name:c.name??e?.name,radiusInKm:a.get("radius")?Number(a.get("radius")):void 0},onChangeLocation:h}}const p=u?.me?.profile?.location,v=Wn(u?.concertLocations);return{location:p?.geoHash||v?.geonameId?{geohash:p?.geoHash??v?.geoHash,geonameId:Number(p?.geonameId??v?.geonameId),name:p?.name??v?.name,radiusInKm:a.get("radius")?Number(a.get("radius")):void 0}:void 0,onChangeLocation:h}};var Jn=n(17518),es=n(85105);const ts=()=>{const{isAnonymous:e}=(0,r.d4)(Gn.Ht),[t,n]=(0,s.useState)("grid"),{location:a,onChangeLocation:y}=$n(),C=kt(),{conceptUris:b}=V(),{spec:S}=(0,es.r)(u.s,{}),N=(0,s.useMemo)((()=>S.headerFactory()),[S]),k=(0,mt.s)(),_=e&&a?.name?m.Ru.get("live_events.location_concert_tickets",a.name):m.Ru.get("live_events.label"),I=()=>{const e=N.layoutToggleFactory().hitToggleState({stateBeforeToggle:t,stateAfterToggle:"grid"===t?"list":"grid"});k.logInteraction(e),n("grid"===t?"list":"grid")};return(0,T.jsxs)("section",{children:[(0,T.jsx)(h.Q,{children:(0,Jn.zV)(a?.name)}),(0,T.jsxs)(p.z,{size:p.K.SMALL,backgroundColor:o.Hhe,children:[(0,T.jsx)(v.Y,{children:(0,T.jsx)(j.mm,{children:_})}),(0,T.jsx)(x.h,{children:(0,T.jsx)(f.X,{text:_})})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)(g.K,{backgroundColor:o.Hhe}),(0,T.jsxs)("div",{className:i()(_n,"contentSpacing"),children:[(0,T.jsxs)("div",{className:In,children:[(0,T.jsxs)("div",{className:Rn,children:[(0,T.jsx)(Vn.A,{headerSpec:N,locationStr:a?.name??"",location:a,handleLocationChange:y,conceptUris:b}),(0,T.jsx)(Dt,{spec:S}),!e&&(0,T.jsx)(Z,{geohash:a?.geohash,spec:N})]}),(0,T.jsxs)("div",{className:wn,children:["grid"===t&&(0,T.jsx)(l.H,{"aria-label":m.Ru.get("concerts.feed_list_layout"),iconOnly:c.N,onClick:I,size:"small"}),"list"===t&&(0,T.jsx)(l.H,{"aria-label":m.Ru.get("concerts.feed_grid_layout"),iconOnly:d.D,onClick:I,size:"small"})]})]}),(0,T.jsx)(Yn.k,{onLocationChange:y}),(0,T.jsx)(qn,{spec:S,layout:t,location:{geoHash:a?.geohash,geonameId:a?.geonameId?String(a.geonameId):"",name:a?.name??"",radiusInKm:a?.radiusInKm},conceptUris:0===b.length?null:b,dateRange:C})]})]})]})}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map