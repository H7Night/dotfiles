"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6457],{520:(e,t,r)=>{r.d(t,{u:()=>S});var i=r(30758),a=r(52580),n=r(43329),l=r(75044),s=r(17640),o=r(80090),c=r(31592),d=r(78809),u=r(92873),p=r(66289),y=r(8570),g=r(55405),m=r(82232),x=r(11849),b=r(12542),f=r(75539),h=r(86070);const S=i.memo((function({uri:e,onClickNotInterested:t,onClickReport:r,canPin:i=x.oT.NO,isPinned:S=!1}){const{spec:v}=(0,b.o)(e),P=(0,l.NC)(g.ihJ);return(0,h.jsx)(m.pZ,{value:"concert",children:(0,h.jsxs)(o.W,{children:[!!t&&(0,h.jsx)(c.D,{role:"menuitem",leadingIcon:(0,h.jsx)(a.P,{semanticColor:"textSubdued",size:"small"}),onClick:t,children:s.Ru.get("concerts.not_interested.title")}),i!==x.oT.NO&&P&&(0,h.jsx)(p.k,{uri:e,canPin:i,isPinned:S,type:f.c.CONCERT,spec:v}),(0,h.jsx)(y.h,{children:(0,h.jsx)(d.m,{spec:v,uri:e,displayText:s.Ru.get("context-menu.copy-concert-link")})}),!!r&&(0,h.jsx)(c.D,{role:"menuitem",leadingIcon:(0,h.jsx)(n.W,{semanticColor:"textSubdued",size:"small"}),onClick:r,children:s.Ru.get("concerts.flag_issue.title")}),(0,h.jsx)(u.q,{spec:v,uri:e})]})})}))},4769:(e,t,r)=>{r.d(t,{j:()=>n});var i=r(5752),a=r(46822);function n(){return(0,a.N)(i.X6)}},15148:(e,t,r)=>{r.d(t,{P:()=>x});var i=r(30758),a=r(17640),n=r(80090),l=r(78809),s=r(94595),o=r(92873),c=r(66289),d=r(98567),u=r(82232),p=r(11849),y=r(12542),g=r(75539),m=r(86070);const x=i.memo((function({uri:e,artistUri:t,canPin:r=p.oT.NO,isPinned:i=!1,canRemove:x=!1}){const{spec:b}=(0,y.o)(e);return(0,m.jsx)(u.pZ,{value:"album",children:(0,m.jsxs)(n.W,{children:[x&&(0,m.jsx)(d.p,{uri:e,removeLabel:a.Ru.get("contextmenu.remove-from-library")}),t&&(0,m.jsx)(s.z,{spec:b,divider:"after",uri:t,displayText:a.Ru.get("contextmenu.go-to-artist-radio")}),r!==p.oT.NO&&(0,m.jsx)(c.k,{uri:e,canPin:r,isPinned:i,type:g.c.PRE_RELEASE_ALBUM,spec:b}),(0,m.jsx)(l.m,{uri:e,spec:b,displayText:a.Ru.get("context-menu.copy-album-link")}),(0,m.jsx)(o.q,{spec:b,divider:"before",uri:e})]})})}))},34824:(e,t,r)=>{r.d(t,{R:()=>y});var i=r(30758),a=r(93225),n=r(84429);function l(e,t,r=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,n.fk)(e))return;const i=e.querySelector('[tabindex="0"]');t===a.O.UP&&(0,n.MS)(i,s(e,i,a.O.UP,r)),t===a.O.DOWN&&(0,n.MS)(i,s(e,i,a.O.DOWN,r)),t===a.O.RIGHT&&(0,n.MS)(i,o(i,a.O.RIGHT,r)),t===a.O.LEFT&&(0,n.MS)(i,o(i,a.O.LEFT,r)),t===a.O.HOME&&(0,n.MS)(i,c(a.O.HOME,r)??i),t===a.O.END&&(0,n.MS)(i,c(a.O.END,r)??i)}function s(e,t,r,i=!1){const l=t.closest('li[role="row"]');if(!l)return t;let s=l;const c=Array.from(e.querySelectorAll('li[role="row"]')),d=Array.from(l.querySelectorAll(n.nu)),u=c.indexOf(l);if(u<0)return t;const p=(i&&t!==d[0]||!i&&t!==l)&&!(t instanceof HTMLLIElement);if(r===a.O.UP){if(document.activeElement===e){s=c[c.length-1];return(i?s.querySelector(n.nu):s)??t}if(p)return o(t,a.O.LEFT,i);let r=u-1;if(-1===r)return t;s=c[r],r-=1}else if(r===a.O.DOWN){if(document.activeElement===e){s=c[0];return(i?s.querySelector(n.nu):s)??t}if(p)return o(t,a.O.RIGHT,i);let r=u+1;if(r===c.length)return t;s=c[r],r+=1}return(i?s.querySelector(n.nu):s)??t}function o(e,t,r=!1){const i=e.closest('li[role="row"]');if(!i)return e;let l=e;const s=Array.from(i.querySelectorAll(n.nu)),o=s.indexOf(e);let c=0;if(t===a.O.RIGHT&&o-1!==s.length)c=o+1;else{if(t===a.O.LEFT&&-1===o)return i;if(t===a.O.LEFT&&0!==o)c=o-1;else if(t===a.O.LEFT&&0===o){return(r?i.querySelector(n.nu):i)??i}}return l=s.at(c),l??e}function c(e,t=!1){const{currentFocus:r,listEl:i}=function(){const e=document.activeElement,t=e?.closest("ul");return((0,a.I)(e)||e instanceof HTMLLIElement)&&t?{currentFocus:e,listEl:t}:{currentFocus:null,listEl:null}}();if(null===r||null===i)return null;const l=r.closest('li[role="row"]');if(!l)return r;const s=Array.from(i.querySelectorAll('li[role="row"]')),o=Array.from(l.querySelectorAll(n.nu));if(s.indexOf(l)<0)return r;const c=t&&r===o[0]||!t&&r===l;if(e===a.O.HOME){if(c){return(t?s[0].querySelector(n.nu):s[0])??r}return(t?o[1]:o[0])??r}if(e===a.O.END){if(c){return(t?s[s.length-1].querySelector(n.nu):s[s.length-1])??r}return o[o.length-1]??r}return r}var d=r(79236),u=r(74278),p=r(86070);const y=(0,i.forwardRef)((({onKeyDown:e,children:t,firstInteractiveIsWrapper:r=!1,...s},o)=>{const c=(0,u.N)(o);(0,d.R)(c);const y=(0,i.useCallback)((t=>{c.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"Home"!==t.key&&"End"!==t.key||t.preventDefault(),"ArrowUp"!==t.key&&"ArrowDown"!==t.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===t.key&&l(c.current,a.O.UP,r),"ArrowDown"===t.key&&l(c.current,a.O.DOWN,r),"ArrowRight"===t.key&&l(c.current,a.O.RIGHT,r),"ArrowLeft"===t.key&&l(c.current,a.O.LEFT,r),"Home"===t.key&&l(c.current,a.O.HOME,r),"End"===t.key&&l(c.current,a.O.END,r),e?.(t))}),[r,c,e]),g=(0,i.useCallback)((e=>{if(!c.current)return;const t=e.target,r=c.current.querySelector('[tabindex="0"]');t.closest('li[role="row"]')&&t!==r&&(0,n.MS)(r,t,{preventScroll:!0})}),[c]);return(0,p.jsx)("ul",{role:"treegrid",ref:c,onKeyDown:y,onFocus:g,tabIndex:0,...s,children:t})}))},37898:(e,t,r)=>{r.d(t,{x:()=>n});var i=r(98521),a=r(46822);function n(){return(0,a.N)(i.b)}},55019:(e,t,r)=>{r.d(t,{y:()=>n});var i=r(30758),a=r(37525);function n(){const e=(0,a.A)(),[t,r]=(0,i.useState)(e.getIsEnabled());(0,i.useEffect)((()=>{const t=e.subscribeIsEnabled(r);return()=>t()}),[e]);return[t,(0,i.useCallback)((t=>e.setIsEnabled(t)),[e])]}},73694:(e,t,r)=>{r.d(t,{YourLibraryX:()=>Jo});var i=r(30758),a=r(97500),n=r.n(a),l=r(96131),s=r(62411),o=r(40638),c=r(88308),d=r(75044),u=r(54088),p=r(42594),y=r(43294),g=r(80090),m=r(91039),x=r(19959),b=r(17640),f=r(31592),h=r(12543),S=r(56197),v=r(82232),P=r(58089),C=r(86070);const w=({position:e,divider:t,onCreateCallback:r=()=>{},spec:a})=>{const n=(0,h.W)(),{createPlaylist:l}=(0,S.A)(),s=(0,P.s)(),o=(0,i.useCallback)((()=>{n({intent:"create-playlist",type:"click"});const t=a.createButtonFactory().hitCreatePlaylist(),i=s.logInteraction(t);l(i.interactionId,e),r()}),[n,a,s,l,e,r]);return(0,C.jsx)(f.D,{role:"menuitem",divider:t,onClick:o,leadingIcon:(0,C.jsx)(x.u,{semanticColor:"textSubdued",size:"small"}),children:b.Ru.get("contextmenu.create-playlist")})},T=i.memo((function(e){return(0,C.jsx)(v.pZ,{value:"create-playlist",children:(0,C.jsx)(w,{...e})})}));var I=r(11849),R=r(12542);const A=i.memo((function({folderUri:e,onCreateCallback:t}){const r=e?{after:{uri:e}}:{before:"start"},{spec:i}=(0,R.o)(e??I.gv);return(0,C.jsx)(v.pZ,{value:"folder",children:(0,C.jsxs)(g.W,{children:[(0,C.jsx)(T,{position:r,onCreateCallback:t,spec:i}),(0,C.jsx)(m.j,{position:r,onCreateCallback:t,spec:i})]})})}));var j=r(71331),D=r(18703),L=r(98587),E=r(73493),O=r(1185),N=r(76631),k=r(92113),F=r(68560),B=r(79825),U=r(70761),M=r(80395),_=r(63547),V=r(37953),H=r(84104),z=r(46628),W=r(15595),Y=r(29495),G=r(55405),K=r(42622);const X=1248,Z=(0,K.g)(z.Z),J=(0,K.g)(_.ZS),q=()=>(function(){const{size:e,setSize:t,minWidth:r,maxWidth:a,leftSidebarCollapsedStateNavbarWidth:n,leftSidebarDefaultStateNavbarWidth:s,leftSidebarExpandedStateNavbarWidth:o}=(0,M.y)(),{leftSidebarState:c,setLeftSidebarState:u,canCollapse:p}=(0,_.ae)(),y=(0,V.XB)(),g=(0,V._Y)(),{min:m,max:x,size:b,setSize:f}=(0,W.f)(),h=(0,Y.H)(),S=(0,i.useRef)(null),v=(0,i.useRef)(null),P=(0,i.useRef)(null),C=(0,d.NC)(G.ZDY)?F.j:0;(0,i.useLayoutEffect)((()=>{const i=h-e-3*B.KV-(y!==z.Z.Disabled?b+B.KV:C),d={leftSidebarWidth:e,leftSidebarMinWidth:r,leftSidebarMaxWidth:a,leftSidebarState:c,leftSidebarStateRestoreTarget:S.current,rightSidebarWidth:b,rightSidebarMinWidth:m,rightSidebarMaxWidth:x,rightSidebarPanel:y,rightSidebarPanelRestoreTarget:v.current,storedCollapsedLeftSidebarWidth:n,storedDefaultLeftSidebarWidth:s,storedExpandedLeftSidebarWidth:o,clientWidth:h,mainContentWidth:i,canCollapse:p},w=P.current;if((0,l.j)(d,w))return;const T=function(e,t){if(!e)return{};let{leftSidebarWidth:r=0,rightSidebarWidth:i=0}=t;const{mainContentWidth:a=0,leftSidebarMinWidth:n=0,leftSidebarMaxWidth:l=0,leftSidebarState:s,leftSidebarStateRestoreTarget:o,rightSidebarMinWidth:c=0,rightSidebarMaxWidth:d=0,rightSidebarPanel:u,rightSidebarPanelRestoreTarget:p,storedCollapsedLeftSidebarWidth:y=0,storedDefaultLeftSidebarWidth:g=0,storedExpandedLeftSidebarWidth:m=0,clientWidth:x=0,canCollapse:b=!0}=t,f={},h=u!==z.Z.Disabled,S=void 0!==e.leftSidebarWidth&&r>e.leftSidebarWidth,v=void 0!==e.rightSidebarWidth&&i>e.rightSidebarWidth,P=void 0===e.clientWidth?0:x-e.clientWidth,C=P<0,w=x>0,T=a<B.ev?B.ev-a:0;let I=C?-1*P:0;a>X?I=Math.max(0,I-(a-X)):T&&(I=T);const R=s===_.ZS.EXPANDED&&e.leftSidebarState!==_.ZS.EXPANDED,A=s===_.ZS.DEFAULT&&e.leftSidebarState!==_.ZS.DEFAULT;let j=r-n;S&&(j=R?r-U.Z.EXPANDED_MIN:A?r-U.Z.DEFAULT_MIN:0);let D=v?0:i-c;const L=I<=j+D;if(a<B.ev&&!L)h&&(S||C&&(s===_.ZS.COLLAPSED||!b))?(f.rightSidebarPanel=z.Z.Disabled,f.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,I-=i,D=0):(s===_.ZS.EXPANDED&&a+(r-U.Z.DEFAULT_MIN)>B.ev?(f.leftSidebarState=_.ZS.DEFAULT,I-=r-g,j=g-U.Z.DEFAULT_MIN):(f.leftSidebarState=_.ZS.COLLAPSED,I-=r-y,j=0),f.leftSidebarStateRestoreTarget=t.leftSidebarState);else if(u===z.Z.Disabled&&p!==z.Z.Disabled&&Z(p)&&u!==e.rightSidebarPanelRestoreTarget&&a-i-B.KV>=B.ev)f.rightSidebarPanel=p,f.rightSidebarPanelRestoreTarget=null;else if(s===_.ZS.DEFAULT&&o===_.ZS.EXPANDED&&a-(m-r)>=B.ev)f.leftSidebarState=_.ZS.EXPANDED,f.leftSidebarStateRestoreTarget=null;else if(s===_.ZS.COLLAPSED&&o===_.ZS.DEFAULT&&a-(g-r)>=B.ev)f.leftSidebarState=_.ZS.DEFAULT,f.leftSidebarStateRestoreTarget=null;else if(w&&a>=800){let e=l-r,t=d-i;const a=Math.min(P,e+t);for(let n=0;n<a;n++)r<i&&r<l&&e>0?(r++,e--):i<d&&t>0&&(i++,t--)}s!==e.leftSidebarState&&J(o)&&o===e.leftSidebarStateRestoreTarget&&(f.leftSidebarStateRestoreTarget=null);u!==e.rightSidebarPanel&&Z(p)&&p===e.rightSidebarPanelRestoreTarget&&(f.rightSidebarPanelRestoreTarget=null);if(I>0&&I<=j+D)for(let e=0;e<I;e++)r>i&&r>n&&j>0?(r--,j--):i>c&&D>0&&(i--,D--);r&&r!==t.leftSidebarWidth&&(f.leftSidebarWidth=r);i&&i!==t.rightSidebarWidth&&(f.rightSidebarWidth=i);return f}(w,d);void 0!==T.leftSidebarWidth&&t(T.leftSidebarWidth),J(T.leftSidebarState)&&u(T.leftSidebarState),void 0!==T.leftSidebarStateRestoreTarget&&(S.current=T.leftSidebarStateRestoreTarget),void 0!==T.rightSidebarWidth&&0!==w?.rightSidebarWidth&&f(T.rightSidebarWidth),void 0!==T.rightSidebarPanel&&g((0,H.MQ)(T.rightSidebarPanel)),void 0!==T.rightSidebarPanelRestoreTarget&&(v.current=T.rightSidebarPanelRestoreTarget),P.current=d}),[e,r,a,t,b,m,x,f,y,n,s,o,u,g,h,p,C,c])}(),null);var Q=r(65355);let $=function(e){return e.YLX_SORT_AND_VIEW_PICKER="ylx-sort-and-view-picker",e.YLX_CUSTOM_ORDERING="ylx-custom-ordering",e.REFINERS_PICKER="refiners-picker",e}({}),ee=function(e){return e.URGENT="urgent",e.CONTEXTUAL="contextual",e.DEFAULT="default",e}({});class te{itemsRecord={[ee.URGENT]:new Set,[ee.CONTEXTUAL]:new Set,[ee.DEFAULT]:new Set};visibleItem=null;static PRIORITIES=[ee.URGENT,ee.CONTEXTUAL,ee.DEFAULT];static NO_CHANGE={keyToShow:null,keyToHide:null};getNextItem(){let e=null;return te.PRIORITIES.some((t=>{const r=this.itemsRecord[t];return e=Array.from(r).at(-1)??null,e})),e}updateVisibility(e,t,r){const i=this.visibleItem;"add"===r?this.itemsRecord[t].add(e):this.itemsRecord[t].delete(e);const a=this.getNextItem();return this.visibleItem=a,i===a?te.NO_CHANGE:{keyToShow:a,keyToHide:i}}}var re=r(10379);let ie=function(e){return e.VISIBILITY_GRANTED="visibilityGranted",e.VISIBILITY_DENIED="visibilityDenied",e}({});class ae extends re.V{}const ne=(0,i.createContext)({notifyShowInterest:()=>{throw new Error("notifyShowInterest must be used within a VisibilityOrchestratorProvider")},notifyHideInterest:()=>{throw new Error("notifyHideInterest must be used within a VisibilityOrchestratorProvider")},events:new ae}),le=({children:e})=>{const t=(0,i.useMemo)((()=>new te),[]),r=(0,i.useRef)(new ae),a=(0,i.useCallback)(((e,t)=>{t&&r.current.emitSync(ie.VISIBILITY_DENIED,{key:t}),e&&r.current.emitSync(ie.VISIBILITY_GRANTED,{key:e})}),[]),n=(0,i.useCallback)(((e,r=ee.DEFAULT)=>{const{keyToShow:i,keyToHide:n}=t.updateVisibility(e,r,"add");a(i,n)}),[t,a]),l=(0,i.useCallback)(((e,r=ee.DEFAULT)=>{const{keyToShow:i,keyToHide:n}=t.updateVisibility(e,r,"remove");a(i,n)}),[t,a]),s=(0,i.useMemo)((()=>({events:r.current,notifyShowInterest:n,notifyHideInterest:l})),[n,l]);return(0,C.jsx)(ne.Provider,{value:s,children:e})};class se{events=new re.V;addRefiners(){throw new Error("Method not implemented.")}removeRefiners(){throw new Error("Method not implemented.")}getEvents(){return this.events}updateSelectedRefinersOrder(e){throw new Error("Method not implemented.")}}const oe=(0,i.createContext)(null),ce=({children:e})=>{const t=(0,i.useMemo)((()=>new se),[]);return(0,C.jsx)(oe.Provider,{value:t,children:e})},de=()=>null,ue=()=>null,pe=()=>null,ye={focusElement:()=>{},getFocusElement:()=>null,registerFocusElement:()=>()=>{}},ge=(0,i.createContext)(ye);class me{focusElement=()=>{};getFocusElement=()=>null;registerFocusElement=()=>()=>{}}const xe=({children:e})=>{const t=(0,i.useMemo)((()=>new me),[]);return(0,C.jsx)(ge.Provider,{value:t,children:e})};var be=r(74256),fe=r(25270),he=r(52027),Se=r(8044),ve=r(20607),Pe=r(39869);const Ce="rqGyIqd3Igk05BEB2ZC6",we="WycFx_Gl2tUXbUJpZiD8",Te=()=>{const[e,t]=(0,i.useState)(!1),r=(0,Se.V)(),a=(0,s.d4)(ve.JJ);(0,i.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),1100);return()=>{t(!1),clearTimeout(e)}}),[]);const n=(0,s.d4)(ve.mo);return r&&e?(0,C.jsx)(he.t5,{language:b.Ru.getLocaleForSmartling(),market:a.toLowerCase(),children:(0,C.jsxs)("div",{className:Ce,"data-testid":"left-sidebar-legal-links",children:[(0,C.jsx)(he.JM,{}),(0,C.jsx)("a",{draggable:!1,href:Pe.Bl,target:"_blank",rel:"noopener",className:we,children:(0,C.jsx)(fe.E,{variant:"marginal",children:b.Ru.get("cookies")})}),n&&(0,C.jsx)("a",{draggable:!1,href:Pe.Vd,target:"_blank",rel:"noopener",className:we,children:(0,C.jsx)(fe.E,{variant:"marginal",children:"Форма для Ваших обращений"})})]})}):null},Ie="YNnobzGm5w3XKBniKdW9",Re=(0,i.memo)((function({isAnonymous:e}){return(0,C.jsx)("div",{className:Ie,"data-testid":"left-sidebar-footer",children:e&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Te,{}),(0,C.jsx)(be.X,{})]})})}));var Ae=r(63880),je=r(46462),De=r(59400),Le=r(58325),Ee=r(10749),Oe=r(43422),Ne=r(5141);const ke="lvJXjYO7YXxGKHcgx5pe",Fe="yYGZUqSKJttCw_Z2JvPL",Be="wkyebhrfwyJPCfDhQgbp",Ue=()=>{const{isCollapsed:e}=(0,Ee.Q)(),t=(0,P.s)(),r=(0,s.wA)(),{spec:a}=(0,Ne.r)(De.V,{}),n=b.Ru.get("web-player.your-library-x.dsa-message",b.Ru.get("web-player.your-library-x.dsa-message-link")),l=(0,i.useCallback)((()=>{r(Oe.r8.actions.open()),t.logInteraction(a.learnMoreButtonFactory().hitUiReveal())}),[r,t,a]);return(0,C.jsx)("div",{className:ke,children:e?(0,C.jsx)(Le.Zp,{label:(0,C.jsx)(fe.E,{children:n}),placement:"right",showDelay:0,children:(0,C.jsx)("div",{className:Fe,children:(0,C.jsx)(Ae.p,{"aria-label":n})})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{children:(0,C.jsx)(Ae.p,{size:"small"})}),(0,C.jsx)(fe.E,{as:"p",semanticColor:"textSubdued",children:b.Ru.get("web-player.your-library-x.dsa-message",(0,C.jsx)(je.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:l,className:Be,children:(0,C.jsx)(fe.E,{variant:"bodyMedium",children:b.Ru.get("web-player.your-library-x.dsa-message-link")})}))})]})})},Me="AhNLpx0iVnlj4SuL_Gaw",_e="JyZRugeRBHbUtS5ABOQ8",Ve=({className:e})=>(0,C.jsx)("section",{className:n()(Me,e),children:(0,C.jsxs)("div",{className:_e,children:[(0,C.jsx)(fe.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.empty-state-folder-title")}),(0,C.jsx)(fe.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.empty-state-folder-subtitle")})]})});var He=r(82093),ze=r(88610);const We={getTitle:()=>b.Ru.get("action-trigger.create-playlist"),getDescription:()=>b.Ru.get("action-trigger.login-playlist")},Ye=({children:e,renderInline:t})=>(0,C.jsx)(He.y,{id:ze.x9,options:{...We,renderInline:t},children:e});var Ge=r(57221),Ke=r(56706);const Xe="CfruGiDGW_FH4l65GMpb",Ze="fIgbQ9qpINdyy__tkaHi",Je="wv308QWnPnkI8n0GdqYO",qe=(0,i.memo)((function(e){const{message:t,title:r,linkTitle:i,linkTo:a,onClick:l,className:s}=e;return(0,C.jsxs)("section",{className:n()(Xe,s),children:[(0,C.jsxs)("div",{className:Ze,children:[(0,C.jsx)(fe.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,C.jsx)(fe.E,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,C.jsx)("div",{className:Je,children:i&&(a||l)&&(0,C.jsx)(Ge.$,{className:Je,as:l?"button":void 0,colorSet:"invertedLight",href:a,onClick:l,component:Ke.v,size:"small",children:i})})]})})),Qe=({className:e})=>{const{createPlaylist:t}=(0,S.A)(),r=(0,i.useCallback)((()=>{t()}),[t]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ye,{renderInline:!1,children:(0,C.jsx)(qe,{onClick:r,linkTitle:b.Ru.get("web-player.your-library-x.empty-state-playlists-cta"),title:b.Ru.get("web-player.your-library-x.empty-state-playlists-title"),message:b.Ru.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:e})}),(0,C.jsx)(qe,{linkTo:"/genre/podcasts-web",linkTitle:b.Ru.get("web-player.your-library-x.empty-state-podcasts-browse"),title:b.Ru.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:b.Ru.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:e})]})},$e="NOXrKH_1anB9lsOlyv5g",et="FIARvjbv_YZKwz7yxNHw",tt="Fqrv8StT3DnEAfntIKCg",rt="JydI9ZzWnssPC899sOGP",it=({query:e,className:t})=>(0,C.jsxs)("div",{className:n()($e,t),"data-testid":"no-search-results-view",children:[(0,C.jsx)(fe.E,{as:"h1",variant:"bodyMediumBold",className:et,children:b.Ru.get("web-player.your-library-x.empty-results-title-short",(0,C.jsx)("span",{className:tt,children:(0,C.jsx)("span",{className:rt,children:e})}))}),(0,C.jsx)(fe.E,{as:"h2",variant:"bodySmall",children:b.Ru.get("web-player.your-library-x.empty-results-text-short")})]});var at=r(23800);const nt="vhOeYrTmSoea5vemsMpv",lt="pCKhe1uJhYBUC4YVmz9B",st=({onClick:e})=>(0,C.jsxs)("div",{className:nt,children:[(0,C.jsx)("div",{className:"icon",children:(0,C.jsx)(at.b,{size:"xlarge",semanticColor:"textBase"})}),(0,C.jsxs)("div",{className:lt,children:[(0,C.jsx)(fe.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.error-title")}),(0,C.jsx)(fe.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.error-body")})]}),(0,C.jsx)("div",{children:(0,C.jsx)(Ge.$,{onClick:e,colorSet:"invertedLight",size:"small",children:b.Ru.get("web-player.your-library-x.error-button")})})]}),ot=(0,i.createContext)(null);var ct=r(99565);const dt=({children:e})=>{const t=function(){const[e,t]=(0,ct.x)("ylx-expanded-folders",[]),r=(0,i.useCallback)((t=>e.includes(t)),[e]),a=(0,i.useCallback)(((r,i)=>{const a=e.indexOf(r);if(i){if(-1!==a)return;t([...e,r])}else{if(-1===a)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:a}}();return(0,C.jsx)(ot.Provider,{value:t,children:e})},ut="fYWNdY4zhj4OX_T2Xtg6",pt="BRX6aJUAuAsvHKD_fpbo",yt="ZZsPF3Sn4h7m0_5Clhk0",gt="IZq_xBKdh88HLD4QY90X",mt="PUipCs3_0Qott0Sru3pB",xt="XAOxFVWnd185_vZ5zPGu",bt="YsCa3XbOXEm79LH0B7do",ft="eC25_w41L83mXDCqdm_A",ht="VyDwqqtx0153zD8a3TED",St="rOgsguaurlHVlgCTY0P7",vt="zS8ATyQNwnAiEoPrCcIo",Pt="Zwr4MoUVImDin82vBn4y",Ct="lb8li6m8Zei4tr0zNKxX",wt="aK6vld0FgHGxjz6IiHyS",Tt="Xw1OibA6EkrU4F47EMw9",It="_EFIA9HjgZxxgTSZzQcg",Rt="JUPaw8kZF94Coth4G88s",At="main-yourLibraryX-listItem",jt="BfALkuQy0UjTI70U9QlQ",Dt="IeIwiYLvr7PD_4aZAxGE",Lt="qBiMgWp7EVg3k1YU8DQ0",Et="c1PJ2LHU0EnzyA0jDc1j",Ot=({isScrolled:e})=>(0,C.jsxs)("div",{className:n()(Pt,wt,{[Tt]:e}),children:[(0,C.jsx)(fe.E,{variant:"marginalBold",semanticColor:"textSubdued",children:b.Ru.get("web-player.your-library-x.expanded-list-header.title")}),(0,C.jsx)(fe.E,{variant:"marginalBold",semanticColor:"textSubdued",children:b.Ru.get("web-player.your-library-x.expanded-list-header.date-added")}),(0,C.jsx)(fe.E,{variant:"marginalBold",semanticColor:"textSubdued",children:b.Ru.get("web-player.your-library-x.expanded-list-header.played-at")})]});var Nt=r(43058);let kt=function(e){return e[e.SELECTED_CHIP=0]="SELECTED_CHIP",e[e.REFINERS_PICKER_BUTTON=1]="REFINERS_PICKER_BUTTON",e}({});var Ft=r(76669),Bt=r(78504);const Ut="a2XwshgvydvJO9If_GzQ",Mt="aVLBGREPTnbTFhkSdUMV",_t="ViXEX4SVVU_NA7zcS9kd",Vt="pQvrkwXAqZnbSqJiiQuo",Ht="mA1QNQx6oUXgQ8kMID2S",zt={marginBlockEnd:0,willChange:"transform, opacity"},Wt=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:s=D.Vp,className:o,innerRef:c,index:d=0,spec:u,...p})=>{const y=(0,P.s)(),g=(0,Bt.f)(),m=p.selected,x=e?g.getFilterLabel(e):"",b=(0,i.useCallback)((()=>{!e||m&&t?(a(),m&&t&&e?y.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):y.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),m?y.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):y.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))}),[e,x,m,t,a,l,d,y,u]),f=(0,i.useCallback)((e=>{e.detail>1||r||b()}),[r,b]),{className:h,dropPosition:S,...v}=(0,L.A)({allowedMimeTypesByDropPosition:{[D.Nz.ON]:s},onLongDragOver:b});return(0,C.jsx)(Ft.v,{...p,"aria-label":p["aria-label"],...v,...S===D.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(o,h,{[Mt]:S===D.Nz.ON,[Ht]:r}),onClick:f,selectedColorSet:S===D.Nz.ON?"invertedDark":"invertedLight",secondary:m&&!t,style:zt,ref:c,tabIndex:-1})};var Yt=r(71482);const Gt={marginBlockEnd:0,willChange:"transform, opacity"},Kt=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:s=D.Vp,className:o,innerRef:c,index:d=0,spec:u,...p})=>{const y=(0,P.s)(),g=(0,Bt.f)(),m=p.selected,x=e?g.getFilterLabel(e):"",b=(0,i.useCallback)((()=>{!e||m&&t?(a(),m&&t&&e?y.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):y.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),m?y.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):y.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))}),[e,x,m,t,a,l,d,y,u]),f=(0,i.useCallback)((e=>{e.detail>1||r||b()}),[r,b]),{className:h,dropPosition:S,...v}=(0,L.A)({allowedMimeTypesByDropPosition:{[D.Nz.ON]:s},onLongDragOver:b});return(0,C.jsx)(Yt.m,{...p,"aria-label":p["aria-label"],...v,...S===D.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(o,h,{[Mt]:S===D.Nz.ON,[Ht]:r}),onClick:f,style:Gt,ref:c,tabIndex:-1})},Xt=[j.fl.TRACKS,j.fl.LOCAL_TRACKS,j.fl.ALBUMS,j.fl.ARTISTS,j.fl.AUTHORS,j.fl.PLAYLISTS_V2,j.fl.SHOWS,j.fl.AUDIOBOOKS,j.fl.EPISODES,j.fl.FOLDERS],Zt=[j.fl.TRACKS,j.fl.LOCAL_TRACKS,j.fl.ALBUMS,j.fl.EPISODES,j.fl.PLAYLISTS_V2,j.fl.FOLDERS],Jt=[j.fl.TRACKS,j.fl.LOCAL_TRACKS,j.fl.ALBUMS,j.fl.EPISODES,j.fl.PLAYLISTS_V2,j.fl.FOLDERS];function qt(e){return{type:"contentType",id:e.id,name:e.name}}function Qt(e){return e.id.startsWith("spotify:concept:")?{type:"tag",id:e.id,name:e.name,count:0}:qt(e)}var $t=r(84429);const er=(0,i.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:r,resetFilterIds:a,className:n,spec:l,inFolderView:s}){const o=!(t||e),{availableRefiners:c,activeRefiners:d,allContentTypeRefiners:u}=(({availableFilters:e,activeFilters:t,inFolderView:r})=>{const i=e?.map(qt);return{availableRefiners:i,activeRefiners:t?.map(Qt)??[],allContentTypeRefiners:i}})({availableFilters:e,activeFilters:t,inFolderView:s}),{registerFocusElement:p}={focusElement:()=>{},getFocusElement:()=>null,registerFocusElement:()=>()=>{}},y=o?u:[...d??[],...c??[]],g=(0,i.useRef)(null),m=(0,i.useCallback)((()=>{(0,$t.MS)(g.current,g.current?.nextElementSibling instanceof HTMLElement?g.current?.nextElementSibling:null),a()}),[a]),x=!1;return y&&0!==y?.length?(0,C.jsxs)(Nt.FN,{dragToScrollOptions:{isDisabled:!1},className:n,ariaLabel:b.Ru.get("web-player.your-library-x.filter_options"),children:[!!t?.length&&(0,C.jsx)(Kt,{resetFilterIds:m,toggleFilterId:r,allowedDropTargetMimeTypes:Xt,"aria-label":b.Ru.get("web-player.your-library-x.clear_filters"),innerRef:g,spec:l}),y.map(((e,t)=>{const i=d?.includes(e),n=0===t,s=(t>0&&d?.includes(y[0]),(0,C.jsx)(Wt,{innerRef:i&&p?p(kt.SELECTED_CHIP):void 0,filterId:e.id,isPrimaryFilter:n,isPlaceholder:o,resetFilterIds:a,toggleFilterId:r,selected:i,spec:l,index:t,children:e.name},e.id));return s})),x]}):null}));var tr=r(12599);const rr="",ir=(0,i.createContext)({openedFolderUri:rr,pushFolder:()=>{},popFolder:()=>{},resetFolder:()=>{},change:"PUSH"}),ar=({children:e})=>{const{setFilter:t}=(0,i.useContext)(Q.g),[r,a]=(0,ct.x)("opened-folder-uri",rr),n=(0,i.useRef)([r??rr]),l=(0,i.useRef)("PUSH"),s=(0,i.useCallback)((e=>{a(e),t(rr)}),[a,t]),o=(0,i.useCallback)((e=>{n.current.push(e),l.current="PUSH",s(n.current.at(-1))}),[s]),c=(0,i.useCallback)((()=>{n.current.pop();const e=n.current.at(-1);return l.current="POP",s(e),e}),[s]),d=(0,i.useCallback)((()=>{n.current=[rr],s(rr)}),[s]),u=(0,i.useMemo)((()=>({openedFolderUri:(0,tr.fpb)(r)?r:rr,pushFolder:o,popFolder:c,resetFolder:d,change:l.current})),[r,c,o,d]);return(0,C.jsx)(ir.Provider,{value:u,children:e})};var nr=r(34824),lr=r(42106),sr=r(96381),or=r(89596),cr=r(1429),dr=r(14037),ur=r(89522),pr=r(52224),yr=r(39899),gr=r(75539),mr=r(91563);const xr=(e,t)=>t?(e=>{switch(e){case"album":default:return b.Ru.get("web-player.your-library-x.type-album");case"ep":return b.Ru.get("ep");case"single":return b.Ru.get("single");case"compilation":return b.Ru.get("compilation")}})(t):(e=>{switch(e){case gr.c.ALBUM:return b.Ru.get("web-player.your-library-x.type-album");case gr.c.ARTIST:return b.Ru.get("web-player.your-library-x.type-artist");case gr.c.AUTHOR:return b.Ru.get("web-player.your-library-x.type-author");case gr.c.FOLDER:return b.Ru.get("web-player.your-library-x.type-folder");case gr.c.AUDIOBOOK:return b.Ru.get("web-player.your-library-x.type-audiobook");case gr.c.YOUR_EPISODES:case gr.c.LOCAL_FILES:case gr.c.LIKED_SONGS:case gr.c.PLAYLIST:return b.Ru.get("web-player.your-library-x.type-playlist");case gr.c.SHOW:return b.Ru.get("web-player.your-library-x.type-show");case gr.c.PRE_RELEASE_ALBUM:return b.Ru.get("web-player.your-library-x.type-prerelease-album");case gr.c.PRE_RELEASE_BOOK:return b.Ru.get("web-player.your-library-x.type-prerelease-audiobook");case gr.c.CONCERT:return"Event";default:return(0,mr.d)(e)}})(e),br=e=>e.type===gr.c.ALBUM&&"album"!==e.albumType,fr=e=>{switch(e){case gr.c.YOUR_EPISODES:case gr.c.LIKED_SONGS:case gr.c.LOCAL_FILES:return gr.c.PLAYLIST;default:return e}},hr=({shouldShowType:e,type:t,subtitle:r,specialType:i})=>(0,C.jsxs)(C.Fragment,{children:[e&&xr(t,i),!!r&&e&&" • ",r]});var Sr=r(90619);const vr=({iconSize:e="small"})=>(0,C.jsx)("span",{className:mt,children:(0,C.jsx)(Sr.C,{size:e,semanticColor:"textBrightAccent",className:gt})}),Pr=({children:e,title:t,subtitleSlot:r,isPlaying:i})=>(0,C.jsx)(Le.Zp,{label:(0,C.jsxs)("div",{className:vt,children:[(0,C.jsxs)("div",{children:[t,r]}),i&&(0,C.jsx)(vr,{})]}),placement:"right",showDelay:0,children:e});var Cr=r(83155),wr=r(20933),Tr=r(46658);const Ir=({leading:e,subtitle:t,uri:r})=>{const i=`listrow-subtitle-${r}`;return(0,C.jsx)("div",{className:Tr.A.subtitle,children:(0,C.jsxs)(Cr.j,{className:Tr.A.link,id:i,dir:"auto",children:[(0,C.jsx)("span",{className:Tr.A.subtitleLeadingWrapper,children:e}),(0,C.jsx)("span",{className:Tr.A.subtitleText,children:t})]})})},Rr=({leading:e,subtitle:t,uri:r})=>{const i=`card-subtitle-${r}`;return(0,C.jsx)("div",{className:Tr.A.subtitle,children:(0,C.jsxs)(wr.j,{lineClamp:1,className:Tr.A.link,id:i,role:"gridcell",dir:"auto",children:[(0,C.jsx)("span",{className:Tr.A.subtitleLeadingWrapper,children:e}),t]})})};var Ar=r(58837),jr=r(71043),Dr=r(7840),Lr=r(35418),Er=r(54799);const Or=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]);function Nr(e,t){const[r,a]=(0,i.useState)(""),n=(0,i.useRef)(r);n.current=r;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const r=e.current;if(!r||!t)return a(""),()=>{};const i=e=>{const t="Backspace"===e.key,r=" "===e.key,i=e.metaKey||e.ctrlKey,s=e.target instanceof HTMLElement&&e.target?.matches("input, textarea, [contenteditable]"),o=e.isComposing||229===e.keyCode,c=(d=e.key,Or.has(d)&&!t);var d;const u=r&&!n.current,p=t&&!n.current;if(i||s||o||c||u||p)return;(t&&n.current||r)&&(e.preventDefault(),e.stopPropagation()),a((r=>t?r.slice(0,-1):r+e.key)),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>a("")),1e3)};return r.addEventListener("keydown",i,!0),()=>{r.removeEventListener("keydown",i,!0),l.current&&clearTimeout(l.current)}}),[e,t]),r}const kr=(0,i.createContext)({setTypeaheadResult:({uid:e,str:t})=>{if(e||t)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),Fr=({children:e,containerRef:t,findMatchingTypeaheadUid:r,isEnabled:a=!0})=>{const[n,l]=(0,i.useState)({uid:null,str:""}),s=(0,i.useMemo)((()=>({typeaheadResult:n,setTypeaheadResult:l})),[n,l]),o=Nr(t,a),c=(0,i.useRef)(o);c.current=o;const d=(0,i.useRef)(r);return d.current=r,(0,i.useEffect)((()=>{o&&a?d.current(o).then((e=>{o===c.current&&l({uid:e,str:o})})):l({uid:null,str:""})}),[a,o,l]),(0,C.jsx)(kr.Provider,{value:s,children:e})};var Br=r(42331);const Ur={state:{referrer:"your_library",preventMoveFocus:!0}};function Mr(e,t,r,a,n){const{filter:l}=(0,i.useContext)(Q.g),{isActive:s}=(0,Er.l_)(e),o=function(e){const{typeaheadResult:{uid:t,str:r}}=(0,i.useContext)(kr);return t===e?r:null}(e),c=!!o,d=(0,Lr.W)({uri:e,type:"link"})?(0,Br.hF)(t):t,u=(0,i.useRef)(null),p=(0,Dr.g)(),y=(0,i.useCallback)((e=>{e.preventDefault(),n?n():d&&p(d,Ur)}),[n,p,d]);(0,i.useLayoutEffect)((()=>{c&&u.current?.closest('[role="row"], [role="listitem"]')?.querySelector("button")?.focus({preventScroll:!0})}),[c]);const g=a?`${a} • ${r}`:r;return{isActive:s,onClick:y,contents:l||o?(0,C.jsx)("span",{ref:u,children:(0,C.jsx)(dr.M,{autoEscape:!0,searchWords:[l.trim(),...o?.split(" ")??""],textToHighlight:g})}):g}}const _r=({uri:e,playbackUri:t=e,title:r,titlePrefix:i,menu:a,to:l=(0,tr.o_h)(e)?.toURLPath(!0)||"",handleNavigate:s})=>{const{isActive:o,contents:c}=Mr(t,l,r,i,s),d=`listrow-title-${e}`;return(0,C.jsx)(y.h,{menu:a,children:(0,C.jsx)(Ar.d,{id:d,lineClamp:1,className:n()(Tr.A.link,Tr.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",dir:"auto",children:c})})},Vr=({uri:e,playbackUri:t=e,title:r,titlePrefix:i,menu:a,to:l=(0,tr.o_h)(e)?.toURLPath(!0)||"",handleNavigate:s})=>{const{isActive:o,onClick:c,contents:d}=Mr(t,l,r,i,s);return(0,C.jsx)(y.h,{menu:a,children:(0,C.jsx)(jr.Z,{lineClamp:1,className:n()(Tr.A.link,Tr.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",href:l,onClick:c,role:"gridcell",dir:"auto",children:d})})},Hr=[j.fl.ALBUMS,j.fl.ARTISTS,j.fl.AUTHORS,j.fl.PLAYLISTS_V2,j.fl.SHOWS,j.fl.FOLDERS,j.fl.PSEUDO_PLAYLISTS],zr=[j.fl.PLAYLISTS_V2,j.fl.FOLDERS];var Wr=r(537);const Yr=({isConfirmationForPlaylist:e,onConfirm:t,onClose:r})=>{const i=e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,C.jsx)(Wr.T,{"aria-label":i,titleText:i,descriptionText:e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:t,onClose:r,confirmText:b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};var Gr=r(33425);function Kr({onApplyDrop:e,spec:t,isDropTargetPinned:r}){const a=(0,Bt.f)(),{contains:n}=(0,Gr.p)("ylpin"),[l,s]=(0,i.useState)(null),o=(0,i.useCallback)((async(t,i)=>{if(r)return void e(t,i);const{[j.fl.PLAYLISTS_V2]:a=[],[j.fl.FOLDERS]:l=[]}=t,o=[...a,...l];if(!!o.length&&(await n(...o)).some(Boolean)){if(o.length>1)throw new Error("Reordering multiple pinned items at once is not supported");s({dropData:t,dropPosition:i})}else e(t,i)}),[r,n,e]),c=(0,P.s)();return{applyDropWithUnpinConfirmation:o,unpinConfirmationDialog:l?(0,C.jsx)(Yr,{isConfirmationForPlaylist:!l.dropData[j.fl.FOLDERS]?.length,onClose:()=>s(null),onConfirm:async()=>{const{[j.fl.PLAYLISTS_V2]:r=[],[j.fl.FOLDERS]:i=[]}=l.dropData;await a.unpin([...r,...i][0]),t?.dragUnpinItem&&c.logInteraction(t.dragUnpinItem({itemToUnpin:[...r,...i][0]})),e(l.dropData,l.dropPosition),s(null)}}):null}}function Xr(){const{dropOriginUri:e,sectionId:t}=(0,i.useContext)(N.O_);return{dropOriginIsYLX:e===I.gv,entityIsInFolder:t>0}}var Zr=r(34306);function Jr(){const e=(0,Zr.g)(),{dropOriginIsYLX:t}=Xr();return(0,i.useCallback)((async(r,i)=>{const a=await e.contains(r);if(1!==new Set(a).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");if(a[0]){if(r.length>1)throw new Error("Moving multiple playlists at once is not supported");t?await e.move({uri:r[0]},i):await e.move({uri:r[0]},i,!0)}else await e.add(r,i)}),[t,e])}var qr=r(92829);function Qr({dropTargetUri:e,spec:t,isDropTargetPinned:r}){const a=(0,Zr.g)(),n=(0,Bt.f)(),l=(0,P.s)(),s=Jr(),o=(0,i.useCallback)((async(i,o)=>{const{[j.fl.PLAYLISTS_V2]:c=[],[j.fl.FOLDERS]:[d]=[]}=i,u=o===D.Nz.BEFORE?{before:{uri:e}}:{after:{uri:e}};if(r){const e=i[Object.keys(i)[0]][0];if((0,tr.tbX)(e)||(0,tr.fpb)(e)){const t=$r((await a.getContents()).items,e);-1===t?await a.add([e],{before:"start"}):t>0&&((0,tr.tbX)(e)?await a.move({uri:e},{before:"start"}):await a.moveFolder({uri:e},{before:"start"}))}else if(!(0,tr.Z0m)(e)){const[t]=await n.contains(e);t||await n.add({uris:[e]})}await n.pin(e,u),l.logInteraction(t.dragPinItem({itemToPin:e}))}else d?await a.moveFolder({uri:d},u):c.length&&await s(c,u);l.logInteraction(t.dragSort())}),[e,r,n,l,t,a,s]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=Kr(r?{onApplyDrop:o,spec:t,isDropTargetPinned:r}:{onApplyDrop:o});return{handleDropBeforeOrAfterRootlistItem:(0,i.useCallback)((async(e,t)=>{const{[j.fl.PLAYLISTS_V2]:r=[],[j.fl.FOLDERS]:i=[]}=e;if(r.length&&i.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(i.length>1)throw new Error("Dropping multiple folders is not supported");d(e,t)}),[d]),unpinConfirmationDialog:c}}function $r(e,t,r=0){for(const i of e)if((0,qr.Af)(i)||(0,qr.sA)(i)){if((0,tr.B2u)(i.uri,t))return r;if((0,qr.sA)(i)){const e=$r(i.items,t,r+1);if(-1!==e)return e}}return-1}var ei=r(37833),ti=r(46504);const ri=e=>({...e,key:e.key??""}),ii={state:{referrer:"your_library",preventMoveFocus:!0}};function ai({uri:e,to:t=(0,tr.o_h)(e)?.toURLPath(!0)||"",type:r,handleNavigate:a,dragLabel:n,isPinned:l,canReorder:s,allowedDropTargetDropOnMimeTypes:o=[],onDropTargetDropOn:c,onLongDragOver:d,openDeleteDialog:u,togglePlay:p,triggerPlay:y,isItemInGrid:g,playInsteadOfNavigating:m=!1,isPlaying:x,spec:b,folderDepth:f}){const h=(0,Lr.W)({uri:e,type:"link"})?(0,Br.hF)(t):t,S=(0,Dr.g)(),v=((e,t=(e,t)=>e===t)=>{const r=(0,ti.J)(),[a,n]=(0,i.useState)((()=>e(ri(r.location))));return(0,i.useLayoutEffect)((()=>r.listen((r=>{const i=e(ri(r));n((e=>t(e,i)?e:i))}))),[t,r,e]),a})((t=>{const r=(0,tr.o_h)(t.pathname,{parseUnknown:!0})?.toURI();return!!r&&(0,tr.B2u)(e,r)})),C=(()=>{const e=(0,ti.J)();return(0,i.useCallback)((()=>ri(e.location)),[e])})(),w=(0,i.useCallback)((()=>{S(h,ii)}),[S,h]),T=(0,P.s)(),R=(0,i.useRef)(0),A=(0,i.useRef)(null),E=(0,i.useCallback)((({target:e})=>e instanceof HTMLElement&&!A.current?.contains(e)),[]),O=(0,i.useCallback)((t=>{if(E(t))return;if(t.preventDefault(),t.currentTarget.scrollIntoView({block:"nearest"}),m){if(R.current>Date.now())return;return R.current=Date.now()+300,void(x||(p?.(),T.logInteraction(b.yourLibraryItemFactory().hitPlay({itemToBePlayed:e}))))}const r=C();a?a():h&&S(h,{...ii,replace:h===r.pathname}),T.logInteraction(b.yourLibraryItemFactory().hitUiNavigate({destination:e}))}),[E,m,C,a,h,T,b,e,x,p,S]),N=(0,i.useCallback)((t=>{m||E(t)||y&&(T.logInteraction(b.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:e})),y?.())}),[m,E,y,T,b,e]),k=(0,i.useCallback)((()=>{T.logInteraction(b.yourLibraryItemFactory().secondaryHitUiReveal())}),[T,b]),{draggable:F,onDragStart:B}=(0,ei.P)({itemUris:[e],itemMimeTypes:[(0,j.j3)(r)],dragLabelText:n,sectionId:f??0,dropOriginUri:I.gv});let U=[];l?U=Hr:s&&(U=zr);const M={[D.Nz.ON]:o,[D.Nz.BEFORE]:U,[D.Nz.AFTER]:U},{handleDropBeforeOrAfterRootlistItem:_,unpinConfirmationDialog:V}=Qr({dropTargetUri:e,spec:b,isDropTargetPinned:l}),H=(0,i.useCallback)(((e,t)=>{t===D.Nz.ON?c?.(e,t):t!==D.Nz.BEFORE&&t!==D.Nz.AFTER||_(e,t)}),[c,_]),{dropPosition:z,className:W,...Y}=(0,L.A)({uri:e,allowedMimeTypesByDropPosition:M,onDrop:H,onLongDragOver:d??w,reorderDirection:g?"horizontal":"vertical"});return{onClick:O,onDoubleClick:N,draggable:F&&!!n,onDragStart:B,onKeyDown:(0,i.useCallback)((t=>{t.repeat||E(t)||("Backspace"!==t.key&&"Delete"!==t.key||!u||u(),"Enter"===t.key&&t.shiftKey&&p&&(t.preventDefault(),p()),"Enter"===t.key&&T.logInteraction(b.yourLibraryItemFactory().keyStrokeUiNavigate({destination:e})))}),[E,T,u,b,p,e]),unpinConfirmationDialog:V,dropPosition:z,dropTargetClassName:W,logRightClick:k,isViewActive:v,itemRef:A,...Y}}var ni=r(34783);const li=i.createContext(!1),si=({children:e,isCompact:t})=>(0,C.jsx)(li.Provider,{value:t,children:e}),oi=()=>(0,i.useContext)(li),ci="wJTUKAyYI219kJtclJLa",di="q0_cpEyu_8EC7he96qT_",ui="L8ET6xwMh_wMEqCpmunH",pi="D_1eJKOJ3wTCKO93GX06",yi="_7kcfiJ2UNEh3CDR9Wau",gi="N8wAJha8ApfxgOfqv4UM",mi="iJMxV9zMXSfrjJPyB3Fw",xi=({uri:e,to:t=(0,tr.o_h)(e)?.toURLPath(!0)||"",handleNavigate:r,dragLabel:a,name:l,namePrefix:s,subtitle:o,cover:c,type:u,specialType:p,downloadButton:g,canReorder:m,allowedDropTargetDropOnMimeTypes:x,onDropTargetDropOn:b,onLongDragOver:f,menu:h,leading:S,openDeleteDialog:v,togglePlay:P,triggerPlay:w,isPinned:T,shouldShowType:I,playbackUri:R,isPlaying:A,isActive:j,playInsteadOfNavigating:L,spec:E,index:O,animateClassName:N="",animateState:k,preReleaseIcon:F,lockedIcon:B})=>{const{onClick:U,onDoubleClick:M,draggable:_,onDragStart:V,onKeyDown:H,dropPosition:z,dropTargetClassName:W,unpinConfirmationDialog:Y,logRightClick:K,isViewActive:X,itemRef:Z,...J}=ai({uri:e,to:t,handleNavigate:r,dragLabel:a,isPinned:T,canReorder:m,allowedDropTargetDropOnMimeTypes:x,onDropTargetDropOn:b,openDeleteDialog:v,onLongDragOver:f,togglePlay:P,triggerPlay:w,isItemInGrid:!0,isPlaying:A,isActive:j,spec:E,playInsteadOfNavigating:L}),q=(0,C.jsx)(Vr,{uri:e,title:l,titlePrefix:s,menu:h,handleNavigate:r,playbackUri:R}),Q=(0,C.jsx)(Rr,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ni.g,{pinned:T}),B,F,g]}),subtitle:(0,C.jsx)(hr,{shouldShowType:I,type:u,subtitle:o,specialType:p}),uri:e}),$=(0,i.useRef)(null),ee=oi();let te=(0,C.jsx)(y.h,{menu:h,onShow:K,children:(0,C.jsx)(yr.E,{uri:e,trigger:yr.l.OnMouseDown,children:(0,C.jsx)(ur.Z,{id:e,title:q,subtitle:Q,media:c,size:"sm",leading:S,className:n()(ci,{[N]:k}),variant:X?"tinted":void 0,onClick:U,onDoubleClick:M,padding:"tighter",...J})})});const re=(0,d.NC)(G.Gre);return ee&&(te=(0,C.jsx)(Pr,{title:q,subtitleSlot:Q,uri:e,isPlaying:A,parentRef:$,children:(0,C.jsx)("div",{children:(0,C.jsx)(y.h,{menu:h,onShow:K,children:(0,C.jsx)(yr.E,{uri:e,trigger:yr.l.OnMouseDown,children:(0,C.jsx)(ur.Z,{id:e,title:void 0,media:c,size:"sm",className:n()(ci,di,{[N]:k}),variant:X?"tinted":void 0,onClick:U,onDoubleClick:M,padding:re?"tighter-3":"tighter-4",ref:$,...J})})})})})),(0,C.jsxs)(C.Fragment,{children:[Y,(0,C.jsx)(pr.W,{draggable:_,onDragStart:V,onKeyDown:H,className:n()(W,{[Ut]:z===D.Nz.ON,[_t]:z===D.Nz.BEFORE,[Vt]:z===D.Nz.AFTER}),"aria-selected":j,innerRef:Z,"aria-posinset":O,children:te})]})};var bi=r(84439),fi=r(15792);const hi=({name:e,uri:t,togglePlay:r,spec:a,isActive:l,isPlaying:s,size:o})=>{const c=(0,P.s)(),d=(0,i.useCallback)((()=>{l?s?c.logInteraction(a.yourLibraryItemFactory().doubleHitPause({itemToBePaused:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:t})),r()}),[l,s,c,a,r,t]);return(0,C.jsx)("div",{className:n()(yi,{[mi]:s,[gi]:"small"===o}),role:"gridcell",children:(0,C.jsx)(fi.R,{isPlaying:s,onClick:d,ariaPlayLabel:b.Ru.get("playlist.a11y.play",e),ariaPauseLabel:b.Ru.get("playlist.a11y.pause",e),size:o})})};var Si=r(90677);const vi=({name:e,uri:t,togglePlay:r,spec:a,isActive:n,isPlaying:l,size:s})=>{const o=(0,P.s)(),c=(0,i.useCallback)((()=>{const e=(0,Si.$I)({spec:a,logger:o,uri:t,isActive:n,isPlaying:l});r({loggingParams:e})}),[n,l,o,a,r,t]);return(0,C.jsx)(fi.R,{isPlaying:l,onClick:c,ariaPlayLabel:b.Ru.get("playlist.a11y.play",e),ariaPauseLabel:b.Ru.get("playlist.a11y.pause",e),size:s,version:fi.H.transparent})};var Pi=r(68583),Ci=r(71264),wi=r(18636),Ti=r(20437),Ii=r(38255);const Ri=(0,i.memo)((function({title:e,type:t,images:r,isCircular:i,color:a,animateState:l,animateClassName:s="",isPlaying:o,togglePlay:c,spec:d,uri:u,overlayElement:p}){const y=(0,Ii._)(),{isCollapsed:g}=(0,Ee.Q)(),m=c&&!g;return(0,C.jsxs)("div",{className:n()({[Tr.A.imageContainer]:m||!!p}),children:[(0,C.jsx)(Pi.b,{fadeIn:!0,images:y(r,48),shape:i?Pi.u.CIRCLE:Pi.u.ROUNDED_CORNERS,size:Ci.Qe.SIZE_48,iconSize:"medium",type:t,title:e,className:n()(Tr.A.entityImage,{[s]:l}),color:a,loadingMode:"eager"}),m&&(0,C.jsx)("div",{className:n()(jt,{[Dt]:i,[Lt]:!i}),children:(0,C.jsx)(vi,{spec:d.yourLibraryItemFactory().playButtonFactory(),name:e,uri:u,togglePlay:c,isPlaying:o,isActive:!0,size:"medium"})}),p]})})),Ai=(0,i.memo)((function({title:e,type:t,uri:r,images:a,isCircular:n,togglePlay:l,color:s,spec:o,isActive:c,isPlaying:d,overlayElement:u}){const p=oi(),y=(0,Ii._)(),[g,m]=(0,i.useState)("medium"),x=(0,i.useRef)(null);return(0,Ti.w)({onResize:({width:e})=>{m(e<90?"small":"medium")},refOrElement:x}),(0,C.jsx)("div",{className:pi,ref:x,children:(0,C.jsxs)(bi.M,{images:y(a,250),FallbackComponent:e=>(0,C.jsx)(wi.s,{semanticColor:"textSubdued",type:t,size:"xxlarge",className:ui,...e}),isCircular:n,color:s,loadingMode:"eager",children:[l&&!p&&(0,C.jsx)(hi,{name:e,uri:r,togglePlay:l,spec:o,isActive:c,isPlaying:d,size:g}),u]})})}));var ji=r(51248);const Di="_ymJNIfklFmogab9uWY1",Li=({folderDepth:e=0})=>(0,C.jsx)("li",{className:Di,style:{"--ylx-folder-depth":e}}),Ei=e=>{const{RowVariantComponent:t,uri:r,to:a=(0,tr.o_h)(r)?.toURLPath(!0)||"",handleNavigate:l,folderDepth:s,className:o,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:y,onLongDragOver:g,style:m,openDeleteDialog:x,togglePlay:b,triggerPlay:f,isPlaying:h,isActive:S,type:v,menu:P,name:w,namePrefix:T,subtitle:I,downloadButton:R,expandFolderButton:A,cover:j,alt:L,addedAt:E,lastPlayedAt:O,shouldShowType:N,playbackUri:k,playInsteadOfNavigating:F,spec:B,nrValidItems:U,index:M,lockedIcon:_,onKeyDown:V,preReleaseIcon:H,specialType:z,...W}=e,{onClick:Y,onDoubleClick:G,onDragStart:K,onKeyDown:X,dropPosition:Z,dropTargetClassName:J,draggable:q,unpinConfirmationDialog:Q,logRightClick:$,isViewActive:ee,itemRef:te,...re}=ai({uri:r,to:a,type:v,handleNavigate:l,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:y,onLongDragOver:g,openDeleteDialog:x,togglePlay:b,triggerPlay:f,isPlaying:h,isActive:S,playInsteadOfNavigating:F,spec:B,folderDepth:s}),ie=(0,i.useCallback)((e=>{X(e),V?.(e)}),[X,V]);return(0,C.jsxs)(C.Fragment,{children:[Q,Z===D.Nz.BEFORE&&(0,C.jsx)(Li,{folderDepth:s}),(0,C.jsx)(ji.c,{style:{"--ylx-folder-depth":s,...m},draggable:q,onDragStart:K,onDoubleClick:G,className:n()(o,J,At,{[Ut]:Z===D.Nz.ON}),...W,...re,onKeyDown:ie,innerRef:te,"aria-setsize":U,"aria-posinset":M+1,children:(0,C.jsx)(t,{...e,to:a,isActive:S,isViewActive:ee,onClick:Y,logRightClick:$,playInsteadOfNavigating:F,parentRef:te})}),Z===D.Nz.AFTER&&(0,C.jsx)(Li,{folderDepth:s})]})};var Oi=r(55839);const Ni=()=>(0,C.jsx)(Oi.u,{semanticColor:"textSubdued",title:b.Ru.get("mwp.header.content.unavailable"),className:Tr.A.icon,size:"xsmall"});var ki=r(42668);function Fi(e){const{uri:t,artists:r,isPremiumOnly:a}=e,{filter:n}=(0,i.useContext)(Q.g),{isPlaying:l,isActive:o}=(0,Er.l_)(t),c=(0,s.wA)(),d=(0,i.useCallback)((()=>{c((0,sr.aw)(t))}),[c,t]),{togglePlay:u,triggerPlay:p}=(0,ki.P)({uri:t},{featureIdentifier:"album",referrerIdentifier:"your_library"});return{isPlaying:l,isActive:o,openDeleteDialog:d,togglePlay:a?void 0:u,triggerPlay:a?void 0:p,menu:(0,C.jsx)(or.h,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,C.jsx)(dr.M,{searchWords:[n.trim()],textToHighlight:r.at(0)?.name??""}),downloadButton:(0,C.jsx)(cr.M,{uri:t,size:"xsmall",className:Tr.A.icon,as:"span"})}}const Bi=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,albumType:u,addedAt:p,lastPlayedAt:y,color:g,isPremiumOnly:m}=e,{isPlaying:x,isActive:b,openDeleteDialog:f,togglePlay:h,triggerPlay:S,menu:v,subtitleText:P,downloadButton:w}=Fi(e),T=(0,C.jsx)(Ri,{title:o,type:d,images:s,color:g,uri:l,isPlaying:x,spec:i,togglePlay:h}),I=m?(0,C.jsx)(Ni,{}):void 0;return(0,C.jsx)(Ei,{RowVariantComponent:r,uri:l,cover:T,name:o,subtitle:P,downloadButton:w,alt:o,type:d,specialType:u,dragLabel:o,menu:v,togglePlay:h,triggerPlay:S,openDeleteDialog:f,addedAt:p,lastPlayedAt:y,isPinned:c,isPlaying:x,isActive:b,shouldShowType:t,spec:i,nrValidItems:a,index:n,lockedIcon:I})},Ui=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,albumType:c,color:d,isPremiumOnly:u}=e,{togglePlay:p,triggerPlay:y,menu:g,subtitleText:m,downloadButton:x,openDeleteDialog:b,isPlaying:f,isActive:h}=Fi(e),S=(0,C.jsx)(Ai,{title:l,type:o,images:n,uri:a,togglePlay:p,color:d,spec:r,isActive:h,isPlaying:f}),v=u?(0,C.jsx)(Ni,{}):void 0;return(0,C.jsx)(xi,{uri:a,name:l,subtitle:m,menu:g,dragLabel:l,cover:S,downloadButton:x,type:o,specialType:c,togglePlay:p,triggerPlay:y,isPinned:s,shouldShowType:t,openDeleteDialog:b,isPlaying:f,isActive:h,spec:r,index:i,lockedIcon:v})};var Mi=r(42256);function _i(e){const{uri:t}=e,r=(0,s.wA)(),{togglePlay:a,triggerPlay:n}=(0,ki.P)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),{isPlaying:l,isActive:o}=(0,Er.l_)(t);return{togglePlay:a,triggerPlay:n,isPlaying:l,isActive:o,openDeleteDialog:(0,i.useCallback)((()=>{r((0,sr.aw)(t))}),[r,t]),menu:(0,C.jsx)(Mi.t,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Vi=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:y}=e,{togglePlay:g,triggerPlay:m,isPlaying:x,isActive:b,openDeleteDialog:f,menu:h}=_i(e),S=(0,C.jsx)(Ri,{title:o,type:c,images:s,isCircular:!0,color:y,uri:l,isPlaying:x,spec:i,togglePlay:g});return(0,C.jsx)(Ei,{RowVariantComponent:r,uri:l,cover:S,name:o,type:c,alt:o,dragLabel:o,menu:h,togglePlay:g,triggerPlay:m,openDeleteDialog:f,addedAt:d,lastPlayedAt:u,isPlaying:x,isActive:b,isPinned:p,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Hi=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{togglePlay:d,triggerPlay:u,menu:p,openDeleteDialog:y,isPlaying:g,isActive:m}=_i(e),x=(0,C.jsx)(Ai,{title:l,type:s,images:n,uri:a,togglePlay:d,isCircular:!0,color:c,spec:r,isActive:m,isPlaying:g});return(0,C.jsx)(xi,{uri:a,name:l,menu:p,dragLabel:l,cover:x,type:s,togglePlay:d,triggerPlay:u,isPinned:o,shouldShowType:t,openDeleteDialog:y,isPlaying:g,isActive:m,spec:r,index:i})};var zi=r(28957),Wi=r(88918);function Yi(e){const{uri:t,authorName:r}=e,{filter:a}=(0,i.useContext)(Q.g),n=(0,Wi.T)(),l=(0,s.wA)(),o=!!e.consumptionCapExplanation,c=(0,d.NC)(G.HJU),{togglePlay:u,triggerPlay:p}=(0,ki.P)({uri:t},{featureIdentifier:"audiobook",referrerIdentifier:"your_library"}),y=(0,i.useCallback)((async()=>{n.getAccessInfo(e.uri).then((e=>{e?.consumptionCapped&&l((0,sr._3)(e.consumptionCapped))}))}),[e.uri,n,l]),g=(0,i.useCallback)((()=>{e.consumptionCapExplanation&&l((0,sr._3)(e.consumptionCapExplanation))}),[l,e.consumptionCapExplanation]);let m,x;c&&(o?(m=g,x=g):e.isCappedWithoutExplanation?(x=y,m=y):e.isPlayable&&(m=p,x=u));const{isPlaying:b,isActive:f}=(0,Er.l_)(t);return{isPlaying:b,isActive:f,openDeleteDialog:(0,i.useCallback)((()=>{l((0,sr.aw)(t))}),[l,t]),menu:(0,C.jsx)(zi.p,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,C.jsx)(dr.M,{searchWords:[a.trim()],textToHighlight:r}),downloadButton:(0,C.jsx)(cr.M,{uri:t,size:"xsmall",className:Tr.A.icon,as:"span"}),togglePlay:x,triggerPlay:m}}const Gi=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,pinned:d,addedAt:u,lastPlayedAt:p,color:y}=e,{isPlaying:g,isActive:m,openDeleteDialog:x,menu:b,subtitleText:f,downloadButton:h,togglePlay:S,triggerPlay:v}=Yi(e),P=(0,C.jsx)(Ri,{title:o,type:c,images:s,color:y,uri:l,isPlaying:g,spec:i,togglePlay:S}),w=e.isLocked?(0,C.jsx)(Ni,{}):void 0;return(0,C.jsx)(Ei,{RowVariantComponent:r,uri:l,cover:P,name:o,subtitle:f,alt:o,dragLabel:o,menu:b,openDeleteDialog:x,addedAt:u,lastPlayedAt:p,isPlaying:g,isActive:m,isPinned:d,shouldShowType:t,type:c,spec:i,nrValidItems:a,lockedIcon:w,index:n,downloadButton:h,togglePlay:S,triggerPlay:v})},Ki=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p,isPlaying:y,isActive:g,downloadButton:m,togglePlay:x,triggerPlay:b}=Yi(e),f=(0,C.jsx)(Ai,{title:l,type:s,images:n,uri:a,color:c,spec:r,isActive:g,isPlaying:y,togglePlay:x});return(0,C.jsx)(xi,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:f,isPinned:o,shouldShowType:t,type:s,openDeleteDialog:p,isPlaying:y,isActive:g,spec:r,index:i,downloadButton:m,triggerPlay:b,togglePlay:x})};var Xi=r(8272);function Zi(e){const{uri:t}=e,r=(0,s.wA)();return{openDeleteDialog:(0,i.useCallback)((()=>{r((0,sr.aw)(t))}),[r,t]),menu:(0,C.jsx)(Xi.L,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Ji=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:y}=e,{openDeleteDialog:g,menu:m}=Zi(e),x=(0,C.jsx)(Ri,{title:o,type:c,images:s,isCircular:!0,color:y,uri:l,isPlaying:!1,spec:i});return(0,C.jsx)(Ei,{RowVariantComponent:r,uri:l,cover:x,name:o,type:c,alt:o,dragLabel:o,menu:m,openDeleteDialog:g,addedAt:d,lastPlayedAt:u,isPlaying:!1,isActive:!1,isPinned:p,shouldShowType:t,spec:i,nrValidItems:a,index:n})},qi=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{menu:d,openDeleteDialog:u}=Zi(e),p=(0,C.jsx)(Ai,{title:l,type:s,images:n,uri:a,isCircular:!0,color:c,spec:r,isPlaying:!1,isActive:!1});return(0,C.jsx)(xi,{uri:a,name:l,menu:d,dragLabel:l,cover:p,type:s,isPinned:o,shouldShowType:t,openDeleteDialog:u,isPlaying:!1,isActive:!1,spec:r,index:i})};var Qi=r(520);function $i(e,t){const{uri:r,cityName:a,locationName:n}=e,{filter:l}=(0,i.useContext)(Q.g),s=(0,C.jsx)(Qi.u,{uri:r,canPin:e.canPin,isPinned:e.pinned}),o=e.startTime?(0,C.jsxs)("div",{className:Tr.A.eventDateOverlay,children:[(0,C.jsx)(fe.E,{variant:t?"bodySmall":"marginal",children:b.Ru.formatDate(new Date(e.startTime),{month:"short"})}),(0,C.jsx)(fe.E,{variant:t?"titleSmall":"bodyMediumBold",children:b.Ru.formatDate(new Date(e.startTime),{day:"numeric"})}),t&&(0,C.jsx)(fe.E,{variant:"bodySmall",children:b.Ru.formatDate(new Date(e.startTime),{year:"numeric"})})]}):null,c=b.Ru.get("web-player.your-library-x.event-item.subtitle",{locationName:n,cityName:a});return{menu:s,subtitleText:(0,C.jsx)(dr.M,{searchWords:[l.trim()],textToHighlight:c}),imageOverlay:o}}const ea=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:y}=e,{menu:g,subtitleText:m,imageOverlay:x}=$i(e,!1),b=(0,C.jsx)(Ri,{title:o,type:d,images:s,color:y,uri:l,isPlaying:!1,spec:i,overlayElement:x});return(0,C.jsx)(Ei,{RowVariantComponent:r,uri:l,cover:b,name:o,subtitle:m,alt:o,type:d,dragLabel:o,menu:g,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:a,index:n})},ta=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,color:c}=e,{menu:d,subtitleText:u,imageOverlay:p}=$i(e,!0),y=(0,C.jsx)(Ai,{title:l,type:o,images:n,uri:a,color:c,spec:r,isActive:!1,isPlaying:!1,overlayElement:p});return(0,C.jsx)(xi,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:y,type:o,isPinned:s,shouldShowType:t,isPlaying:!1,isActive:!1,spec:r,index:i})};var ra=r(79531),ia=r(33398);const aa=({uri:e,divider:t,onDeleteCallback:r})=>{const a=(0,h.W)(),n=(0,s.wA)(),l=(0,i.useCallback)((()=>{a({intent:"playlisting",type:"click"}),n((0,sr.OB)(e,r))}),[n,r,a,e]);return(0,C.jsx)(f.D,{role:"menuitem",divider:t,onClick:l,leadingIcon:(0,C.jsx)(ia.P,{semanticColor:"textSubdued",size:"small"}),children:b.Ru.get("contextmenu.delete")})},na=i.memo((function(e){return(0,C.jsx)(v.pZ,{value:"delete-folder",children:(0,C.jsx)(aa,{...e})})}));var la=r(66289),sa=r(59617),oa=r(68737);const ca=({uri:e,spec:t})=>{const{togglePlay:r,isPlaying:a,isActive:n}=(0,ki.P)({uri:e},{featureIdentifier:"folder"}),l=(0,P.s)(),s=(0,i.useCallback)((()=>{r(),t&&l&&(a?l.logInteraction(t.playButtonFactory({uri:e}).hitPause({itemToBePaused:e})):n?l.logInteraction(t.playButtonFactory({uri:e}).hitResume({itemToBeResumed:e})):l.logInteraction(t.playButtonFactory({uri:e}).hitPlay({itemToBePlayed:e})))}),[n,a,l,t,r,e]);return(0,C.jsx)(f.D,{role:"menuitem",onClick:s,leadingIcon:a?(0,C.jsx)(sa._,{semanticColor:"textSubdued",size:"small"}):(0,C.jsx)(oa.A,{semanticColor:"textSubdued",size:"small"}),children:a?b.Ru.get("pause"):b.Ru.get("play")})},da=i.memo((function(e){return(0,C.jsx)(v.pZ,{value:"create-folder",children:(0,C.jsx)(ca,{...e})})}));var ua=r(56891);const pa=({uri:e,name:t,divider:r,spec:a,handleRename:n})=>{const l=(0,P.s)(),o=(0,s.wA)(),c=(0,i.useCallback)((()=>{a&&l.logInteraction(a.editButtonFactory({uri:e}).hitUiReveal()),o((0,sr.O2)(t,n))}),[o,l,t,n,a,e]);return(0,C.jsx)(f.D,{role:"menuitem",divider:r,onClick:c,leadingIcon:(0,C.jsx)(ua.G,{semanticColor:"textSubdued",size:"small"}),children:b.Ru.get("contextmenu.rename")})},ya=i.memo((function(e){return(0,C.jsx)(v.pZ,{value:"rename",children:(0,C.jsx)(pa,{...e})})}));var ga=r(48914),ma=r(58181);const xa=i.memo((function({reference:e,name:t="",onRename:r,onCreateCallback:i=()=>{},onDeleteCallback:a,canPin:n=I.oT.NO,isPinned:l=!1,isPlayable:s=!0}){const{spec:o}=(0,R.o)(e.uri),c=(0,ma.Ek)()&&s;return(0,C.jsx)(v.pZ,{value:"folder",children:(0,C.jsxs)(g.W,{children:[(0,C.jsx)(ya,{spec:o,uri:e.uri,name:t,handleRename:r}),(0,C.jsx)(na,{uri:e.uri,divider:"after",onDeleteCallback:a}),(n!==I.oT.NO||l)&&(0,C.jsx)(la.k,{uri:e.uri,canPin:n,isPinned:l,type:gr.c.FOLDER,spec:o}),(0,C.jsx)(T,{position:{after:e},onCreateCallback:i,spec:o}),(0,C.jsx)(m.j,{position:{after:e},onCreateCallback:i,spec:o}),(0,C.jsx)(ga.y,{uriToBeAdded:e.uri,isInLibrary:!0,spec:o}),c&&(0,C.jsx)(da,{uri:e.uri,spec:o})]})})}));function ba(e,t){const{createPlaylistFromAlbum:r,createPlaylistFromTracks:a}=(0,S.A)(),n=(0,P.s)(),l=(0,Zr.g)(),s=Jr(),o=(0,i.useCallback)((r=>{if(!t)return;const{[j.fl.PLAYLISTS_V2]:i=[],[j.fl.FOLDERS]:a=[]}=r,o={after:{uri:t}};i.length&&(s(i,o),n.logInteraction(e.dragSort())),a.length&&(l.moveFolder({uri:a[0]},o),n.logInteraction(e.dragSort()))}),[s,n,l,e,t]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=Kr({onApplyDrop:o});return{unpinConfirmationDialog:c,handleDropOnFolder:(0,i.useCallback)((async i=>{if(!t)return;const{[j.fl.TRACKS]:l=[],[j.fl.LOCAL_TRACKS]:s=[],[j.fl.ALBUMS]:o=[],[j.fl.EPISODES]:c=[],[j.fl.PLAYLISTS_V2]:u=[],[j.fl.FOLDERS]:p=[]}=i,y={after:{uri:t}};u.length||p.length?d(i,D.Nz.ON):o.length?(r(o[0],y),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(l.length||s.length||c.length)&&(a([...l,...s,...c],y),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()))}),[t,d,r,n,e,a])}}var fa=r(9302),ha=r(43408),Sa=r(36008),va=r(76670),Pa=r(82026),Ca=r(35391),wa=r(98548);const Ta=({uri:e})=>{const[t,r]=(0,i.useState)(!1),a=(0,fa.x)(),n=(0,i.useCallback)((()=>{r(!0),setTimeout((()=>{r(!1)}),500)}),[]);return(0,Sa.l)(ha.UV.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&e===a.getDefaultCurationContextUri(t.data.uris[0])&&n()})),(0,Pa.e)(va.Lj.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&e===t.data.uri&&n()})),(0,Ca.b)(wa.tD.OPERATION_COMPLETE,(t=>{"remove"!==t.data.operation&&"end"!==t.data.position?.after&&t.data.position.after?.uri===e&&(0,tr.fpb)(e)&&n()})),{animateState:t,animateClassName:Tr.A.pulse}};var Ia=r(14157),Ra=r(1855);function Aa(e,t){const{uri:r,name:a,numberOfFolders:n,numberOfPlaylists:l,pinned:o}=e,{isPlaying:c,isActive:d}=(0,Er.l_)(r),{pushFolder:u}=(0,i.useContext)(ir),p=(0,s.wA)(),{togglePlay:y,triggerPlay:g}=(0,ki.P)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),m=(0,s.d4)((e=>e.platform.isDesktop)),{handleDropOnFolder:x,unpinConfirmationDialog:f}=ba(t,r),{renameFolder:h}=(0,Ia.Z)(),S=x,v=[l>0||!n?b.Ru.get("web-player.your-library-x.rows.folder.number-of-playlists",l):null,n>0?b.Ru.get("web-player.your-library-x.rows.folder.number-of-folders",n):null].filter(Ra.P).join(b.Ru.getSeparator()),P=(0,i.useCallback)(((t="")=>{h(e,t)}),[e,h]),w=(0,i.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return{openDeleteDialog:(0,i.useCallback)((()=>{p((0,sr.OB)(r))}),[p,r]),togglePlay:m?y:void 0,triggerPlay:m?g:void 0,menu:(0,C.jsx)(xa,{reference:{uri:r},name:a,canPin:e.canPin,isPinned:o,onRename:P,isPlayable:!e.isEmpty}),subtitleText:v,onDropTargetDropOn:S,handleNavigate:w,dropOnFolderUnpinConfirmationDialog:f,isPlaying:c,isActive:d}}const ja=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:a,index:l})=>{const{uri:s,folderDepth:o,name:c,type:d,isFlattened:u,pinned:p,canReorder:y}=e,{openDeleteDialog:g,togglePlay:m,triggerPlay:x,menu:f,subtitleText:h,onDropTargetDropOn:S,handleNavigate:v,dropOnFolderUnpinConfirmationDialog:w,isPlaying:T,isActive:I}=Aa(e,r),[R,A]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,i.useContext)(ot);return[(0,i.useMemo)((()=>t(e)),[t,e]),(0,i.useCallback)((t=>{r(e,t)}),[r,e])]}(s),j=(0,P.s)(),D=(0,i.useCallback)((()=>{A(!0),j.logInteraction(r.yourLibraryItemFactory().dragUiReveal())}),[j,A,r]),L=(0,i.useCallback)((e=>{e.stopPropagation()}),[]),E=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),A(!R),R?j.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):j.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())}),[A,R,j,r]),O=(0,i.useCallback)((e=>{"ArrowLeft"===e.key?A(!1):"ArrowRight"===e.key&&A(!0)}),[A]),N=!u&&(0,C.jsx)(je.H,{"data-skip-in-keyboard-nav":!0,"aria-label":R?b.Ru.get("web-player.your-library-x.collapse-folder"):b.Ru.get("web-player.your-library-x.expand-folder"),iconOnly:ra.y,size:"small",condensedAll:!0,onClick:E,onDoubleClick:L,tabIndex:-1,className:n()(mt,xt,{[Rt]:!R})}),{animateState:k,animateClassName:F}=Ta({uri:s}),B=(0,C.jsx)(Ri,{title:c,type:d,animateState:k,animateClassName:F,uri:s,isPlaying:T,spec:r,togglePlay:m});return(0,C.jsxs)(C.Fragment,{children:[w,(0,C.jsx)(Ei,{onKeyDown:O,RowVariantComponent:t,uri:s,to:`/folder/${(0,tr.o_h)(s)?.id??""}`,handleNavigate:v,folderDepth:o,cover:B,name:c,subtitle:h,alt:c,dragLabel:c,menu:f,canReorder:y,allowedDropTargetDropOnMimeTypes:Jt,onDropTargetDropOn:S,onLongDragOver:D,togglePlay:m,triggerPlay:x,openDeleteDialog:g,addedAt:e.addedAt,lastPlayedAt:e.lastPlayedAt,isPinned:p,shouldShowType:!1,type:d,isPlaying:T,isActive:I,expandFolderButton:N,spec:r,nrValidItems:a,index:l})]})},Da=({libraryItem:e,spec:t,index:r})=>{const{uri:i,name:a,type:n,pinned:l,canReorder:s}=e,{togglePlay:o,triggerPlay:c,menu:d,subtitleText:u,onDropTargetDropOn:p,handleNavigate:y,openDeleteDialog:g,isPlaying:m,isActive:x}=Aa(e,t),{animateState:b,animateClassName:f}=Ta({uri:i}),h=(0,C.jsx)(Ai,{title:a,type:n,uri:i,togglePlay:o,spec:t,isActive:x,isPlaying:m});return(0,C.jsx)(xi,{uri:i,to:`/folder/${(0,tr.o_h)(i)?.id??""}`,handleNavigate:y,cover:h,name:a,subtitle:u,menu:d,dragLabel:a,canReorder:s,allowedDropTargetDropOnMimeTypes:Jt,onLongDragOver:y,onDropTargetDropOn:p,togglePlay:o,triggerPlay:c,isPinned:l,shouldShowType:!1,type:n,openDeleteDialog:g,isPlaying:m,isActive:x,spec:t,index:r,animateState:b,animateClassName:f})};var La=r(92754);const Ea=i.memo((function({uri:e,canPin:t,isPinned:r,downloadUri:i}){const{spec:a}=(0,R.o)(e);return(0,C.jsx)(v.pZ,{value:"generic",children:(0,C.jsxs)(g.W,{children:[i?(0,C.jsx)(La.dw,{spec:a,uri:i}):null,t!==I.oT.NO&&(0,C.jsx)(la.k,{uri:e,canPin:t,isPinned:r,type:gr.c.PLAYLIST,spec:a})]})})}));var Oa=r(7397);const Na=[j.fl.TRACKS,j.fl.LOCAL_TRACKS];function ka(e){const{numberOfSongs:t}=e,r="spotify:collection:tracks",{user:a}=(0,s.d4)(Oa.Ht),n=(0,tr.fHB)(a?.id).toURI(),l=n,o=n,{togglePlay:c,triggerPlay:d}=(0,ki.P)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),u=(0,Bt.f)(),{isPlaying:p,isActive:y}=(0,Er.l_)(l),g=(0,i.useCallback)((e=>{const{[j.fl.TRACKS]:t=[],[j.fl.LOCAL_TRACKS]:r=[]}=e,i=[...t,...r];i?.length&&u?.add({uris:i})}),[u]);return{isPlaying:p,isActive:y,togglePlay:c,triggerPlay:d,menu:(0,C.jsx)(Ea,{uri:r,canPin:e.canPin,isPinned:e.pinned,downloadUri:o}),downloadButton:(0,C.jsx)(cr.M,{uri:o,size:"xsmall",className:Tr.A.icon,as:"span"}),subtitleText:(0,C.jsx)(C.Fragment,{children:b.Ru.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:g,playbackUri:l,uri:r,...Ta({uri:r})}}const Fa=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{images:l,name:s,type:o,pinned:c,addedAt:d,lastPlayedAt:u,color:p}=e,{isPlaying:y,isActive:g,togglePlay:m,triggerPlay:x,menu:b,subtitleText:f,onDropTargetDropOn:h,playbackUri:S,uri:v,downloadButton:P,animateState:w,animateClassName:T}=ka(e),I=(0,C.jsx)(Ri,{title:s,type:o,images:l,color:p,animateState:w,animateClassName:T,uri:v,isPlaying:y,spec:i,togglePlay:m});return(0,C.jsx)(Ei,{RowVariantComponent:r,uri:v,cover:I,name:s,subtitle:f,alt:s,dragLabel:s,menu:b,allowedDropTargetDropOnMimeTypes:Na,onDropTargetDropOn:h,togglePlay:m,triggerPlay:x,addedAt:d,lastPlayedAt:u,isPlaying:y,isActive:g,isPinned:c,shouldShowType:t,type:o,playbackUri:S,downloadButton:P,spec:i,nrValidItems:a,index:n})},Ba=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{images:a,name:n,type:l,pinned:s,color:o}=e,{togglePlay:c,triggerPlay:d,menu:u,subtitleText:p,onDropTargetDropOn:y,playbackUri:g,uri:m,downloadButton:x,isPlaying:b,isActive:f,animateState:h,animateClassName:S}=ka(e),v=(0,C.jsx)(Ai,{title:n,type:l,images:a,uri:g,togglePlay:c,color:o,spec:r,isActive:f,isPlaying:b});return(0,C.jsx)(xi,{uri:m,name:n,subtitle:p,menu:u,dragLabel:n,allowedDropTargetDropOnMimeTypes:Na,onDropTargetDropOn:y,cover:v,togglePlay:c,triggerPlay:d,isPinned:s,shouldShowType:t,type:l,playbackUri:g,downloadButton:x,isPlaying:b,isActive:f,spec:r,index:i,animateState:h,animateClassName:S})};var Ua=r(82924),Ma=r(98011),_a=r(4833),Va=r(44758);function Ha(e){const{numberOfFiles:t}=e,r=Va.bV,i=(0,_a.Iu)().uri,{isPlaying:a,isActive:n}=(0,Er.l_)(r);return{playbackUri:r,uri:i,isPlaying:a,isActive:n,menu:(0,C.jsx)(Ea,{uri:i,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,C.jsx)(Ua.F,{size:"xsmall",className:Tr.A.icon,semanticColor:"textBrightAccent"}),subtitleText:b.Ru.get("web-player.your-library-x.rows.local-files.subtitle",t)}}const za=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{name:l,addedAt:s,lastPlayedAt:o,type:c,pinned:d}=e,{playbackUri:u,uri:p,isPlaying:y,menu:g,subtitleText:m,downloadButton:x,isActive:b}=Ha(e),f=(0,C.jsx)("div",{className:bt,children:(0,C.jsx)(Ma.e,{iconSize:24,title:l})});return(0,C.jsx)(Ei,{RowVariantComponent:r,uri:p,name:l,subtitle:m,alt:l,dragLabel:l,menu:g,addedAt:s,lastPlayedAt:o,isPinned:d,isPlaying:y,isActive:b,shouldShowType:t,playbackUri:u,downloadButton:x,cover:f,type:c,spec:i,nrValidItems:a,index:n})},Wa=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{name:a,images:n,type:l,pinned:s}=e,{playbackUri:o,uri:c,menu:d,downloadButton:u,subtitleText:p,isPlaying:y,isActive:g}=Ha(e),m=(0,C.jsx)("div",{className:pi,children:(0,C.jsx)(bi.M,{images:n,FallbackComponent:e=>(0,C.jsx)(Ma.e,{size:"xxlarge",className:ui,...e})})});return(0,C.jsx)(xi,{uri:c,name:a,subtitle:p,menu:d,cover:m,type:l,playbackUri:o,downloadButton:u,isPinned:s,shouldShowType:t,isPlaying:y,isActive:g,spec:r,index:i})};var Ya=r(20953),Ga=r(40621);const Ka=({index:e,type:t})=>{const r=oi();return(0,C.jsx)(Ga.T,{columnIndex:0,children:(0,C.jsx)(ur.Z,{className:n()(ci,{[di]:r}),media:(0,C.jsx)(bi.M,{images:[],FallbackComponent:()=>(0,C.jsx)(wi.s,{type:t,size:"xxlarge",className:ui,semanticColor:"textSubdued"}),isCircular:t===gr.c.ARTIST}),variant:"naked",id:e,title:"",padding:r?Ya.vw:Ya.CJ})})};var Xa=r(57211),Za=r(10997),Ja=r(94011),qa=r(78809),Qa=r(56621),$a=r(27825),en=r(61861),tn=r(87733),rn=r(21497),an=r(12810),nn=r(73777),ln=r(95609),sn=r(27656),on=r(15061),cn=r(8570),dn=r(97602),un=r(88845),pn=r(81885),yn=r(45839);const gn=i.memo((function({reference:e,isPublished:t,canPin:r=I.oT.NO,isPinned:i=!1,useDialogForUnfollow:a=!1,isInLibrary:n}){const{uri:l}=e,s=(0,pn.J)(l),o=!!s?.permissions?.isPrivate,c=(0,yn.v)(l)??s?.isPublished??t,{spec:d}=(0,R.o)(l),u=s?.hasSpotifyAudiobooks,p=(0,dn.D)(s);return s&&(0,C.jsx)(v.pZ,{value:"playlist",children:(0,C.jsxs)(g.W,{children:[!u&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ja.K,{spec:d,uris:[l]}),(0,C.jsx)(un._,{uri:l,spec:d})]}),!o&&(0,C.jsx)(ln._,{spec:d,divider:s.isOwnedBySelf?"after":"both",uri:l,isPublished:c}),s.isOwnedBySelf&&(0,C.jsx)($a.T,{spec:d,uri:l,name:s.name,description:s.description,image:s.images[0]}),!s.isOwnedBySelf&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(sn.P,{spec:d,uri:l}),(0,C.jsx)(Za.ET,{uri:l,useDialog:a,initialState:n})]}),s.isOwnedBySelf&&(0,C.jsx)(Qa.u,{spec:d,uri:l}),!u&&!p&&(0,C.jsx)(La.dw,{spec:d,uri:l}),(0,C.jsx)(T,{position:{after:e},divider:"before",spec:d}),(0,C.jsx)(m.j,{position:{after:e},spec:d}),s.permissions?.canAdministratePermissions&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nn.U,{spec:d,divider:"before",uri:l,isPrivate:o}),!u&&(0,C.jsx)(tn.n,{uri:l,spec:d})]}),s.permissions?.canCancelMembership&&(0,C.jsx)(rn._,{spec:d,divider:"before",uri:l}),(0,C.jsx)(en.w,{spec:d,uri:l}),(0,C.jsx)(ga.y,{uriToBeAdded:l,isInLibrary:!0,spec:d}),!u&&(0,C.jsx)(on.o,{spec:d,uris:[l],isPlaylist:!0}),(r!==I.oT.NO||i)&&(0,C.jsx)(la.k,{uri:l,canPin:r,isPinned:i,type:gr.c.PLAYLIST,spec:d}),(s.isOwnedBySelf||!o)&&(0,C.jsxs)(cn.h,{divider:"before",children:[(0,C.jsx)(qa.m,{spec:d,uri:l,displayText:b.Ru.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:o}),(0,C.jsx)(an.x,{spec:d,uri:l,type:gr.c.PLAYLIST})]})]})})})),mn=i.memo((function({reference:e,canPin:t=I.oT.NO,isPinned:r=!1}){const{uri:i}=e,{spec:a}=(0,R.o)(i);return(0,C.jsx)(v.pZ,{value:"playlist",children:(0,C.jsxs)(g.W,{children:[(0,C.jsx)(T,{position:{after:e},divider:"before",spec:a}),(0,C.jsx)(m.j,{position:{after:e},spec:a}),t!==I.oT.NO&&(0,C.jsx)(la.k,{uri:i,canPin:t,isPinned:r,type:gr.c.PLAYLIST,spec:a})]})})}));var xn=r(79210);function bn(e,t){const{uri:r,isLoading:a,owner:n,pinned:l,canView:o}=e,c=(0,xn.m)(),{filter:d}=(0,i.useContext)(Q.g),u=[j.fl.TRACKS,j.fl.LOCAL_TRACKS,j.fl.ALBUMS,j.fl.EPISODES],p=[j.fl.AUDIOBOOKS];(0,i.useEffect)((()=>{a&&c.resync(r)}),[c,r,a]);const{togglePlay:y,triggerPlay:m}=(0,ki.P)({uri:r},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),{isPlaying:x,isActive:f}=(0,Er.l_)(r),h=(0,s.wA)(),S=(0,P.s)();let v,w=[];const T=(0,i.useCallback)((async e=>{const{[j.fl.TRACKS]:i=[],[j.fl.LOCAL_TRACKS]:a=[],[j.fl.ALBUMS]:n=[],[j.fl.EPISODES]:l=[],[j.fl.AUDIOBOOKS]:s=[]}=e,o=[...i,...a,...n,...l,...s];h((0,Xa.io)(r,o)),S.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:o.at(0)??"",playlist:r}))}),[h,S,t,r]);e.canAddTo&&(w=e.isEmpty?[...p,...u]:e.isBooklist?p:u,v=T);const I=(0,i.useCallback)((()=>{h((0,sr.O)(r))}),[h,r]),R=(0,lr.c0)(r),A=a&&!e.name;let D;D=R?(0,C.jsx)(mn,{reference:e,canPin:e.canPin,isPinned:l}):A?(0,C.jsx)(g.W,{children:(0,C.jsx)(Za.ET,{uri:r,initialState:!0})}):(0,C.jsx)(gn,{reference:e,canPin:e.canPin,isPinned:l,useDialogForUnfollow:!0,isInLibrary:!0});const L=(0,C.jsx)(cr.M,{uri:r,size:"xsmall",className:Tr.A.icon,as:"span"}),E=(0,lr.c0)(r)?b.Ru.get("ylx.clicktoplay"):o?(n.uri,(0,C.jsx)(dr.M,{searchWords:[d.trim()],textToHighlight:n.name})):b.Ru.get("web-player.your-library-x.playlist-unavailable"),O=!!(0,lr.c0)(r)||!e.isBooklist&&!e.isEmpty;return{openDeleteDialog:I,togglePlay:O?y:void 0,triggerPlay:O?m:void 0,isPlaying:x,isActive:f,menu:D,downloadButton:L,subtitleText:E,allowedDropTargetDropOnMimeTypes:w,onDropTargetDropOn:v,...Ta({uri:r})}}const fn=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,folderDepth:o,name:c,type:d,pinned:u,addedAt:p,lastPlayedAt:y,color:g,canReorder:m,namePrefix:x}=e,{openDeleteDialog:b,togglePlay:f,triggerPlay:h,isPlaying:S,isActive:v,menu:P,downloadButton:w,subtitleText:T,allowedDropTargetDropOnMimeTypes:I,onDropTargetDropOn:R,animateState:A,animateClassName:j}=bn(e,i),D=(0,C.jsx)(Ri,{title:c,type:d,images:s,color:g,animateState:A,animateClassName:j,uri:l,isPlaying:S,togglePlay:f,spec:i});return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(Ei,{RowVariantComponent:r,uri:l,folderDepth:o,cover:D,name:c,namePrefix:x,subtitle:T,alt:c,dragLabel:c,menu:P,canReorder:m,allowedDropTargetDropOnMimeTypes:I,onDropTargetDropOn:R,togglePlay:f,triggerPlay:h,openDeleteDialog:b,addedAt:p,lastPlayedAt:y,isPlaying:S,isActive:v,isPinned:u,shouldShowType:t,type:d,downloadButton:w,spec:i,playInsteadOfNavigating:(0,lr.c0)(l),nrValidItems:a,index:n})})},hn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c,canReorder:d,namePrefix:u}=e,{togglePlay:p,triggerPlay:y,menu:g,downloadButton:m,subtitleText:x,onDropTargetDropOn:b,allowedDropTargetDropOnMimeTypes:f,openDeleteDialog:h,isPlaying:S,isActive:v,animateState:P,animateClassName:w}=bn(e,r),T=(0,C.jsx)(Ai,{title:l,type:s,images:n,uri:a,togglePlay:p,color:c,spec:r,isActive:v,isPlaying:S});return(0,C.jsx)(xi,{uri:a,name:l,namePrefix:u,subtitle:x,menu:g,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:f,onDropTargetDropOn:b,cover:T,togglePlay:p,triggerPlay:y,isPinned:o,shouldShowType:t,type:s,downloadButton:m,openDeleteDialog:h,isPlaying:S,isActive:v,spec:r,playInsteadOfNavigating:(0,lr.c0)(a),index:i,animateState:P,animateClassName:w})};var Sn=r(77671),vn=r(15148),Pn=r(92873),Cn=r(98567);const wn=i.memo((function({uri:e,canPin:t=I.oT.NO,isPinned:r=!1,canRemove:i=!1}){const{spec:a}=(0,R.o)(e);return(0,C.jsx)(v.pZ,{value:"audiobook",children:(0,C.jsxs)(g.W,{children:[i&&(0,C.jsx)(Cn.p,{uri:e,removeLabel:b.Ru.get("contextmenu.remove-from-library")}),t!==I.oT.NO&&(0,C.jsx)(la.k,{uri:e,canPin:t,isPinned:r,type:gr.c.PRE_RELEASE_BOOK,spec:a}),(0,C.jsx)(qa.m,{uri:e,spec:a,displayText:b.Ru.get("context-menu.copy-book-link")}),(0,C.jsx)(Pn.q,{spec:a,divider:"before",uri:e})]})})}));function Tn(e){const{uri:t,canPin:r,pinned:a,type:n}=e,{filter:l}=(0,i.useContext)(Q.g),o=(0,s.wA)(),c=(0,i.useCallback)((()=>{o((0,sr.aw)(t,!0))}),[o,t]);let d,u="";if(n===gr.c.PRE_RELEASE_ALBUM){const i=e.artists?.at(0);u=i?.name??"",d=(0,C.jsx)(vn.P,{uri:t,artistUri:i?.uri,canPin:r,isPinned:a,canRemove:!0})}else u=e.authorName,d=(0,C.jsx)(wn,{uri:t,canPin:r,isPinned:a,canRemove:!0});return{openDeleteDialog:c,menu:d,subtitleText:(0,C.jsx)(dr.M,{searchWords:[l.trim()],textToHighlight:u})}}const In=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:y}=e,{openDeleteDialog:g,menu:m,subtitleText:x}=Tn(e),b=(0,C.jsx)(Ri,{title:o,type:d,images:s,color:y,uri:l,isPlaying:!1,spec:i,togglePlay:void 0});return(0,C.jsx)(Ei,{RowVariantComponent:r,uri:l,cover:b,name:o,subtitle:x,alt:o,type:d,dragLabel:o,menu:m,openDeleteDialog:g,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:a,index:n,preReleaseIcon:(0,C.jsx)(Sn.t,{size:"xsmall",className:Tr.A.icon})})},Rn=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p}=Tn(e),y=(0,C.jsx)(Ai,{title:l,type:o,images:n,uri:a,color:c,spec:r,isActive:!1,isPlaying:!1});return(0,C.jsx)(xi,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:y,type:o,isPinned:s,shouldShowType:t,openDeleteDialog:p,isPlaying:!1,isActive:!1,spec:r,index:i,preReleaseIcon:(0,C.jsx)(Sn.t,{size:"xsmall",className:Tr.A.icon})})};var An=r(88800);function jn(e){const{uri:t,publisher:r}=e,{filter:a}=(0,i.useContext)(Q.g),n=(0,s.wA)(),{togglePlay:l,triggerPlay:o}=(0,ki.P)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}),{isPlaying:c,isActive:d}=(0,Er.l_)(t);return{isPlaying:c,isActive:d,openDeleteDialog:(0,i.useCallback)((()=>{n((0,sr.aw)(t))}),[n,t]),togglePlay:l,triggerPlay:o,menu:(0,C.jsx)(An.H,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,C.jsx)(cr.M,{uri:t,size:"xsmall",className:Tr.A.icon,as:"span"}),subtitleText:(0,C.jsx)(dr.M,{autoEscape:!0,searchWords:[a.trim()],textToHighlight:r})}}const Dn=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:y}=e,{isPlaying:g,isActive:m,openDeleteDialog:x,togglePlay:b,triggerPlay:f,menu:h,downloadButton:S,subtitleText:v}=jn(e),P=(0,C.jsx)(Ri,{title:o,type:c,images:s,color:y,uri:l,isPlaying:g,spec:i,togglePlay:b});return(0,C.jsx)(Ei,{RowVariantComponent:r,uri:l,cover:P,name:o,subtitle:v,alt:o,dragLabel:o,menu:h,togglePlay:b,triggerPlay:f,openDeleteDialog:x,addedAt:d,lastPlayedAt:u,isPlaying:g,isActive:m,isPinned:p,shouldShowType:t,type:c,downloadButton:S,spec:i,nrValidItems:a,index:n})},Ln=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{togglePlay:d,triggerPlay:u,menu:p,downloadButton:y,subtitleText:g,openDeleteDialog:m,isPlaying:x,isActive:b}=jn(e),f=(0,C.jsx)(Ai,{title:l,type:s,images:n,uri:a,togglePlay:d,color:c,spec:r,isActive:b,isPlaying:x});return(0,C.jsx)(xi,{uri:a,name:l,subtitle:g,menu:p,dragLabel:l,cover:f,togglePlay:d,triggerPlay:u,isPinned:o,shouldShowType:t,type:s,downloadButton:y,openDeleteDialog:m,isPlaying:x,isActive:b,spec:r,index:i})},En=[j.fl.EPISODES];function On(e){const{numberOfDownloadedEpisodes:t,uri:r}=e,a=r,n=I.Xn,{togglePlay:l,triggerPlay:s}=(0,ki.P)({uri:a},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),{isPlaying:o,isActive:c}=(0,Er.l_)(a),d=(0,Bt.f)(),u=(0,i.useCallback)((e=>{const{[j.fl.EPISODES]:t=[]}=e;t?.length&&d?.add({uris:t})}),[d]);return{isPlaying:o,isActive:c,togglePlay:l,triggerPlay:s,menu:(0,C.jsx)(Ea,{uri:n,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,C.jsx)(Ua.F,{size:"xsmall",className:Tr.A.icon,semanticColor:"textBrightAccent"}):null,subtitleText:b.Ru.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:u,playbackUri:a,uri:n,...Ta({uri:n})}}const Nn=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:i,index:a})=>{const{images:n,name:l,type:s,pinned:o,lastPlayedAt:c,addedAt:d,color:u}=e,{isPlaying:p,isActive:y,togglePlay:g,triggerPlay:m,menu:x,downloadButton:b,subtitleText:f,onDropTargetDropOn:h,playbackUri:S,uri:v,animateState:P,animateClassName:w}=On(e),T=(0,C.jsx)(Ri,{title:l,type:s,images:n,color:u,animateState:P,animateClassName:w,uri:v,isPlaying:p,spec:r,togglePlay:g});return(0,C.jsx)(Ei,{RowVariantComponent:t,uri:v,cover:T,name:l,subtitle:f,alt:l,dragLabel:l,menu:x,allowedDropTargetDropOnMimeTypes:En,onDropTargetDropOn:h,togglePlay:g,triggerPlay:m,addedAt:d,lastPlayedAt:c,isPlaying:p,isActive:y,isPinned:o,shouldShowType:!1,type:s,downloadButton:b,playbackUri:S,spec:r,nrValidItems:i,index:a})},kn=({libraryItem:e,spec:t,index:r})=>{const{images:i,name:a,type:n,pinned:l,color:s}=e,{togglePlay:o,triggerPlay:c,menu:d,downloadButton:u,subtitleText:p,onDropTargetDropOn:y,playbackUri:g,uri:m,isPlaying:x,isActive:b,animateState:f,animateClassName:h}=On(e),S=(0,C.jsx)(Ai,{title:a,type:n,images:i,uri:m,togglePlay:o,color:s,spec:t,isActive:b,isPlaying:x});return(0,C.jsx)(xi,{uri:m,name:a,subtitle:p,menu:d,dragLabel:a,allowedDropTargetDropOnMimeTypes:En,onDropTargetDropOn:y,cover:S,togglePlay:o,triggerPlay:c,playbackUri:g,downloadButton:u,isPinned:l,shouldShowType:!1,type:n,isPlaying:x,isActive:b,spec:t,index:r,animateState:f,animateClassName:h})};var Fn=r(11715);function Bn(){const e=(0,d.NC)(G.Gre),{isFullscreen:t}=(0,Ee.Q)(),[r,i]=(0,ct.x)("ylx-grid-scale",1),[a,n]=(0,ct.x)("ylx-grid-scale-fullscreen",1);return e?{gridScale:1,setGridScale:()=>{}}:{gridScale:t?a:r,setGridScale:t?n:i}}var Un=r(41905),Mn=r(24211),_n=r(24466);const Vn=(0,K.g)(gr.c),Hn=(0,i.memo)((function({item:e,primaryFilter:t,spec:r,index:i}){const a={shouldShowType:!(0,lr.c0)(e.uri)&&(fr(e.type)!==t||br(e)),spec:r,index:i},n=(0,d.NC)(G.lDH);switch(e.type){case gr.c.FOLDER:return(0,C.jsx)(Da,{libraryItem:e,...a});case gr.c.ALBUM:return(0,C.jsx)(Ui,{libraryItem:e,...a});case gr.c.ARTIST:return(0,C.jsx)(Hi,{libraryItem:e,...a});case gr.c.AUDIOBOOK:return(0,C.jsx)(Ki,{libraryItem:e,...a});case gr.c.AUTHOR:return(0,C.jsx)(qi,{libraryItem:e,...a});case gr.c.SHOW:return(0,C.jsx)(Ln,{libraryItem:e,...a});case gr.c.PLAYLIST:return(0,C.jsx)(hn,{libraryItem:e,...a});case gr.c.LIKED_SONGS:return(0,C.jsx)(Ba,{libraryItem:e,...a});case gr.c.YOUR_EPISODES:return(0,C.jsx)(kn,{libraryItem:e,...a});case gr.c.LOCAL_FILES:return(0,C.jsx)(Wa,{libraryItem:e,...a});case gr.c.PRE_RELEASE_ALBUM:return n?(0,C.jsx)(Rn,{libraryItem:e,...a}):null;case gr.c.PRE_RELEASE_BOOK:return(0,C.jsx)(Rn,{libraryItem:e,...a});case gr.c.CONCERT:return(0,C.jsx)(ta,{libraryItem:e,...a});default:(0,mr.d)(e)}})),zn=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const l=(0,d.NC)(G.Gre),{gridScale:s}=Bn(),o=function(){const{gridScale:e}=Bn(),{itemsView:t}=(0,Fn.t)();return(0,d.NC)(G.Gre)?t===Fn.X.GRID_COMPACT:e<.8}(),c=(0,Mn.s1)(((e,t)=>e?t?Mn.yV.YLX_COMPACT:Mn.yV.YLX:Mn.yV.YLX_LEGACY)(l,o),s),u=(0,i.useRef)({}),p=(0,i.useCallback)((e=>(0,C.jsx)(Ka,{index:e,type:Vn(r)?r:void 0},e)),[r]),y=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>{const a=t+i;return e?(0,C.jsx)(Hn,{item:e,spec:n,primaryFilter:r,index:a},`${e.uri}-${a}`):p(`${a}`)}))),[e,r,p,n]),g=(0,i.useCallback)(((e,t)=>{u.current={numColumns:e,rowHeight:t}}),[]);return(0,C.jsx)(Un.x,{config:c,children:(0,C.jsx)(si,{isCompact:o,children:(0,C.jsx)(nr.R,{firstInteractiveIsWrapper:!0,"aria-label":b.Ru.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(a/(u.current.numColumns??1)),"aria-colcount":u.current.numColumns,children:(0,C.jsx)(_n.F,{renderItems:y,nrItems:a,estimatedItemMaxHeight:250,scrollNodeRef:t,onGridResize:g})})})})};var Wn=r(25987),Yn=r(37237),Gn=r(80191),Kn=r(89750);const Xn="bDHk5k9wfICYjDSC27zp",Zn="oaVwShR89gQxLH2tco5G",Jn="JBkqeL9U_4_hqstj_oa8",qn="bRRTUCB99PsPsPVYchRh",Qn="Gj4v3278oIywygaUyBbt",$n="WHTLfjA4oq5AQak5E8CQ",el="WJFlv_VJkA5oNs0XJMsQ",tl=({isCollapsed:e,toggleCollapsedState:t,dropTargetClassName:r,folderUri:i,...a})=>(0,C.jsx)("div",{className:n()(Xn,e&&$n,!e&&qn),...a,children:(0,C.jsxs)("button",{type:"button","aria-label":e?b.Ru.get("web-player.your-library-x.expand-your-library"):b.Ru.get("web-player.your-library-x.collapse-your-library"),onClick:t,className:n()(Zn,r),children:[(0,C.jsx)("span",{className:Qn,children:e?(0,C.jsx)(Wn.M,{}):(0,C.jsx)(Gn.C,{size:"small"})}),e&&(0,C.jsx)("span",{className:el,children:(0,C.jsx)(Kn.t,{})}),!i&&!e&&(0,C.jsx)(fe.E,{variant:"bodyMediumBold",semanticColor:"textBase",className:Jn,children:b.Ru.get("web-player.your-library-x.your-library")})]})});var rl=r(88025),il=r(61101),al=r(27733);const nl=e=>{switch(e){case Ee.h.EXPANDED:return"expanded";case Ee.h.COLLAPSED:return"collapsed";case Ee.h.DEFAULT:return"default";case Ee.h.FULLSCREEN:return"fullscreen";default:throw(0,mr.k)(e)}},ll=()=>{const{leftSidebarState:e,setLeftSidebarState:t}=(0,_.ae)(),{isCollapsed:r,lastUncollapsedYLXSidebarMode:a}=(0,Ee.Q)(),n=(0,al.S)(),l=(0,il.l)(),s=(0,P.s)();return{toggleCollapseYLX:(0,i.useCallback)((i=>{let o=e,c=nl(a),d=nl(a);r?(d=nl(Ee.h.COLLAPSED),a===Ee.h.FULLSCREEN?l(rl.z.LIBRARY):o=a===Ee.h.EXPANDED?_.ZS.EXPANDED:_.ZS.DEFAULT):(c=nl(Ee.h.COLLAPSED),o=_.ZS.COLLAPSED,n===rl.z.LIBRARY&&l(rl.z.CLOSED)),i&&s.logInteraction(i.hitToggleState({stateBeforeToggle:d,stateAfterToggle:c})),t(o)}),[e,a,r,t,l,n,s])}},sl="main-yourLibraryX-header",ol="main-yourLibraryX-collapseButtonWrapper",cl="QO1vC7wN5xiIjBOHGElf",dl="BZh0f1vbOmruyp4_t9wy",ul="X4hWBYwbK0FnYvzkp6Z4",pl="main-yourLibraryX-headerContent",yl="iYP0xuQiJCgi7gx1jUPJ",gl="main-yourLibraryX-collapseButton",ml="main-yourLibraryX-button",xl="af749NDLYTDK_8LinKWD",bl="nGWhztVvLY1BInXjcWYa",fl="oZT8iKL42zhLAm_zE5F5",hl="MdDY8fQ_j94mQZy7ZVXf",Sl="uNReR011bI8ML42Pgveg",vl="oRLkDAtmp80o6GaEYjSE",Pl="BG0k3lL7qfJ5h2cRpJzJ",Cl=({folderUri:e,dropTargetClassName:t,spec:r})=>{const{isCollapsed:a}=(0,Ee.Q)(),{toggleCollapseYLX:l}=ll(),s=(0,d.NC)(G.qNB),o=(0,i.useCallback)((()=>{l(r)}),[r,l]),c=a?Wn.M:Yn.A;return(0,C.jsx)(Le.Zp,{label:a?b.Ru.get("web-player.your-library-x.expand-your-library"):b.Ru.get("web-player.your-library-x.collapse-your-library"),placement:a?"right":void 0,children:s?(0,C.jsx)(tl,{isCollapsed:a,toggleCollapsedState:o,dropTargetClassName:t,folderUri:e}):(0,C.jsx)(je.H,{"aria-label":a?b.Ru.get("web-player.your-library-x.expand-your-library"):b.Ru.get("web-player.your-library-x.collapse-your-library"),onClick:o,className:n()(ol,ml,t),condensed:!0,iconLeading:e||a?void 0:c,iconOnly:e||a?c:void 0,children:!e&&!a&&b.Ru.get("web-player.your-library-x.your-library")})})};var wl=r(55531),Tl=r(14700);const Il=({dropTargetClassName:e,spec:t})=>{const{setLeftSidebarState:r}=(0,_.ae)(),{isExpanded:i}=(0,Ee.Q)(),a=(0,P.s)();return(0,C.jsx)(Le.Zp,{label:i?b.Ru.get("web-player.your-library-x.show-less"):b.Ru.get("web-player.your-library-x.show-more"),children:(0,C.jsx)(je.H,{className:n()(ml,bl,e),iconOnly:i?wl.G:Tl.h,"aria-label":i?b.Ru.get("web-player.your-library-x.reduce-your-library"):b.Ru.get("web-player.your-library-x.enlarge-your-library"),onClick:()=>{r(i?_.ZS.DEFAULT:_.ZS.EXPANDED),a.logInteraction(t.hitToggleState({stateBeforeToggle:i?"expanded":"default",stateAfterToggle:i?"default":"expanded"}))},size:"small"})})};var Rl=r(59993);const Al=({handleNavigateBack:e,isCollapsed:t,parentFolderUri:r,spec:i})=>{const{handleDropBeforeOrAfterRootlistItem:a}=Qr({dropTargetUri:r,spec:i}),{dropPosition:l,className:s,...o}=(0,L.A)({allowedMimeTypesByDropPosition:{[D.Nz.ON]:Xt},onDrop:async e=>{a(e,D.Nz.BEFORE)},onLongDragOver:e}),c=(0,d.NC)(G.qNB);return(0,C.jsx)(Le.Zp,{label:b.Ru.get("web-player.your-library-x.navigate-back-folder"),children:(0,C.jsx)(je.H,{className:n()(ml,xl,s,{[Mt]:l===D.Nz.ON,[vl]:!t&&c}),"aria-label":b.Ru.get("web-player.your-library-x.navigate-back-folder"),onClick:e,iconOnly:Rl.g,size:"small",...o})})};var jl=r(59244),Dl=r(52110);const Ll=({folderMenu:e,folderName:t,dropTargetClassName:r})=>(0,C.jsx)(Dl.b,{menu:e,children:(0,C.jsx)("span",{children:(0,C.jsx)(Le.Zp,{label:b.Ru.get("more.label.context",t),children:(0,C.jsx)(je.H,{className:n()(ml,bl,r),iconOnly:jl.x,"aria-haspopup":"menu","aria-label":b.Ru.get("more.label.context",t),size:"small"})})})});var El=r(26111),Ol=r(91292),Nl=r(36907);const kl=({dropTargetClassName:e,spec:t})=>{const r=(0,al.S)(),i=(0,il.l)(),{setLeftSidebarState:a}=(0,_.ae)(),l=(0,P.s)();return(0,C.jsx)(Le.Zp,{label:(0,Nl.v)("fullscreen library"),children:(0,C.jsx)(je.H,{className:n()(ml,bl,e),iconOnly:r===rl.z.LIBRARY?El.b:Ol.L,"aria-label":(0,Nl.v)("fullscreen library"),onClick:()=>{r===rl.z.LIBRARY?(i(rl.z.CLOSED),a(_.ZS.DEFAULT),l.logInteraction(t.hitToggleState({stateBeforeToggle:"fullscreen",stateAfterToggle:"default"}))):(i(rl.z.LIBRARY),a(_.ZS.DEFAULT),l.logInteraction(t.hitToggleState({stateBeforeToggle:"default",stateAfterToggle:"fullscreen"})))},size:"small"})})};var Fl=r(25599),Bl=r(81218);const Ul=e=>{const{createPlaylistFromAlbum:t,createPlaylistFromTracks:r,createPlaylistFromPlaylist:a}=(0,S.A)();return(0,L.A)({allowedMimeTypesByDropPosition:{[D.Nz.ON]:[j.fl.TRACKS,j.fl.EPISODES,j.fl.ALBUMS,j.fl.PLAYLISTS_V2,j.fl.AUDIOBOOKS]},onDrop:(0,i.useCallback)((i=>{const{[j.fl.TRACKS]:n=[],[j.fl.LOCAL_TRACKS]:l=[],[j.fl.EPISODES]:s=[],[j.fl.AUDIOBOOKS]:o=[],[j.fl.ALBUMS]:c=[],[j.fl.PLAYLISTS_V2]:d=[]}=i,u=e?{after:{uri:e}}:{before:"start"},p=[...n,...l,...s];o.length>0?r(o,u):p.length?r(p,u):c.length>0?t(c[0],u):d.length>0&&a(d[0],u)}),[t,a,r,e])})},Ml="AIlmv6h8bR5NY5R0VceT",_l="gPxvvwdrTY6FbTx3mvl1",Vl="Di4Z5tg2m68SN66AxRgI",Hl="l5V7KOO1aHJ4R7jYTQuV",zl=({iconOnly:e=!1})=>{const{className:t,dropPosition:r,...i}=Ul();return(0,C.jsx)(Dl.b,{menu:(0,C.jsx)(Bl.r,{}),children:(a,l,s)=>(0,C.jsx)(Le.Zp,{label:b.Ru.get("web-player.global-nav-bar.create-button.tooltip"),children:(0,C.jsxs)("button",{type:"button",ref:s,onClick:l,className:n()(Ml,t,{[Vl]:a,[Hl]:e,[Mt]:r===D.Nz.ON}),"aria-label":b.Ru.get("web-player.global-nav-bar.create-button.label"),...i,children:[(0,C.jsx)(Fl.u,{className:_l,size:"small"}),!e&&(0,C.jsx)(fe.E,{variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("web-player.global-nav-bar.create-button.label")})]})})})};var Wl=r(95741),Yl=r(22923);const Gl=()=>null,Kl=function({folderUri:e,spec:t}){const{createPlaylist:r}=(0,S.A)(),{createFolder:i}=(0,Ia.Z)(),a=(0,P.s)(),n=(0,Se.V)(),l=e?{after:{uri:e}}:{before:"start"};return(0,C.jsxs)(g.W,{children:[(0,C.jsx)(f.D,{onClick:()=>{const e=a.logInteraction(t.createPlaylistOptionFactory().hitCreatePlaylist());r(e.interactionId,l)},role:"menuitem",leadingIcon:(0,C.jsx)(x.u,{size:"small"}),children:b.Ru.get("web-player.your-library-x.create.create-a-new-playlist")}),!n&&(0,C.jsx)(f.D,{onClick:()=>{i(b.Ru.get("web-player.your-library-x.default_folder_name"),l),a.logInteraction(t.createFolderOptionFactory().hitCreateFolder())},role:"menuitem",leadingIcon:(0,C.jsx)(Yl.h,{size:"small"}),children:b.Ru.get("web-player.your-library-x.create.create-a-playlist-folder")}),(0,C.jsx)(Gl,{})]})},Xl=({className:e="",folderUri:t,tooltipPlacement:r,spec:i})=>{const a=b.Ru.get("web-player.your-library-x.create.button-label"),l=(0,P.s)(),{className:s,dropPosition:o,...c}=Ul(t);return(0,C.jsx)(Wl.t,{renderInline:!0,menu:(0,C.jsx)(Kl,{folderUri:t,spec:i.createMenuFactory()}),preventScrollingWhileOpen:!1,children:(t,d,u)=>(0,C.jsx)(Le.Zp,{label:a,placement:r,children:(0,C.jsx)(je.H,{ref:u,iconOnly:Fl.u,className:n()(e,s,{[Mt]:o===D.Nz.ON}),"aria-label":a,onClick:e=>{d(e),l.logInteraction(i.hitUiReveal())},size:"small",...c})})})},Zl=(0,i.forwardRef)((function({folderUri:e,folderName:t,folderMenu:r,onRename:a,spec:l,className:o,isCollapsed:c},u){const{isActive:p}=(0,Er.l_)(e??"not-a-folder"),g=(0,s.wA)(),m=(0,P.s)(),x=(0,i.useCallback)((()=>{g((0,sr.O2)(t,a)),m.logInteraction(l.hitRenameFolder({uri:e}))}),[g,t,e,m,a,l]),b=(0,d.NC)(G.qNB);return(0,C.jsx)(Le.Zp,{label:t,showDelay:Le.uF,children:(0,C.jsx)("div",{className:n()(hl,o,{[Pl]:!c&&b}),children:(0,C.jsx)(y.h,{menu:r,children:(0,C.jsx)(je.H,{"aria-label":t,onClick:x,size:"small",condensed:!0,className:n()(ml),ref:u,children:(0,C.jsx)(fe.E,{variant:"bodyMediumBold",semanticColor:p?"textBrightAccent":void 0,className:Sl,children:t})})})})})}));var Jl=r(25183),ql=r(39488),Ql=r(93996);const $l="fJrnaZd0QWm65978IgD2",es="yCpl0fAaEYj7E8F_Oabw",ts=()=>{const{syncing:e,percentage:t,currentItem:r,totalItems:a}=function(){const[e,t]=(0,i.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),r=ql.I.UPDATE_TOTAL_PROGRESS,a=(0,i.useCallback)((e=>t(e.data.progress)),[]);return(0,Ql.b)(r,a),e}();return e?(0,C.jsxs)("div",{className:$l,children:[(0,C.jsxs)("div",{className:es,children:[(0,C.jsx)(fe.E,{variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.download-progress-title")}),(0,C.jsx)(fe.E,{variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.download-progress-count-out-of-total",r,a)})]}),(0,C.jsx)(Jl.z,{value:t})]}):null};var rs=r(41952),is=r(48383);const as=({parentDropTargetClassName:e,isLibraryCompletelyEmpty:t,folderUri:r,folderName:a,spec:l,openedFolderIsPlayable:s})=>{const{canExpand:o}=(0,_.ae)(),{isDefault:u,isCollapsed:p,isExpanded:y}=(0,Ee.Q)(),{renameFolder:g}=(0,Ia.Z)(),{popFolder:m}=(0,i.useContext)(ir),x=(0,i.useCallback)(((e="")=>{r&&g({uri:r},e)}),[r,g]),b=(0,i.useCallback)((()=>{m()}),[m]),f=r?(0,C.jsx)(xa,{reference:{uri:r},name:a,onRename:x,onDeleteCallback:b,isPlayable:s}):null,{dropOriginIsYLX:h}=Xr(),S=!p&&r&&void 0!==a,v=(0,i.useRef)(null),P=(0,i.useRef)(null),w=(0,i.useRef)(null),T=(0,i.useRef)(null);!function(e,t,r,...a){const n=(0,c.U0)((()=>{if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";const{scrollWidth:r,offsetWidth:i}=t.current,a=r>i;e.current.style.display=a?"none":"block"}else e.current.style.display="block"}),[a]);(0,i.useLayoutEffect)(n,[n]),(0,Ti.w)({refOrElement:r,observeOnly:"width",onResize:n})}(T,(0,i.useMemo)((()=>({get current(){return w.current?.firstElementChild instanceof HTMLElement?w.current?.firstElementChild:null}})),[]),v,a,S);const{breakpoint:I}=(0,is.x)({[rs.E.SMALL]:0,[rs.E.MEDIUM]:300},v),R=(0,d.NC)(G.s_6,{loadingValue:G.G2o.NONE}),A=R===G.G2o.YOUR_LIBRARY,j=!p||t&&p,D=R===G.G2o.GLOBAL_NAV,L=(0,d.NC)(G.OB1);return(0,C.jsxs)("header",{className:n()(sl,{[fl]:p}),ref:v,children:[!p&&(0,C.jsx)(ts,{}),(0,C.jsxs)("div",{className:n()(pl,{[yl]:p}),children:[(0,C.jsxs)("div",{className:n()(gl,{[yl]:p}),ref:P,children:[(0,C.jsx)(Cl,{folderUri:r,dropTargetClassName:e,spec:l.toggleCollapsedModeButtonFactory()}),r&&(0,C.jsx)(Al,{handleNavigateBack:b,parentFolderUri:r,spec:l.folderBackButtonFactory(),isCollapsed:p}),S&&(0,C.jsx)(Zl,{folderUri:r,folderName:a,folderMenu:f,onRename:x,spec:l.folderTitleFactory(),isCollapsed:p,className:h?e:void 0,ref:w},r)]}),(0,C.jsxs)("div",{className:n()(dl,cl,{[ul]:D}),children:[!A&&j&&(0,C.jsx)("span",{ref:T,children:(0,C.jsx)(Xl,{className:n()(ml,bl),folderUri:r,tooltipPlacement:p?"right":void 0,spec:l.createMenuButtonFactory()})}),A&&(0,C.jsx)(zl,{iconOnly:p||Boolean(r)||I===rs.E.SMALL}),r&&!p&&(0,C.jsx)(Ll,{folderName:a,folderMenu:f,dropTargetClassName:e}),(u&&o||y)&&(0,C.jsx)(Il,{dropTargetClassName:e,spec:l.toggleExpandedModeButtonFactory()}),L&&!p?(0,C.jsx)(kl,{dropTargetClassName:e,spec:l.toggleFullscreenModeButtonFactory()}):null]})]})]})};var ns=r(34262),ls=r(29529),ss=r(70389);const os=({date:e})=>(0,C.jsx)(fe.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Ct,children:e&&b.Ru.formatRelativeDate(new Date(e),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}),cs=(0,i.memo)((e=>{const t=e.handleNavigate,r=(0,C.jsx)(_r,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=e.expandFolderButton??(e.isPlaying&&(0,C.jsx)(vr,{})),a=(0,C.jsx)(Ir,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ni.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(hr,{shouldShowType:e.shouldShowType,type:e.type,subtitle:e.subtitle,specialType:e.specialType})}),uri:e.uri}),n=e.logRightClick;return(0,C.jsx)(y.h,{menu:e.menu,onShow:n,children:(0,C.jsx)(yr.E,{uri:e.uri,trigger:yr.l.OnMouseDown,children:(0,C.jsx)(ls.v,{className:ut,media:e.cover,title:r,subtitle:a,trailing:i,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:Ya.v4,onClick:e.onClick,hoverAnimationDuration:"0ms"})})})})),ds=e=>{const t=e.handleNavigate,r=(0,C.jsx)(_r,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=(0,C.jsx)(Ir,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ni.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,C.jsx)(hr,{shouldShowType:e.shouldShowType,type:e.type,subtitle:e.subtitle,specialType:e.specialType}),uri:e.uri}),a=e.logRightClick;return(0,C.jsx)(Pr,{...e,title:r,subtitleSlot:i,parentRef:e.parentRef,children:(0,C.jsxs)("div",{children:[(0,C.jsx)(y.h,{menu:e.menu,onShow:a,children:(0,C.jsx)(yr.E,{uri:e.uri,trigger:yr.l.OnMouseDown,children:(0,C.jsx)(ls.v,{className:n()(ut,yt),media:e.cover,id:e.uri,padding:Ya.v4,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,C.jsxs)("span",{className:Et,children:[r," ",i]})]})})},us=e=>{const t=(0,i.useRef)(null),r=e.logRightClick;return(0,C.jsx)(y.h,{menu:e.menu,onShow:r,children:(0,C.jsxs)("div",{className:Pt,ref:t,children:[(0,C.jsx)(cs,{...e,parentRef:t}),(0,C.jsx)(os,{date:e.addedAt}),(0,C.jsx)(os,{date:e.lastPlayedAt})]})})},ps=e=>{const t=e.handleNavigate,r=(0,C.jsxs)("div",{className:It,children:[(0,C.jsx)(_r,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),e.shouldShowType&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ss.v,{children:"•"}),(0,C.jsx)(ss.v,{lineClamp:1,children:xr(e.type,e.specialType)})]}),(!e.shouldShowType&&e.type===gr.c.ALBUM||(0,lr.c0)(e.uri))&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ss.v,{children:"•"}),(0,C.jsx)(Ir,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,C.jsx)(ni.g,{pinned:e.isPinned}),a=e.expandFolderButton??(e.isPlaying?(0,C.jsx)(vr,{iconSize:"xsmall"}):(0,C.jsxs)(C.Fragment,{children:[e.downloadButton&&(0,C.jsx)("div",{className:mt,children:e.downloadButton}),e.preReleaseIcon&&(0,C.jsx)("div",{className:mt,children:e.preReleaseIcon}),e.lockedIcon&&(0,C.jsx)("div",{className:mt,children:e.lockedIcon})]})),l=e.logRightClick;return(0,C.jsx)(y.h,{menu:e.menu,onShow:l,children:(0,C.jsx)(yr.E,{uri:e.uri,trigger:yr.l.OnMouseDown,children:(0,C.jsx)(ls.v,{className:n()(ut,pt),title:r,leading:e.isPinned?i:void 0,trailing:a,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:`${Ya.vw} ${Ya.v4}`,onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})},ys=e=>{const t=e.logRightClick;return(0,C.jsx)(y.h,{menu:e.menu,onShow:t,children:(0,C.jsxs)("div",{className:Pt,children:[(0,C.jsx)(ps,{...e}),(0,C.jsx)(os,{date:e.addedAt}),(0,C.jsx)(os,{date:e.lastPlayedAt})]})})},gs=({height:e,isCompact:t,primaryFilter:r})=>(0,C.jsx)(ji.c,{className:n()({[ft]:!t,[St]:t,[ht]:r===gr.c.ARTIST}),style:{height:e}}),ms=()=>{const{itemsView:e}=(0,Fn.t)(),{isCollapsed:t}=(0,Ee.Q)();return e===Fn.X.LIST_DEFAULT||t?64:32};var xs=r(78673);const bs=(0,i.memo)((function({item:e,primaryFilter:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n,ylxIsCompact:l}){const s={shouldShowType:!(0,lr.c0)(e.uri)&&(fr(e.type)!==t||br(e)&&!l),RowVariantComponent:r,spec:i,nrValidItems:a,index:n},o=(0,d.NC)(G.lDH);switch(e.type){case gr.c.FOLDER:return(0,C.jsx)(ja,{libraryItem:e,...s});case gr.c.ALBUM:return(0,C.jsx)(Bi,{libraryItem:e,...s});case gr.c.ARTIST:return(0,C.jsx)(Vi,{libraryItem:e,...s});case gr.c.AUDIOBOOK:return(0,C.jsx)(Gi,{libraryItem:e,...s});case gr.c.AUTHOR:return(0,C.jsx)(Ji,{libraryItem:e,...s});case gr.c.SHOW:return(0,C.jsx)(Dn,{libraryItem:e,...s});case gr.c.PLAYLIST:return(0,C.jsx)(fn,{libraryItem:e,...s});case gr.c.LIKED_SONGS:return(0,C.jsx)(Fa,{libraryItem:e,...s});case gr.c.YOUR_EPISODES:return(0,C.jsx)(Nn,{libraryItem:e,...s});case gr.c.LOCAL_FILES:return(0,C.jsx)(za,{libraryItem:e,...s});case gr.c.PRE_RELEASE_ALBUM:return o?(0,C.jsx)(In,{libraryItem:e,...s}):null;case gr.c.PRE_RELEASE_BOOK:return(0,C.jsx)(In,{libraryItem:e,...s});case gr.c.CONCERT:return(0,C.jsx)(ea,{libraryItem:e,...s});default:(0,mr.d)(e)}})),fs=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const{isCollapsed:l,isExpanded:s,isFullscreen:o}=(0,Ee.Q)(),{itemsView:c}=(0,Fn.t)(),d=ms(),u=c===Fn.X.LIST_COMPACT,p=((e,t,r,i)=>e?ds:t||r?i?ys:us:i?ps:cs)(l,s,o,u),y=(0,i.useCallback)(((e,t)=>(0,C.jsx)(gs,{height:e,isCompact:u,primaryFilter:r},t)),[u,r]),g=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>{const l=t+i;return e?(0,C.jsx)(bs,{item:e,spec:n,RowVariantComponent:p,primaryFilter:r,nrValidItems:a,index:l,ylxIsCompact:u},`${e.uri}-${l}`):y(`${d}px`,`${l}`)}))),[e,n,p,r,a,u,y,d]);return(0,C.jsx)(ns.$,{circular:!1,allowsMultipleInteractiveChildrenInItem:!0,"aria-label":b.Ru.get("web-player.your-library-x.your-library"),children:(0,C.jsx)(xs.L,{renderRows:g,nrRows:a,rowHeight:d,scrollNodeRef:t,renderPlaceholder:y})})};var hs=r(75773),Ss=r(51210),vs=r(76151);const Ps="MRzne1iuLfbh7KEwhHOk";function Cs({onClick:e}){return(0,C.jsx)(je.H,{size:"small",onClick:e,iconOnly:vs.M,"aria-label":b.Ru.get("close"),className:Ps})}const ws="dixACKl18S755OnSdpna",Ts="IPdLO850RGC7isV9QxWB",Is="S7PfnpeKtq9MCSrMhifz",Rs=(0,i.forwardRef)((({onClose:e=()=>{},children:t,shouldCloseOnEscapePress:r=!0,colorSet:a="encore-announcement-set",maxWidth:l=180,header:s},o)=>((0,i.useEffect)((()=>{const t=t=>{r&&"Escape"===t.key&&e()};return window.addEventListener("keydown",t,!0),()=>{window.removeEventListener("keydown",t,!0)}}),[r,e]),(0,C.jsxs)("div",{ref:o,className:n()(a,ws,{[Ts]:!!s}),style:{maxWidth:`${l}px`},children:[!!s&&(0,C.jsxs)("div",{className:Is,children:[s," ",(0,C.jsx)(Cs,{onClick:e})]}),t,s?null:(0,C.jsx)(Cs,{onClick:e}),(0,C.jsx)(Ss.i,{})]}))));var As=r(4364);var js=r(22936);function Ds(e,t,r){const a=t.isInterestedInBeingShown,n=()=>{},l=(0,js.J)(t.onVisibilityGranted??n),s=(0,js.J)(t.onVisibilityDenied??n),[o,c]=(0,i.useState)(!1),{notifyShowInterest:d,notifyHideInterest:u,events:p}=((e,t)=>{const{notifyShowInterest:r,notifyHideInterest:a,events:n}=(0,i.useContext)(ne);return{events:n,notifyShowInterest:(0,i.useCallback)((()=>{r(e,t)}),[e,r,t]),notifyHideInterest:(0,i.useCallback)((()=>{a(e,t)}),[e,a,t])}})(e,r);return(0,i.useEffect)((()=>{const t=p.addListener(ie.VISIBILITY_GRANTED,(t=>{t.data.key===e&&(l(),c(!0))})),r=p.addListener(ie.VISIBILITY_DENIED,(t=>{t.data.key===e&&(s(),c(!1))}));return()=>{t(),r()}}),[p,e,l,s]),(0,i.useEffect)((()=>{a?d():u()}),[u,d,a]),(0,i.useEffect)((()=>u),[u]),{isVisible:o}}function Ls({children:e,content:t,itemKey:r,priority:i,offset:a,placement:n,isInterestedInBeingShown:l,onVisibilityDenied:s,onVisibilityGranted:o}){const{isVisible:c}=Ds(r,{isInterestedInBeingShown:l,onVisibilityDenied:s,onVisibilityGranted:o},i);return(0,C.jsx)(As.E,{content:t,isVisible:c,offset:a,placement:n,children:e})}var Es=r(87098),Os=r(46594),Ns=r(60372),ks=r(4055),Fs=r(1404);const Bs=e=>e?.parentElement?.querySelector("ul"),Us=()=>[{itemsViewState:Fn.X.LIST_COMPACT,icon:Os.d,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact-list"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact")},{itemsViewState:Fn.X.LIST_DEFAULT,icon:Ns.N,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default-list"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default")},{itemsViewState:Fn.X.GRID_COMPACT,icon:ks.E,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact-grid"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact")},{itemsViewState:Fn.X.GRID_DEFAULT,icon:Fs.D,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default-grid"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default")}];var Ms=r(83083),_s=r(93225);const Vs=(e,t,r)=>{const i=t.closest('li[role="presentation"]'),a=e.parentElement?.querySelectorAll('ul[role="menu"]');if(r===_s.O.UP){const r=a?.[a.length-1],n=e.previousElementSibling,l=i?.previousElementSibling,s=!!l?.querySelector(Ms.kX);if(t instanceof HTMLUListElement||!s){if(n&&n instanceof HTMLUListElement)return n;if(r&&r instanceof HTMLUListElement)return r}}else{const t=i?.nextElementSibling;if(!t){const t=e.nextElementSibling;return t&&t instanceof HTMLUListElement?t:a?.[0]}}};var Hs=r(54642);const zs="znVZUymLCaOkuN62U7Sf",Ws="GcUIvOQcXYErEX919frz",Ys=({selectedView:e,onViewSelect:t})=>{const r=(0,i.useRef)(null),a=(0,Hs.W)(),n=(0,i.useCallback)((e=>{const r=Us().find((t=>t.fullName===e));r&&t(r)}),[t]);return(0,i.useLayoutEffect)((()=>{const t=Us().findIndex((t=>t.itemsViewState===e.itemsViewState));r.current?.style.setProperty("--view-menu-selected-offset",(a?-100*t:100*t)+"%")}),[e,a]),(0,C.jsxs)(g.W,{"aria-label":b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:Vs,getInitialFocusElement:Bs,children:[(0,C.jsx)(Es.y,{children:b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),(0,C.jsx)("div",{className:zs,ref:r,children:Us().map((t=>{const r=t.itemsViewState===e.itemsViewState;return(0,C.jsx)(f.D,{role:"menuitemradio","aria-checked":r,onClick:()=>n(t.fullName),"aria-label":t.fullName,className:Ws,autoClose:!1,CheckedIcon:null,children:t.icon({size:"small",semanticColor:r?"textBase":"textSubdued"})},t.fullName)}))})]})};var Gs=r(38864);const Ks="UsP6uSRooAI9fdTmoQ7C",Xs="ktFXPl3NAYBjLv6hsC6Y",Zs="hjCFCSfuAdwhiVs2Rfs7",Js=[{itemsViewState:Fn.X.LIST_COMPACT},{itemsViewState:Fn.X.LIST_DEFAULT},{itemsViewState:Fn.X.GRID_DEFAULT}],qs=e=>e.itemsViewState===Fn.X.GRID_DEFAULT?(0,C.jsx)(Fs.D,{size:"small"}):e.itemsViewState===Fn.X.LIST_COMPACT?(0,C.jsx)(Os.d,{size:"small"}):(0,C.jsx)(Ns.N,{size:"small"}),Qs=({selectedView:e,onViewSelect:t,spec:r})=>{const a=(0,P.s)(),{gridScale:n,setGridScale:l}=Bn(),s=(0,i.useCallback)((e=>{const t=e+.5;l(t),a.logInteraction(r.gridDensitySliderFactory().dragSetSliderPosition({position:t}))}),[a,l,r]);return(0,C.jsxs)(g.W,{"aria-label":b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:Vs,getInitialFocusElement:Bs,children:[(0,C.jsx)(Es.y,{children:b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),Js.map((r=>{const i=(e=>e.itemsViewState===Fn.X.GRID_DEFAULT?b.Ru.get("web-player.your-library-x.sort-and-view-picker.grid"):e.itemsViewState===Fn.X.LIST_COMPACT?b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact"):b.Ru.get("web-player.your-library-x.sort-and-view-picker.list"))(r),a=r.itemsViewState===e.itemsViewState;return(0,C.jsx)(f.D,{role:"menuitemradio","aria-checked":a,onClick:()=>t(r),leadingIcon:qs(r),autoClose:!1,children:i},i)})),e.itemsViewState===Fn.X.GRID_DEFAULT&&(0,C.jsx)("li",{role:"presentation",children:(0,C.jsx)("div",{role:"menuitem",className:Zs,children:(0,C.jsx)(Gs.z2,{labelText:b.Ru.get("web-player.your-library-x.sort-and-view-picker.grid-density-label"),value:n-.5,max:1,step:.1,onDragStart:s,onDragMove:s,onDragEnd:s,forceActiveStyles:!0,"data-roving-interactive":"1"})})})]})},$s=({selectedSort:e,selectedView:t,onSortSelect:r,onViewSelect:a,sortOptions:n,spec:l,id:s})=>{const o=(0,d.NC)(G.Gre),c=(0,i.useRef)(null);return(0,C.jsxs)("div",{id:s,className:Ks,ref:c,children:[(0,C.jsxs)(g.W,{"aria-label":b.Ru.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:Vs,getInitialFocusElement:Bs,children:[(0,C.jsx)(Es.y,{children:b.Ru.get("web-player.your-library-x.sort_by")}),n.map((({key:t,value:i},a)=>(0,C.jsx)(f.D,{role:"menuitemradio","aria-checked":t===e.key,onClick:()=>r(t,a),divider:a===n.length-1?"after":void 0,autoClose:!1,children:i},t)))]}),o?(0,C.jsx)(Ys,{onViewSelect:a,selectedView:t}):(0,C.jsx)(Qs,{onViewSelect:a,selectedView:t,spec:l})]})},eo=({sortOrders:e,activeSortOrderId:t,setActiveSortOrderId:r,showReorderingOnboarding:a,headerSpec:n,scrollNodeRef:l})=>{const s=(0,d.NC)(G.Gre),o=(0,Bt.f)(),c=(0,i.useMemo)((()=>n.sortbyViewasMenuButtonFactory()),[n]),u=(0,P.s)(),p=(0,i.useCallback)((()=>{u.logInteraction(c.hitUiReveal())}),[u,c]),{inView:y,ref:g}=(0,hs.Wx)({initialInView:!0,root:l?.current,threshold:.75}),{show:m,onHide:x}=((e,t=!0)=>{const[r,a]=(0,ct.x)("onboarding-dismissed:ylx-playlist-ordering",!1),[n,l]=(0,ct.x)("onboarding-dismissed-amount:ylx-playlist-ordering",0),[s,o]=(0,i.useState)(!1),{dropOriginIsYLX:c}=Xr(),{draggingIsInProgress:d}=(0,i.useContext)(N.O_);(0,i.useEffect)((()=>{d&&c&&o(!0)}),[d,c]);const u=(0,i.useCallback)((()=>{a(!0),o(!1),l(n+1)}),[n,l,a]);return{show:e&&n<3&&(!r||s)&&(t||s),onHide:u}})(a,y),f=e.find((e=>e.id===t))??e?.at(0),h={key:f?.id??"",value:f?.name??""},S=(0,i.useCallback)(((e,t)=>{r(e);const i=o.getSortOrderLabel(e);u.logInteraction(c.sortOptionFactory({identifier:i,position:t}).hitSort())}),[o,u,r,c]),{itemsView:v,setItemsView:w}=(0,Fn.t)(),T=(0,i.useMemo)((()=>((e,t)=>t||e!==Fn.X.GRID_DEFAULT?Us().find((t=>t.itemsViewState===e))??Us()[0]:Us().find((e=>e.itemsViewState===Fn.X.GRID_DEFAULT)))(v,s)),[s,v]),I=(0,i.useCallback)((e=>{let t="",r=0;e.itemsViewState===Fn.X.LIST_DEFAULT?(w(Fn.X.LIST_DEFAULT),t="list-default"):e.itemsViewState===Fn.X.LIST_COMPACT&&(w(Fn.X.LIST_COMPACT),t="list-compact",r=s?2:1),e.itemsViewState===Fn.X.GRID_DEFAULT?(w(Fn.X.GRID_DEFAULT),t="grid-default",r=3):e.itemsViewState===Fn.X.GRID_COMPACT&&(w(Fn.X.GRID_COMPACT),t="grid-compact",r=4),u.logInteraction(c.viewAsOptionFactory({identifier:t,position:r}).hitUiElementToggle())}),[s,u,w,c]);return(0,C.jsx)(Ls,{isInterestedInBeingShown:m,itemKey:$.YLX_CUSTOM_ORDERING,priority:ee.CONTEXTUAL,placement:"right",content:(0,C.jsx)(Rs,{onClose:x,children:(0,C.jsx)(fe.E,{as:"p",dangerouslySetInnerHTML:{__html:b.Ru.get("web-player.your-library-x.custom-ordering-onboarding-text")}})}),children:(0,C.jsx)(Dl.b,{menu:(0,C.jsx)($s,{selectedSort:h,selectedView:{itemsViewState:T.itemsViewState},sortOptions:e.map((({id:e,name:t})=>({key:e,value:t}))),onSortSelect:S,onViewSelect:I,spec:c,id:"sort-and-view-picker"}),placement:"bottom-end",children:(0,C.jsx)(je.H,{"aria-label":b.Ru.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",h.value,T.fullName),onClick:p,size:"small",iconTrailing:T.icon,ref:g,role:"combobox","aria-controls":"sort-and-view-picker",children:(0,C.jsx)(fe.E,{variant:"bodySmall",className:Xs,"data-sortbox-label":!0,children:h.value})})})})};var to=r(31600),ro=r(10874),io=r(76236),ao=r(91302);const no=({clearOnEscapeInElementRef:e,primaryFilter:t,spec:r})=>{const a=(0,Bt.f)(),n=(0,P.s)(),l=function(e){switch(e){case gr.c.ALBUM:return b.Ru.get("web-player.your-library-x.text-filter.albums-placeholder");case gr.c.ARTIST:return b.Ru.get("web-player.your-library-x.text-filter.artists-placeholder");case gr.c.AUTHOR:return b.Ru.get("web-player.your-library-x.text-filter.authors-placeholder");case gr.c.PLAYLIST:return b.Ru.get("web-player.your-library-x.text-filter.playlists-placeholder");case gr.c.SHOW:return b.Ru.get("web-player.your-library-x.text-filter.shows-placeholder");case gr.c.AUDIOBOOK:return b.Ru.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return b.Ru.get("web-player.your-library-x.text-filter.downloaded-placeholder");case gr.c.CONCERT:return b.Ru.get("web-player.your-library-x.text-filter.events-placeholder");case void 0:return b.Ru.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,mr.k)(e)}}(t),s=(0,i.useCallback)((()=>(n.logInteraction(r.searchButtonFactory().hitUiReveal()),!0)),[n,r]),o=(0,i.useCallback)((()=>(n.logInteraction(r.textFilterFactory().keyStrokeClearFilter()),!0)),[n,r]);return(0,C.jsx)(to.S,{placeholder:l,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:a?.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:s,onClear:o,useExpandCallback:e=>{(0,ao.f)((0,io.p)(ro.r.FOCUS_YLX_TEXT_FILTER),e)}})};var lo=r(79970),so=r(13118);const oo=()=>((0,lo.x)(),(0,so.w)(),null),co=()=>(0,al.S)()===rl.z.LIBRARY?(0,C.jsx)(oo,{}):null;var uo=r(81286);var po=r(2797);var yo=r(33968);function go(){const[e,t]=(0,i.useState)(null);if((0,Sa.l)(ha.UV.UPDATE_PIN_ERROR,(e=>{t(e.data)})),void 0===e?.reason)return null;switch(e.reason){case ha.uL.TOO_MANY_PINS:return(0,C.jsx)(yo.x,{animated:!0,headingMessage:b.Ru.get("web-player.your-library-x.pin-error.title"),message:b.Ru.get("web-player.your-library-x.pin-error.message",e.maximumPinnedItems),buttonLabel:b.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});case ha.uL.NO_PIN_IN_FOLDER:return(0,C.jsx)(yo.x,{animated:!0,headingMessage:b.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:b.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:b.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});default:return(0,mr.k)(e),null}}var mo=r(10858);var xo=r(59312),bo=r(89623),fo=r(6157),ho=r(37525),So=r(37898);var vo=r(4769),Po=r(5752);const Co={[ha.Ir.ALBUMS]:gr.c.ALBUM,[ha.Ir.ARTISTS]:gr.c.ARTIST,[ha.Ir.AUTHORS]:gr.c.AUTHOR,[ha.Ir.BOOKS]:gr.c.AUDIOBOOK,[ha.Ir.EPISODES]:gr.c.EPISODE,[ha.Ir.SHOWS]:gr.c.SHOW,[ha.Ir.TRACKS]:gr.c.TRACK,[ha.Ir.EVENTS]:gr.c.CONCERT};function wo(e,t,r){const a=(0,i.useCallback)((({data:{list:t}})=>{To(e,Co[t])&&r()}),[e,r]);(0,Sa.l)(ha.UV.UPDATE,a),(0,Sa.l)(ha.UV.UPDATE_PIN,r);const n=(0,i.useCallback)((()=>{To(e,gr.c.PLAYLIST)&&r()}),[e,r]);(0,Ca.L)(n),function(e){((e,t,r,a,n)=>{const l=(0,So.x)(),s=(0,i.useRef)(r),o=(0,i.useRef)(),c=(0,i.useRef)();o.current=a,c.current=n,(0,i.useEffect)((()=>{const r={ident:e,isPrefix:t,onMessage:e=>s.current(e),onSubscribe:async e=>await(o.current?.(e)),onCancel:async e=>await(c.current?.(e))},i=l.subscribe(r);return()=>{i.cancel()}}),[e,t,l])})("hm://collection/ylpin/",!0,e)}(r),function(e){const t=(0,ho.A)(),r=t.getEvents();(0,i.useEffect)((()=>r.addListener(fo.T.UPDATE,e)),[t,r,e])}(r),function(e){const t=(0,bo.l)().getEvents();(0,i.useEffect)((()=>{const r=({data:{set:t}})=>{"prerelease"===t&&e()};return t.addListener(xo.ar.ADDED,r),t.addListener(xo.ar.REMOVED,r),()=>{t.removeListener(xo.ar.ADDED,r),t.removeListener(xo.ar.REMOVED,r)}}),[e,t])}(r),function(e,t){const r=(0,Bt.f)(),a=(0,vo.j)();(0,i.useEffect)((()=>e===r.getRecentsSortOrderId()?a.getEvents().addListener(Po.m5.UPDATE,(()=>{t()})):()=>{}),[t,r,e,a])}(t,r)}function To(e,t){switch(e){case gr.c.ALBUM:case gr.c.ARTIST:case gr.c.AUDIOBOOK:case gr.c.SHOW:case gr.c.AUTHOR:return e===t;case gr.c.PLAYLIST:switch(t){case gr.c.TRACK:case gr.c.PLAYLIST:case gr.c.EPISODE:return!0;default:return!1}default:return!0}}var Io=r(93486),Ro=r(25186),Ao=r(49394),jo=r(66055),Do=r(98136),Lo=r(14076);const Eo="Vf3ww2_My5QuwUnbpzhu";var Oo=r(94090);const No=()=>{const{typeaheadResult:{str:e}}=(0,i.useContext)(kr);return e?(0,C.jsx)(Oo.qb,{className:Eo,children:e}):null};var ko=r(65927);const Fo="main-yourLibraryX-libraryContainer",Bo="AJ_AzxWnimxNHc4ye3vk",Uo="main-yourLibraryX-libraryFilter",Mo="iwhVJuPipY1lrQIjaA1k",_o="main-yourLibraryX-libraryItemContainer",Vo="main-yourLibraryX-libraryRootlist",Ho="sikBfynL1Y6I25nVpbAg",zo="KwShd3RdVrsX6dGLJNxT",Wo="qOtD4rsRpIMhQLCjJ4K3",Yo="oEDH8yMQOKQNoX7LWjwt",Go="RHRitk6QC3rvuG24RAdj",Ko="main-yourLibraryX-filterArea",Xo={items:[],totalLength:0},Zo=()=>{const{isAnonymous:e}=(0,s.d4)((e=>e.session)),{filter:t}=(0,i.useContext)(Q.g),[r,a]=(0,i.useState)(null),{refinersPickedByUserRef:g,selectedRefinerIds:m,resetRefinerIds:x,resetAndToggleRootRefiner:b,toggleRefinerId:f}=function(e){const{openedFolderUri:t=rr,change:r,resetFolder:a}=(0,i.useContext)(ir),n=(0,i.useRef)(t),[l,s]=(0,ct.x)("ylx-active-filter-ids",{[t]:[]}),o=(0,i.useRef)(!0),d=(0,c.U0)(((r,i=!0)=>{const a=new Set(e);a.has(r)?a.delete(r):a.add(r),o.current=i,s({...l,[t]:Array.from(a)})}),[e,s,t]),u=(0,i.useCallback)((()=>s({...l,[t]:[]})),[t,l,s]),p=(0,i.useCallback)((e=>{t&&a(),s({...l,[rr]:e?[e]:[]})}),[t,a,l,s]);return(0,i.useLayoutEffect)((()=>{t!==n.current&&t!==rr&&"PUSH"===r&&s({...l,[t]:l[n.current]}),n.current=t}),[r,t,l,s]),{refinersPickedByUserRef:o,selectedRefinerIds:l[t],resetRefinerIds:u,resetAndToggleRootRefiner:p,toggleRefinerId:d}}(r?.selectedFilters?.map((e=>e.id))??[]),h=m?.[0],{selectedSortOrderId:S,setSelectedSortOrderId:v}=function(e){const t=(0,Bt.f)().getContentsPrimaryFilterId(gr.c.PLAYLIST),{openedFolderUri:r=""}=(0,i.useContext)(ir),[a,n]=(0,ct.x)("ylx-active-sort-order-by-filter-id",{}),l=`${r&&t?t:e}`;return{selectedSortOrderId:a[l],setSelectedSortOrderId:(0,i.useCallback)((e=>{n({...a,[l]:e})}),[l,a,n])}}(h),w=(0,i.useRef)(null),T=(0,i.useRef)(null),R=(0,i.useRef)(null),{expandedFolders:E}=function(){const e=(0,i.useContext)(ot);if(!e)throw new Error("useExpandedFolders must be used within a ExpandedFoldersProvider");return e}(),{openedFolderUri:F,resetFolder:B}=(0,i.useContext)(ir),U=(0,Io.p)(),M=(0,Do.P)(),V=(0,Bt.f)(),H=(0,Zr.g)(),z=(0,Ao.I)(),W=!1,Y=Jr(),[K,X]=(0,i.useState)(!1),{setLeftSidebarState:Z}=(0,_.ae)(),{isCollapsed:J,isExpanded:$,isFullscreen:ee}=(0,Ee.Q)();(e=>{const t=(0,Bt.f)(),{isCollapsed:r}=(0,Ee.Q)(),{toggleCollapseYLX:a}=ll(),n=(0,Hs.W)(),l=(0,i.useCallback)((()=>{a()}),[a]),s=(0,i.useCallback)((()=>{e(null),r&&a()}),[r,e,a]),o=(0,i.useCallback)((i=>()=>{e(t.getContentsPrimaryFilterId(i)),r&&a()}),[r,t,e,a]),c=o(gr.c.PLAYLIST),d=o(gr.c.SHOW),u=o(gr.c.ARTIST),p=o(gr.c.ALBUM),y=o(gr.c.AUDIOBOOK);(0,mo.N)(n?(0,io.p)(ro.r.TOGGLE_NPV_SIDEBAR):(0,io.p)(ro.r.TOGGLE_LEFT_SIDEBAR),l),(0,mo.N)((0,io.p)(ro.r.GO_TO_LIBRARY),s),(0,mo.N)((0,io.p)(ro.r.GO_TO_PLAYLISTS),c),(0,mo.N)((0,io.p)(ro.r.GO_TO_PODCASTS),d),(0,mo.N)((0,io.p)(ro.r.GO_TO_ARTISTS),u),(0,mo.N)((0,io.p)(ro.r.GO_TO_ALBUMS),p),(0,mo.N)((0,io.p)(ro.r.GO_TO_AUDIOBOOKS),y)})(b);const{itemsView:te,isGridView:re}=(0,Fn.t)(),{spec:ie,UBIFragment:ae}=(0,Ne.r)(u.j,{data:{identifier:"yourlibraryx"}});let ne;ne=J?"collapsed":te===Fn.X.GRID_COMPACT?$?"expanded_compact_grid":"compact_grid":te===Fn.X.GRID_DEFAULT?$?"expanded_default_grid":"default_grid":te===Fn.X.LIST_COMPACT?$?"expanded_compact_list":"compact_list":$?"expanded_default_list":"default_list";const le=(0,i.useMemo)((()=>ie.sidebarFactory({uri:F??rr,identifier:ne})),[ie,F,ne]),se=(0,ko.t)(le),oe=(0,i.useMemo)((()=>le.headerFactory()),[le]),ce=(0,i.useMemo)((()=>oe.filtersFactory()),[oe]),ye=(0,i.useMemo)((()=>oe.searchBarFactory()),[oe]),ge=(0,i.useMemo)((()=>le.listFactory()),[le]),me=(0,P.s)();!function(e=[],t=[],r){const a=(0,uo.n)(),n=(0,Bt.f)().getContentsPrimaryFilterId("downloaded"),l=(0,i.useRef)(e);l.current=e;const s=(0,i.useRef)(t);s.current=t;const o=(0,i.useRef)(r);o.current=r;const d=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(!n)return;const e=s.current.includes(n),t=l.current.includes(n),r=s.current.length>1,i=!a&&!r&&!e&&t,c=a&&e&&d.current;(i||c)&&(i&&(d.current=!0),o.current(n,!1))}),[n,a]);const u=(0,i.useRef)(t);(0,c.Ij)((()=>{n&&(t.includes(n)&&!u.current.includes(n)&&d.current||(d.current=!1),u.current=t)}),[n,t])}(r?.availableFilters?.map((e=>e.id)),r?.selectedFilters?.map((e=>e.id)),f);const{handleDropOnFolder:xe,unpinConfirmationDialog:be}=ba(ge,F),{dropOriginIsYLX:fe,entityIsInFolder:he}=Xr(),{setDraggingIsInProgress:Se}=(0,i.useContext)(N.O_);(0,k.g)(w);const ve=F?Zt:Xt,Pe=he&&!r?.reorderAllowed?[j.fl.PLAYLISTS_V2,j.fl.FOLDERS]:[],{dropPosition:Ce,className:we,...Te}=(0,L.A)({allowedMimeTypesByDropPosition:{[D.Nz.ON]:fe?Pe:ve},onDrop:(0,i.useCallback)((async e=>{if(F)xe(e);else{const{[j.fl.TRACKS]:t=[],[j.fl.LOCAL_TRACKS]:r=[],[j.fl.ALBUMS]:i,[j.fl.ARTISTS]:a,[j.fl.AUTHORS]:n,[j.fl.EPISODES]:l,[j.fl.SHOWS]:s,[j.fl.PLAYLISTS_V2]:o=[],[j.fl.FOLDERS]:c,[j.fl.AUDIOBOOKS]:d}=e,u=[...t,...r];u.length&&(V?.add({uris:u}),me.logInteraction(ge.dragCreatePlaylist())),i?.length&&(V?.add({uris:i}),me.logInteraction(ge.dragLike({itemToBeLiked:i.at(0)??""}))),a?.length&&(V?.add({uris:a}),me.logInteraction(ge.dragLike({itemToBeLiked:a.at(0)??""}))),n?.length&&(V?.add({uris:n}),me.logInteraction(ge.dragLike({itemToBeLiked:n.at(0)??""}))),l?.length&&(V?.add({uris:l}),me.logInteraction(ge.dragLike({itemToBeLiked:l.at(0)??""}))),s?.length&&(V?.add({uris:s}),me.logInteraction(ge.dragLike({itemToBeLiked:s.at(0)??""}))),d?.length&&(V?.add({uris:d}),me.logInteraction(ge.dragLike({itemToBeLiked:d.at(0)??""}))),o.length&&(Y(o,{before:"start"}),fe?me.logInteraction(ge.dragSort()):me.logInteraction(ge.dragLike({itemToBeLiked:o.at(0)??""}))),c?.length&&(H.moveFolder({uri:c[0]},{before:"start"}),me.logInteraction(ge.dragSort()))}}),[F,xe,V,me,ge,Y,fe,H]),onLongDragOver:(0,i.useCallback)((()=>{J&&Z(_.ZS.DEFAULT)}),[J,Z])}),Ie=(0,d.NC)(G.lDH),Re=(0,i.useMemo)((()=>({filters:m,sortOrder:S,textFilter:t,includeLocalFiles:M,includeYourEpisodes:!0,includeLikedSongs:!0,includePreReleases:Ie,expandedFolders:E,filtersPickedByUser:g.current,folderUri:F})),[m,S,t,M,Ie,E,g,F]),Ae=(0,i.useCallback)((async(e,t)=>{try{const r=await V.getContents({offset:e,limit:t,...Re}),{offset:i,limit:n,items:s,...o}=r;return X(!1),{fetchedId:Re.folderUri,onCacheSuccess:()=>{a((e=>(0,l.j)(o,e)?e:o))},...r}}catch(e){return e instanceof I.c_?(x(),Xo):e instanceof I.IU?(v(void 0),Xo):e instanceof I.db?(B(),Xo):((0,Lo.UD)(e),X(!0),Xo)}}),[V,Re,x,v,B]),je=!1===r?.hasUnfilteredItems,De=r?.hasTextFilter&&0===r.totalLength&&""!==t,{setFilter:Le}=(0,i.useContext)(Q.g);(0,i.useEffect)((()=>{De&&J&&Le("")}),[De,J,Le]);const Oe=0===r?.totalLength&&r.selectedFilters.length>0&&!r.passedFolderUri&&!r.hasTextFilter;(0,c.Ij)((()=>{const e=r?.selectedFilters.at(-1);Oe&&e&&f(e.id,!1)}),[Oe,r?.selectedFilters]);const ke=V?.getCapabilities().canFetchAllItems,Fe=(0,i.useCallback)((e=>!J&&!re||(!e||(e.type!==gr.c.PLAYLIST&&e.type!==gr.c.FOLDER||(void 0===e.folderDepth||0===e.folderDepth)))),[J,re]),{fetchedId:Be,getItems:Me,nrValidItems:_e,invalidateCache:He}=(0,jo.E)({nrItems:50,fetch:Ae,limit:50,cacheAllOnInvalidation:ke,cacheAllLimit:5e4,itemIsValidPredicate:Fe}),ze=(0,o.YQ)(He,200,{leading:!0,trailing:!0,maxWait:1e3});wo(r?.primaryFilter,r?.selectedSortOrder.id,ze);const We=!F&&!Be||F===Be;((e,t="")=>{const r=(0,i.useRef)({});(0,i.useLayoutEffect)((()=>{if(!e.current)return()=>{};const i=e.current,a=r.current[t];i.scrollTop=a??0;const n=()=>{r.current[t]=i.scrollTop};return i?.addEventListener("scroll",n),()=>{i?.removeEventListener("scroll",n)}}),[e,t])})(w,Be);const Ye=(0,i.useCallback)((()=>{He(),X(!1)}),[He]),Ge=(0,Ro.y)(w),Ke=!!r?.openedFolderName,Xe=(0,d.NC)(G._p8,{loadingValue:!1})&&ke,Ze=function(e,t,r){const{isGridView:a}=(0,Fn.t)(),n=ms();return(0,i.useCallback)((async i=>{let l=n,s=1;if(a){const t=e.current?.querySelector('li[role="row"]');l=t?.getBoundingClientRect().height??0,t?.parentElement&&(s=getComputedStyle(t.parentElement).getPropertyValue("grid-template-columns").split(" ").length)}if(!l)return null;const o=r(0,5e4,{cachedOnly:!0}),c=o.find((e=>e?.name&&(0,po.u)(i,e.name))),d=c?o.indexOf(c):-1;return-1!==d&&t.current&&function(e,t,r,i){if(!e)return;const{scrollTop:a,offsetHeight:n}=e,l=t&&e?t.getBoundingClientRect().top+a-e.getBoundingClientRect().top:0;if(l+r<a||l+r+i>a+n){const t=r-n/2+l+i/2;e.scrollTop=t}}(t.current,e.current,Math.floor(d/s)*l,l),c?.uri??null}),[e,t,n,r,a])}(R,w,Me),Je=K?(0,C.jsx)(st,{onClick:Ye}):null;let qe;(0,i.useEffect)((()=>{K&&J&&Z(_.ZS.DEFAULT)}),[K,J,Z]),(je&&!J||e)&&(qe=Ke?(0,C.jsx)(Ve,{className:we}):(0,C.jsx)(Qe,{className:we}));const $e=De?(0,C.jsx)(it,{query:t,className:we}):null,et=!J&&!qe&&(0,C.jsxs)("div",{className:n()(Uo,we,Mo),children:[(0,C.jsx)(no,{clearOnEscapeInElementRef:T,primaryFilter:r?.primaryFilter,spec:ye},F),(0,C.jsx)(eo,{sortOrders:r?.availableSortOrders??[],activeSortOrderId:r?.selectedSortOrder?.id,setActiveSortOrderId:v,showReorderingOnboarding:r?.primaryFilter===gr.c.PLAYLIST&&!r?.reorderAllowed,headerSpec:oe,scrollNodeRef:w})]}),tt=K&&!r,rt=$||ee,at=!$&&!ee,nt=rt&&!re&&!Je&&!qe,{cheetaraOnboardingIsActive:lt,setCheetaraOnboardingIsActive:dt,cheetaraOnboardingDismissed:ut,setCheetaraOnboardingDismissed:pt,handleCloseCheetaraOnboarding:yt}=((r?.selectedFilters??[]).length,{cheetaraOnboardingIsActive:!1,setCheetaraOnboardingIsActive:()=>{},cheetaraOnboardingDismissed:!1,setCheetaraOnboardingDismissed:()=>{},handleCloseCheetaraOnboarding:()=>{},cheetaraTooltipVisible:!1,setCheetaraTooltipVisible:()=>{}}),gt=!J&&W;return(0,C.jsx)(Fr,{containerRef:T,findMatchingTypeaheadUid:Ze,isEnabled:Xe,children:(0,C.jsxs)(ae,{spec:ie,children:[(0,C.jsx)(q,{}),lt&&(0,C.jsx)(pe,{onClose:yt}),(0,C.jsx)(y.h,{menu:(0,C.jsx)(A,{folderUri:F}),children:(0,C.jsxs)("div",{className:n()(Fo,"YourLibraryX",{[Ut]:Ce===D.Nz.ON,[Ho]:J,[Yo]:lt}),style:{"--placeholder-image":`url(${(0,p.b)(z?"images/ylx-row-placeholder.webp":"images/ylx-row-placeholder.png")})`,"--placeholder-artist-image":`url(${(0,p.b)(z?"images/ylx-artist-row-placeholder.webp":"images/ylx-artist-row-placeholder.png")})`,"--placeholder-compact-image":`url(${(0,p.b)(z?"images/ylx-compact-row-placeholder.webp":"images/ylx-compact-row-placeholder.png")})`},ref:e=>{T.current=e,se(e)},...Te,tabIndex:-1,onDragStart:()=>Se(!0),onDragEnd:()=>Se(!1),children:[be,(0,C.jsxs)("div",{className:n()({[Go]:Ge}),children:[(0,C.jsx)(as,{parentDropTargetClassName:we,isLibraryCompletelyEmpty:je,folderUri:r?.passedFolderUri,folderName:r?.openedFolderName,spec:oe.titleRowFactory(),openedFolderIsPlayable:r?.openedFolderIsPlayable}),!U&&(0,C.jsx)(ae,{spec:oe,children:(0,C.jsx)(Ue,{})}),!J&&!tt&&(0,C.jsxs)("div",{className:n()(Ko,Bo),children:[false,(0,C.jsx)(er,{selectedFilters:r?.selectedFilters,availableFilters:r?.availableFilters,toggleFilterId:f,resetFilterIds:x,className:n()({[Wo]:!We}),scrollNodeRef:w,spec:ce,inFolderView:!!r?.passedFolderUri},Be),rt&&et]}),gt&&rt&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(ue,{ylxIsExpanded:$,setCheetaraOnboardingIsActive:dt,onHide:()=>pt(!0)})}),nt&&(0,C.jsx)(Ot,{isScrolled:Ge})]}),(0,C.jsx)(O.a,{className:_o,scrollNodeRef:w,children:(0,C.jsxs)("div",{className:n()(Vo,{[Wo]:!K&&!We,[Ho]:J,[zo]:nt}),children:[gt&&at&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(ue,{ylxIsExpanded:$,setCheetaraOnboardingIsActive:dt,onHide:()=>pt(!0)})}),at&&et,!J&&r?.tagPlaylist&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(de,{playlist:r.tagPlaylist})}),Je||qe||$e,(0,C.jsx)("div",{ref:R,children:re?(0,C.jsx)(zn,{getItems:Me,scrollNodeRef:w,primaryFilter:r?.primaryFilter,nrValidItems:_e,spec:ge}):(0,C.jsx)(fs,{getItems:Me,scrollNodeRef:w,primaryFilter:r?.primaryFilter,nrValidItems:_e,spec:ge})})]})}),go(),(0,C.jsx)(No,{})]})})]})})},Jo=()=>{const{isAnonymous:e}=(0,s.d4)((e=>e.session));(0,s.d4)((e=>e.ui.editRefinersModal));return(0,C.jsx)(E.s,{onError:e=>{(0,Lo.Jy)(e,"YourLibraryX")},children:(0,C.jsx)(Q.s,{uri:I.gv,children:(0,C.jsx)(dt,{children:(0,C.jsxs)(ar,{children:[(0,C.jsx)(ce,{children:(0,C.jsx)(xe,{children:(0,C.jsxs)(le,{children:[(0,C.jsx)(Zo,{}),false,(0,C.jsx)(co,{})]})})}),(0,C.jsx)(Re,{isAnonymous:e})]})})})})}},74256:(e,t,r)=>{r.d(t,{X:()=>u,A:()=>z});var i=r(30758),a=r(80366),n=r(81740),l=r(17640),s=r(10212),o=r(32869);const c="KsnGjjEeMb2miriJrkjW";var d=r(86070);const u=()=>{const e=l.Ru.getLocaleForTranslation(),t=o.IB[e]??o.IB.en,r=(0,s.ZZ)(),u=(0,i.useCallback)((()=>{r({type:"OPEN"})}),[r]);return(0,d.jsx)("div",{className:c,children:(0,d.jsx)(a.n,{iconLeading:n.d,size:"small",onClick:u,"data-testid":"language-selection-button",children:t.displayName})})};var p=r(8143),y=r(62411),g=r(25270),m=r(20953),x=r(12599),b=r(35418),f=r(12942),h=r(75539),S=r(42331),v=r(25960);const P="ZpqHX3kvsJIsR1QIc4kf",C=({children:e,locale:t,onClick:r,type:i="button"})=>{const a=t===f.Xn,n=(0,v.vf)(window.location.pathname),s=(0,x.o_h)(window.location.pathname),o=(0,b.W)({type:"route",uri:n?h.c.HOME:s?.toURI()}),c={className:P,id:t,onClick:e=>(e=>{if("button"===i){e.preventDefault();const t=new URL(window.location.href);window.location.href.includes("locale")&&t.searchParams.delete("locale"),window.location.href=t.href}r(t)})(e),"data-testid":`language-option-${t}`};if("link"===i){const r=(0,S.ll)(window.location.pathname,!a),i=(0,S.hF)(r,(0,l.a7)(t).baseName),n=o?i:window.location.pathname,s=(e=>e.endsWith("/")?e.slice(0,-1):e)(`${window.location.origin}${n}`);return(0,d.jsx)("a",{href:s,...c,children:e})}return(0,d.jsx)("button",{...c,children:e})},w="eYLSfS4EKfwsdTsItWkY",T=({style:e,children:t})=>(0,d.jsx)("div",{className:w,style:e,children:t});var I=r(97500),R=r.n(I);const A="KPuW9eE4auKgVgMtPZoH",j="zCedVxWmwaJhPIGzJixP",D="qzuG9AHNXHQrOGF06r9A",L="ZgjCz5A7qOyprtvcLK8y",E="BSwvSvqHiQUVuim4Eidv",O="TpluDuF12UKv3IIq_VDu",N=({onClose:e,children:t})=>{const r=(0,i.useRef)(null),{isOpen:a}=(0,s.iL)();return(0,d.jsx)("div",{"data-testid":"language-selection-modal",className:R()(A,{[j]:a}),onClick:t=>{t.target===r.current&&e()},role:"presentation",ref:r,children:t})},k=({ariaDescribedBy:e,ariaLabelledBy:t,children:r})=>{const{isOpen:i}=(0,s.iL)();return(0,d.jsx)("div",{className:D,role:"dialog",hidden:!i,"aria-modal":!0,"aria-labelledby":t,"aria-describedby":e,children:r})};var F=r(76151);const B=({onClose:e})=>(0,d.jsx)("button",{"data-testid":"close-button",className:O,onClick:()=>{e()},children:(0,d.jsx)(F.M,{size:"small","aria-label":l.Ru.get("close")})});var U=r(82610),M=r(42132),_=r(93805),V=r(20437),H=r(29471);const z=({languageSelectionModalRef:e})=>{const t=(0,i.useRef)(null),[r,a]=(0,i.useState)("0"),n=(0,s.ZZ)(),c=(0,y.d4)(M.M),u=(0,i.useCallback)((()=>{n({type:"CLOSE"})}),[n]),{isOpen:x}=(0,s.iL)(),b=(0,i.useCallback)((()=>{a(`${t.current?.getBoundingClientRect().height}px`)}),[a]),f=e=>{var t;(0,H.n0)({name:"sp_locale",value:e,domain:(t="open.spotify.com",t.substring(t.indexOf("."))),days:365}),u()};if((0,U.m)(u),(0,V.w)({refOrElement:t,observeOnly:"height",onResize:b}),(0,i.useEffect)((()=>{b()}),[b]),!e.current)return null;const h="language-selection-title",S="language-selection-subtitle",P={"--header-height":r};return(0,p.createPortal)((0,d.jsx)(_.s,{active:x,children:(0,d.jsx)("div",{children:(0,d.jsx)(N,{onClose:u,children:(0,d.jsxs)(k,{ariaLabelledBy:h,ariaDescribedBy:S,children:[(0,d.jsxs)("div",{className:L,ref:t,children:[(0,d.jsxs)("div",{className:E,children:[(0,d.jsx)(g.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",id:h,paddingBottom:m.v4,children:l.Ru.get("i18n.language-selection.title")}),(0,d.jsx)(g.E,{as:"p",variant:"bodyMedium",semanticColor:"textBase",id:S,paddingBottom:m.CD,children:l.Ru.get("i18n.language-selection.subtitle")})]}),(0,d.jsx)(B,{onClose:u})]}),(0,d.jsx)(T,{style:{...P},children:o.Np.map((e=>{const t=(0,l.a7)(e).baseName,r=(0,v.p)({localeFeatureFlag:c,urlLocale:t,type:"locale"});return(0,d.jsxs)(C,{onClick:f,locale:e,type:r?"link":"button",children:[(0,d.jsx)(g.E,{semanticColor:"textBase",children:o.IB[e].displayName}),(0,d.jsx)(g.E,{children:o.IB[e].displayNameEn})]},e)}))})]})})})}),e.current)}},98011:(e,t,r)=>{r.d(t,{e:()=>l});var i=r(81741);const a="k270skPbT7JOaSidSA2a";var n=r(86070);const l=({iconSize:e=64,...t})=>(0,n.jsx)("div",{className:a,children:(0,n.jsx)(i.E,{iconSize:e,...t,semanticColor:"textBrightAccent","aria-hidden":!0})})},98136:(e,t,r)=>{r.d(t,{P:()=>a});var i=r(55019);function a(){return(0,i.y)()[0]}},98567:(e,t,r)=>{r.d(t,{p:()=>u});var i=r(30758),a=r(62411),n=r(67009),l=r(96381),s=r(31592),o=r(81286),c=r(78504),d=r(86070);const u=i.memo((function({uri:e,divider:t,removeLabel:r}){const u=(0,a.wA)(),p=!(0,o.n)(),y=(0,c.f)(),g=(0,i.useCallback)((async()=>{u((0,l.aw)(e,!0))}),[u,e]);return(0,d.jsx)(s.D,{role:"menuitem",divider:t,disabled:p&&!y?.getCapabilities().canModifyOffline,onClick:g,leadingIcon:(0,d.jsx)(n.k,{semanticColor:"textBrightAccent",size:"small"}),children:r})}))}}]);
//# sourceMappingURL=xpui-routes-your-library-x.js.map