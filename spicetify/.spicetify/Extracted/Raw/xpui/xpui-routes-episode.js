"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9528],{9565:(e,t,i)=>{i.d(t,{q:()=>c});var a=i(30758),s=i(97500),n=i.n(s),r=i(64503),o=i(59757),l=i(86070);const c=a.memo(a.forwardRef((function({html:e,onTimeStampClick:t,enableTimestamps:i=!1,enableAutomaticLinkification:s=!1,semanticColor:c="textSubdued",className:d,asTextContent:u=!1},p){const m=(0,a.useMemo)((()=>(0,r.v)(e,t,i,c,s,u)),[i,s,e,t,c,u]);return(0,l.jsx)("div",{ref:p,className:n()(o.A.HTMLDescription,d),children:m})})))},16924:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ei});i(32807);var a=i(30758),s=i(60749),n=i(85387),r=i(89035),o=i(39705),l=i(23736),c=i(29174),d=i(90658),u=i(81363),p=i(68062),m=i(37461),h=i(20063),g=i(62411),y=i(93672),x=i(11028),b=i(14929),v=i(97077),f=i(90265),k=i(35834),C=i(79769),j=i(34529),P=i(13016),T=i(53795),N=i(22853),I=i(9695),A=i(59307),E=i(82277),S=i(80120),R=i(13185),_=i(28331),w=i(86070);const U="activation-trigger-mme",L=({episodeUri:e,showUri:t,isLocked:i,isPlaying:a,isPlayDisabled:s,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o,size:c="large"})=>{const d=(0,_.c)();if((0,R.V)())return(0,w.jsx)(S.R,{size:c,onClick:o,isPlaying:a,disabled:s,locked:i,ariaPlayLabel:n,ariaPauseLabel:r});const u=(0,w.jsx)(E.N,{showUri:t,enabled:i,renderInline:!1,children:(0,w.jsx)(S.R,{size:c,onClick:o,isPlaying:a,disabled:s,locked:i,ariaPlayLabel:n,ariaPauseLabel:r})});return d?(0,w.jsx)(A.k,{id:U,targetURI:(0,l.o_h)(e),fadeOut:!0,children:u}):u};var M=i(31840),D=i(54061),O=i(98098),B=i(93236),F=i(29042),q=i(5956),H=i(43026),z=i(17154),W=i(23439),$=i(54947);const K="ZDeijYE6qPzPqT9vG_2w",G="qEoBuparvnBwiHsPzwEj",J="azmMKgbEFsGjSUnw2Knc",X="oDljdc6tgUKxTeQMyh0D",V="eCpSFybAW4xJNfuGDJY3",Q="aTeXTpJi_WmakpodeGxX",Z="kZWs1d_TjX2JQgmtx90y",Y="JCSifKpPc54eqcTYBj5Q",ee="FlK1APGRiu5DTwm_0kix",te="ahQLeD18bYXcFRWkL_vg",ie="l6peddfW1BiAnd1a_mF3",ae="Xkg0O12dNVwomjL8dzm4",se="OexEjZt7Kf7pFUW701v8",ne="jAY3diSzPfk19oswf8_y",re="F3BJWbXwGSqNOwZHInLz",oe="YjVCpFaOT3LCR64t8jTN",le="Q7HlO_WHb9N8aK8bgOjG",ce="xTENSk0_RmQ8qEeEuhnE",de="qH2Mpq2icGtfNZfwIhiW",ue="W4580vs00yDqFNs7363B",pe="H1jMR2c5kT6qQ7lmTqpF",me=({episode:e,onPlayEpisode:t,isPlaying:i,isActive:s,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,spec:d})=>{const{uri:u,playedState:p,contentRating:m,playability:h}=e,A=(0,H.s)(),E=(0,g.wA)(),[S]=(0,F.S)(1e4,(e=>e?.item?.uri===u)),R=(0,q.o)((e=>e?.duration)),{badges:_}=(0,$.b)({contentRating:m?.label}),U=(0,a.useCallback)((e=>{!h.playable&&_.nineteen&&(e.stopPropagation(),E((0,x.Tf)(u||"")))}),[u,h.playable,_.nineteen,E]),K=(0,a.useCallback)((()=>{const e=d.contextMenuButtonFactory().hitUiReveal();A.logInteraction(e)}),[A,d]),G=(0,a.useCallback)(((e,t)=>{(0,O.Qv)(t,d.downloadButtonFactory(),A,u)}),[A,d,u]),J=(0,I.d$)(),{spec:X,logger:Q}=(0,z.r)(y.e,{data:{uri:u}});(0,a.useEffect)((()=>{J&&Q.logImpression(X.impression())}),[J,Q,X]);const Z=(0,a.useCallback)((e=>{const t=d.saveButtonFactory();A.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u})),e&&J&&Q.logInteraction(X.hitAddToPlaylist({itemToBeAdded:u,playlist:B.Xn}))}),[A,d,u,J,Q,X]),Y=!l&&!e.playability.playable,ee=c.Ru.get("tracklist.a11y.play",e.name,e.podcast?.name),te=c.Ru.get("tracklist.a11y.pause",e.name,e.podcast?.name),ie=e.podcast?.uri,ae=(0,D.j)(),se=(0,N.v)(e.uri),ne=!l;return(0,w.jsxs)(b.E,{backgroundColor:o,children:[(0,w.jsxs)("div",{className:V,children:[(0,w.jsx)(M.P,{episode:e,showVideoBadge:!0}),(0,w.jsx)(W.j,{fullyPlayed:n,durationMs:s&&R?R:e.duration.milliseconds,releaseDate:e.releaseDate,resumePositionMs:p.playPositionMilliseconds,isPlaying:i,position:s&&S||void 0})]}),(0,w.jsxs)(v.S,{children:[(0,w.jsx)("div",{onClick:U,children:(0,w.jsx)(L,{episodeUri:e.uri,showUri:ie,isLocked:l,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:i,isPlayDisabled:Y,playButtonPlayLabel:ee,playButtonPauseLabel:te,size:ae})}),(0,w.jsx)(f.e,{uri:e.uri,onClick:G,size:ae,canDownload:ne,condensed:!0}),se?(0,w.jsx)(T.g,{uri:e.uri,size:ae}):(0,w.jsx)(C.b,{uri:e.uri,size:ae,onClick:Z,condensed:!0}),(0,w.jsx)(j.b,{onShow:K,menu:(0,w.jsx)(P.b,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:ie,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,w.jsx)(k.e,{label:c.Ru.get("more.label.context",e.name),size:ae})})]})]})};var he=i(97500),ge=i.n(he),ye=i(36948),xe=i(28779),be=i(70917),ve=i(97919),fe=i(23379),ke=i(86652),Ce=i(39908),je=i(35580),Pe=i(41045),Te=i(19492);const Ne=ve.ui.EPISODE_PAGE,Ie=({leavebehinds:e,uri:t,seeAllPath:i})=>{const s=(0,a.useMemo)((()=>e.slice(0,Ce.un)),[e]);return(0,w.jsx)(xe.o,{leavebehinds:s,surface:Ne,uri:t,seeAllButton:e.length>Ce.un?(0,w.jsx)(be.J,{leavebehinds:e,surface:Ne,uri:t,pathname:i,state:{uri:t}}):null})};function Ae(e){const t=(0,je.L)(),i=(0,l.o_h)(e.uri)?.id,s=(0,ke.c)(i),{data:n,error:r,getLeavebehinds:o}=(0,fe.A)({surface:Ne,uri:e.uri}),c=(d=t?.item.type,(0,Pe.Z)(d)===Te.c.AD&&d===Te.c.EPISODE);var d;(0,a.useEffect)((()=>{o()}),[o]),(0,a.useEffect)((()=>{c&&o()}),[c]);const u=(0,a.useMemo)((()=>n?(0,Ce.iT)(n,e.uri):[]),[n?.requestId]);return u.length<1||r?null:(0,w.jsx)(Ie,{uri:e.uri,leavebehinds:u,seeAllPath:s})}var Ee=i(85815),Se=i(17369),Re=i(13932),_e=i(375),we=i(77676);const Ue=({cardHeaderText:e,cardBodyText:t,buttonText:i,buttonTarget:a})=>(0,w.jsxs)("div",{className:Y,children:[(0,w.jsxs)("div",{className:ee,children:[(0,w.jsx)(Se.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:e}),(0,w.jsx)(Se.E,{semanticColor:"textBase",children:t})]}),(0,w.jsx)(we.$,{size:"small",colorSet:"invertedLight",href:(0,l.o_h)(a).toURLPath(!0),component:Ee.v,children:i})]});var Le=i(8558);const Me=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:s,htmlDescription:n,onTimeStampClick:r,playability:o,showHeader:l=!0,spec:d})=>{const u=(0,H.s)(),p=(s||t)&&l,m=(0,a.useCallback)((e=>{const t=d.readMoreButtonFactory();u.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[d,u]),h=(0,Re.NC)(Le.ZK8,{loadingValue:!1});return(0,w.jsxs)(w.Fragment,{children:[p&&(0,w.jsx)(Se.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:J,children:c.Ru.get("episode.description-title")}),t&&(0,w.jsx)(Ue,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),s&&(0,w.jsx)(_e.N,{className:G,onTimeStampClick:r,maxLines:4,onExpanded:m,content:(i||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:o.playable,enableAutomaticLinkification:h&&e&&!!n})]})};var De=i(8335),Oe=i(20994),Be=i(30186),Fe=i(35671),qe=i(58280),He=i(97036),ze=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}(ze||{});const We=a.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:i,spec:s}){const n=(0,H.s)(),[r,o]=(0,a.useState)(ze.DESCRIPTION),l=(0,He.SF)(),{ref:d,inView:u}=(0,De.Wx)({threshold:[1],root:l.current,rootMargin:`-${qe.uC+1}px 100000px 0px 100000px`}),p=(0,a.useRef)(null),m=(0,a.useCallback)((e=>{p.current=e,d(e)}),[d]);return(0,a.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const i=e-qe.uC;t.scrollTop>i&&t.scrollTo({top:i})}),[l,r]),(0,w.jsx)(Oe.j,{list:(0,w.jsxs)(Be.L,{className:ge()(oe,{[le]:!u}),ref:m,children:[(0,w.jsx)(Fe.Y,{label:c.Ru.get("web-player.episode.description"),sentenceCase:!0,active:r===ze.DESCRIPTION,onClick:()=>{const e=s.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o(ze.DESCRIPTION)},className:ge()(ce,{[te]:r===ze.DESCRIPTION})}),(0,w.jsx)(Fe.Y,{label:c.Ru.get("web-player.episode.transcript"),sentenceCase:!0,"data-testid":"transcript-tab",disabled:null===e,active:r===ze.TRANSCRIPT,onClick:()=>{const e=s.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o(ze.TRANSCRIPT)},className:ge()(ce,{[te]:r===ze.TRANSCRIPT})})]}),children:null===e||r===ze.DESCRIPTION?t:i})}));var $e=i(9229),Ke=i(34939),Ge=i(59328);const Je=(0,a.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:i}){const{spec:a,logger:s}=(0,z.r)($e.c,{data:{uri:i}}),{isPlaying:n}=(0,Ke.P)({uri:i},{featureIdentifier:"episode"}),r=a.timestampLinkFactory();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:ae,children:(0,w.jsx)(Se.E,{variant:"bodySmall",semanticColor:"textBase",children:c.Ru.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,a)=>{const o=`transcript-section-${a}`;return(0,w.jsxs)("div",{className:ie,children:[(0,w.jsx)("button",{className:se,onClick:()=>{t(e.startMs,o),s.logInteraction(n?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:i}))},children:(0,w.jsx)(A.k,{id:o,targetURI:(0,l.o_h)(i),fadeOut:!0,children:(0,w.jsx)(Se.E,{variant:"marginalBold",semanticColor:"textSubdued",className:ne,children:(0,Ge.f)(e.startMs)})})}),e.content.map(((e,t)=>(0,w.jsx)(Se.E,{variant:"bodySmall",semanticColor:"textBase",className:re,dir:"auto",children:e},`transcript-text-${t}`)))]},o)}))]})}));i(88747);var Xe=i(23318),Ve=i(7253),Qe=i(2772),Ze=i(29578),Ye=i(33606),et=i(87648),tt=i(12046),it=i(72262),at=i(58742),st=i(54302),nt=i(38266),rt=i(65242),ot=i(12488),lt=i(40638),ct=i(11922),dt=i(19413),ut=i(27871),pt=i(27120),mt=i(91803);const ht=({children:e,index:t,ariaRowIndex:i,onTriggerPlay:s,isActive:n,uri:r,spec:o})=>{const l=(0,H.s)(),{pushPopSelected:c,toggleSelected:d,isSelected:u}=(0,a.useContext)(dt.m),p=(0,a.useRef)(null),m=(0,ut.W)(),h=(0,lt.YQ)((e=>{m({intent:"play",type:"double-click"});const t=l.logInteraction(o.doubleHitPlay({itemToBePlayed:r}));s(e,t)}),pt.d,{leading:!0,trailing:!1}),g=(0,a.useCallback)((e=>{d(t,e.shiftKey,e.ctrlKey||e.metaKey)}),[d,t]),y=(0,a.useCallback)((e=>{if(!p.current?.contains(e.target))return;const i="ArrowUp"===e.key?-1:1;["ArrowUp","ArrowDown"].includes(e.key)&&(e.shiftKey?c(t,i):d(t+i,!1,!1))}),[c,d,t]),x=u(t),b=x&&u(t-1),v=x&&u(t+1);return(0,w.jsx)(ct.$,{rowIndex:i,"aria-selected":x,children:(0,w.jsx)("div",{"data-testid":"tracklist-row",className:ge()(mt.A.trackListRow,mt.A.trackListRowGrid,{[mt.A.active]:n,[mt.A.selected]:x,[mt.A.isPreviousRowSelected]:b,[mt.A.isNextRowSelected]:v}),onDoubleClick:h,onClick:g,onKeyDown:y,ref:p,children:e})})};var gt=i(28722),yt=i(55712);const xt=({uri:e,title:t="",index:i,subtitle:s="",showName:n="",showUri:r="",duration:o=0,start:l,stop:d})=>{const{isActive:u,isPlaying:p,onClick:m}=(0,gt.L)({episodeUri:e,start:l,stop:d}),h=(0,a.useCallback)(((e,t)=>{m(t)}),[m]),{spec:g}=(0,yt.D)(Qe.i,{data:{position:i,reason:"",uri:e}});return(0,w.jsxs)(ht,{index:i,ariaRowIndex:i+1,onTriggerPlay:h,isActive:u,spec:g,uri:e,children:[(0,w.jsxs)(st.U,{ariaColIndex:0,children:[(0,w.jsx)(tt.$,{uri:e,playAriaLabel:c.Ru.get("tracklist.a11y.play",s,n),onClick:h,isPlaying:p,isActive:u,spec:g,children:(0,w.jsx)(it.a,{children:(0,w.jsx)(Ve.M,{className:mt.A.talkIcon,"aria-hidden":!0})})}),(0,w.jsxs)(et.l,{children:[(0,w.jsx)(ot.p,{titleText:t,children:t}),(0,w.jsx)(rt.p,{children:s})]})]}),(0,w.jsx)(nt.o,{ariaColIndex:1,children:(0,w.jsx)(Ze.g,{uri:r,name:n,spec:g,children:(0,w.jsx)("span",{dir:"auto",children:n})})}),(0,w.jsx)(at.l,{ariaColIndex:2,children:(0,w.jsx)(Ye.P,{duration:o,className:mt.A.talkSegmentDuration})})]})};var bt=i(27966),vt=i(62711),ft=i(41273),kt=i(80722),Ct=i(19976),jt=i(74314),Pt=i(25515),Tt=i(76697);const Nt="HRApv65revEcL42QzRjJ",It="HbJqPqSmOY5H3lLnQVzD",At="DBcCnhHVt7coNqp3wMB4",Et=({episodeUri:e,index:t,duration:i,start:s,stop:n,name:r,uri:o,artists:l,album:d,playable:u})=>{const{isActive:p,isPlaying:m,onClick:h}=(0,gt.L)({episodeUri:e,start:s,stop:n}),g=(0,a.useCallback)(((e,t)=>{u&&h(t)}),[h,u]),{spec:y}=(0,yt.D)(Qe.i,{data:{position:t,reason:"",uri:o}});return(0,w.jsx)(ft.t,{trigger:"right-click",action:"open",menu:(0,w.jsx)(kt.P,{uri:o}),children:(0,w.jsxs)(Pt.w,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:g,isActive:p,isPlayable:u,spec:y,children:[(0,w.jsxs)(st.U,{ariaColIndex:0,children:[(0,w.jsx)(tt.$,{uri:o,playAriaLabel:c.Ru.get("tracklist.a11y.play",r,l?.[0].name),onClick:g,isPlaying:m,isActive:p,spec:y,children:(0,w.jsx)(it.a,{children:(0,w.jsx)("img",{className:It,src:d.image,alt:d.name})})}),(0,w.jsxs)(et.l,{children:[(0,w.jsx)(ot.p,{titleText:r,children:r}),(0,w.jsx)(rt.p,{children:(0,w.jsx)(Ct.l,{artists:l,spec:y})})]})]}),(0,w.jsx)(nt.o,{ariaColIndex:1,children:(0,w.jsx)(Ze.g,{uri:d.uri,name:d.name,spec:y,children:d.name})}),(0,w.jsxs)(at.l,{ariaColIndex:2,children:[(0,w.jsx)(Tt.d,{uri:o,spec:y}),(0,w.jsx)(Ye.P,{duration:i}),(0,w.jsx)(jt.Y,{spec:y,menu:(0,w.jsx)(kt.P,{uri:o,artists:l}),label:c.Ru.get("more.label.track",r,l?.[0].name)})]})]})})};var St=i(47157),Rt=i(26188);function _t(e,t,i){return e.reduce(((e,a,s)=>((s>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===a.type?e.push(function(e,t,i){return{type:"MUSIC",index:t,uri:i.uri,episodeUri:e,start:i.start,stop:i.stop,duration:i.duration,name:i.track.name,artists:i.track.artists,album:i.track.album,playable:i.track.playable}}(i,s,a)):"TALK"===a.type&&e.push(function(e,t,i){return{type:"TALK",index:t,uri:e,title:i.title,subtitle:i.subtitle,start:i.start,stop:i.stop,duration:i.duration,showUri:i.show.uri,showName:i.show.name}}(i,s,a)),e)),[])}const wt=({uri:e,segmentCount:t})=>{const i=(0,St.o)(),s=(0,a.useCallback)((async(a,s)=>{const n=Math.ceil(a/2);try{return{items:_t(await i.getSegments(e,n,s),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,i,e]),n=(0,a.useCallback)((t=>{switch(t.type){case"SPACER":return(0,w.jsx)("div",{className:At},t.id);case"MUSIC":return(0,w.jsx)(Et,{...t},`${e}-${t.index}`);case"TALK":return(0,w.jsx)(xt,{...t},`${e}-${t.index}`);default:return(0,Rt.d)(t)}}),[e]),r=(0,a.useCallback)((e=>({uri:"MUSIC"===e.type?e.uri:""})),[]),o=c.Ru.get("music_and_talk.in_this_episode");return(0,w.jsxs)("div",{children:[(0,w.jsx)(Se.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Nt,children:o}),(0,w.jsx)(bt.S4,{ariaLabel:o,hasHeaderRow:!0,rowPlaceholder:Xe.qq,columns:[vt.$.TITLE_AND_ARTIST,vt.$.ALBUM_OR_SHOW,vt.$.DURATION],renderRow:n,fetchTracks:s,resolveItem:r,limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})},Ut=(0,a.lazy)((async()=>{const{CommentsList:e}=await Promise.all([i.e(5499),i.e(2023),i.e(4483)]).then(i.bind(i,53421));return{default:e}}));var Lt=i(79945),Mt=i(28191),Dt=i(28155),Ot=(i(27088),i(50563),i(25097),i(96185),i(42288)),Bt=i(31071),Ft=i.n(Bt);let qt=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});function Ht(e){switch(e){case 0:case"UNKNOWN":return qt.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return qt.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return qt.MUSIC_TRACK;default:return qt.UNRECOGNIZED}}const zt={encode(e,t=Ft().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const i of e.sections)Wt.encode(i,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const i=e instanceof Ft().Reader?e:new(Ft().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:s.version=i.string();break;case 2:s.episodeUri=i.string();break;case 3:s.publishedAt=i.string();break;case 4:s.sections.push(Wt.decode(i,i.uint32()));break;case 5:s.language=i.string();break;case 6:s.curated=i.bool();break;default:i.skipType(7&e)}}return s},fromJSON:e=>({version:Gt(e.version)?String(e.version):"",episodeUri:Gt(e.episodeUri)?String(e.episodeUri):"",publishedAt:Gt(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>Wt.fromJSON(e))):[],language:Gt(e.language)?String(e.language):"",curated:!!Gt(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?Wt.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>Wt.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const Wt={encode:(e,t=Ft().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&$t.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&Kt.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&$t.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const i=e instanceof Ft().Reader?e:new(Ft().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:s.type=i.int32();break;case 2:s.startMs=i.int32();break;case 3:s.plaintextContent=$t.decode(i,i.uint32());break;case 6:s.musicTrack=Kt.decode(i,i.uint32());break;case 4:s.title=i.string();break;case 5:s.fallback=$t.decode(i,i.uint32());break;default:i.skipType(7&e)}}return s},fromJSON:e=>({type:Gt(e.type)?Ht(e.type):0,startMs:Gt(e.startMs)?Number(e.startMs):0,plaintextContent:Gt(e.plaintextContent)?$t.fromJSON(e.plaintextContent):void 0,musicTrack:Gt(e.musicTrack)?Kt.fromJSON(e.musicTrack):void 0,title:Gt(e.title)?String(e.title):"",fallback:Gt(e.fallback)?$t.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case qt.UNKNOWN:return"UNKNOWN";case qt.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case qt.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?$t.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?Kt.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?$t.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?$t.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?Kt.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?$t.fromPartial(e.fallback):void 0,t}};const $t={encode(e,t=Ft().Writer.create()){for(const i of e.plaintext)t.uint32(10).string(i);return t},decode(e,t){const i=e instanceof Ft().Reader?e:new(Ft().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={plaintext:[]};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)s.plaintext.push(i.string());else i.skipType(7&e)}return s},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const Kt={encode:(e,t=Ft().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const i=e instanceof Ft().Reader?e:new(Ft().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={uri:""};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)s.uri=i.string();else i.skipType(7&e)}return s},fromJSON:e=>({uri:Gt(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function Gt(e){return null!=e}function Jt(e){return e.type===qt.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}Ft().util.Long!==Ot.A&&(Ft().util.Long=Ot.A,Ft().configure());var Xt=i(17934);const Vt=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:s,hasMusicAndTalkSegments:n,htmlDescription:r,onDescriptionTimestampClick:o,onTranscriptTimestampClick:l,playability:d,segmentCount:u,showUrl:p,transcript:m,uri:h,spec:g})=>{const y=(0,H.s)(),x=(0,Lt.d)(),b=(0,a.useMemo)((()=>g.descriptionSectionFactory()),[g]),v=(0,a.useMemo)((()=>b.trackListFactory()),[b]),[f,k]=(0,a.useState)(null),C=(0,a.useCallback)((async e=>{const t=await async function(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer();return zt.decode(new Uint8Array(e)).sections.map(Jt)}return null}catch(e){return null}}(e);k(t)}),[]);(0,a.useEffect)((()=>{m&&m.length>0&&C(m[0].cdnUrl)}),[C,m]);const j=(0,Dt.y)(),P=l=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Me,{hasDescription:s,contentInformation:t,onTimeStampClick:o,description:i,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:d,showHeader:l,spec:b}),n&&(0,w.jsx)(Xt.r,{spec:v,children:(0,w.jsx)(wt,{segmentCount:u,uri:h})}),p&&(0,w.jsx)(ye.n,{size:"small",className:X,href:p,component:Ee.v,onClick:()=>{y.logInteraction(b.allEpisodesLinkFactory().hitUiNavigate({destination:p}))},children:c.Ru.get("episode.see_all_episodes")}),x&&(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)("div",{className:ge()(de,{[ue]:j===Mt.E.LARGE}),children:(0,w.jsx)(Ut,{uri:h,className:pe})})}),(0,w.jsx)(Ae,{uri:h})]}),T=m&&m?.length>0&&d.playable;return(0,w.jsx)(w.Fragment,{children:T?(0,w.jsx)(We,{transcriptSections:f,descriptionContent:P(!1),transcriptContent:(0,w.jsx)(Je,{transcriptSections:f||[],onTimeStampClick:l,episodeUri:h}),spec:g}):P(!0)})};i(14126);var Qt=i(96535),Zt=i(6836),Yt=i(74187),ei=i(72226),ti=i(22775),ii=i(11689),ai=i(5736),si=i(32539),ni=i(10082),ri=i(48796),oi=i(70719),li=i(29421),ci=i(66408),di=i(40381);const ui=({coverArt:e,name:t})=>{const i=(0,Dt.y)(),a=i===Mt.E.SMALL||i===Mt.E.XSMALL;return(0,w.jsx)(ci.b,{images:e,type:Te.c.EPISODE,shape:ci.u.ROUNDED_CORNERS,title:t,size:a?di.Qe.SIZE_20:di.Qe.SIZE_24,className:Q})};var pi=i(3256);const mi=({episode:e,isFullyPlayed:t,setIsFullyPlayed:i,onPlayEpisode:s,isPlaying:n,isLocked:r,backgroundColor:o,spec:d})=>{const{uri:u,name:p,sharingInfo:m,playedState:h,episodeType:g,releaseDate:y,coverArt:x}=e,b=(0,H.s)(),v=function(e,t,i,a,s){const n=t===pi.I_.Episode;return(0,li.hD)(e,a,i,s)?(0,w.jsx)(li.Ih,{isMusicAndTalk:n}):n?c.Ru.get("type.showEpisode"):c.Ru.get("type.podcastEpisode")}(u,g||pi.I_.Unknown,h.playPositionMilliseconds,function(e){return e?.replace(/T.*/,"")||""}(y?.isoString),h.state===pi._w.Completed),f=e.podcast?.uri,k=function(e){const t=(0,l.o_h)(e);return`/show/${(0,l.cEw)(t?.id||"")}`}(f),C=(0,a.useCallback)((()=>{b.logInteraction(d.podcastLinkFactory().hitUiNavigate({destination:k}))}),[b,k,d]),j=e.podcast?.coverArt,T=!!(j&&j.length===x.length&&x.every(((e,t)=>e.url===j[t].url))),N=!r&&!e.playability.playable,I=c.Ru.get("tracklist.a11y.play",e.name,e.podcast?.name),A=c.Ru.get("tracklist.a11y.pause",e.name,e.podcast?.name),E=(0,w.jsx)(P.b,{uri:u,sharingInfo:m,showUri:f,contextUri:u,isPlayed:t,onMarkAsPlayed:i});return(0,w.jsxs)(Zt.z,{backgroundColor:o,children:[(0,w.jsxs)(ti.h,{children:[(0,w.jsx)(L,{episodeUri:e.uri,showUri:f,isLocked:r,onClick:()=>{s(h.playPositionMilliseconds)},isPlaying:n,isPlayDisabled:N,playButtonPlayLabel:I,playButtonPauseLabel:A,size:"medium"}),(0,w.jsx)(Qt.h,{menu:E,children:(0,w.jsx)(ii.X,{text:p,dragUri:u,dragLabel:p})})]}),!T&&(0,w.jsx)(Yt.X,{children:(0,w.jsx)(Qt.h,{menu:E,children:(0,w.jsx)(ai.b,{loading:"eager",name:p,images:x,placeholderType:"episode",shape:ai.u.SQUARE})})}),(0,w.jsxs)(ei.Y,{children:[(0,w.jsx)(si.B,{children:v}),(0,w.jsx)(Qt.h,{menu:E,children:(0,w.jsx)(ri.mm,{dragUri:u,dragLabel:p,scaleAtMinWidth:ri.tw,className:K,children:(0,w.jsx)("span",{"data-testid":"episodeTitle",children:p})})}),(0,w.jsx)(Qt.h,{menu:E,children:(0,w.jsxs)(oi.N,{to:k,onClick:C,className:Z,children:[T&&(0,w.jsx)(ui,{name:p,coverArt:x}),(0,w.jsx)(ni.g,{children:(0,w.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})]})})]})]})};var hi=i(41443);var gi=i(4113),yi=i(42980),xi=i(85904),bi=i(68007),vi=i(42917),fi=i(56206),ki=i(14862),Ci=i(53129),ji=i(10688),Pi=i(26798),Ti=i(38701),Ni=i(3402),Ii=i(78476);const Ai=({episode:e})=>{const{uri:t,episodeType:i,description:n,htmlDescription:o,podcastSubscription:c,segmentsCount:m,podcast:g,contentInformation:y,coverArt:x}=e,{spec:b,logger:v}=(0,z.r)(r.g,{data:{uri:t}}),f=(0,bi.n)(),k=(0,a.useMemo)((()=>b.headerFactory()),[b]),C=(0,a.useMemo)((()=>b.actionBarFactory()),[b]),{isActive:j,isPlaying:P}=(0,ji.te)(t),{isFullyPlayed:T,setIsFullyPlayed:N}=(0,Pi.e)({uri:t,isPlaying:P,durationMs:e.duration.milliseconds,episodePlaybackState:e.playedState?.state}),I=(0,Ci.z)(),A=void 0!==m&&m>0,E=(0,R.V)(),{triggerPlay:S,togglePlay:L,isActive:M}=(0,Ke.P)({uri:t,...f?{}:{pages:[{items:[{type:Te.c.EPISODE,uri:t,uid:null,provider:null}]}]}},{featureIdentifier:"episode"}),D=x.at(0)?.url,O=(0,fi.H)(D||null),B=(0,q.o)((e=>e?.isPaused??void 0)),F=(0,_.c)(),H=c.isPaywalled&&!c.isUserSubscribed,W=j||M,$=e?{name:e.name,uri:e.uri,mediaTypes:e.mediaTypes,audio:{items:e.audio.items.map((e=>({url:e.url})))}}:null,K=g?{name:g.name,uri:g.uri,trailer:g.trailer,showTypes:g.showTypes}:null,G=(0,vi.C)($,K),J=(0,a.useCallback)(((e,t,a,s)=>{const n=()=>{B?(s?.("resume"),I.resume({featureIdentifier:"episode"})):(s?.("pause"),I.pause({featureIdentifier:"episode"}))};if(!H)if(i===pi.I_.Episode&&F)u.h.set((()=>({triggerId:a||U,triggerAction:null})));else if(M&&!t)E?n():L({loggingParams:s?.()});else if(j&&!t)n();else{const t=s?.("play");E?G({seekTo:e,loggingParams:t}):S({seekTo:e,loggingParams:t})}}),[H,i,F,j,M,E,B,I,L,G,S]),X=(0,a.useCallback)((e=>{J(e,!1,void 0,(e=>{const i=b.actionBarFactory().playButtonFactory();let a;return a="pause"===e||P?i.hitPause({itemToBePaused:t}):"resume"===e||W?i.hitResume({itemToBeResumed:t}):i.hitPlay({itemToBePlayed:t}),v.logInteraction(a)}))}),[J,W,P,v,b,t]),V=(0,a.useCallback)((e=>{J(e,!0,void 0,(()=>v.logInteraction(b.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[J,v,b,t]),Q=(0,a.useCallback)(((e,t)=>{J(e,!0,t)}),[J]),[Z,Y]=(0,s.ok)();(e=>{const t=(0,hi.g)(),[i]=(0,s.ok)(),n=e.gatedEntityRelations?.entitiesWithValueProps.at(0),r=(0,l.o_h)(n?.fallbackNavigation?.uri),o=n?.uri,c=i.has("si");(0,a.useEffect)((()=>{if(!c||!o)return;let i;e.hasGatedEntityRelationAccess&&e.uri!==o?i=(0,l.o_h)(o)?.toURLPath(!0):!e.hasGatedEntityRelationAccess&&r&&(i=r.toURLPath(!0)),i&&t(i,{replace:!0})}),[r,c,t,o,e.hasGatedEntityRelationAccess,e.uri])})(e),(0,a.useEffect)((()=>{if(e&&!W&&Z.has("t")){const t=Z.get("t")||"0",i=1e3*parseInt(t,10);i<=e.duration.milliseconds&&(Z.delete("t"),Y(Z,{replace:!0}),J(i,!0))}}),[e,J,W,Z,Y]);const ee=!!n||!!o,te=e.podcast?.uri,ie=(0,l.o_h)(te)?.toURLPath(!0);return(0,w.jsxs)("section",{"data-testid":"episode",children:[(0,w.jsx)(d.Q,{children:(0,Ii.L$)({episodeOrChapterName:e.name,showOrAudiobookName:e.podcast?.name??"",type:"Podcast"})}),(0,w.jsx)(h.c,{artistOrShow:e.podcast?.name,title:e.name,uri:t,entityType:h.p.EPISODE}),(0,w.jsx)(mi,{episode:e,onPlayEpisode:X,isPlaying:P,isFullyPlayed:T,setIsFullyPlayed:N,backgroundColor:O,spec:k,isLocked:H}),(0,w.jsx)(me,{episode:e,onPlayEpisode:X,isPlaying:P,isActive:W,isFullyPlayed:T,setIsFullyPlayed:N,backgroundColor:O,isLocked:H,spec:C}),(0,w.jsxs)("div",{className:"contentSpacing",children:[(0,w.jsx)(gi.q,{gatedEntityRelations:e.gatedEntityRelations,upsellExplanation:e.upsellExplanation,hasAccess:e.hasGatedEntityRelationAccess,showValueProps:!1,showCoverArt:!1}),(0,w.jsx)(Vt,{transcript:e.transcript,hasDescription:ee,contentInformation:y,onDescriptionTimestampClick:V,onTranscriptTimestampClick:Q,description:e.description,areHTMLDescriptionsEnabled:!0,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegments:A,segmentCount:m,uri:e.uri,showUrl:ie,spec:b}),F&&(0,w.jsx)(p.W,{uri:t})]})]})},Ei=a.memo((function(){const{episodeId:e=""}=(0,n.g)(),t=(0,l.iMK)(e).toURI(),i=(0,Ti.d)(t);return i?.isError||!i?.episodeOrChapter?(0,w.jsx)(m.LoadingPage,{hasError:i?.isError||!1,errorMessage:c.Ru.get("error.not_found.title.podcast")}):(0,Ni.Gr)(i.episodeOrChapter)?(0,w.jsx)(yi.$,{to:(0,l.o_h)(i.episodeOrChapter.book?.uri).toURLPath(!0)}):(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(xi.u,{pageId:o.$h.PODCAST_EPISODE,uri:t,children:(0,w.jsx)(ki.d,{dynamicColors:i.episodeOrChapter.dynamicColors,children:(0,w.jsx)(Ai,{episode:i.episodeOrChapter})})})})}))},28722:(e,t,i)=>{i.d(t,{L:()=>o});var a=i(30758),s=i(34939),n=i(5956),r=i(67715);function o({episodeUri:e,start:t,stop:i}){const{togglePlay:o,triggerPlay:l,isPlaying:c,isActive:d}=(0,s.P)({uri:e},{featureIdentifier:"episode"}),u=(0,n.o)((e=>(0,r.s)(e)??0)),p=d&&function(e,t,i){return i>=e&&i<t}(t,i,u),m=c&&p;return{onClick:(0,a.useCallback)((e=>{p?o({seekTo:t,loggingParams:e}):l({seekTo:t,loggingParams:e})}),[p,t,o,l]),isPlaying:m,isActive:p}}},28779:(e,t,i)=>{i.d(t,{o:()=>N});i(89370),i(32807);var a=i(30758),s=i(17369),n=i(27377),r=i(90238),o=i(36585),l=i(29174),c=i(30024),d=i(49358),u=i(65906),p=i(17583),m=i(77676),h=i(53224),g=i(70719);const y="c5Ml9BbBuUEHjNkcSwZA";var x=i(86070);const b="70px",v=({adId:e,advertiser:t,tagline:i,displayImage:a,buttonMessage:s,cardOnClick:n,buttonOnClick:r,clickthroughUrl:o})=>(0,x.jsx)(g.N,{to:(0,h.H)(o),className:y,"data-testid":"leavebehind",children:(0,x.jsx)(c.v,{onClick:n,onClickHint:l.Ru.get("ad-formats.learnMore"),layout:"wide",variant:"tinted",id:e,size:"xl",title:(0,x.jsx)(d.d,{weight:"bold",variant:"ballad",lineClamp:1,"data-testid":"leavebehind-advertiser",children:t}),subtitle:(0,x.jsx)(u.j,{as:"div",lineClamp:2,"data-testid":"leavebehind-tagline",children:i}),media:(0,x.jsx)(p.C,{"data-testid":"leavebehind-image",src:a.src,alt:a.alt,imageHeight:b,imageWidth:b,size:"xl"}),trailing:(0,x.jsx)(m.$,{onClick:()=>{r&&r()},"data-testid":"leavebehind-button",colorSet:"invertedLight",size:"small","aria-label":l.Ru.get("ad-formats.learnMore"),children:s})})});var f=i(97919),k=i(39908),C=i(48474),j=i(98418);const P="zlUJfROzFEOsEDWL7ucP",T="Fxvq1Fw7XQdGRDvYokRg",N=({leavebehinds:e,seeAllButton:t,surface:i,uri:c})=>{const d=(0,j.vh)(),u=(0,C.w)(C.P),[p,m]=(0,a.useState)(void 0);(0,a.useEffect)((()=>{e&&e.length>0&&p!==e[0].requestId&&c&&(e.forEach(((e,t)=>{e.uri===c&&(e.trackingEvents?.viewed.forEach((async t=>{try{await u(t)}catch(a){const s=a;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.message,http_error_code:422,surface:(0,f.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e.lineitemId,ad_content_origin:(0,k.Zl)(i)}))}})),d.send((0,o.x)({leavebehind_lineitem_id:e.lineitemId,leavebehind_request_id:e.requestId,event:"event_viewed",event_reason:`viewed_on_${(0,f.Fh)(i).toLowerCase()}`,surface:(0,f.Fh)(i),surface_position:t+1,uri:c})))})),m(e[0].requestId))}),[d,u,e,c,i,p]);const h=({eventReason:e,lineitemId:t,requestId:a,trackingEvents:s,surfacePosition:n})=>{((e,t)=>{t?.forEach((async t=>{try{await u(t)}catch(a){const s=a;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.name,http_error_code:422,surface:(0,f.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e,ad_content_origin:(0,k.Zl)(i)}))}}))})(t,s),d.send((0,o.x)({leavebehind_lineitem_id:t,leavebehind_request_id:a,event:"event_clicked",event_reason:e,surface:(0,f.Fh)(i),surface_position:n,uri:c}))};return(0,x.jsxs)("section",{"data-testid":"leavebehinds-wrapper",children:[(0,x.jsxs)("div",{className:T,children:[(0,x.jsx)(s.E,{as:"h2",semanticColor:"textBase",variant:"titleSmall",paddingBottom:(0,n.po)("tighter"),"data-testid":"leavebehinds-title",children:l.Ru.get("podcast-ads.recent_ads")}),t]}),(0,x.jsx)("div",{className:P,"data-testid":"leavebehinds-list-wrapper",children:e.map(((e,t)=>(0,x.jsx)(v,{...e,buttonOnClick:()=>{h({eventReason:"button_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})},cardOnClick:()=>{h({eventReason:"card_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})}},e.adId)))})]})}},31840:(e,t,i)=>{i.d(t,{P:()=>a.P});var a=i(41383)},47157:(e,t,i)=>{i.d(t,{o:()=>n});var a=i(3044),s=i(65891);function n(){return(0,s.N)(a.g)}},59757:(e,t,i)=>{i.d(t,{A:()=>a});const a={Heading:"playlist-playlist-heading",HTMLDescription:"playlist-playlist-playlistDescription",List:"playlist-playlist-list",ListItem:"playlist-playlist-listItem",Paragraph:"playlist-playlist-paragraph"}},64503:(e,t,i)=>{i.d(t,{v:()=>y});var a=i(30758),s=i(6936),n=i.n(s),r=i(17369);i(32807);const o=/(\((?:[0-9]{1,3}:){1,2}[0-9]{2}\))/g;var l=i(70719),c=i(86070);const d=/((?:(?:https?:\/\/)|www\.)(?:(?:(?:[a-z\u00a1-\uffff0-9][-_]*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?:[/?#][^\s"]*)?)/gi,u=/^https?:\/\//;function p(e){return"string"==typeof e?(0,c.jsx)(c.Fragment,{children:e.split(d).map(((e,t)=>t%2?(0,c.jsx)(l.N,{to:`${u.test(e)?"":"https://"}${e}`,rel:"nofollow",children:e},t):e))}):e}var m=i(97383),h=i(59757);const g=(e=()=>{},t,i,s)=>{let n=0;const o={_:(e,t,r)=>{const o=void 0===t?e:r;return(0,c.jsx)(a.Fragment,{children:i&&!s?p(o):o},"fragment"+n++)}};if(s)return o;return{...o,p:e=>(0,c.jsx)(r.E,{as:"p",variant:"bodyMedium",semanticColor:t,className:h.A.Paragraph,children:i?p(e.children):e.children}),a:t=>t.href?.startsWith("#t=")?(0,c.jsx)(m.D,{onClick:e,children:t.children}):t.href?(0,c.jsx)(l.N,{to:t.href,rel:t.rel,children:t.children}):(0,c.jsx)(c.Fragment,{children:t.children}),ul:e=>(0,c.jsx)("ul",{className:h.A.List,children:e.children}),ol:e=>(0,c.jsx)("ol",{className:h.A.List,children:e.children}),li:e=>(0,c.jsx)(r.E,{as:"li",variant:"bodyMedium",semanticColor:t,className:h.A.ListItem,children:i?p(e.children):e.children}),br:()=>(0,c.jsx)("br",{}),h1:e=>(0,c.jsx)(r.E,{as:"h1",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),h2:e=>(0,c.jsx)(r.E,{as:"h2",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),h3:e=>(0,c.jsx)(r.E,{as:"h3",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),h4:e=>(0,c.jsx)(r.E,{as:"h4",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),h5:e=>(0,c.jsx)(r.E,{as:"h5",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),h6:e=>(0,c.jsx)(r.E,{as:"h6",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),time:t=>(0,c.jsx)(m.D,{onClick:e,children:t.children})}},y=(e,t=()=>{},i=!1,a="textSubdued",s=!1,r=!1)=>{const l=i?e.split(o).map((e=>e.match(o)?`(<time>${e.replace("(","").replace(")","")}</time>)`:e)).join(""):e;let c;try{c=n()(l,{transform:g(t,a,s,r),dangerouslySetChildren:[]})}catch{c=e}return c}},68062:(e,t,i)=>{i.d(t,{W:()=>$});i(32807);var a=i(97500),s=i.n(a),n=i(23736),r=i(29174),o=i(74297),l=i(61179),c=i(12074);const d=Spicetify.GraphQL.Definitions["internalLinkRecommenderEpisode"]=new l.l("internalLinkRecommenderEpisode","query","9b2aff11e012b072f475dc24956f22925558047b6f6a0e81b088f19b4bbc7bed",null);var u=i(79678),p=i(30758),m=i(62411),h=i(11028),g=i(59307),y=i(96535),x=i(13016),b=i(32873),v=i(81363),f=i(82277),k=i(94583),C=i(13185),j=i(42917),P=i(2232),T=i(45742),N=i(48431),I=i(28155),A=i(34939),E=i(29042),S=i(3256),R=i(54947),_=i(86070);const w=e=>`activation-trigger-mme-${e}`,U=p.memo((function({index:e=-1,audio:t,contentInformation:i,coverArt:a,contentRatingLabel:s,description:r,mediaTypes:o,releaseDate:l,name:c,playable:d,playedState:u,podcastSubscription:U,sharingInfo:L,showName:M,showTrailer:D,showTypes:O,showUri:B,totalMilliseconds:F,type:q,uri:H,sixteenByNineCoverImages:z,dynamicColors:W}){const $=u.playPositionMilliseconds,K=(0,p.useRef)(null),[G,J]=(0,p.useState)(u.state===S._w.Completed),{draggable:X,onDragStart:V}=(0,k.P)(),Q=(0,C.V)(),Z=(0,I.y)(),Y=(0,m.wA)(),{isActive:ee,isPlaying:te,togglePlay:ie}=(0,A.P)({uri:H},{featureIdentifier:"episode"}),[ae]=(0,E.S)(1e4,(e=>e?.item?.uri===H));(0,p.useEffect)((()=>{te&&(K.current=ae)}),[te,ae]),(0,p.useEffect)((()=>{!te&&K.current&&F<=K.current&&J(!0)}),[te,F]);const se=(0,p.useCallback)((e=>{e||(K.current=0),J(e)}),[]),ne={uri:B,name:M,trailer:D,showTypes:O},re=(0,j.C)({audio:t,name:c,uri:H,mediaTypes:o,coverArt:{sources:a}},ne),oe=(0,p.useCallback)((()=>{q!==S.I_.Episode?Q?re():ie():v.h.set((()=>({triggerId:w(H),triggerAction:null})))}),[q,Q,H,re,ie]),le=U?.isPaywalled??!1,ce=U?.isUserSubscribed??!1,de=le&&!ce,ue=le&&Q,{badges:pe}=(0,R.b)({contentRating:s,isPaywalled:le}),me=(0,p.useCallback)((()=>Y((0,h.Tf)(B))),[B,Y]),he=(0,p.useCallback)((e=>{let t=e;return(de||ue)&&(t=(0,_.jsx)(f.N,{enabled:!0,showUri:B,children:t})),!d&&pe.nineteen&&(t=(0,_.jsx)("div",{onClick:e=>{e.stopPropagation(),me()},children:e})),t=(0,_.jsx)(g.k,{id:w(H),targetURI:(0,n.o_h)(H),children:t}),t}),[de,ue,d,pe.nineteen,H,B,me]);return(0,_.jsx)(y.h,{menu:(0,_.jsx)(x.b,{uri:H,showUri:B,sharingInfo:L,isPlayed:G,onMarkAsPlayed:se}),children:(0,_.jsx)(b.k,{requestId:void 0,index:e,uri:H,size:Z,images:a||[],name:c,showName:M,description:r,isPlayable:d||de,fullyPlayed:G,durationMs:F,releaseDate:l,resumePositionMs:K.current??$,draggable:X,handleDragStart:e=>{if(e.target!==e.currentTarget)return;V(e,{itemUris:[H],dragLabelText:`${c} • ${M}`,contextUri:B})},handlePlaybackClick:oe,isCurrentlyPlaying:ee,isPaywalled:le,isUserSubscribed:ce,isPlaying:te,position:te?ae:void 0,episodeSharingInfo:L,onMarkAsPlayed:se,contentInformation:i,showUri:B,mediaTypes:o??void 0,badges:(0,_.jsxs)(_.Fragment,{children:[pe.explicit&&(0,_.jsx)(P.U,{}),pe.paid&&(0,_.jsx)(T.y,{}),pe.nineteen&&(0,_.jsx)(N.q,{size:16})]}),playButtonWrapper:he,dynamicColors:W,sixteenByNineCoverImages:z})})}));i(54615);var L=i(79368),M=i(19492);var D=i(1120),O=i(38012),B=i(4550);const F="GgMHVmfXNzteIydSWMIA",q="GcupflQsYyy0IMOsCeD1",H="A4FqrLbXeENogU0IRaPn",z="YCYs0Gv5B5ctDN0f5Zby",W=({uri:e,isFullPage:t=!1})=>{const{data:i}=(a={uri:e},(0,c.I)(d,a,o));var a,o;const l=i?.seoRecommendedEpisode.totalCount,u=i?.seoRecommendedEpisode.items,p=function(e){return(e||[]).filter((e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(e.data)))}(u),m=t?p:p.slice(0,5);if(0===l)return null;const h=(0,n.o_h)(e)?.id,g=`spotify:app:episode:${h}:more-like-this`;return(0,_.jsxs)("section",{className:s()(F,{[q]:!t}),"data-testid":"episode-list",children:[(0,_.jsx)(D.k,{title:r.Ru.get("internal-link-recommender.more-episodes-like-this"),showSeeAll:!t,seeAllUri:g}),m.map((({data:e},t)=>{const i=(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Podcast"===e.__typename;var t})(e.podcastV2.data)?e.podcastV2.data:null;if(!i)return null;const a=(0,O.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet)??void 0,s="ImageV2"===e.visualIdentity?.sixteenByNineCoverImage?.image?.data?.__typename?e.visualIdentity.sixteenByNineCoverImage.image.data.sources?.map((e=>({url:e.url,width:e.maxWidth,height:e.maxHeight}))):void 0;return e&&(0,_.jsxs)("div",{className:z,children:[(0,_.jsx)("hr",{className:H,"aria-hidden":!0}),(0,_.jsx)(U,{index:t,audio:e.audio,contentInformation:e.contentInformation,contentRatingLabel:e.contentRating?.label,coverArt:e.coverArt?e.coverArt.sources:void 0,description:e.description,releaseDate:e.releaseDate,mediaTypes:e.mediaTypes,name:e.name,playable:e.playability.playable,playedState:e.playedState,podcastSubscription:(0,B.Wx)(e.restrictions,e.playability),sharingInfo:e.sharingInfo,showTrailer:(n=i.trailerV2?.data,n&&(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(n)?{type:M.c.EPISODE,uri:n.uri,name:n.name,coverArt:n.coverArt?.sources||[],audio:n.audio,audioPreview:(0,L.xh)(n),sharingInfo:n.sharingInfo,duration:{milliseconds:n.duration.totalMilliseconds},contentRating:n.contentRating,mediaTypes:n.mediaTypes}:null),showName:i.name,showTypes:i.showTypes,showUri:i.uri,totalMilliseconds:e.duration.totalMilliseconds,type:e.type,uri:e.uri,sixteenByNineCoverImages:s,dynamicColors:a},`${e.uri}/${t}`)]},`${t}${e.uri}`);var n}))]})},$=e=>{const t=(0,u.D)({entityType:M.c.EPISODE,componentType:"list",uri:e.uri});return(0,_.jsx)(o.s,{onError:t,children:(0,_.jsx)(W,{...e})})}},70917:(e,t,i)=>{i.d(t,{J:()=>u});var a=i(60749),s=i(35638),n=i(36585),r=i(29174),o=i(97919),l=i(39908),c=i(98418),d=i(86070);const u=({leavebehinds:e,surface:t,uri:i,pathname:u,state:p})=>{const m=(0,c.vh)(),h=`${r.Ru.get("view.see-all")} (${e.length<=l.E9?r.Ru.formatNumber(e.length):r.Ru.formatNumber(l.E9)})`;return(0,d.jsx)(a.N_,{to:u,state:p,children:(0,d.jsx)(s.H,{"data-testid":"leavebehinds-see-all",size:"small",onClick:()=>{m.send((0,n.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,o.Fh)(t),uri:i}))},children:h})})}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map