"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7668],{3160:(e,t,n)=>{n.d(t,{U:()=>b});var i=n(30758),s=n(58837),o=n(7362),a=n(17640),r=n(5049),l=n(79976),c=n(29529),m=n(49787),u=n(63883),d=n(53814);const g="VOTkpOM9T_uWw08V0idk",x="tT7fcnVhS31dtZnzuc99",p="m212OynDr3xEToeQapwg";var h=n(86070);const y=({title:e,divider:t,scrollIntoViewOnMount:n})=>{const i=(0,d.z)(n);return(0,h.jsx)(c.v,{id:"sensitive-comments-section",ref:i,media:(0,h.jsx)("div",{className:g,children:(0,h.jsx)(m.q,{size:"small",semanticColor:"textSubdued"})}),title:e,trailing:t&&(0,h.jsx)("div",{className:x}),horizontalGap:"12px",paddingInlineStart:"0px","data-comment-id":u.bM})};var C=n(20493);const b=({sensitiveComments:e,entityUri:t,navigateOnShowAll:n,scrollIntoViewOnMount:c,condensed:m=!1})=>{const[d,g]=(0,i.useState)(!1),x=(0,C.n)(t),b=(0,i.useCallback)((()=>{n?n(u.bM):g(!0)}),[n]);return 0===e.length?null:d||c?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(y,{title:(0,h.jsx)(s.d,{variant:"bodySmall",semanticColor:"textSubdued",children:a.Ru.get("web-player.user-comments.sensitive.showing-all")}),divider:!0,scrollIntoViewOnMount:!0}),(0,h.jsx)(r.Y,{comments:e,renderComment:(e,n)=>(0,h.jsx)(l.c,{comment:e,entityUri:t,showSeparator:n>0,collapseReplies:!1,creatorReactionName:x,condensed:m},e.id)})]}):(0,h.jsx)(y,{title:(0,h.jsxs)(s.d,{variant:"bodySmall",semanticColor:"textSubdued",children:[a.Ru.get("web-player.user-comments.sensitive.disclaimer"),(0,h.jsx)(o.Y,{className:p,semanticColor:"textBase",onClick:b,children:a.Ru.get("web-player.user-comments.sensitive.show-all")})]})})}},5049:(e,t,n)=>{n.d(t,{Y:()=>c});var i=n(30758),s=n(95079),o=n(94079),a=n(63883),r=n(9862),l=n(86070);const c=({comments:e,renderComment:t})=>(0,l.jsx)(s.A,{component:null,children:e.map(((e,n)=>{const s=(0,i.createRef)();return(0,l.jsx)(o.A,{in:!0,nodeRef:s,timeout:a.xt,classNames:{enter:r.A.enter,enterActive:r.A.enterActive,exit:r.A.exit,exitActive:r.A.exitActive},children:(0,l.jsx)("div",{className:r.A.item,ref:s,children:(0,l.jsx)("div",{className:r.A.itemInner,children:t(e,n)})})},e.uri)}))})},9862:(e,t,n)=>{n.d(t,{A:()=>i});const i={container:"HGjuMwWSWy3FYYnzyodc",header:"QnZJ_bXjwXU8Z1ELdttH",item:"SWm5_7dZbqBLpSa84ggz",enter:"V3Nj9Mnzlg09Xcdwk3TB",enterActive:"xROP0Ig23PJ2H5IU1c48",exit:"DXTPKhkIcqbD4TJYZep1",exitActive:"dF6Pl3ng7XHrYQ3m6WjC",itemInner:"o9Qze90DYZNMlWhHYnbI"}},20493:(e,t,n)=>{n.d(t,{n:()=>o});var i=n(84792),s=n(4319);const o=e=>{const t=(0,i.d)(e)?.episodeOrChapter;return t&&!(0,s.Gr)(t)?t.podcast?.name??"":""}},20982:(e,t,n)=>{n.d(t,{$:()=>c});var i=n(30758),s=n(5305),o=n(59798),a=n(21527),r=n(95358),l=n(55928);const c=e=>{const t=(0,l.n)(),n=(0,s.jE)(),{data:c,isLoading:m,isError:u,fetchNextPage:d}=(0,o.q)({queryKey:r.K.allComments(e),queryFn:({pageParam:n})=>t.getComments(e,n),initialPageParam:void 0,getNextPageParam:e=>e.nextPageToken,gcTime:36e5,staleTime:3e4}),g=(0,i.useCallback)((()=>{n.invalidateQueries({queryKey:r.K.byEntity(e)})}),[n,e]),{mutate:x,isPending:p}=(0,a.n)({mutationFn:n=>t.addComment(e,n),onSettled:()=>{g()}});return{data:(0,i.useMemo)((()=>c&&0!==c.pages.length?{comments:c.pages.flatMap((e=>e.comments)),eligibilityStatus:c.pages[0].eligibilityStatus,totalCount:c.pages[0].totalCount,nextPageToken:null}:null),[c]),fetchNextPage:d,addComment:x,isPendingComment:p,isLoading:m,isError:u,refreshComments:g}}},26085:(e,t,n)=>{n.d(t,{K:()=>a});var i=n(25270),s=n(70830),o=n(86070);const a=({eligibility:e})=>{const{message:t,isRestricted:n}=(0,s.K)(e);return n?(0,o.jsx)(i.E,{variant:"bodySmall",semanticColor:"textSubdued",children:t}):null}},53814:(e,t,n)=>{n.d(t,{z:()=>s});var i=n(30758);const s=e=>{const t=(0,i.useRef)(null);return(0,i.useEffect)((()=>{e&&t.current&&t.current.scrollIntoView({block:"start",behavior:"smooth"})}),[e]),t}},55928:(e,t,n)=>{n.d(t,{n:()=>o});var i=n(77027),s=n(46822);const o=()=>(0,s.N)(i.v)},63883:(e,t,n)=>{n.d(t,{bA:()=>s,bM:()=>o,xt:()=>i});const i=400,s="all-boxed-required",o="sensitive-comments"},70830:(e,t,n)=>{n.d(t,{K:()=>o});var i=n(17640),s=n(30608);const o=e=>{let t=null,n=!1;switch(e){case s.S.ELIGIBILITY_STATUS_DISABLED:t=i.Ru.get("web-player.user-comments.commenting-restrictions.disabled");break;case s.S.ELIGIBILITY_STATUS_NEW_USER_ACCOUNT:t=i.Ru.get("web-player.user-comments.commenting-restrictions.new-user-account");break;case s.S.ELIGIBILITY_STATUS_ALREADY_COMMENTED:t=i.Ru.get("web-player.user-comments.commenting-restrictions.already-commented");break;case s.S.ELIGIBILITY_STATUS_HIDDEN:n=!0}return{message:t,isRestricted:null!==t,isHidden:n}}},79976:(e,t,n)=>{n.d(t,{c:()=>ue});var i=n(30758),s=n(97500),o=n.n(s),a=n(70389),r=n(46462),l=n(29529),c=n(17640),m=n(43294),u=n(62411),d=n(12599),g=n(80090),x=n(1093),p=n(27656),h=n(20982),y=n(33398),C=n(31592),b=n(93301),v=n(95351),j=n(5305),S=n(21527),R=n(95358),U=n(55928);var I=n(43422),k=n(86070);const w=({commentUri:e,entityUri:t,divider:n})=>{const s=(0,u.wA)(),{enqueueSnackbar:o}=(0,b.d)(),a=((e,t)=>{const n=(0,U.n)(),i=(0,j.jE)(),{mutate:s}=(0,S.n)({mutationFn:()=>n.deleteComment(e),onSettled:()=>{i.invalidateQueries({queryKey:R.K.byEntity(t)})}});return s})(e,t),{logDeleteComment:r}=(0,v._)(),l=(0,i.useCallback)((()=>{s(I.FR.actions.open({onConfirm:()=>{r(e),a(),o(c.Ru.get("web-player.user-comments.delete-comment-dialog.success"))}}))}),[e,a,s,o,r]);return(0,k.jsx)(C.D,{role:"menuitem",divider:n,onClick:l,leadingIcon:(0,k.jsx)(y.P,{semanticColor:"textSubdued",size:"small"}),children:c.Ru.get("contextmenu.delete")})};var N=n(7397),E=n(82232),D=n(12542),f=n(75539);const A=i.memo((function({commentUri:e,entityUri:t,author:n}){const{user:s}=(0,u.d4)(N.Ht),{spec:o,logger:a}=(0,D.o)(e),{uri:r,name:l,type:c}=n,{refreshComments:m}=(0,h.$)(t),y=(0,i.useCallback)((()=>setTimeout((()=>m()),500)),[m]),C=(0,i.useCallback)((()=>{const e=o.blockButtonFactory().hitBlockUser({userToBeBlocked:r});a.logInteraction(e),y()}),[r,y,a,o]);if(!s?.uri)return null;const b=(0,d.B2u)(s.uri,r);return r?(0,k.jsx)(E.pZ,{value:"comment",children:(0,k.jsx)(g.W,{children:b?(0,k.jsx)(w,{commentUri:e,entityUri:t}):(0,k.jsxs)(k.Fragment,{children:[c===f.c.USER&&(0,k.jsx)(x.X,{uri:r,name:l??"",currentUserUri:s?.uri,onBlock:C}),(0,k.jsx)(p.P,{spec:o,uri:e})]})})}):null}));var B=n(68583),T=n(71264);const F="UJjZEfOFY27iPvvtHVqP",O="iG_rhOCCEbMofMMzLToY",_="m5OZXQj7TeGCKUuoKUQJ",P="fDtd4a5aWLa0rMQxCmn4",z="BcqJ5242UcnkbIJ3PabB",L="LWpR7exIYyWovDOCykgZ",M="UHUP_LyhKA2NR6aaVysB",H="U8WSYONc9O5jC7ci4mHs",Y="OwozHdpYAKIM0oPuDJrd",K="ixHYU0G9pFyR9yXX2PEs",W="E0bOD7hg_tyr9WBjrmHq",q="PRJpBjbhDySrUCuVu2Jh",V=({author:e})=>(0,k.jsx)(B.b,{className:P,images:e.images,shape:e.type===f.c.USER?B.u.CIRCLE:B.u.ROUNDED_CORNERS,size:T.Qe.SIZE_32,iconSize:"small",type:e.type,title:e.name});var Z=n(83155);const G=({creationDate:e,isPendingReview:t})=>{if(!e.isoString)return null;const n=e.isoString&&Date.now()-new Date(e.isoString).getTime()<6e4?c.Ru.get("web-player.user-comments.just-now"):c.Ru.formatRelativeDate(new Date(e.isoString),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"},new Date,1/0),i=t?c.Ru.get("web-player.user-comments.in-review"):void 0;return(0,k.jsxs)(Z.j,{hasTextSeparator:!0,children:[n,i]})};var Q=n(82747),J=n(58837),X=n(88800),$=n(98637),ee=n(24498);const te=({commentUri:e,entityUri:t,author:n})=>{const s=n.type===f.c.USER?(0,k.jsx)($.B,{uri:n.uri}):(0,k.jsx)(X.H,{uri:n.uri}),{logNavigateToCommentAuthor:o}=(0,v._)(),a=(0,i.useCallback)((()=>{o(t,e,n.uri)}),[n.uri,e,t,o]);return(0,k.jsxs)("span",{className:z,children:[n.type===f.c.SHOW?(0,k.jsx)(Q.I,{size:"small",semanticColor:"textSubdued",className:L}):null,(0,k.jsx)(J.d,{lineClamp:1,as:"div",dir:"auto",variant:"bodySmallBold",className:z,children:(0,k.jsx)(m.h,{menu:s,children:(0,k.jsx)(ee.N,{to:n.uri,onClick:a,children:n.name})})})]})};var ne=n(2565),ie=n(52110),se=n(58325);const oe=({imagesReacted:e,name:t})=>(0,k.jsx)(se.Zp,{label:c.Ru.get("web-player.user-comments.creator-reaction-liked-comment",t),children:(0,k.jsx)("div",{className:H,children:(0,k.jsx)(B.b,{className:Y,images:e,shape:B.u.ROUNDED_CORNERS,size:T.Qe.SIZE_24,iconSize:"small",type:f.c.SHOW,title:""})})}),ae=({comment:e,entityUri:t,imagesReacted:n,creatorReactionName:s=""})=>{const{logCommentMenuOpened:o}=(0,v._)(),a=(0,i.useCallback)((()=>{o(t,e.uri)}),[t,e.uri,o]);return(0,k.jsxs)("div",{className:M,children:[(0,k.jsx)("div",{className:O,children:(0,k.jsx)(ie.b,{menu:(0,k.jsx)(A,{commentUri:e.uri,entityUri:t,author:e.author}),onShow:a,children:(0,k.jsx)(ne.e,{size:"small",condensedAll:!0})})}),n&&n.length>0&&(0,k.jsx)(oe,{imagesReacted:n,name:s})]})},re=({commentUri:e,entityUri:t,numReplies:n,images:s,onClick:o})=>{const{logSeeRepliesClicked:a}=(0,v._)(),l=(0,i.useCallback)((()=>{a(t,e),o?.()}),[e,t,a,o]);return(0,k.jsxs)(r.H,{condensedAll:!0,className:W,size:"small",semanticColor:"textBase",onClick:l,children:[(0,k.jsx)(B.b,{className:q,images:s,shape:B.u.ROUNDED_CORNERS,size:T.Qe.SIZE_16,iconSize:"small",type:f.c.SHOW,title:""}),c.Ru.get("web-player.user-comments.collapsed-reply.count",n)]})};var le=n(53814),ce=n(86082);const me=({comment:e,entityUri:t,lineClamp:n,scrollIntoViewOnMount:s})=>{const o=(0,i.useRef)(null),u=(0,ce.K)({ref:o}),d=(0,le.z)(s),{uri:g,author:x,creationDate:p,text:h}=e,y=(0,k.jsx)(V,{author:x}),C=(0,k.jsx)(te,{entityUri:t,commentUri:e.uri,author:x}),b=(0,k.jsx)(G,{creationDate:p}),v=(0,k.jsx)(ae,{comment:e,entityUri:t}),j=(0,k.jsxs)("div",{className:_,children:[(0,k.jsx)(a.v,{ref:e=>{o.current=e?.querySelector("span")??null},semanticColor:"textBase",lineClamp:n,children:h}),u&&(0,k.jsx)(r.H,{semanticColor:"textBase",condensedAll:!0,size:"small",children:c.Ru.get("web-player.user-comments.see-more")})]});return(0,k.jsx)(m.h,{menu:(0,k.jsx)(A,{commentUri:e.uri,entityUri:t,author:e.author}),children:(0,k.jsx)(l.v,{ref:d,className:F,id:`comment-${g}`,size:"md",media:y,title:C,subtitle:b,trailing:v,layout:"wide",body:j,paddingInlineStart:"60px",paddingInlineEnd:"16px",paddingBlockStart:"16px",paddingBlockEnd:"16px",titleGap:"0",hoverAnimationDuration:"0ms",isInteractive:!0,children:e.text})})},ue=({comment:e,entityUri:t,showSeparator:n,lineClamp:s,onClickNavigate:u,scrollIntoViewOnMount:d,creatorReactionName:g="",collapseReplies:x=!0,condensed:p=!1})=>{const h=(0,i.useRef)(null),y=(0,ce.K)({ref:h}),C=(0,le.z)(d),{uri:b,id:v,author:j,creationDate:S,text:R,imagesReacted:U,imagesReplied:I,replies:w,isPendingReview:N}=e,E=(0,i.useCallback)((()=>{u?.(v)}),[u,v]),D=u?E:void 0,f=(0,k.jsx)(V,{author:j}),B=(0,k.jsx)(te,{commentUri:e.uri,entityUri:t,author:j}),T=(0,k.jsx)(G,{creationDate:S,isPendingReview:N}),O=(0,k.jsx)(ae,{comment:e,creatorReactionName:g,entityUri:t,imagesReacted:U}),P=w&&w.length>0?w[0]:null;let z=null;P&&(z=x?(0,k.jsx)(re,{commentUri:e.uri,entityUri:t,numReplies:w.length,images:I,onClick:D}):(0,k.jsx)(me,{comment:P,entityUri:t,scrollIntoViewOnMount:d,lineClamp:s}));const L=(0,k.jsxs)("div",{className:_,children:[(0,k.jsx)(a.v,{ref:e=>{h.current=e?.querySelector("span")??null},semanticColor:"textBase",lineClamp:s,children:R}),y&&(0,k.jsx)(r.H,{semanticColor:"textBase",condensedAll:!0,size:"small",onClick:D,children:c.Ru.get("web-player.user-comments.see-more")})]});return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(m.h,{menu:(0,k.jsx)(A,{commentUri:e.uri,entityUri:t,author:e.author}),children:(0,k.jsx)(l.v,{ref:C,className:o()(F,{[K]:n}),"data-comment-id":e.id,id:`comment-${b}`,size:"md",media:f,title:B,subtitle:T,trailing:O,layout:"wide",body:L,paddingInlineStart:p?"8px":"16px",paddingInlineEnd:p?"8px":"16px",paddingBlockStart:"16px",paddingBlockEnd:"16px",titleGap:"0",onClick:D,hoverBackgroundColor:D?"backgroundElevatedHighlight":"backgroundHighlight",hoverAnimationDuration:"0ms",isInteractive:!D,children:e.text})}),z]})}},95351:(e,t,n)=>{n.d(t,{_:()=>r});var i=n(30758),s=n(37889),o=n(12599),a=n(5141);const r=()=>{const{spec:e,logger:t}=(0,a.r)(s.U,{});return{logCommentConsentAccepted:(0,i.useCallback)((()=>{const n=e.commentConsentFormFactory().acceptButtonFactory().hitUiReveal();t.logInteraction(n)}),[t,e]),logSubmitComment:(0,i.useCallback)((n=>{const i=e.commentInputFieldFactory().submitButtonFactory().hitSubmitComment({entityId:n});t.logInteraction(i)}),[t,e]),logNavigateToCommentAuthor:(0,i.useCallback)(((n,i,s)=>{const a=(0,o.o_h)(s).toURLPath(!0),r=e.commentListFactory({uri:n}).commentRowFactory({uri:i}).commentAuthorLinkFactory().hitUiNavigate({destination:a});t.logInteraction(r)}),[t,e]),logSeeRepliesClicked:(0,i.useCallback)(((n,i)=>{const s=e.commentListFactory({uri:n}).commentRowFactory({uri:i}).seeRepliesLinkFactory().hitUiNavigate({destination:i});t.logInteraction(s)}),[t,e]),logCommentMenuOpened:(0,i.useCallback)(((n,i)=>{const s=e.commentListFactory({uri:n}).commentRowFactory({uri:i}).contextMenuButtonFactory().hitUiReveal();t.logInteraction(s)}),[t,e]),logDeleteComment:(0,i.useCallback)((n=>{const i=e.deleteCommentDialogFactory().confirmDeleteButtonFactory().hitDeleteComment({commentId:n});t.logInteraction(i)}),[t,e]),logCancelDeleteComment:(0,i.useCallback)((()=>{const n=e.deleteCommentDialogFactory().cancelButtonFactory().hitUiHide();t.logInteraction(n)}),[t,e]),logCommentsNPVCardImpression:(0,i.useCallback)((n=>{const i=e.npvCommentCardFactory({uri:n}).impression();t.logImpression(i)}),[t,e]),logCommentsListEntityPageImpression:(0,i.useCallback)((n=>{const i=e.commentListFactory({uri:n}).impression();t.logImpression(i)}),[t,e])}}},95358:(e,t,n)=>{n.d(t,{K:()=>i});const i={all:["user-comments"],byEntity:e=>[...i.all,e],topComments:e=>[...i.byEntity(e),"top"],allComments:e=>[...i.byEntity(e),"all"]}}}]);
//# sourceMappingURL=7668.js.map