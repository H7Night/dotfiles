"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9319],{1323:(e,t,a)=>{a.d(t,{_:()=>s});var r=a(75044),n=a(55405);const s=()=>(0,r.NC)(n.p5T,{loadingValue:!1})},2393:(e,t,a)=>{a.d(t,{o:()=>f});var r=a(17640),n=a(46966),s=a(84439),i=a(44538),o=a(44519),l=a(62411),c=a(4833),d=a(7397),u=a(97276),m=a(78161);var p=a(42668),g=a(86070);const h=({metadata:e,index:t,variant:a})=>{const{isPlaying:o,togglePlay:l}=(0,p.P)({uri:e.uri},{featureIdentifier:"your_library"}),{name:c,images:d}=e;return(0,g.jsx)(n.Z,{variant:a,index:t,delegatePlayback:!0,delegateLogging:!0,isPlaying:o,featureIdentifier:"your_library",onPlay:(e,t)=>l({loggingParams:t}),headerText:c,uri:e.uri,renderCardImage:()=>(0,g.jsx)(s.M,{images:d}),renderSubHeaderContent:()=>(0,g.jsx)(i.c,{children:r.Ru.get("tracklist-header.songs-counter",e.totalLength)})})},f=({index:e,variant:t})=>{const a=function(){const e=(0,u.d)({offset:0,limit:1}),{user:t}=(0,l.d4)(d.Ht);if(null===e||null===t)return null;const a=(0,c.$R)(t.id);return a?{uri:a.uri,name:a.name,images:a.images,totalLength:e?.totalLength,unfilteredTotalLength:e.unfilteredTotalLength,owner:(0,m.w)(t)}:null}();return a?(0,g.jsx)(h,{metadata:a,index:e,variant:t}):(0,g.jsx)(o.u,{cardImage:(0,g.jsx)(s.M,{images:c.s0}),isLoading:!0,variant:t})}},4769:(e,t,a)=>{a.d(t,{j:()=>s});var r=a(5752),n=a(46822);function s(){return(0,n.N)(r.X6)}},6038:(e,t,a)=>{a.r(t),a.d(t,{RecentlyPlayedHomeCarouselShelf:()=>_,RecentlyPlayedHomeGridShelf:()=>E,default:()=>M});var r=a(30758),n=a(97500),s=a.n(n),i=a(44178),o=a(75044),l=a(17640),c=a(20307),d=a(75463),u=a(51132),m=a(46966),p=a(47457),g=a(86527),h=a(89790),f=a(47406),v=a(67464),y=a(2393),x=a(91073),C=a(40686),b=a(55405),j=a(41905),P=a(24211),I=a(74458),L=a(5752),k=a(4769);function w(e=!0){const t=(0,k.j)(),[a,n]=(0,r.useState)((()=>t.getContexts()));return(0,r.useEffect)((()=>{if(!e)return;return t.getEvents().addListener(L.m5.UPDATE,(({data:e})=>{n(e)}))}),[t,e]),a}var N=a(91563);const S="wu4hGzXkWRNdY0UX1MJa";var A=a(86070);function R(e){const t=new Set;return e.filter((e=>{if(e.type===L.d2.LIKED_SONGS){if(t.has(e.type))return!1;t.add(e.type)}return!0}))}const T=(e,t,a,r=!1)=>{const n=e.uri;switch(e.type){case L.d2.LIKED_SONGS:return(0,A.jsx)(y.o,{index:t,variant:a},n);case L.d2.YOUR_EPISODES:return(0,A.jsx)(C.e,{index:t,variant:a},n);case L.d2.ALBUM:return(0,A.jsx)(c.a,{index:t,name:e.name,uri:e.uri,images:e.images,artists:e.artists,sharingInfo:null,variant:a,logCardImpressions:r},n);case L.d2.ARTIST:return(0,A.jsx)(d.a,{index:t,name:e.name,uri:e.uri,images:e.images,variant:a,logCardImpressions:r},n);case L.d2.PLAYLIST:return(0,A.jsx)(p.B,{index:t,name:e.name,uri:e.uri,images:e.images,description:e.description,authorName:e.owner.displayName,authorUri:e.owner.uri,isPlayable:!(0,I.p)(e.attributes),variant:a,logCardImpressions:r,leaveTitleVisible:!0},n);case L.d2.SHOW:return(0,A.jsx)(g.o,{index:t,name:e.name,uri:e.uri,images:e.images,publisher:e.publisher,sharingInfo:null,variant:a,logCardImpressions:r},n);case L.d2.AUDIOBOOK:return(0,A.jsx)(u.M,{index:t,name:e.name,uri:e.uri,images:e.images,authorName:e.authors.at(0)?.name??"",signifierText:e.signifierText,variant:a,logCardImpressions:r,consumptionCapExplanation:e.consumptionCapExplanation,isPlayable:e.isPlayable},n);case L.d2.TRACK:return(0,A.jsx)(h.w,{index:t,name:e.name,uri:e.uri,images:e.images,is19PlusOnly:e.isMOGEFRestricted,artists:e.artists,album:null,isExplicit:e.isExplicit,sharingInfo:null,variant:a,logCardImpressions:r},n);default:return(0,N.k)(e),null}},E=({title:e,index:t,id:a})=>{const n=w(!0),s=(0,o.NC)(b.BCG),i=(0,o.NC)(b.WAq),l=(0,r.useMemo)((()=>{if(!n)return[];return R(n).map(((e,t)=>T(e,t,i?m._.Compact:m._.Default,s)))}),[n,i,s]);return 0===l.length?null:(0,A.jsx)(j.x,{config:(0,P.s1)(i?P.yV.HOME_HIGH_DENSITY:P.yV.HOME_REGULAR_DENSITY),children:(0,A.jsx)(v.p,{id:a,index:t,total:l.length,seeAllUri:`/genre/${x.r}`,title:e,children:l})})},_=({title:e,className:t,index:a,id:n})=>{const s=w(!0),i=(0,o.NC)(b.BCG),l=(0,r.useMemo)((()=>{if(!s)return[];return R(s).map(((e,t)=>T(e,t,m._.Compact,i)))}),[s,i]);return 0===l.length?null:(0,A.jsx)(f.R,{index:a,id:n,title:e,seeAllUri:`/genre/${x.r}`,className:t,children:l})},M=()=>{const e=w(!0);if(!e)return[];const t=R(e);return null===e?null:(0,A.jsx)("section",{className:s()("contentSpacing",S),children:(0,A.jsx)(v.p,{id:"recently-played",title:l.Ru.get("view.recently-played"),showAll:!0,index:0,rowGap:i.lT,fullPage:!0,children:t.map(((e,t)=>T(e,t,m._.Default)))})})}},17188:(e,t,a)=>{a.d(t,{g:()=>r.g});var r=a(72536)},35940:(e,t,a)=>{a.d(t,{A:()=>r});const r={coverContainer:"aaasJtK_0Z_ggHet0u6v",yourEpisodesCard:"Iy8zwWQVG_ylQT9GRLhR",coverIcon:"o5KDMPy9Ed_fP0aQ63vd"}},37390:(e,t,a)=>{a.d(t,{y:()=>g});var r=a(30758),n=a(97500),s=a.n(n),i=a(46300),o=a(68606),l=a(53459);const c="zUf7jtv9GPOKC1jYO5TO",d="T8QLel3PoQTgJUpGYj7Q";var u=a(86070);const m=(0,r.memo)((({isLoading:e})=>{const t=(0,o.h)("shimmer");return(0,u.jsx)("div",{className:l.A.imageContainer,children:(0,u.jsx)("div",{ref:t,className:s()(l.A.imageWrapper,{[d]:e})})})})),p=(0,r.memo)((({isLoading:e})=>(0,u.jsx)("div",{className:s()(l.A.shortcut,c),"data-testid":"skeleton-shortcut",children:(0,u.jsxs)("div",{className:l.A.draggable,children:[(0,u.jsx)(m,{isLoading:e}),(0,u.jsx)("div",{className:s()(l.A.main,l.A.skeletonShortcut),children:(0,u.jsx)(i.Y,{as:"p",variant:"bodyMediumBold",className:l.A.name,isLoading:e})})]})}))),g=(0,r.memo)((({withTitle:e})=>(0,u.jsxs)("section",{className:l.A.shortcuts,children:[e&&(0,u.jsx)("div",{className:l.A.title,children:(0,u.jsx)(i.Y,{as:"h2",variant:"titleMedium",charCount:25,isLoading:!0})}),(0,u.jsx)("div",{className:s()(l.A.grid,{[l.A.gridOf4Columns]:true}),children:[...new Array(8).keys()].slice(0,8).map(((e,t)=>(0,u.jsx)(p,{isLoading:!0},t)))})]})))},38193:(e,t,a)=>{a.d(t,{h:()=>i,r:()=>o});var r=a(30758),n=a(86070);const s=(0,r.createContext)({}),i=({children:e,extensionsData:t={}})=>(0,n.jsx)(s.Provider,{value:t,children:e}),o=()=>(0,r.useContext)(s)},40686:(e,t,a)=>{a.d(t,{e:()=>g});var r=a(17640),n=a(46966),s=a(84439),i=a(44538),o=a(44519),l=a(55250),c=a(29055),d=a(42668),u=a(35940),m=a(86070);const p=({metadata:e,index:t,variant:a})=>{const{isPlaying:o,togglePlay:c}=(0,d.P)({uri:e.uri},{featureIdentifier:"your_library"}),{name:p,images:g}=e;return(0,m.jsx)(n.Z,{variant:a,index:t,delegatePlayback:!0,delegateLogging:!0,isPlaying:o,featureIdentifier:"your_library",onPlay:(e,t)=>c({loggingParams:t}),headerText:p,uri:e.uri,renderCardImage:()=>(0,m.jsx)(s.M,{images:g,FallbackComponent:l.b}),renderSubHeaderContent:()=>(0,m.jsx)(i.c,{children:r.Ru.get("tracklist-header.episodes-counter",e.totalLength)}),className:u.A.yourEpisodesCard})},g=({index:e,variant:t})=>{const a=(0,c.u)();return a?(0,m.jsx)(p,{metadata:a,index:e,variant:t}):(0,m.jsx)(o.u,{cardImage:(0,m.jsx)(s.M,{FallbackComponent:l.b}),isLoading:!0,variant:t})}},41565:(e,t,a)=>{a.d(t,{g:()=>Ca});var r=a(30758),n=a(62411),s=a(25270),i=a(72654),o=a(60204),l=a(3547),c=a(28985),d=a(18486),u=a(19959),m=a(60378),p=a(56891),g=a(89922),h=a(88030),f=a(14155),v=a(14639),y=a(75044),x=a(17640),C=a(96381),b=a(97500),j=a.n(b),P=a(23317),I=a(77739),L=a(12599);var k=a(46462),w=a(42594);const N={screenLg:"1200px",homeRegularDensityMinWidth:"210px",homeRegularDensityMinWidthSmallScreens:"160px",homeFeedBaselineMinWidth:"380px",homeFeedBaselineMaxWidth:"480px",homeFeedBaselineHalfWidth:"430px",gridContainer:"DgRp3EC01YPhzdK9Imn5",withFiniteRowCount:"ihWXb2VdDvsS3bvPrpJF",uniformRowHeight:"frDxJ3jhWuIFWag59N0Q",card:"Q36ugVAb7krhThyRTmJ_",overlayForCenteredImage:"ky4dHMtg46D0NG1znEYF",overlayForCenteredImageGradient:"kI0KOHhAWcqJTU3NyxGg",overlayForCenteredImageDynamicColors:"qF9rZunA5zsqZCAJ8pKq",overlayTop:"QSkuUiKpZ4MHrdOB83XV",withFooterOverlay:"pobLn0CELRvb4TjnNApn",overlayBottom:"AqLt2Nk3rygv3mAt_6gi",hasFooter:"FuL5IvTt_AoeX2tB_U_Q",header:"XKQRNQAUOAjRwwjuUnRU",headerImage:"EHmWppnjgBNjT9yPUXpw",withHeaderImage:"KwklVh4oNn_BXeDMDHcS",headerContainer:"ZhCb7WHaVm5AdY29Cvaq",titleClamp:"auugTSHlDcy58VCqeLjc",titleLink:"YSflHyCWx4tGL7LrqtLE",audioPreviewContainerText:"lOuOe8nZaKHVgh38HPog",carousel:"t8hK7HwEUiIjAwheYDse",carouselScrollContent:"bXQccTSllyjV42080L0j",carouselScroller:"fTzLARQ0EPCvPmol3wtF",carouselChevrons:"VSAtCKDeRfQH7O1t2eff",fillSpaceAbsolute:"IriswrXFrjhQwRTmrgIf",backgroundInCarousel:"RWVDgIkhym_nHPfxrxEO",canvasInCarousel:"hpHKwaBDciLDmKsUx6A6",currentlyPlayingStatus:"uw7snqn4j_j7v0S1Fpmi",footerPlayContainer:"PHgLQg31p9qeCUcSicCg",audioPreviewContainer:"EBU7aYrd4J_LgPaKmyJA",footerPlayContainerLeft:"lGxecOZ8oBfh2DzjoP0p",footerPlayContainerRight:"Hf9Q0qSpT2RXgmYT6bNE",footer:"OGu88AVNWY3IM3QlZjG0",footerDescription:"bdiJ1G8TQ1rV0_rYDjws",footerDescriptionContent:"FUyKOZGo4cLlF8PSnINm",expandFooterButton:"ZZqy7vcJrfQy4lXxCTB6",playButtonContainer:"qWtIAYA_A_mOQIlxBb02",isListeningToPreview:"R6fpPFFvUR3y3foJIDHD",isPlayingContext:"BdPspy97AcLd4WhT_L2N",transcriptForAudio:"Z_ouIT4D_IDAEK9NFivF",transcriptForVideo:"Xl2pUStmWsam79qkFAe7",audioWave:"hDiIlhxofBNpk5iFSYik",isExpandedFooter:"Icn8TjyVe6vIEWpxmYhl",centeredContainer:"TLbWzWrBDxGsZRv8m6lg",artworkImage:"IpLgaK4Oik13ltWcX5FA",parentArtworkImage:"P0gaJ5S6AlrdulY7vERi",previewHasCompleted:"nlj9PLnUOp6p9CpfeJr3",videoPreview:"mEYwOgcSR3UWyvz0OSVE",videoLoaded:"W_nKYaO8fH_8YLcmEaBR",transcript:"gSDmqCUB7gyRLyDhNVfF",videoPreviewCompleted:"CWroJ7w75YEPvOQ63QIZ",pulsateText:"dPKkgM2ctEg7P_MAUwjA",playing:"je5WMu3WPFt5JRsMVZb_",loading:"fl8QTa21ubkcNPWPywc9",pulsateLoading:"yQiJ5xD8GjZPS_kJYdgf",transcriptText:"S1JkAKIjGrjk74I1YEyb",spoken:"CJoYZ3wN9vIyNxjiMs6q",unspoken:"LF44BrY9AtFsXZOTo2WQ",subtitle:"yb0K_tfQMa762cHBS2LJ",previewHasCompletedContainer:"kraOhQgefWTb4HdrEa2y"};var S=a(86070);const A=e=>{const{isExpandedFooter:t,setIsExpandedFooter:a,children:n}=e,i=(0,r.useRef)(null),o=(0,r.useRef)(null),[l,c]=(0,r.useState)(!1),d=t?x.Ru.get("show_less"):x.Ru.get("show_more"),u=(0,r.useCallback)((e=>{e.stopPropagation(),a((e=>!e))}),[a]);(0,r.useEffect)((()=>{requestAnimationFrame((()=>{o.current&&i.current&&c(o.current.clientHeight>i.current.clientHeight)}))}),[]);const m={"--mask-image":`url(${(0,w.b)("images/mask.png")})`,"--mask-image-rtl":`url(${(0,w.b)("images/mask-rtl.png")})`};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{ref:i,className:N.footerDescription,style:m,children:(0,S.jsx)(s.E,{variant:"bodySmall",className:N.footerDescriptionContent,ref:o,children:n})}),(l||t)&&(0,S.jsx)(k.H,{onClick:u,className:N.expandFooterButton,size:"small",condensedAll:!0,semanticColor:"textBase",tabIndex:0,children:d})]})};var R=a(79583),T=a(17188),E=a(93850),_=a(71468);const M=({uri:e,size:t})=>{const[a,r]=(0,_.A)(e);return(0,S.jsx)(R.M,{size:t,isAdded:a,onClick:()=>{r(!a)},condensed:!0})},D=({uri:e,size:t})=>(0,E.v)(e)?(0,S.jsx)(T.g,{uri:e,size:t}):(0,S.jsx)(M,{uri:e,size:t});var B=a(2565),U=a(36730),O=a(80366),F=a(39898),H=a(97564),W=a(33876),V=a(87983);const G=({uri:e,name:t,togglePreview:a,isListeningToPreview:n,userHasCompletedPreview:i,overture:o,durationMs:l})=>{const c=(0,L.gHQ)(e),[d,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null);d&&n&&u(!1);const g=(0,r.useCallback)((a=>{if(c&&(n||d)){const e=l&&a?(0,V.f)(l-a):(0,V.f)(NaN);return x.Ru.get("preview.remaining-time",{time:e})}const r=t??x.Ru.get("playing"),s=n&&!d;return(0,L.gHQ)(e)?s?r:x.Ru.get("preview.episode"):(0,L._Tv)(e)?s?r:x.Ru.get("preview.album"):(0,L.nuB)(e)?s?r:x.Ru.get("preview.playlist"):s?r:x.Ru.get("preview")}),[c,n,l,d,t,e]),h=(0,r.useCallback)((()=>n?(0,S.jsx)(W.J,{animated:!0}):(0,S.jsx)(U.X,{size:"small"})),[n]);return(0,r.useEffect)((()=>{if(!c)return;if(!o)return;const e=e=>{p(e.data.position)};return o.addListener(H.LW.PROGRESS,e),()=>{o.removeListener(H.LW.PROGRESS,e)}}),[o,c]),i?(0,S.jsx)(O.n,{className:N.audioPreviewContainer,iconOnly:()=>(0,S.jsx)(F.r,{size:"small"}),onClick:e=>{e.stopPropagation(),a()},size:"small"}):(0,S.jsx)(O.n,{className:j()(N.audioPreviewContainer,d?N.loading:null,n?N.playing:null),disabled:d,iconLeading:h,onClick:e=>{e.stopPropagation(),n||u(!0),a()},size:"small",children:(0,S.jsx)(s.E,{variant:"bodySmall",className:N.audioPreviewContainerText,children:g(m)})})},z=e=>{const{isPlayingContext:t}=e;return!t&&e.uri&&e.isPreviewAvailable?(0,S.jsx)(G,{...e}):t?(0,S.jsxs)("div",{className:N.currentlyPlayingStatus,children:[(0,S.jsx)(W.J,{animated:!0}),(0,S.jsx)(s.E,{variant:"bodySmall",semanticColor:"textPositive",children:x.Ru.get("playing")})]}):null};var Y=a(52110),Q=a(15792);const K=e=>{const{uri:t,overture:a,isPlayingContext:r,isPreviewAvailable:n,isListeningToPreview:s,togglePreview:i,durationMs:o,currentPreviewItem:l,isAddable:c,isPlayable:d,ariaPlayLabel:u,ariaPauseLabel:m,menu:p,onMoreButtonClick:g,handlePlayButtonClick:h,userHasCompletedPreview:f}=e;return(0,S.jsxs)("div",{className:N.footerPlayContainer,children:[(0,S.jsx)("div",{className:N.footerPlayContainerLeft,children:(0,S.jsx)(z,{isPreviewAvailable:n,isPlayingContext:r,isListeningToPreview:s,uri:l?.uri??null,name:l?.name??null,overture:a,durationMs:o,togglePreview:i,userHasCompletedPreview:f})}),(0,S.jsxs)("div",{className:N.footerPlayContainerRight,onClick:e=>{e.stopPropagation()},children:[(0,S.jsx)(Y.b,{menu:p,children:(0,S.jsx)(B.e,{size:"large",label:x.Ru.get("more"),onClick:g})}),c&&(0,S.jsx)(D,{size:"large",uri:t}),d&&(0,S.jsx)("div",{className:N.playButtonContainer,children:(0,S.jsx)(Q.R,{isPlaying:r,onClick:h,ariaPlayLabel:u,ariaPauseLabel:m,version:r?Q.H.primary:Q.H.secondary})})]})]})};var $=a(84439),Z=a(58325),q=a(24498),J=a(86082),X=a(28667),ee=a(24211),te=a(20437);const ae=Number(N.homeFeedBaselineHalfWidth.replace("px",""))||430,re=({uri:e,text:t,images:a,imageColor:n,renderSubtitle:i,cardRef:o})=>{const l=(0,r.useRef)(null),c=(0,J.K)({ref:l}),[d,u]=(0,r.useState)(32),m=(0,r.useCallback)((()=>{const e=o.current?.clientWidth??ee.Pm,a=2*(l.current?.clientWidth??ee.Pm),r=e<ae?24:32,n=(0,X.L)(t,r,700);u(n>a?24:32)}),[o,t]);(0,r.useEffect)((()=>{m()}),[m]),(0,te.w)({refOrElement:o,onResize:m,observeOnly:"width",observeOnMount:!1});const p={"--title-line-clamp":2,"--title-font-size":`${d}px`,"--title-font-size-small":(32===d?24:20)+"px"};return(0,S.jsxs)("header",{className:N.header,style:p,children:[(0,S.jsx)("div",{className:N.headerImage,children:(0,S.jsx)($.M,{images:a,color:n,is1DCardHeader:!0})}),(0,S.jsxs)("div",{className:N.headerContainer,children:[(0,S.jsx)(q.N,{to:e,className:N.titleLink,children:(0,S.jsx)(Z.Zp,{label:t,disabled:!c,children:(0,S.jsx)(s.E,{as:"span",variant:"titleSmall",semanticColor:"textBase",ref:l,className:N.titleClamp,children:t})})}),i?(0,S.jsx)(s.E,{as:"span",variant:"bodySmall",semanticColor:"textSubdued",className:j()(N.subtitle),children:i()}):null]})]})};var ne=a(48563),se=a(44721);const ie=e=>{const{carouselLayout:t,withFooterOverlay:a}=e,{dynamicColors:r}=(0,se.q)(),n={"--background-base-high-contrast":r?.highContrast.backgroundBase.toCSS(ne.a.RGBA)||"","--higher-contrast-text-base-color":r?.higherContrast.textBase.toCSS(ne.a.RGBA)||""};return t?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{"aria-hidden":!0,className:N.overlayTop}),(0,S.jsx)("div",{"aria-hidden":!0,className:j()({[N.withFooterOverlay]:a,[N.overlayBottom]:!a})})]}):(0,S.jsx)("div",{"aria-hidden":!0,style:n,className:j()(N.overlayForCenteredImage,N.overlayForCenteredImageDynamicColors)})};a(52853),a(94141),a(54375),a(29567);var oe=a(75773),le=a(96469),ce=a(4056),de=a(55405),ue=a(73035),me=a(42668);var pe=a(83531),ge=a(34180);const he=32,fe=[0,6e3];const ve=1e3/60,ye=({analyser:e,forceAlwaysInView:t,playing:a})=>{const n=(0,y.NC)(de.eZG),s=(0,r.useRef)(null),i=(0,r.useRef)(null),o=(0,pe.SF)(),{ref:l,inView:c}=(0,oe.Wx)({root:o.current,initialInView:!1}),d=(0,r.useRef)(new Uint8Array(he)),[u]=(0,r.useState)((()=>function(e){const t=new Uint8Array(e),a=new Array(e).fill(80),r=Array.from({length:e},(()=>100*Math.random()+80));return()=>{for(let n=0;n<e;n++)a[n]=a[n]+.4*(r[n]-a[n]),t[n]=Math.round(a[n]),Math.abs(a[n]-r[n])<1&&(r[n]=100*Math.random()+80);return t}}(he))),[m,p]=(0,r.useState)(a);(0,r.useEffect)((()=>{if(!a){const e=setTimeout((()=>p(!1)),500);return()=>clearTimeout(e)}return p(!0),()=>{}}),[a]);const g=m&&(c||t)&&n!==de.UiV.OFF,h=(0,r.useCallback)((()=>{if(!s.current)return;const t=s.current?.getContext("2d");if(!s.current||!t)return;const a=s.current.width/window.devicePixelRatio,r=s.current.height/window.devicePixelRatio;let i=null;if(n===de.UiV.REAL){if(e){const t=new Uint8Array(e.frequencyBinCount);e.getByteFrequencyData(t),i=function(e,t){const a=44100/e.length,r=Math.floor(fe[0]/a),n=Math.ceil(fe[1]/a),s=e.slice(r,n),i=new Uint8Array(he);for(let e=0;e<he;e++){const a=s[Math.floor(e/he*s.length)]??0;t[e]=.6*t[e]+.4*a,i[e]=t[e]}return i}(t,d.current)}}else n===de.UiV.RAND&&(i=u());i&&function(e,t,a,r){const n=t/2,s=a/2;e.clearRect(0,0,t,a),e.fillStyle="rgba(255, 255, 255, 35%)";for(let t=0;t<he;t++){const a=Math.max(0,Math.min(255,r[t]??0))*(s/255),i=n+-192+12*t-1.5;e.beginPath(),e.roundRect(i,s-a,3,2*a,1.5),e.fill()}}(t,a,r,i)}),[e,n,u]),f=(0,r.useCallback)((()=>{if(!s.current?.parentElement)return;const{offsetWidth:e,offsetHeight:t}=s.current.parentElement,a=window.devicePixelRatio||1;s.current.width=e*a,s.current.height=t*a,s.current.style.width=`${e}px`,s.current.style.height=`${t}px`;const r=s.current.getContext("2d");r?.scale(a,a)}),[]);return(0,te.w)({onResize:(0,ge.s)(f)(200),refOrElement:i}),(0,r.useEffect)((()=>{if(!g)return()=>{};let e,t=null;const a=r=>{(null===t||(t?r-t:0)>=ve)&&(h(),t=r),e=requestAnimationFrame(a)};return e=requestAnimationFrame(a),()=>{e&&cancelAnimationFrame(e)}}),[h,g]),(0,S.jsx)("div",{"aria-hidden":!0,ref:i,style:{width:"100%",height:"100%"},children:(0,S.jsx)("canvas",{style:{width:"100%",height:"100%"},ref:e=>{l(e),s.current=e,f()}})})};var xe=a(57221);const Ce=({onClick:e})=>(0,S.jsx)("div",{className:N.previewHasCompletedContainer,children:(0,S.jsx)(xe.$,{size:"large",onClick:t=>{t.stopPropagation(),t.preventDefault(),e()},colorSet:"invertedLight",children:x.Ru.get("preview.continue-playing")})}),be=1500,je=e=>1e3*parseFloat(e.replace("s","")),Pe=({line:e,positionMs:t,playing:a})=>{const[n,i]=(0,r.useState)(0);(0,r.useEffect)((()=>{i(0)}),[t]);const o=a;(0,r.useEffect)((()=>{let e;return()=>{e&&cancelAnimationFrame(e)}}),[o]);const l=t+n;return(0,S.jsx)("div",{className:N.transcriptText,children:e.map((({word:e,start:t},a)=>(0,S.jsx)(s.E,{variant:"bodyMediumBold",className:l>=t?N.spoken:N.unspoken,children:e},a)))})},Ie=({data:e,url:t,overture:a,shiftTranscriptByOffsetFromURL:n})=>{const[s,i]=(0,r.useState)(0),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),u=(0,r.useMemo)((()=>(e=>{const t=new URL(e).searchParams.get("offsets.start");return t?je(t):0})(t)),[t]);(0,r.useEffect)((()=>{if(!a)return;const e=e=>{const t=e.data.position+(n?u:0);i(t)},t=()=>{l(!0),c||d(!0)},r=()=>{l(!1)};return a.on(H.LW.PROGRESS,e),a.on(H.LW.PLAYING,t),a.on(H.LW.PAUSED,r),()=>{a.removeListener(H.LW.PROGRESS,e),a.removeListener(H.LW.PLAYING,t),a.removeListener(H.LW.PAUSED,r)}}),[n,u,a,c]);const m=((e,t)=>{const a=(0,r.useMemo)((()=>Math.floor(t/be)*be),[t]);return(0,r.useMemo)((()=>{const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=je(n.offsets.start);if(s>=a&&s<a+be){const e=je(n.offsets.end);t.push({word:`${n.word} `,start:s,end:e})}if(s>=a+be)break}return t}),[e,a])})(e.words,s);return c&&m.length?(0,S.jsx)(Pe,{line:m,positionMs:s,playing:o}):null};var Le=a(16318),ke=a(43352),we=a(31491);const Ne=(e,t=!0)=>{const{data:a,error:r}=(0,Le.I)({queryKey:["transcript",e],gcTime:15*we.i,staleTime:15*we.i,queryFn:async()=>{if(!e)return null;const t=await(async e=>ke.n.getInstance().build().fromURL(e).withoutMarket().withoutAuthorization().send())(e);return"words"in t.body?t.body:null},enabled:t});return{data:a??null,error:r}},Se=e=>{const{hasAudioWave:t,analyser:a,userHasCompletedPreview:r,handleContinuePlayingButtonClick:n,overture:s,previewState:i,parentImages:o,images:l,imageColor:c,handleCardClick:d,entityUrl:u,transcriptUrl:m,shiftTranscriptByOffsetFromURL:p}=e,g=(0,y.NC)(de.eSY),{data:h}=Ne(m,g),f=o&&o.length>0&&l?.[0]?.url!==o?.[0]?.url;return(0,S.jsxs)(q.N,{tabIndex:-1,onClick:d,to:u,className:N.centeredContainer,children:[(0,S.jsxs)("div",{"aria-hidden":!0,className:j()(N.artworkImage,{[N.previewHasCompleted]:r}),children:[t?(0,S.jsx)("div",{className:N.audioWave,children:(0,S.jsx)(ye,{analyser:a,playing:i.playing})}):null,(0,S.jsx)($.M,{images:l,color:c,desiredSize:180*window.devicePixelRatio}),f&&(0,S.jsx)("div",{className:N.parentArtworkImage,children:(0,S.jsx)($.M,{images:o,color:c,desiredSize:80*window.devicePixelRatio})})]}),g&&h&&m&&(0,S.jsx)("div",{className:j()(N.transcript,N.transcriptForAudio),children:(0,S.jsx)(Ie,{url:m,data:h,overture:s,shiftTranscriptByOffsetFromURL:p})}),r?(0,S.jsx)(Ce,{onClick:n}):null]})};var Ae=a(85856),Re=a(72806);const Te=({item:e,cardRef:t,playerContainerClass:a,isListening:r,overridePlatformId:n})=>{const s=(0,Re.j)();return!e?.canvas?.fileId||s?(0,S.jsx)("div",{className:N.backgroundInCarousel,style:{backgroundColor:e.background?.color??"transparent"},children:e.background?.imageUrl&&(0,S.jsx)("img",{alt:"",src:e.background.imageUrl})}):(0,S.jsx)(Ae.Gg,{className:N.canvasInCarousel,fileId:e.canvas.fileId,canvasType:e.canvas.type,canvasUri:e.canvas.uri,canvasUrl:e.canvas.url,canvasThumbnailUrl:e.canvas.thumbnailUrl,playbackType:r?Ae.RT.Loop:Ae.RT.LoopOnHover,playerContainerClass:`${a}_${e.canvas.fileId}`,mouseHoverRef:t,overridePlatformId:n,loadingStrategy:"lazy"})};var Ee=a(43058);const _e=e=>{const{previewItems:t,currentPreviewItemIndex:a,setCurrentPreviewItemIndex:n,playPreview:s,isListeningToPreview:i,playerContainerClass:o,cardRef:l}=e,c=(0,r.useCallback)((e=>{if(!t)return;if(a===e)return;const r=t[e];r&&(n(e),i&&s(r))}),[a,i,s,t,n]);return(0,S.jsx)(Ee.FN,{wheelScrollEnabled:!1,scrollingMethod:Ee.Hv.SNAP,scrollSnapAlign:"center",className:j()(N.carousel,N.fillSpaceAbsolute),scrollContentClassName:N.carouselScrollContent,scrollerClassName:N.carouselScroller,chevronsClassName:N.carouselChevrons,showButtons:Ee.C_.ON_HOVER,edgeGradients:Ee.TB.NONE,onScroll:c,children:t.map(((e,t)=>(0,S.jsx)(Te,{item:e,playerContainerClass:o,cardRef:l,isListening:i,overridePlatformId:"desktop-home-1d-card-canvas"},`${e.uri}_${t}`)))})};var Me=a(4878);const De=({uri:e,fileId:t,poster:a,overridePlatformId:n,playerContainerClass:s,className:i,startOffsetMs:o,endOffsetMs:l,children:c})=>{const{registerURI:d,unregisterURI:u}=(0,Me.J)(),m=(0,r.useMemo)((()=>({videoPlayerContainer:`.${s}`})),[s]),p=(0,ce.H)(m,void 0,void 0,void 0,n);(0,r.useEffect)((()=>(d(e,{uri:e,overture:p}),()=>{u(e)})),[e,d,u,p]);const g=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(!t)return;const r=()=>{g.current&&g.current.classList.add(N.videoLoaded)};return p.addListener(H.LW.FIRST_BYTES,r),p.playTracks([(0,H.a2)({mediaType:"video",format:"MANIFEST_ID",fileId:t,uri:e,poster:a??"",options:{position:o},logData:{playbackId:(0,ue.E)()}})],{paused:!0,loop:!1,muted:!0}),()=>{p.removeListener(H.LW.FIRST_BYTES,r)}}),[e,p,t,a,o,l]),(0,S.jsxs)("div",{ref:g,className:j()(s,i),children:[a&&(0,S.jsx)("img",{"data-poster":!0,src:a,alt:""}),c]})},Be=e=>{const{userHasCompletedPreview:t,handleContinuePlayingButtonClick:a,overture:r,transcriptUrl:n,uri:s,playerContainerClass:i,handleCardClick:o,entityUrl:l,startOffsetMs:c,endOffsetMs:d,fileId:u,poster:m,shiftTranscriptByOffsetFromURL:p}=e,g=(0,y.NC)(de.eSY),{data:h}=Ne(n,g);return(0,S.jsxs)(q.N,{tabIndex:-1,onClick:o,to:l,className:N.centeredContainer,children:[(0,S.jsx)(De,{uri:s,fileId:u,startOffsetMs:c??0,endOffsetMs:d??0,className:j()(N.videoPreview,{[N.videoPreviewCompleted]:t}),playerContainerClass:`${i}_Video`,overridePlatformId:"desktop-home-1d-card-video",poster:m,children:g&&h&&n&&(0,S.jsx)("div",{className:j()(N.transcript,N.transcriptForVideo),children:(0,S.jsx)(Ie,{url:n,data:h,overture:r,shiftTranscriptByOffsetFromURL:p})})}),t?(0,S.jsx)(Ce,{onClick:a}):null]})},Ue=({currentPreviewItem:e,uri:t,hasAudioWave:a,playerContainerClass:n,loop:s})=>{const[i,o]=(0,r.useState)({playing:!1,muted:!0,completed:!1,duration:0}),l={uri:t,currentPreviewItem:e,previewState:i,setPreviewState:o,hasAudioWave:a,playerContainerClass:n,loop:s,enabled:!0},c=(({uri:e,currentPreviewItem:t,setPreviewState:a,previewState:n,enabled:s})=>{const{isPlaying:i}=(0,me.P)({uri:e},{featureIdentifier:"home"}),o=(0,le.c)(),l=(0,Me.J)(),c=l.getStateForURI(e)?.overture??null,d=t?.video,u=(0,y.NC)(de.x8),m=Boolean(d?.fileId),p=s&&u&&m,[g,h]=(0,r.useState)(null),f=p&&null===g,v=d?.startOffsetMs??0,x=d?.endOffsetMs??0,C=d?.transcriptUrl??null,b=Boolean(n&&n.playing&&!n.muted),j=Boolean(n&&n.completed&&!i),P=(0,r.useCallback)((async()=>{c&&((await c.getState()).playbackState.playing?c.setMuted(!n.muted):(c.setVolume(o.currentPlayerVolume),c.setMuted(!1),c.resume()))}),[c,n.muted,o.currentPlayerVolume]),I=(0,r.useCallback)((()=>{}),[]),L=(0,r.useCallback)((()=>{c&&c.pause().catch((()=>{}))}),[c]),k=(0,r.useCallback)((async()=>{f&&c&&(b||j||(c.setMuted(!0),c.resume()))}),[f,c,b,j]),w=(0,r.useCallback)((()=>{f&&c&&(b||j||c.pause().catch((()=>{})))}),[f,c,b,j]);return(0,r.useEffect)((()=>{if(!p)return;if(!c)return;const e=e=>{h(e.data.error)};return c.addListener(H.LW.ERROR,e),()=>{c.removeListener(H.LW.ERROR,e)}})),(0,r.useEffect)((()=>{if(!f)return;if(!c)return;const e=e=>{e.data.position>=x&&(c.seek(v),c.pause(),a((e=>({...e,completed:!0}))))};return c.addListener(H.LW.PROGRESS,e),()=>{c.removeListener(H.LW.PROGRESS,e)}}),[f,c,a,x,v]),{durationMs:x,isListeningToPreview:b,isPreviewAvailable:f,togglePreview:P,pausePreview:L,userHasCompletedPreview:j,playPreview:I,overture:c,transcriptUrl:C,shiftTranscriptByOffsetFromURL:!1,onPointerEnter:k,onPointerLeave:w,analyser:null}})(l),d=(({uri:e,currentPreviewItem:t,previewState:a,hasAudioWave:n,playerContainerClass:s,loop:i,enabled:o})=>{const{isPlaying:l}=(0,me.P)({uri:e},{featureIdentifier:"home"}),c=(0,le.c)(),d=Boolean(t?.audio?.url),u=(0,y.NC)(de.o5i),m=(0,y.NC)(de.eZG),p=o&&u&&d,g=t?.audio?.transcriptUrl??null,h=(0,r.useMemo)((()=>{if(m!==de.UiV.REAL)return null;if(!n)return null;const e=new AudioContext({latencyHint:"playback",sampleRate:44100}),t=e.createAnalyser();t.fftSize=256;const a=e.createGain();return{audioContext:e,analyser:t,gainNode:a}}),[m,n]);(0,r.useEffect)((()=>()=>{h&&h.audioContext.close()}),[h]);const f=(0,r.useMemo)((()=>({audioPlayerContainer:`.${s}_Audio`,audioProcessorOptions:{disable:!0},preinitMediaElement:!1,disallowProtectedTracks:!0,enableWithoutEME:!0,createPlayer:()=>{const e=document.createElement("audio");if(h){const{audioContext:t,analyser:a,gainNode:r}=h;e.crossOrigin="anonymous";const n=t.createMediaElementSource(e);n.connect(a),n.connect(r),r.connect(t.destination)}return e}})),[h,s]),[v,x]=(0,r.useState)(!1),C=Boolean(a&&a.playing&&v),b=Boolean(a&&a.completed&&!l),j=(0,r.useCallback)(((e,t)=>{h?(h.gainNode.gain.value=t*t*t,e.setVolume(1)):e.setVolume(t)}),[h]),P=(0,r.useCallback)(((e,t)=>t.playbackState.playing&&v),[v]),I=(0,r.useCallback)((e=>{x(!1),e.pause().catch((()=>{}))}),[x]),L=(0,ce.H)(f,I,P,j,"desktop-home-1d-card-audio"),k=(0,r.useCallback)(((e,t)=>{x(t),j(L,e)}),[L,j]),w=(0,r.useCallback)((t=>{const a=t.audio?.url;a&&L.playTracks([(0,H.a2)({noAuth:!0,format:"GENERIC_MEDIA",mediaType:"audio",uri:e,url:a,logData:{playbackId:(0,ue.E)()}})],{loop:i,paused:!1,muted:!1})}),[L,e,i]),N=(0,r.useCallback)((async()=>{if(!p)return;if(!t)return;const e=await L.getCurrentState();e.track?.url===t.audio?.url?e.playbackState.playing?v?k(0,!1):k(c.currentPlayerVolume,!0):(k(c.currentPlayerVolume,!0),L.resume()):(k(c.currentPlayerVolume,!0),w(t))}),[p,t,L,k,c.currentPlayerVolume,v,w]),S=(0,r.useCallback)((()=>{I(L)}),[I,L]),A=(0,r.useCallback)((async()=>{if(!p)return;if(!t)return;if(!n)return;if(C||b||l)return;const e=await L.getCurrentState();k(0,!1),e.track?.url===t?.audio?.url?L.resume():w(t)}),[p,t,n,C,b,L,l,k,w]),R=(0,r.useCallback)((()=>{p&&n&&(C||b||(k(0,!1),L.pause().catch((()=>{}))))}),[p,n,C,b,k,L]);return{durationMs:a.duration??0,isPreviewAvailable:p,isListeningToPreview:C,togglePreview:N,playPreview:w,pausePreview:S,overture:L,userHasCompletedPreview:b,transcriptUrl:g,shiftTranscriptByOffsetFromURL:!0,onPointerEnter:A,onPointerLeave:R,analyser:h?.analyser??null}})({...l,enabled:!c.isPreviewAvailable}),u=c.isPreviewAvailable?"video":"audio",m="video"===u?c:d,{isPreviewAvailable:p,overture:g}=m;return(0,r.useEffect)((()=>{if(!p)return;if(!g)return;const e=e=>{o((t=>({...t,duration:e.data.duration})))},t=e=>{o((t=>({...t,muted:e.data.muted})))},a=()=>{o((e=>({...e,playing:!0,completed:!1})))},r=()=>{o((e=>({...e,playing:!1})))},n=()=>{o((e=>({...e,playing:!1,completed:!0})))};return g.on(H.LW.DURATION_CHANGED,e),g.on(H.LW.MUTED_CHANGED,t),g.on(H.LW.PLAYING,a),g.on(H.LW.PAUSED,r),g.on(H.LW.TRACK_ENDED,n),()=>{g.removeListener(H.LW.DURATION_CHANGED,e),g.removeListener(H.LW.MUTED_CHANGED,t),g.removeListener(H.LW.PLAYING,a),g.removeListener(H.LW.PAUSED,r),g.removeListener(H.LW.TRACK_ENDED,n)}}),[g,p]),{...m,type:u,previewState:i}};const Oe=new(a(24792).l)("feedBaselineLookup","query","a950fb7c4ecdcaf2aad2f3ca9ee9c3aa4b9c43c97e1d07d05148c4d355bea7fc",null),Fe=(e,t)=>(0,we.I)(Oe,e,t);var He=a(54852),We=a(27440),Ve=a(82483),Ge=a(38720);const ze=(0,r.createContext)(new Map);function Ye(e,t){const a=new Map;for(const t of e)a.set(t,null);return t&&t.lookup.forEach((e=>{if("AlbumResponseWrapper"===e.__typename||"PlaylistResponseWrapper"===e.__typename||"EpisodeOrChapterResponseWrapper"===e.__typename)switch(e.data.__typename){case"Album":case"Playlist":{const t=(e.data.previewItems?.items||[]).reduce(((e,t)=>{if("TrackResponseWrapper"!==t.__typename)return e;if("Track"!==t.data.__typename)return e;const a=(0,Ge.g)(t.data.albumOfTrack?.coverArt?.sources||[])?.url||null,r=t.data.albumOfTrack?.coverArt?.extractedColors?.colorDark?.hex||null,n=t.data.previews?.audioPreviews.items?.[0];return e.push({name:t.data.name,uri:t.data.uri,canvas:t.data.canvas?{uri:t.data.canvas.uri,type:t.data.canvas.type,fileId:t.data.canvas.fileId,url:t.data.canvas.url,thumbnailUrl:(0,Ge.g)(t.data.canvas.thumbnail?.sources)?.url}:null,background:{color:r,imageUrl:a},audio:n?{url:n.url,startOffsetMs:0,endOffsetMs:0,transcriptUrl:null}:null,video:null}),e}),[]);a.set(e._uri,t);break}case"Episode":{const{audioPreview:t,videoPreview:r}=e.data.previewPlayback??{};a.set(e._uri,[{name:e.data.name,uri:e.data.uri,canvas:null,background:null,audio:t?.cdnUrl?{url:t.cdnUrl,startOffsetMs:t.offset?.startTime?.totalMilliseconds??0,endOffsetMs:t.offset?.endTime?.totalMilliseconds??0,transcriptUrl:t.transcriptUrl}:null,video:r?{fileId:r.fileId,thumbnailUrl:"ImageV2"===r.placeholderImage?.data.__typename?(0,Ge.g)(r.placeholderImage?.data.sources)?.url??null:null,startOffsetMs:r.offset?.startTime?.totalMilliseconds??0,endOffsetMs:r.offset?.endTime?.totalMilliseconds??0,transcriptUrl:r.transcriptUrl}:null}]);break}}})),a}var Qe=a(39899),Ke=a(7840),$e=a(37833),Ze=a(35418),qe=a(29318),Je=a(65927),Xe=a(5141),et=a(42331);let tt=function(e){return e.VideoEpisode="VideoEpisode",e.Carousel="Carousel",e.AudioEpisode="AudioEpisode",e}({});const at=({layout:e,onClick:t=()=>{},onPlay:a=()=>{},onContextMenu:n=()=>{},uri:s,headerText:i,renderFooter:o,isPlayable:l,isAddable:c,renderSubtitle:d,className:u,testId:m,ariaPlayLabel:p,ariaPauseLabel:g,index:h,requestId:f,images:v,parentImages:x,color:C,dragMimeType:b,onMoreButtonClick:k,menu:w,audioPreviewInLoop:R,logCardImpressions:T})=>{const E=(0,r.useRef)(null),{previewItems:_,currentPreviewItemIndex:M,setCurrentPreviewItemIndex:D,currentPreviewItem:B}=(e=>{const t=(0,y.NC)(de.o5i),[a,n]=(0,r.useState)(0),s=(0,r.useContext)(ze),i=!s.has(e),{data:o}=Fe({uris:[e]},{enabled:i}),l=(0,r.useMemo)((()=>{let a=[];return a=s.has(e)?s.get(e)??[]:Ye([e],o).get(e)??[],t?a:a.slice(0,1)}),[o,t,s,e]);return{previewItems:l,currentPreviewItem:l[a]??null,currentPreviewItemIndex:a,setCurrentPreviewItemIndex:n}})(s),{dynamicColors:U}=(0,se.q)(),O=U?.higherContrast.backgroundBase.toCSS(ne.a.RGBA)??C,F=`BigCard_${s.replace("spotify:","").replace(/:/g,"_")}`,{isPlaying:H,isActive:W,togglePlay:V}=(0,me.P)({uri:s},{featureIdentifier:"home"}),G=e===tt.AudioEpisode,{durationMs:z,isListeningToPreview:Y,togglePreview:Q,pausePreview:$,overture:Z,userHasCompletedPreview:q,previewState:J,isPreviewAvailable:X,playPreview:ee,transcriptUrl:te,shiftTranscriptByOffsetFromURL:ae,onPointerEnter:oe,onPointerLeave:le,analyser:ce}=Ue({uri:s,currentPreviewItem:B,hasAudioWave:G,loop:R,playerContainerClass:F}),ue=(0,Ke.g)(),pe=(0,Ze.W)({type:"link",uri:s}),{spec:ge,logger:he,UBIFragment:fe}=(0,Xe.r)(I.y,{data:{uri:s,position:h,reason:f??""}}),ve=(0,Je.t)(ge),{draggable:ye,onDragStart:xe}=(0,$e.P)({itemUris:[s],itemMimeTypes:b?[b]:[],dragLabelText:i}),Ce=(0,r.useCallback)((()=>{let e=ge.cardPlayButtonFactory().hitPause({itemToBePaused:s});H||(e=W?ge.cardPlayButtonFactory().hitResume({itemToBeResumed:s}):ge.cardPlayButtonFactory().hitPlay({itemToBePlayed:s}));const t=he.logInteraction(e);a(s,t)?.preventDefault||(V({loggingParams:t}),$())}),[ge,s,H,he,a,V,W,$]),be=(0,r.useCallback)((()=>{let e=ge.cardPlayButtonFactory().hitPause({itemToBePaused:s});H||(e=W?ge.cardPlayButtonFactory().hitResume({itemToBeResumed:s}):ge.cardPlayButtonFactory().hitPlay({itemToBePlayed:s}));const t=he.logInteraction(e);a(s,t),V({loggingParams:t})}),[W,H,he,a,ge,V,s]),je=(0,r.useCallback)((()=>{const e=ge.hitUiNavigate({destination:s});he.logInteraction(e)}),[he,ge,s]),Pe=(0,r.useCallback)((()=>{t(s),je()}),[t,s,je]),Ie=(0,L.o_h)(s)?.toURLPath(!0)??"",Le=pe?(0,et.hF)(Ie):Ie,[ke,we]=(0,r.useState)(!1),Ne=e===tt.VideoEpisode||e===tt.Carousel,Ae={...(0,qe.w)({contrast:"higherContrast"}),"--background-color":O||"","--background-base-high-contrast":U?.highContrast.backgroundBase.toCSS(ne.a.RGBA)||"","--higher-contrast-text-base-color":U?.higherContrast.textSubdued.toCSS(ne.a.RGBA)||""};return(0,S.jsx)(fe,{spec:ge,children:(0,S.jsx)(Qe.E,{uri:s,trigger:Qe.l.OnMouseDown,children:(0,S.jsxs)(P.a,{variant:"naked",onClick:()=>{Pe(),ue(Le)},ref:E,className:j()(N.card,u,"encore-medium-devices-theme",{[N.isPlayingContext]:H,[N.isListeningToPreview]:Y,[N.isExpandedFooter]:ke,[N.withHeaderImage]:Ne}),style:Ae,"data-testid":m,draggable:ye,onDragStart:xe,onContextMenu:n,onPointerEnter:oe,onPointerLeave:le,children:[(0,S.jsx)("div",{"aria-hidden":!0,"data-uri":s,className:N.fillSpaceAbsolute,ref:T?ve:null}),e===tt.Carousel?(0,S.jsx)(_e,{cardRef:E,isListeningToPreview:Y,playPreview:ee,playerContainerClass:F,previewItems:_,setCurrentPreviewItemIndex:D,currentPreviewItemIndex:M}):null,(0,S.jsx)(ie,{carouselLayout:e===tt.Carousel,withFooterOverlay:Boolean(o)}),(0,S.jsx)(re,{uri:s,text:i,images:v,imageColor:O,renderSubtitle:d,cardRef:E}),e===tt.VideoEpisode&&B?.video?(0,S.jsx)(Be,{userHasCompletedPreview:q,handleContinuePlayingButtonClick:be,overture:Z,transcriptUrl:te,shiftTranscriptByOffsetFromURL:ae,uri:s,playerContainerClass:F,handleCardClick:Pe,entityUrl:Le,fileId:B.video.fileId,poster:B.video.thumbnailUrl,startOffsetMs:B.video.startOffsetMs,endOffsetMs:B.video.endOffsetMs}):null,e===tt.AudioEpisode?(0,S.jsx)(Se,{hasAudioWave:G,analyser:ce,userHasCompletedPreview:q,handleContinuePlayingButtonClick:be,overture:Z,playerContainerClass:F,transcriptUrl:te,shiftTranscriptByOffsetFromURL:ae,uri:s,previewState:J,parentImages:x,images:v,imageColor:O,handleCardClick:Pe,entityUrl:Le}):null,(0,S.jsxs)("footer",{className:N.footer,children:[(0,S.jsx)(A,{isExpandedFooter:ke,setIsExpandedFooter:we,children:o?.()}),(0,S.jsx)(K,{uri:s,overture:Z,isPreviewAvailable:X,isPlayingContext:H,isListeningToPreview:Y,durationMs:z,togglePreview:Q,userHasCompletedPreview:q,currentPreviewItem:B,isAddable:c,isPlayable:l,ariaPlayLabel:p,ariaPauseLabel:g,onMoreButtonClick:k,handlePlayButtonClick:Ce,menu:w})]})]})})})};var rt=a(11786),nt=a(43294),st=a(89596),it=a(28957),ot=a(56952),lt=a(60224),ct=a(37924),dt=a(17299),ut=a(22690),mt=a(26650),pt=a(78249),gt=a(41905),ht=a(75170),ft=a(71840),vt=a(16659),yt=a(74458),xt=a(92375),Ct=a(81637),bt=a(18599),jt=a(62055),Pt=a(12101),It=a(68817),Lt=a(81481),kt=a(35963),wt=a(1855),Nt=a(91563),St=a(23953);const At="SsbbQFeJun2Ts_EIktpr",Rt="c9BGAQRNNsdwX3UTMr6I",Tt="uywGjRMxNHg8g1bYlRCw",Et="lx7nfGbsUkI_2pC6caw9",_t="xrnpBm515hmJJbcxfudp",Mt="zEXW4c9SPtH2KBs6ziag",Dt="bAtY2R6yehmYQinDdUo8",Bt="kKlHj6lIKU67CC1irRYP",Ut="dwXI_X_KOCLVx2Ki1h9R",Ot="vK47ZfLVzR4LfUvpNy5z",Ft="CZnhsxKzhvTg17LEWR7Y";function Ht({data:e,index:t,shelfIndex:a}){const r=t,o=(0,mt.f0)(e),l=(0,mt.o8)(e),c=(0,mt.Uk)(e)??null,d=(0,y.NC)(Lt.BC),u=(0,n.wA)(),m=(0,y.NC)(de.x8);let p;switch(e.__typename){case"Album":p=(0,S.jsx)(st.h,{uri:e.uri});break;case"Audiobook":p=(0,S.jsx)(it.p,{uri:e.uri});break;case"Episode":p=(0,S.jsx)(ot.b,{uri:e.uri});break;case"Playlist":p=(0,S.jsx)(lt.W,{uri:e.uri});break;default:return(0,Nt.k)(e),null}switch(e.__typename){case"Album":return(0,S.jsx)(nt.h,{menu:p,children:(0,S.jsx)(at,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:o,color:c,isPlayable:!0,isAddable:!0,audioPreviewInLoop:!0,layout:tt.Carousel,renderFooter:()=>null,renderSubtitle:()=>(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(rt.t,{children:e.albumType===Ct._m.Single?x.Ru.get("single"):x.Ru.get("card.tag.album")}),(0,S.jsx)("div",{className:Ft,children:(0,bt.K)(e.artists).map(((e,t)=>[t>0&&x.Ru.getSeparator(),(0,S.jsx)(q.N,{to:e.uri,stopPropagation:!0,children:(0,S.jsx)(s.E,{variant:"bodySmall",className:Bt,children:e.name})},e.uri)]))})]}),menu:p,logCardImpressions:d})},r);case"Audiobook":{const n=(0,jt.e)(e.accessInfo),l=!!n?()=>(u((0,C._3)(n)),{preventDefault:!0}):void 0;return(0,S.jsx)(se.d,{dynamicColors:(0,vt.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet),children:(0,S.jsx)(nt.h,{menu:p,children:(0,S.jsx)(at,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:o,color:c,isAddable:!0,isPlayable:!0,audioPreviewInLoop:!1,layout:tt.AudioEpisode,onPlay:l,renderFooter:()=>{const t=e.rating?.averageRating,a=e.accessInfo?.signifier?.text,r=(e.description||"").replace(/<[^>]*>?/gm,""),n=(0,It.JO)(e.publishDate),o=n?new Date(n):void 0;return(0,S.jsxs)(S.Fragment,{children:[a&&(0,S.jsx)(s.E,{variant:"bodySmall",as:"div",semanticColor:"textBrightAccent",children:a}),o&&!isNaN(o.getTime())&&(0,S.jsx)(rt.t,{semanticColor:"textBase",className:Ot,children:(0,St.gD)(o)}),e.audiobookDuration&&!isNaN(e.audiobookDuration.totalMilliseconds)&&(0,S.jsx)(rt.t,{semanticColor:"textBase",className:Ot,children:(0,S.jsx)(ft.d,{durationMs:e.audiobookDuration.totalMilliseconds})}),!0===t?.showAverage&&void 0!==t.average&&(0,S.jsxs)(rt.t,{semanticColor:"textBase",className:Ot,children:[(0,S.jsx)(i.j,{size:"xsmall"})," ",x.Ru.formatNumber(t.average,{maximumFractionDigits:1})]}),(0,S.jsx)("span",{children:(0,S.jsx)(ht.N,{source:r??"",LinkComponent:q.N})})]})},renderSubtitle:()=>(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(rt.t,{children:x.Ru.get("card.tag.audiobook")}),(0,S.jsx)("span",{children:e.authorsV2?.[0]?.name})]}),menu:p,logCardImpressions:d})},r)})}case"Episode":{const n=e.mediaTypes?.includes(kt.C.Video),i=n&&m;return(0,S.jsx)(se.d,{dynamicColors:(0,vt.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet),children:(0,S.jsx)(nt.h,{menu:p,children:(0,S.jsx)(at,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:o,parentImages:l,color:c,isAddable:!0,isPlayable:!0,audioPreviewInLoop:!1,layout:i?tt.VideoEpisode:tt.AudioEpisode,renderSubtitle:()=>(0,S.jsxs)(S.Fragment,{children:[(0,Pt.V)(e.contentRating)&&(0,S.jsx)(pt.U,{}),n?(0,S.jsx)(ut.T,{className:Ut}):(0,S.jsx)(rt.t,{children:x.Ru.get("card.tag.episode")}),(0,S.jsx)("div",{className:Ft,children:"Podcast"===e.podcastV2.data.__typename?(0,S.jsx)(q.N,{to:e.podcastV2.data.uri,stopPropagation:!0,children:(0,S.jsx)(s.E,{variant:"bodySmall",className:Dt,children:e.podcastV2.data.name})}):""})]}),renderFooter:()=>{const t=(0,It.JO)(e.releaseDate),a=t?new Date(t):void 0;return(0,S.jsxs)(S.Fragment,{children:[a&&!isNaN(a.getTime())&&(0,S.jsx)(rt.t,{semanticColor:"textBase",className:Ot,children:(0,St.gD)(a)}),!isNaN(e.duration.totalMilliseconds)&&(0,S.jsx)(rt.t,{semanticColor:"textBase",className:Ot,children:(0,S.jsx)(ft.d,{durationMs:e.duration.totalMilliseconds})}),(0,S.jsx)("span",{children:(0,S.jsx)(ht.N,{source:e.description??"",LinkComponent:q.N})})]})},menu:p,logCardImpressions:d})},r)})}case"Playlist":return(0,S.jsx)(nt.h,{menu:p,children:(0,S.jsx)(at,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:o,color:c,isAddable:!0,audioPreviewInLoop:!0,layout:tt.Carousel,isPlayable:!(0,yt.p)(e?.attributes),renderSubtitle:()=>(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(rt.t,{children:x.Ru.get("card.tag.playlist")}),"User"===e.ownerV2.data.__typename&&(0,S.jsx)("div",{className:Ft,children:e.ownerV2.data.name})]}),renderFooter:()=>(0,S.jsx)(ht.N,{source:e.description??"",LinkComponent:q.N,onLinkClick:e=>{e.stopPropagation()}}),menu:p,logCardImpressions:d})},r);default:return(0,Nt.k)(e),null}}const Wt=({icon:e})=>{switch(e){case"trending":return(0,S.jsx)(o.L,{size:"small"});case"briefcase":return(0,S.jsx)(l.o,{size:"small"});case"enhance":return(0,S.jsx)(c.M,{size:"small"});case"headphones":return(0,S.jsx)(d.r,{size:"small"});case"add-to-playlist":return(0,S.jsx)(u.u,{size:"small"});case"album":return(0,S.jsx)(m.I,{size:"small"});case"edit":return(0,S.jsx)(p.G,{size:"small"});case"lab":return(0,S.jsx)(g.X,{size:"small"});case"light-bulb":return(0,S.jsx)(h.N,{size:"small"});case"preview":return(0,S.jsx)(f.W,{size:"small"});case"star":return(0,S.jsx)(v.a,{size:"small"});default:return null}},Vt=({title:e,icon:t})=>(0,S.jsxs)("header",{className:_t,children:[e&&t&&(0,S.jsx)(Wt,{icon:t}),e&&(0,S.jsx)(s.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Mt,children:e})]});const Gt=({item:e,index:t,shelfIndex:a})=>{const{sectionUri:r}=e,{spec:n}=(0,dt.w)({seeAllUri:"",index:t,id:r||""}),s=(0,Je.t)(n);return(0,Ve.vd)(e.content)&&function(e){switch(e.__typename){case"Album":case"Audiobook":case"Episode":case"Playlist":return!0;default:return!1}}(e.content.data)?(0,S.jsx)(xt.r,{spec:n,children:(0,S.jsx)("div",{className:Rt,ref:s,children:(0,S.jsx)("div",{className:Tt,children:(0,S.jsxs)("div",{className:Et,children:[(0,S.jsx)(Vt,{icon:e.recsplanation?.iconName,title:e.recsplanation.title?.transformedLabel}),(0,S.jsx)(Ht,{data:e.content.data,index:t,shelfIndex:a})]})})},t)}):null},zt=({section:e,index:t})=>{const a=e.items.map(((e,a)=>(0,S.jsx)(Gt,{item:e,index:a,shelfIndex:t},a))).filter(wt.P);return 0===a.length?null:(0,S.jsx)(gt.x,{config:(0,ee.s1)(ee.yV.HOME_FEED_BASELINE),children:(0,S.jsx)(ct.$,{className:At,total:a.length,rowTruncationMethod:"floor",children:a})})};var Yt=a(71012),Qt=a(45131),Kt=a(79825),$t=a(69154);var Zt=a(2929);var qt=a(46504),Jt=a(99150),Xt=a(28854);const ea=()=>{const e=(t=(0,qt.J)(),!(0,Zt.w2)(navigator.userAgent)&&(1===t.length||1===window.navigation?.entries().length));var t;const a=(0,Jt.c)()&&e,[n,s]=(0,r.useState)(a?(()=>{try{const e=window.innerHeight-Kt.uC-Kt.fO;return Math.ceil(e/ct.Y)}catch(e){return e instanceof Error&&(0,$t.fE)({metric_type:Qt.MetricTypes.COUNTER,tags:{message:e.message,source:"deriveLimit"},what:"dwp-lazy-shelves-error",value:1}),null}})():null),i=(e=>(0,r.useCallback)((()=>{try{e()}catch(e){e instanceof Error&&(0,$t.fE)({metric_type:Qt.MetricTypes.COUNTER,tags:{message:e.message,source:"useHandleTrigger"},what:"dwp-lazy-shelves-error",value:1})}}),[e]))((0,r.useCallback)((()=>{n&&s(null)}),[n,s]));return((e,t)=>{(0,Xt.i)((()=>t("scroll")),{disabled:null===e})})(n,i),((e,t)=>{(0,r.useEffect)((()=>{if(null===e)return;const a=setTimeout((()=>t("timeout")),3e3);return()=>{clearTimeout(a)}}),[e,t])})(n,i),n};var ta=a(59993),aa=a(6306),ra=a(36907),na=a(61825),sa=a(28590),ia=a(90767);const oa="HSKymkkzQpWHDTXXLfF2",la="PQIdaHYqHjxvLzCDhUhU",ca="RcS2Iv3_A8J74iRls6dQ",da="_AsHr9vGM_wpBByNLrFF",ua="bQlGUer3b2kxTJv21cDN",ma="aYopGHwdlhTTV9z1Yr7Q",pa="hVKpY36lz0bOjOMywP5y",ga=({task:e})=>{const{performTask:t,completeTask:a}=(0,ia.V)();return(0,S.jsxs)("div",{className:oa,style:{"--onboarding-card-color-dark":`${e.cardColorDark}`},children:[(0,S.jsx)("div",{className:la,style:{"--onboarding-card-color-light":`${e.cardColorLight}`}}),(0,S.jsxs)("div",{className:ca,children:[(0,S.jsxs)("div",{className:da,children:[(0,S.jsx)(sa._,{as:"p",className:ma,variant:"titleMedium",semanticColor:"textBase",fontWeight:"extra-bold",fontWidth:"narrow",children:e.title}),(0,S.jsx)(s.E,{variant:"bodyMedium",className:pa,children:e.description})]}),(0,S.jsxs)("div",{className:ua,children:[(0,S.jsx)(xe.$,{size:"small",onClick:()=>t(e.id),children:e.action}),(0,S.jsx)(k.H,{size:"small",onClick:()=>a(e.id),children:(0,ra.v)("Dismiss")})]})]})]})},ha="EuMit9oeqgOC19SB3Qnw",fa="cGiB6exxRHfvZMZdXpF0",va="eVD7tmFHn2swni7x2NKW",ya=()=>{const{tasks:e}=(0,ia.V)(),t=(0,r.useMemo)((()=>e.filter((e=>!e.completed)).map(((e,t)=>(0,S.jsx)(ga,{title:e.title,description:e.description,task:e},`onboarding-spotlight-card-${t}`)))),[e]),[a,n]=(0,r.useState)(t[0]),[s,i]=(0,r.useState)(0),o=(0,r.useCallback)((()=>{i(s+1),n(t[s+1])}),[s,t]),l=(0,r.useCallback)((()=>{i(s-1),n(t[s-1])}),[s,t]);(0,r.useEffect)((()=>{t.length<=s?(n(t[t.length-1]),i(t.length-1)):n(t[s])}),[s,t]);const c=(0,S.jsxs)("div",{className:va,children:[(0,S.jsx)(Z.Zp,{label:x.Ru.get("carousel.left"),children:(0,S.jsx)(k.H,{size:"small",iconOnly:ta.g,"aria-label":x.Ru.get("carousel.left"),disabled:0===s,onClick:l})}),(0,S.jsx)(Z.Zp,{label:x.Ru.get("carousel.right"),children:(0,S.jsx)(k.H,{size:"small",iconOnly:aa.V,"aria-label":x.Ru.get("carousel.right"),disabled:s===t.length-1,onClick:o})})]});return t.length<1?null:(0,S.jsxs)("section",{className:j()(fa,ha),"data-shelf-collapsable":!0,children:[(0,S.jsx)(na.k,{title:(0,ra.v)("Get started using Spotify"),trailing:c}),a]})};var xa=a(22550);const Ca=({greeting:e,container:t,enableFeedBaseline:a})=>{const n=(0,xa.s)(),s=(0,r.useMemo)((()=>((e,t,a=!1)=>{const r=[];a&&r.push({localOverrideTypename:"DesktopOnboardingHomeShelf"});let n=[],s=null;const i=e.sections.items.reduce(((e,a)=>{switch(a.data?.__typename){case"HomeFeedBaselineSectionData":if(!t)break;null===s&&(s={uri:`spotify:home:feed-baseline-unified-shelf:${e.length}`,items:[]},e.push({localOverrideTypename:"HomeFeedBaselineUnifiedShelf",localItem:s})),a.sectionItems.items.forEach((e=>{s&&s.items.push({uri:e.uri,sectionUri:a.uri,content:e.content,recsplanation:a.data})}));break;default:s=null,e.push({localOverrideTypename:!1,item:a})}return e}),[]);return n=function(e){const t=e.sections.items;return t.length>0&&"HomeShortsSectionData"===t[0].data?.__typename}(e)?[i[0],...r,...i.slice(1)]:[...r,...i],n})(t,a,n)),[t,a,n]),i=ea(),o=i?s.slice(0,i):s,l=function(e,t){const a=(0,r.useMemo)((()=>t?e.sections.items.reduce(((e,t)=>("HomeFeedBaselineSectionData"===t.data?.__typename&&(0,He.M)(t,t.data).sectionItems.items.forEach((t=>{const{content:a}=t;if((0,Ve.vd)(a)){const{data:t}=a;"GenericError"!==t.__typename&&"NotFound"!==t.__typename&&"RestrictedContent"!==t.__typename&&"DiscoveryFeed"!==t.__typename&&e.push(t.uri)}})),e)),[]):[]),[e,t]),{data:n}=Fe({uris:a},{enabled:a.length>0,gcTime:We.gO,staleTime:We.jl});return(0,r.useMemo)((()=>Ye(a,n)),[n,a])}(t,a);return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(ze.Provider,{value:l,children:o.map(((t,a)=>{switch(t.localOverrideTypename){case"HomeFeedBaselineUnifiedShelf":return(0,S.jsx)(zt,{section:t.localItem,index:a},`${a}-${t.localItem.uri}`);case"DesktopOnboardingHomeShelf":return(0,S.jsx)(ya,{},`${a}-onboarding-spotlight`);default:return(0,S.jsx)(Yt.Q,{greeting:e,section:t.item,index:a},`${a}-${t.item.uri}`)}}))})})}},43908:(e,t,a)=>{a.d(t,{f:()=>c});var r=a(75044),n=a(1704),s=a(27440),i=a(29825),o=a(55405),l=a(29471);const c=()=>{const e=(0,i.f)(),t=(0,r.NC)(o.wWq),a={timeZone:(0,s.Ff)(),sp_t:(0,l.v8)("sp_t")??"",facet:e,sectionItemsLimit:t??10},c={gcTime:s.gO,staleTime:s.jl};return(0,n.B8)(a,c)}},53521:(e,t,a)=>{a.d(t,{b:()=>i});var r=a(89982),n=a(54642),s=a(20437);const i=e=>{const t=(0,n.W)();(0,s.w)({refOrElement:e,observeOnly:"width",observeOnMount:!0,onResize:()=>{const a=e.current?.querySelectorAll(":scope > [data-shelf='carousel']");if(a?.length)for(const e of a)if(e instanceof HTMLElement){(0,r.X)(e,t)?e.removeAttribute("data-shelf-notatedge"):e.setAttribute("data-shelf-notatedge","true")}}})}},55250:(e,t,a)=>{a.d(t,{b:()=>i});var r=a(96684),n=a(35940),s=a(86070);const i=()=>(0,s.jsx)("div",{className:n.A.coverContainer,children:(0,s.jsx)(r.P,{iconSize:"xxlarge",className:n.A.coverIcon})})},71012:(e,t,a)=>{a.d(t,{Q:()=>la});var r=a(30758),n=a(75044),s=a(43808),i=a(54852),o=a(53177),l=a(97500),c=a.n(l),d=a(77083),u=a(75773),m=a(60378),p=a(13842),g=(a(99119),a(17640)),h=a(52580),f=a(2565),v=a(52110),y=a(80090),x=a(31592),C=a(37220),b=a(38193),j=a(67843);let P=function(e){return e.Clicked="clicked",e.Viewed="viewed",e}({}),I=function(e){return e.Card="card",e.Heart="heart",e.Play="play",e.ThreeDots="three_dots",e}({});const L=e=>{const t=(0,j.vh)(),{homePromotionsTrackingMetadata:a}=(0,b.r)(),{id:n,creativeId:s,lineitemId:i,playbackId:o,productName:l}=a?.[e]??{};return(0,r.useCallback)((({reason:e,type:a=P.Clicked})=>{const r=(0,C.A)({ad_id:n,creative_id:s,event:a,event_reason:e,lineitem_id:i,product_name:l,slot:l}),c={...r,data:{...r.data,playback_id:o}};t.send(c)}),[t,n,s,i,o,l])};var k=a(9807);const w="zY64dUtDiPaHVSF0rgiv",N="D95gFpWgTnJhJVmom2RM",S="DRLBRcFh2FWiD2_nQXlj",A="j0pfmbp4ZDuTXzZaMzPR",R="jD__bD8Dee3zEgB0Axjc",T="J1NxTZftpbEbhXwcZjZO",E="U84UYjEwZ6o7ybM8SVMB",_="nxaFA6BFTr4Hur8Z6mtl",M="jRGACFaRvB65046UBzXk",D="tLetM3x5c63716GFboHy",B="jtBk8q42AJ5GJ5ClauR3",U="ylVLkB04w9P8BDrgBP16",O="LNHo_9MkGUjZQgSxo4Ty",F="iu2bkL76Q_XGDNgj0oK9";var H=a(86070);const W=({onNotInterested:e,target:t})=>{const[a,n]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),o=L(t),l=(0,r.useMemo)((()=>c()(T,{[S]:a,[A]:s})),[a,s]);return t&&(0,H.jsx)(v.b,{menu:(0,H.jsx)(y.W,{children:(0,H.jsx)(x.D,{className:c()(R,k.A.menuItemButton),leadingIcon:(0,H.jsx)(h.P,{semanticColor:"textSubdued",size:"small"}),onClick:e,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),role:"menuitem",children:g.Ru.get("promotions.context-menu.not-interested")})}),onHide:()=>i(!1),onShow:()=>i(!0),children:(0,H.jsx)(f.e,{size:f.M.xs,label:g.Ru.get("show_more"),className:l,onClick:()=>o({reason:I.ThreeDots}),placement:"bottom"})})};var V=a(32312);const G=e=>{const{homePromotionsTrackingMetadata:t,responseIds:a}=(0,b.r)(),n=(0,r.useMemo)((()=>{if(void 0!==t&&e in t){return t[e].events.reduce(((e,t)=>(e[t.event]=t.urls,e)),{})}}),[t,e]);return{responseId:a?.["/home"]?.continuum,trackingMetadata:n}},z=e=>{(new Image).src=e},Y=e=>{const{trackingMetadata:t}=G(e);return{triggerClickedEvent:(0,r.useCallback)(((e=!1)=>{e||t?.clicked?.forEach((e=>{z(e)}))}),[t]),triggerImpressionEvent:(0,r.useCallback)((()=>{t?.viewed?.forEach((e=>z(e)))}),[t])}};var Q=a(36980),K=a(71468);var $=a(85387),Z=a(12599);var q=a(18611),J=a(57863),X=a(59694);const ee=()=>{const e=(0,X.A)();return(0,r.useCallback)((async({uri:t,reason:a="local"})=>e.build().withHost(J.L1).withMethod("POST").withPath(`feedback/v1/feedback/home-promotion/dislike?uri=${encodeURIComponent(t)}&reason=${a}`).withEndpointIdentifier("feedback/v1/feedback/home-promotion/dislike").withoutMarket().send()),[e])};var te=a(99565);const ae=e=>(0,te.x)(`home-native-ads-not-interested:${e}`,!1);var re=a(42668);var ne=a(58089),se=a(79483),ie=a(38720);const oe=["PLAY","ADD_TO_LIBRARY","NOT_INTERESTED"],le=({nativeAd:e,spec:t})=>{const{albumType:a,artists:n,coverArt:s,name:i,uri:o}=e.content.data,l=L(o),{triggerImpressionEvent:c}=Y(o),d=(0,ne.s)(),h=(0,r.useMemo)((()=>({logger:d,spec:t.nativeAdsItemFactory(),target:o})),[d,t,o]),{AddToLibraryIcon:f,handleAddToLibrary:v,isAddedToLibrary:y}=(({logger:e,spec:t,target:a})=>{const n=L(a),{triggerClickedEvent:s}=Y(a),[i,o]=(0,K.A)(a),{Icon:l,setState:c}=(0,Q.Q)(i?V.t.CURATED:V.t.UNCURATED,V.A);return{AddToLibraryIcon:l,handleAddToLibrary:(0,r.useCallback)((()=>{const r=t.saveButtonFactory();a&&(s(i),e.logInteraction(i?r.hitRemoveLike({itemNoLongerLiked:a}):r.hitLike({itemToBeLiked:a})),c(i?V.t.UNCURATED:V.t.CURATED),n({reason:I.Heart}),o(!i))}),[i,n,e,c,o,t,a,s]),isAddedToLibrary:i}})(h),{destination:x,handleNavigation:C}=(({logger:e,spec:t,target:a})=>{const n=L(a),{triggerClickedEvent:s}=Y(a),i=(0,$.Zp)(),o=(0,r.useMemo)((()=>(0,Z.o_h)(a)?.toURLPath()??""),[a]),l=(0,r.useCallback)(((a,r)=>{r?.preventDefault(),s(),e.logInteraction(t.hitUiNavigate({destination:o})),n({reason:I.Card}),i(o)}),[o,n,e,i,t,s]);return{destination:o,handleNavigation:l}})(h),{handleNotInterested:b}=(({logger:e,spec:t,target:a})=>{const[n,s]=ae(a),i=ee(),o=(0,r.useCallback)((()=>{e.logInteraction(t.notInterestedButtonFactory().hitDislike({itemToBeDisliked:a})),a&&s(!0);try{i({uri:a})}catch(e){(0,q.Cp)(e,{level:"warning"})}}),[e,i,s,t,a]);return{isNotInterested:!!a&&n,handleNotInterested:o}})(h),{handlePlay:j,isPlaying:k}=(({logger:e,spec:t,target:a})=>{const n=L(a),{triggerClickedEvent:s}=Y(a),{isActive:i,isPlaying:o,togglePlay:l}=(0,re.P)({uri:a},{featureIdentifier:"home_native_ad"});return{handlePlay:(0,r.useCallback)((()=>{const r=t.playButtonFactory();s(o),o?e.logInteraction(r.hitPause({itemToBePaused:a})):i?e.logInteraction(r.hitResume({itemToBeResumed:a})):e.logInteraction(r.hitPlay({itemToBePlayed:a})),n({reason:I.Play}),l()}),[i,o,n,e,t,a,l,s]),isPlaying:o}})(h),w=(0,r.useMemo)((()=>oe.map((e=>({target:o,type:e})))),[o]),S=(0,r.useMemo)((()=>(0,ie.g)(s?.sources)?.url),[s]),A=(0,r.useMemo)((()=>s?.sources.map((({url:e,width:t})=>`${e} ${t}w`)).join(", ")),[s]),R=(0,r.useMemo)((()=>`${(0,se.C)(a)} • ${n.items.map((({profile:e})=>e.name)).join(g.Ru.getSeparator())}`),[a,n]),{ref:T}=(0,u.Wx)({onChange:e=>{e&&(c(),d.logImpression(t.impression()),l({type:P.Viewed}))},triggerOnce:!0});return(0,H.jsx)(p.M,{actions:w,addToLibraryButtonLabel:g.Ru.get("save_to_your_library"),addToLibraryIcon:f,body:R,cardRef:T,className:N,contextMenu:(0,H.jsx)(W,{onNotInterested:b,target:o}),href:x,isExternalLinkTargetFn:()=>!1,isInLibrary:y,isPlaying:k,mediaSlotImageFallbackIcon:m.I,mediaSlotImageSrc:S,mediaSlotImageSrcSet:A,onAddToLibrary:v,onNavigate:C,onPlay:j,onShare:()=>{},pauseButtonLabel:g.Ru.get("playlist.a11y.pause",i),playButtonLabel:g.Ru.get("playlist.a11y.play",i),removeFromLibraryButtonLabel:g.Ru.get("remove_from_your_library"),shareButtonLabel:"",title:i})};var ce=a(62411),de=a(46462),ue=a(78),me=a(61825),pe=a(76151),ge=a(97182);const he="sponsored-recommendation-frame",fe=({isOpen:e,onClose:t})=>(0,H.jsxs)(ge.A,{animated:!0,animation:{modal:{base:M,afterOpen:D,beforeClose:B}},className:U,isOpen:e,onRequestClose:t,children:[(0,H.jsx)("iframe",{className:O,"data-testid":he,id:he,name:he,sandbox:"allow-scripts allow-same-origin",src:"https://sponsored-recommendations.spotify.com/desktop",title:g.Ru.get("context-menu.about-recommendations")}),(0,H.jsx)(de.H,{"aria-label":g.Ru.get("close_button_action"),className:F,iconOnly:pe.M,onClick:t,semanticColor:"textBase",size:"medium"})]});var ve=a(7397);const ye=({spec:e,subtitle:t,title:a})=>{const n=(0,ne.s)(),[s,i]=(0,r.useState)(!1),{productState:o}=(0,ce.d4)(ve.Ht),l="premium"===o?.product||!!{}.STORYBOOK,c=(0,r.useCallback)((()=>{n.logInteraction(e.nativeAdsShelfHeaderFactory().sponsoredRecommendationToolTipFactory().hitShowTooltip()),i(!0)}),[n,i,e]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(me.k,{title:a?.transformedLabel??"",subtitle:(0,H.jsxs)("span",{className:E,children:[t?.transformedLabel??"",l&&(0,H.jsx)(de.H,{"aria-label":g.Ru.get("context-menu.about-recommendations"),className:_,"data-testid":"sponsored-recommendation-modal-trigger",iconOnly:ue.N,onClick:c,semanticColor:"textSubdued",size:"small"})]})}),(0,H.jsx)(fe,{isOpen:s,onClose:()=>i(!1)})]})};var xe=a(5141),Ce=a(77395);const be=({nativeAd:e,section:t,spec:a})=>{const[r]=ae(e.content.data.uri);return!r&&(0,H.jsxs)("section",{className:c()(w,Ce.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,H.jsx)(ye,{spec:a,...t.data}),(0,H.jsx)(le,{nativeAd:e,spec:a})]})},je=(0,o.mc)((({index:e,section:t})=>{const a=(0,r.useMemo)((()=>t.sectionItems.items.find((e=>"AlbumResponseWrapper"===e.content?.__typename&&"Album"===e.content.data?.__typename))),[t]),{spec:n}=(0,xe.r)(d.U,{data:{uri:t.uri,position:e,identifier:t.uri,reason:t.data.title?.transformedLabel??""}});return a&&(0,H.jsx)(be,{nativeAd:a,section:t,spec:n})}),{name:"HomeNativeAdsShelf"});var Pe=a(7399),Ie=a(26650),Le=a(30540),ke=a(43294),we=a(96342),Ne=a(76661),Se=a(5058),Ae=a(63910),Re=a(95712),Te=a(81637);const Ee=e=>{switch(e){case Te.r7.Album:return m.I;case Te.r7.Artist:return we.r;case Te.r7.Playlist:return Ne.e;case Te.r7.Track:return Se.v;case Te.r7.Video:return Ae.B;default:return Re.d}},_e=e=>{const t=(0,Z.o_h)(e);if(t)return{href:t.toURLPath(),isExternalTarget:!1};return URL.canParse(e)&&new URL(e).host.includes("open.spotify.com")?{href:e,isExternalTarget:!0}:{href:e,isExternalTarget:!1}},Me=(0,r.createContext)({onSetDisliked:()=>{},isDislikedInLocalStorage:!1}),De=({children:e,promotionUri:t})=>{const[a,n]=(0,te.x)(`home-promotion-disliked:${t}`,!1),s=(0,r.useMemo)((()=>({onSetDisliked:()=>n(!0),isDislikedInLocalStorage:a})),[a,n]);return a?null:(0,H.jsx)(Me.Provider,{value:s,children:e})};var Be=a(89596),Ue=a(56952),Oe=a(60224),Fe=a(88800),He=a(51775);const We=({target:e})=>(0,r.useMemo)((()=>(e=>{switch(((0,Z.o_h)(e)||{}).type){case Z.NQG.ALBUM:return(0,H.jsx)(Be.h,{uri:e});case Z.NQG.EPISODE:return(0,H.jsx)(Ue.b,{uri:e});case Z.NQG.PLAYLIST:case Z.NQG.PLAYLIST_V2:return(0,H.jsx)(Oe.W,{uri:e});case Z.NQG.SHOW:return(0,H.jsx)(Fe.H,{uri:e});case Z.NQG.TRACK:return(0,H.jsx)(He.P,{uri:e});default:return null}})(e)),[e]);var Ve=a(7840),Ge=a(90677),ze=a(55725);const Ye="vM8M5NM7DIyeDgnEvDwt",Qe="nMEsN3cKwfOWwnhr6ORE",Ke="vvyeNsGyrEOq4WPTy_7i",$e=()=>{},Ze=e=>"PromotionResponseWrapper"===e.content?.__typename&&"PromotionDefaultNative"===e.content.data.__typename,qe=({promotionSectionItem:e,spec:t})=>{const a=(0,ne.s)(),n=(0,Ve.g)(),s=e.content.data,i=t.promotionItemFactory({identifier:"default_native",uri:s.target,position:0}),{responseId:o}=G(s.uri),[l,c]=(0,r.useState)(void 0),{ref:d,inView:m}=(0,u.Wx)({threshold:[1]}),{triggerClickedEvent:h,triggerImpressionEvent:C}=Y(s.uri);(0,r.useEffect)((()=>{o!==l&&m&&(C(),c(o))}),[o,C,m,l]);const{copyUri:b,iconActions:j,libraryUri:P,playUri:I,notInterestedUri:L}=(0,r.useMemo)((()=>(e=>{let t,a,r,n;const s=[];return e.forEach((e=>{e.type!==Te.j3.Navigate&&e.target&&e.type&&(e.type===Te.j3.Play&&(t=e.target),e.type===Te.j3.AddToLibrary&&(a=e.target),e.type===Te.j3.Share&&(r=e.target),e.type===Te.j3.NotInterested&&(n=e.target),s.push({target:e.target,type:e.type}))})),{iconActions:s,notInterestedUri:n,copyUri:r,libraryUri:a,playUri:t}})(s.actions)),[s.actions]),[k,w]=(0,K.A)(P??""),{setState:N,Icon:S}=(0,Q.Q)(k?V.t.CURATED:V.t.UNCURATED,V.A),{isPlaying:A,togglePlay:R,isActive:T}=(0,re.P)({uri:I??""},{featureIdentifier:"home_promotion"}),E=I?()=>{const e=(0,Ge.$I)({isPlaying:A,isActive:T,spec:i.playButtonFactory({uri:I}),logger:a,uri:I});h(),R({loggingParams:e})}:$e,{onCopyLink:_}=(0,ze.L)({sharingInfo:null,uri:b??"",interactionData:{intent:"share",type:"click"}}),{href:M,isExternalTarget:D}=_e(s.target),{onNotInterested:B}=(e=>{const{onSetDisliked:t,isDislikedInLocalStorage:a}=(0,r.useContext)(Me),n=ee(),[s,i]=(0,r.useState)(a?"INIT":"SUCCESS");return{isMarkedNotInterested:a||"SUCCESS"===s,onNotInterested:(0,r.useCallback)((async()=>{if(i("PENDING"),e)try{await n({uri:e}),t(!0)}catch(e){i("ERROR")}}),[e,n,t])}})(L),U=(0,r.useCallback)((()=>{P&&(N(k?V.t.UNCURATED:V.t.CURATED),h(),k?a.logInteraction(i.saveButtonFactory({uri:P}).hitRemoveLike({itemNoLongerLiked:P})):a.logInteraction(i.saveButtonFactory({uri:P}).hitLike({itemToBeLiked:P})),w(!k))}),[k,P,a,i,N,w,h]),O=(0,r.useCallback)(((e,t)=>{h(),a.logInteraction(i.hitUiNavigate({destination:s.target})),D||(t.preventDefault(),n(M))}),[h,i,a,s.target,M,D,n]),F=(0,r.useCallback)((()=>{b&&(h(),a.logInteraction(i.shareButtonFactory({uri:b}).hitCopyToClipboard()),_())}),[b,h,a,i,_]),W=(0,r.useCallback)((()=>{L&&(a.logInteraction(i.notInterestedButtonFactory({uri:L}).hitDislike({itemToBeDisliked:L})),B())}),[i,a,B,L]),z=(e=>{if(!e||!("__typename"in e)||"ImageV2"!==e.__typename)return;const t=[];return e.sources.forEach((e=>{t.push(`${e.url} ${e.maxWidth}w`)})),{src:e.imageId,srcSet:t.length>0?t.join(", "):void 0}})(s.mediaSlot?.image?.data),$=We({target:s.target});return(0,H.jsx)(ke.h,{menu:$,children:(0,H.jsx)(p.M,{cardRef:d,actions:j,addToLibraryButtonLabel:g.Ru.get("save_to_your_library"),addToLibraryIcon:S,body:s.bodyTranslation?.transformedLabel,className:Qe,contextMenu:L?(0,H.jsx)(v.b,{menu:(0,H.jsx)(y.W,{children:(0,H.jsx)(x.D,{role:"menuitem",leadingIcon:(0,H.jsx)(Le.r,{semanticColor:"textSubdued",size:"small"}),onClick:W,children:g.Ru.get("promotions.context-menu.not-interested")})}),children:(0,H.jsx)(f.e,{size:f.M.xs,label:g.Ru.get("show_more"),className:Ke})}):null,href:M,isExternalLinkTargetFn:()=>D,isInLibrary:k,isPlaying:A,mediaSlotImageFallbackIcon:Ee(s.mediaSlot?.fallbackIcon),mediaSlotImageSrc:z?.src,onAddToLibrary:U,onNavigate:O,onPlay:E,onShare:F,pauseButtonLabel:g.Ru.get("playlist.a11y.pause",s.titleTranslation?.transformedLabel||""),playButtonLabel:g.Ru.get("playlist.a11y.play",s.titleTranslation?.transformedLabel||""),pretitle:s.pretitleTranslation?.transformedLabel,pretitleSemanticColor:(e=>{switch(e){case Te.cf.TextAnnouncement:return"textAnnouncement";case Te.cf.TextBrightAccent:return"textBrightAccent";case Te.cf.TextNegative:return"textNegative";case Te.cf.TextPositive:return"textPositive";case Te.cf.TextSubdued:return"textSubdued";case Te.cf.TextWarning:return"textWarning";default:return"textBase"}})(s.pretitleSemanticColor),removeFromLibraryButtonLabel:g.Ru.get("remove_from_your_library"),shareButtonLabel:g.Ru.get("mwp.list.item.share"),subtitle:s.subtitleTranslation?.transformedLabel,title:s.titleTranslation?.transformedLabel})})};var Je=a(92375),Xe=a(65927);const et=(0,o.mc)((({section:e,index:t})=>{const a=e.sectionItems.items.find(Ze),{spec:r}=(0,xe.r)(Pe.b,{data:{uri:a?.uri,position:t,identifier:e.uri,reason:""}}),n=a?.content.data.target,s=r.promotionItemFactory({identifier:"default_native",position:0,uri:(0,Z.o_h)(n)?n:a?.content.data.uri}),i=(0,Xe.t)(s);if(!a)return null;const o=(0,Ie.wA)(e.data.headerEntity,e.data.title??{transformedLabel:g.Ru.get("promotions.default-section-title")},null);return(0,H.jsx)(De,{promotionUri:a.content.data.uri,children:(0,H.jsx)(Je.r,{spec:r,children:(0,H.jsxs)("section",{ref:i,className:c()(Ye,Ce.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,H.jsx)(me.k,{...o}),(0,H.jsx)(qe,{promotionSectionItem:a,spec:r})]})})})}),{name:"HomePromotionShelf"});var tt=a(59993),at=a(6306),rt=a(40183),nt=a(58325),st=a(82483);const it="JYoTSXH6KEr_MIwisdZi",ot=({title:e,pretitle:t,body:a,uri:n,images:s,spec:i,onContextMenu:o,onTouchStart:l,onTouchEnd:c})=>{const d=(0,ne.s)(),u=(0,Ve.g)(),[m,h]=(0,K.A)(n||""),{isPlaying:f,togglePlay:v,isActive:y}=(0,re.P)({uri:n},{featureIdentifier:"album"}),{onCopyLink:x}=(0,ze.L)({sharingInfo:null,uri:n,interactionData:{intent:"share",type:"click",itemIdSuffix:"album/share"}}),C=(0,r.useCallback)((()=>{const e=(0,Ge.$I)({isPlaying:f,isActive:y,spec:i.playButtonFactory(),logger:d,uri:n});v({loggingParams:e})}),[i,y,f,d,v,n]),{href:b,isExternalTarget:j}=_e(n),P=(0,r.useCallback)(((e,t)=>{d.logInteraction(i.hitUiNavigate({destination:n})),j||(t.preventDefault(),u(b))}),[i,d,n,b,j,u]),{setState:I,Icon:L}=(0,Q.Q)(m?V.t.CURATED:V.t.UNCURATED,V.A),k=(0,r.useCallback)((()=>{I(m?V.t.UNCURATED:V.t.CURATED),d.logInteraction(m?i.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:n}):i.saveButtonFactory().hitLike({itemToBeLiked:n})),h(!m)}),[I,m,d,i,n,h]),w=(0,r.useCallback)((()=>{d.logInteraction(i.shareButtonFactory().hitCopyToClipboard()),x()}),[i,d,x]),N=(0,Xe.t)(i);return(0,H.jsx)(p.M,{cardRef:N,title:e,href:b,pretitle:t,body:a,isExternalLinkTargetFn:()=>!1,actions:[{target:n,type:"PLAY"},{target:n,type:"ADD_TO_LIBRARY"},{target:n,type:"SHARE"}],onPlay:C,onAddToLibrary:k,onShare:w,isPlaying:f,isInLibrary:m,onNavigate:P,mediaSlotImageSrc:s[0]?.url,playButtonLabel:g.Ru.get("playlist.a11y.play",e),pauseButtonLabel:g.Ru.get("playlist.a11y.pause",e),addToLibraryButtonLabel:g.Ru.get("save_to_your_library"),removeFromLibraryButtonLabel:g.Ru.get("remove_from_your_library"),shareButtonLabel:g.Ru.get("mwp.list.item.share"),className:it,addToLibraryIcon:L,onContextMenu:o,onTouchStart:l,onTouchEnd:c})},lt=({name:e,uri:t,images:a,artists:r,spec:n,type:s})=>(0,H.jsx)(ke.h,{menu:(0,H.jsx)(Be.h,{uri:t,artistUri:r?.[0]?.uri}),children:(0,H.jsx)(ot,{title:e,pretitle:`${(0,se.C)(s)} • ${r.map((e=>e.name)).join(g.Ru.getSeparator())}`,uri:t,images:a,spec:n})}),ct=({name:e,uri:t,images:a,description:r,spec:n})=>(0,H.jsx)(ke.h,{menu:(0,H.jsx)(Oe.W,{uri:t}),children:(0,H.jsx)(ot,{title:e,pretitle:g.Ru.get("playlist"),body:r,uri:t,images:a,spec:n})});var dt=a(18599),ut=a(91563);const mt="ixncPYxvXKu9liUB7s4j",pt="Qhy0EgG4oltMwIF_10L6",gt=(0,o.mc)((({section:e,shelfIndex:t})=>{const{spec:a,logger:n}=(0,xe.r)(rt.j,{data:{identifier:e.uri,uri:e.uri,position:t}}),s=(0,Ie.wA)(e.data.headerEntity,e.data.title,e.data.subtitle),i=e.sectionItems.items.map(((e,t)=>((e,t)=>{if((0,st.vd)(e.content)){const a=e.content.data,r=(0,Ie.f0)(a);switch(a.__typename){case"Album":return(0,H.jsx)(lt,{uri:a.uri,name:a.name,images:r,artists:(0,dt.K)(a.artists),type:a.albumType,spec:t});case"Playlist":return(0,H.jsx)(ct,{uri:a.uri,name:a.name,description:a.description??void 0,images:r,spec:t});case"GenericError":case"NotFound":case"Artist":case"DiscoveryFeed":case"RestrictedContent":case"Audiobook":case"Chapter":case"Episode":case"Podcast":case"Track":case"User":return null;default:return(0,ut.k)(a),null}}return null})(e,a.spotlightCardFactory({position:t,uri:e.uri})))).filter((e=>!!e)),[o,l]=(0,r.useState)(i[0]),[d,u]=(0,r.useState)(0),m=(0,r.useCallback)((()=>{u(d+1),l(i[d+1]),n.logInteraction(a.nextButtonFactory({position:d+1}).hitUiReveal())}),[d,n,i,a]),p=(0,r.useCallback)((()=>{u(d-1),l(i[d-1]),n.logInteraction(a.previousButtonFactory({position:d-1}).hitUiReveal())}),[d,n,i,a]),h=i.length>1?(0,H.jsxs)("div",{className:pt,children:[(0,H.jsx)(nt.Zp,{label:g.Ru.get("carousel.left"),children:(0,H.jsx)(de.H,{size:"small",iconOnly:tt.g,"aria-label":g.Ru.get("carousel.left"),disabled:0===d,onClick:p})}),(0,H.jsx)(nt.Zp,{label:g.Ru.get("carousel.right"),children:(0,H.jsx)(de.H,{size:"small",iconOnly:at.V,"aria-label":g.Ru.get("carousel.right"),disabled:d===i.length-1,onClick:m})})]}):null;return i.length<1?null:(0,H.jsx)(Je.r,{spec:a,children:(0,H.jsxs)("section",{className:c()(mt,Ce.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,H.jsx)(me.k,{...s,trailing:h,onClickTitle:()=>{s.titleUri&&n.logInteraction(a.shelfHeaderFactory({position:d}).hitUiNavigate({destination:s.titleUri}))}}),o]})})}),{name:"HomeV2SpotlightShelf"});var ht=a(47406),ft=a(67464),vt=a(55405),yt=a(41905),xt=a(24211),Ct=a(81481);const bt=(0,o.mc)((({section:e,index:t})=>{const a=(0,n.NC)(vt.MX4),s=(0,n.NC)(Ct.BC),i=(0,Ie.wA)(e.data.headerEntity,e.data.title,"HomeGenericSectionData"===e.data.__typename?e.data.subtitle:null),o="GenreResponseWrapper"===e.data.headerEntity?.__typename&&"Genre"===e.data.headerEntity?.data?.__typename?e.data.headerEntity.data.uri:e.uri,l=(0,r.useMemo)((()=>e.sectionItems.items.map(((e,t)=>(0,st.e0)(e,t,s))).filter((e=>null!==e))),[s,e.sectionItems.items]);return l.length?a?(0,H.jsx)(ht.R,{seeAllUri:o,id:e.uri,className:Ce.A.homeRegularDensityCarouselShelf,index:t,...i,children:l}):(0,H.jsx)(yt.x,{config:(0,xt.s1)(xt.yV.HOME_REGULAR_DENSITY),children:(0,H.jsx)(ft.p,{total:e.sectionItems.totalCount,seeAllUri:o,id:e.uri,index:t,...i,children:l})}):null}),{name:"HomeV2GenericShelf"});var jt=a(42578),Pt=a(36672),It=a(85310);const Lt=(0,o.mc)((e=>{const t=(0,n.NC)(vt.MX4),{section:a,index:s}=e,i=(0,r.useMemo)((()=>e.section.sectionItems.items.map(((e,t)=>{if("TrackResponseWrapper"!==e.content.__typename||"Track"!==e.content.data.__typename)return null;const a=e.content.data;return(0,H.jsx)(Pt.O,{title:a.name,trackUri:a.uri,audioAssociationUris:(0,It.$)(a.associationsV3),artists:a.artists.items,album:a.albumOfTrack,contentRating:a.contentRating,referrerIdentifier:"home",index:t},a.uri)})).filter((e=>null!==e))),[e.section.sectionItems.items]);return t?(0,H.jsx)(ht.R,{index:s,title:a.data.title?.transformedLabel??"",seeAllUri:a.uri,id:a.uri,className:Ce.A.homeMusicVideosCarouselShelf,children:i}):(0,H.jsx)(yt.x,{config:(0,xt.s1)(xt.yV.MUSIC_VIDEOS),children:(0,H.jsx)(ft.p,{index:s,title:a.data.title?.transformedLabel??"",seeAllUri:a.uri,id:a.uri,total:a.sectionItems.totalCount,children:i})})}),{name:"HomeV2MusicVideosShelf"});var kt=a(6038);const wt=(0,o.mc)((({section:e,index:t})=>{const a=(0,n.NC)(vt.MX4),r=e.data.title?.transformedLabel??g.Ru.get("view.recently-played");return a?(0,H.jsx)(kt.RecentlyPlayedHomeCarouselShelf,{title:r,index:t,id:e.uri,className:Ce.A.homeHighDensityCarouselShelf}):(0,H.jsx)(kt.RecentlyPlayedHomeGridShelf,{title:r,index:t,id:e.uri})}),{name:"HomeV2RecentlyPlayedShelf"});var Nt=a(60480),St=a(71043),At=a(68737),Rt=a(32489),Tt=a(85856),Et=a(25865),_t=a(91049),Mt=a(57195),Dt=a(72806);const Bt="mwc_1Zp_E6v9sr0fTnL1",Ut="sbehppetBlPlPp7TSib7",Ot="Zg_jTjYYhVRuKwqeO4s3",Ft="X3QSU3mxBfBtfhpubU5I",Ht="vMptgdkEGfu4daB_6D7U",Wt="ZMRUy3XCzjoj3U3v8zNb",Vt="CA3jSSFaq_a0kpsSL69X",Gt="Fj9nUGnQyCPsnhDKLx7n",zt="knJzYlLp6ylpADL42ohP";function Yt(e){return!!(e&&e.fileId&&e.uri)}const Qt=({canvas:e,canvasContainerClass:t,onCardLoaded:a})=>Yt(e)?(0,H.jsx)(Tt.Gg,{className:Gt,fileId:e.fileId,canvasUrl:e.url,overridePlatformId:_t.Z,playerContainerClass:t,canvasUri:e.uri,playbackType:Tt.RT.LoopOnHover,useContainerMouseOverEvents:!0,onLoaded:a}):null,Kt=({canvas:e,onCardLoaded:t,className:a})=>{const r=(0,ie.g)(e?.thumbnail?.sources,{desiredSize:300,desiredLabel:"standard"});return(0,H.jsx)(Mt._,{className:c()(Wt,a),src:r?.url,loading:"lazy",testid:"card-image",fadeIn:!0,onLoad:t,children:(0,H.jsx)(Ne.e,{size:"xxlarge",className:Vt})})};var $t=function(e){return e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e}($t||{});const Zt=({uri:e,index:t,canvas:a,discoveryFeedUri:n,uri:s,canvasContainerClass:i,title:o,requestId:l})=>{const{open:d}=(0,Et.P)(),{spec:u,logger:m}=(0,xe.r)(Rt.y,{data:{position:t,uri:e,reason:l??""}}),p=(0,Xe.t)(u),g=(0,Dt.j)(),[h,f]=(0,r.useState)(!1),[v,y]=(0,r.useState)($t.NOT_LOADED),x=()=>{const e=u.hitUiReveal();m.logInteraction(e),d(n,"discovery",s)},C=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=C.current;if(g)return;if(!Yt(a))return;const t=()=>{y($t.LOADING)};return e?.addEventListener("pointerenter",t,{once:!0}),()=>{e?.removeEventListener("pointerenter",t)}}),[a,g]);const b=(0,r.useCallback)((()=>{f(!0)}),[]),j=(0,r.useCallback)((()=>{y($t.LOADED)}),[]),P=!h,I=v!==$t.LOADED,L=v===$t.LOADING||v===$t.LOADED;return(0,H.jsxs)("div",{className:Bt,tabIndex:0,role:"button",onClick:x,ref:C,onKeyDown:e=>{"Enter"===e.key&&x()},children:[(0,H.jsxs)("div",{className:c()(Ft,{[Ht]:v===$t.LOADING}),ref:p,children:[P&&(0,H.jsx)("div",{className:Ot}),L&&(0,H.jsx)(Qt,{canvas:a,canvasContainerClass:i,onCardLoaded:j}),I&&(0,H.jsx)(Kt,{canvas:a,onCardLoaded:b})]}),(0,H.jsx)("div",{className:zt,children:(0,H.jsx)(St.Z,{variant:"ballad",lineClamp:2,title:o,dir:"auto",children:o})}),(0,H.jsx)(At.A,{semanticColor:"textBase",size:"medium",className:Ut})]})};var qt=a(81543),Jt=a(20437);const Xt="a_zIjVculIT6AAmqITi3",ea="Flfusx_bjoqsdTvLD3n9";const ta=({children:e,section:t,index:a})=>{const n=(0,r.useRef)(null),s=(0,r.useRef)(null),{spec:i}=(0,xe.r)(qt.f,{data:{position:a,identifier:t.uri,uri:t.uri}});return(0,Jt.w)({refOrElement:n,observeOnly:"width",observeOnMount:!0,onResize:()=>{const e=s.current;if(!e)return;const t=e.children[0];if(!t)return;const a=t.getBoundingClientRect().top;for(const t of e.children)t.nodeType===Node.ELEMENT_NODE&&(t.getBoundingClientRect().top>a?t.style.display="none":t.style.display="flex")}}),(0,H.jsx)(Je.r,{spec:i,children:(0,H.jsxs)("section",{className:Xt,ref:n,children:[(0,H.jsx)(me.k,{title:t.data.title?.transformedLabel??"",pageId:t.uri}),(0,H.jsx)("div",{className:ea,ref:s,children:e})]})})},aa=({children:e,index:t,section:a})=>(0,H.jsx)(ht.R,{id:a.uri,title:a.data.title?.transformedLabel??"",className:Ce.A.homeWatchFeedCarouselShelf,index:t,withEncoreCards:!0,showSeeAll:!1,children:e}),ra=(0,o.mc)((e=>{const t=(0,n.NC)(vt.MX4),a=(0,r.useMemo)((()=>e.section.sectionItems.items.map(((t,a)=>{if("DiscoveryFeedResponseWrapper"===t.content.__typename&&"DiscoveryFeed"===t.content.data.__typename){const r=((e,t,a,r)=>{if("TrackResponseWrapper"!==e.firstItem?.__typename||"Track"!==e.firstItem.data.__typename)return null;const n=e.firstItem.data;return(0,H.jsx)(Zt,{index:a,uri:n.uri,discoveryFeedUri:t,canvas:n.canvas,title:e.title??"",canvasContainerClass:`Home_WatchFeed_Canvas_${r}_${a}`},`${n.uri}-${a}`)})(t.content.data,t.uri,a,e.index);if(r)return r}return null})).filter((e=>null!==e))),[e.section.sectionItems.items,e.index]);return a.length?t?(0,H.jsx)(aa,{...e,children:a}):(0,H.jsx)(ta,{...e,children:a}):null}),{name:"HomeV2WatchFeedShelf"});var na=a(38564);const sa="DbwXO2cO6bYBhrHpU__Q",ia=(0,o.mc)((({uri:e,shelfTitle:t,title:a,description:r})=>(0,H.jsxs)("section",{className:c()(sa,Ce.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,H.jsx)(me.k,{title:t}),(0,H.jsx)(na.n,{uri:e,title:a,description:r})]})),{name:"HomeYourDJShelf"});var oa=a(1323);const la=(0,r.memo)((({greeting:e,section:t,index:a})=>{const r=function(){const e=(0,oa._)();return function(t,a){if(!e)return!1;const r=(0,i.M)(t,a).sectionItems.items[0];return"PlaylistResponseWrapper"===r.content.__typename&&"Playlist"===r.content.data.__typename}}(),o=(0,n.NC)(vt.BYw),l=(0,n.NC)(vt.hWV),c=(0,n.NC)(vt.k6b);switch(t.data?.__typename){case"HomeGenericSectionData":return(0,H.jsx)(bt,{section:(0,i.M)(t,t.data),index:a});case"HomeShortsSectionData":return(0,H.jsx)(Nt.$,{greeting:e,section:(0,i.M)(t,t.data),index:a});case"HomeRecentlyPlayedSectionData":return(0,H.jsx)(wt,{section:(0,i.M)(t,t.data),index:a});case"HomeGridSectionData":return l?(0,H.jsx)(jt.A,{index:a,section:(0,i.M)(t,t.data)}):(0,H.jsx)(bt,{section:(0,i.M)(t,t.data),index:a});case"HomePromotionSectionData":return(0,H.jsx)(et,{section:(0,i.M)(t,t.data),index:a});case"HomeSpotlightSectionData":return c?(0,H.jsx)(gt,{section:(0,i.M)(t,t.data),shelfIndex:a}):null;case"HomeNativeAdsSectionData":return(0,H.jsx)(je,{section:(0,i.M)(t,t.data),index:a});case"HomeOnboardingSectionData":case"HomeOnboardingSectionDataV2":return null;case"HomeYourDJSectionData":{const e=(0,i.M)(t,t.data),{data:a,sectionItems:n}=e,s=n.items[0];if(r(t,t.data)&&"PlaylistResponseWrapper"===s.content.__typename&&"Playlist"===s.content.data.__typename){const{data:e}=s.content;return(0,H.jsx)(ia,{uri:e.uri,shelfTitle:a.title?.transformedLabel??"",title:e.name,description:e.description??""})}return null}case"HomeWatchFeedSectionData":if(o){const e=(0,i.M)(t,t.data);return(0,H.jsx)(ra,{index:a,section:e})}return null;case"HomeFeatureActivationSectionDataV2":return(0,H.jsx)(s.G,{sectionItems:t.sectionItems.items,uri:t.uri,localStorageKey:t.data.localStorageKey});case"HomeMusicVideosSectionData":return(0,H.jsx)(Lt,{section:(0,i.M)(t,t.data),index:a});case"HomeFeedBaselineSectionData":case"HomeFeatureActivationSectionData":case null:case void 0:return null;default:return(0,ut.k)(t.data),null}}))},74738:(e,t,a)=>{a.r(t),a.d(t,{SKELETON_CARDS_COUNT:()=>z,SKELETON_SHELVES_COUNT:()=>G,default:()=>K,getRequestIdForImpressions:()=>Y});var r=a(30758),n=a(53177),s=a(97500),i=a.n(s),o=a(75044),l=a(70693),c=a(17640),d=a(80478),u=a(37390),m=a(83467),p=a(53521),g=a(49437),h=a(67843),f=a(8044),v=a(99150),y=a(62555),x=a(55405),C=a(29471);var b=a(62411),j=a(25270),P=a(63880),I=a(46462),L=a(59400),k=a(43422),w=a(58089),N=a(5141);const S="iC5KPBY1LYMrQkGPnG8m";var A=a(86070);const R=()=>{const e=(0,b.wA)(),t=(0,w.s)(),{spec:a}=(0,N.r)(L.V,{}),n=(0,r.useCallback)((()=>{e(k.r8.actions.open()),t.logInteraction(a.learnMoreButtonFactory().hitUiReveal())}),[e,t,a]);return(0,A.jsxs)(j.E,{as:"p",semanticColor:"textBase",className:S,children:[(0,A.jsx)(P.p,{size:"small"}),c.Ru.get("home.dsa-message",(0,A.jsx)(I.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:n,children:c.Ru.get("home.dsa-message-link")}))]})};var T=a(41565),E=a(91932),_=a(38193),M=a(43908),D=a(29825),B=a(35418),U=a(93486),O=a(94842),F=a(14076),H=a(68456),W=a(92375),V=a(77395);const G=6,z=6,Y=e=>{const t="object"==typeof e?.responseIds?e?.responseIds:void 0;return t?.["/home"]?.continuum},Q=(0,r.memo)((({shelfCount:e,cardCount:t})=>(0,A.jsxs)("div",{className:i()(V.A.homepageContent,"contentSpacing"),children:[(0,A.jsx)(u.y,{withTitle:!1}),[...new Array(e).keys()].map(((e,a)=>(0,A.jsx)(E.f,{withTitle:!0,cardCount:t},a)))]}))),K=(0,n.mc)((()=>{(0,O.m)("home");const e=(0,o.NC)(x.MX4),t=(0,B.W)({type:"locale",uri:"home"}),a=(0,o.NC)(x.q4i),{data:n,error:s,loading:u,extensions:b}=(0,M.f)(),j=!(0,U.p)(),P=(0,D.f)().replace("-chip",""),{spec:I}=(0,N.r)(l.Y,{data:{identifier:P?`home/${P}`:"home",uri:"spotify:home",reason:Y(b)??""}});(()=>{const e=(0,o.NC)(x.ojr),t=(0,h.vh)(),a=(0,v.c)(),n=(0,f.V)();(0,r.useEffect)((()=>{const r={category:"unauth_home_exposures",action:"unauth_home_page_visit",variant:e,label:"dwp",os:(0,y.f)(),sp_t:(0,C.v8)("sp_t")};a&&n&&t.send((0,g.r)(r))}),[e,a,t,n])})();const L=(0,r.useRef)(null);if((0,p.b)(L),u)return(0,A.jsx)("section",{className:i()(V.A.home,e?V.A.homepageWithCarousels:V.A.homepage),"data-testid":"home-page",children:(0,A.jsx)(Q,{shelfCount:G,cardCount:z})});if(null!==s)return(0,A.jsx)(m.LoadingPage,{hasError:!0,errorMessage:c.Ru.get("error.generic")});const k=n?.home;return"HomeResponsePayload"!==k?.__typename?(0,A.jsx)(m.LoadingPage,{hasError:!0,errorMessage:c.Ru.get("error.generic")}):0===k.sectionContainer.sections.totalCount||0===k.sectionContainer.sections.items.length?((0,F.Jy)(new Error("Empty response from pathfinder"),"Home"),(0,A.jsx)(m.LoadingPage,{hasError:!0,errorMessage:c.Ru.get("error.generic")})):(0,A.jsx)(W.r,{spec:I,children:(0,A.jsxs)(_.h,{extensionsData:b,children:[(0,A.jsx)(d.Q,{children:(0,H.pr)({i18n:c.Ru,shouldLocalize:t})}),(0,A.jsx)("section",{className:i()(V.A.home,e?V.A.homepageWithCarousels:V.A.homepage),"data-testid":"home-page",children:(0,A.jsxs)("div",{className:i()(V.A.homepageContent,"contentSpacing"),ref:L,children:[j&&(0,A.jsx)(R,{}),(0,A.jsx)(T.g,{greeting:k.greeting?.transformedLabel??null,container:k.sectionContainer,enableFeedBaseline:a})]})})]})})}),{name:"Home"})},91049:(e,t,a)=>{a.d(t,{R:()=>n,Z:()=>r});const r="desktop-home-watch-feed",n="desktop-watch-feed"},91932:(e,t,a)=>{a.d(t,{f:()=>o});var r=a(30758),n=a(44519),s=a(24739),i=a(86070);const o=(0,r.memo)((({cardCount:e,showAll:t,withTitle:a})=>(0,i.jsx)(s._,{isLoading:!0,withTitle:a,showAll:t??!1,children:[...new Array(e).keys()].map(((e,t)=>(0,i.jsx)(n.u,{isLoading:!0},t)))})))},93850:(e,t,a)=>{a.d(t,{v:()=>r.v});var r=a(74931)}}]);
//# sourceMappingURL=home-v2.js.map