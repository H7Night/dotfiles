"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7988],{2849:(e,t,n)=>{n.d(t,{$:()=>r});var i=n(85387);const a="/lyrics",r=()=>({isActive:(0,i.zy)().pathname.startsWith(a),routeDestination:a})},11699:(e,t,n)=>{n.d(t,{VideoPlayer:()=>_t});var i=n(30758),a=n(62411),r=n(97500),o=n.n(r),s=n(85387),l=n(17640);var c=n(42309),d=n(57221),u=n(26111);const p="KopIqvLbHzuI_pYTXRSw";var m=n(86070);const v=({onMinimizeButtonClick:e})=>(0,m.jsx)("div",{className:o()(p),children:(0,m.jsx)(d.$,{"aria-label":l.Ru.get("ad-formats.dismissAd"),colorSet:"overMedia",iconOnly:u.b,onClick:e,size:"small"})});var g=n(35763),h=n(93922),f=n(97182),b=n(15323),x=n(88025),y=n(27733),C=n(11957),w=n(31889);const N="Lk23rM5uSl5mgEXroOPH",P="XvNci8tJYTXGgFBNzRWg",V="Hj1B5D7WgG4aZkU8meAp",j="ctQf8WC83qR_pcv7bOEh",z="Xyaz284GhueBbBPn6gOS",L="pIMAcTC5w2dZdMGe4U_A",_="XeZ0TCAoRGXh8soWVo5S",M=({setVideoContainer:e})=>{const t=(0,a.wA)(),n=(0,C.o)((e=>e?.item??void 0),((e,t)=>e?.uri===t?.uri)),r=(0,w.N)(n)?n.url??void 0:void 0,d=((0,w.N)(n)?n.advertiser:void 0)||"Advertiser",u=(0,a.d4)((e=>e?.ads?.vto?.isMinimized)),p=(0,w.N)(n)&&"portrait"===n.videoOrientation,M=(0,i.useRef)(),k=(0,s.zy)(),I=(0,y.S)();(0,i.useEffect)((()=>{M.current?t((0,c.iB)()):M.current=!0}),[t,k.pathname]);const[A,E]=(0,i.useState)(null);(0,i.useEffect)((()=>{t((0,c.MW)())}),[t]),(0,i.useEffect)((()=>{null!==A&&e(A)}),[e,u,A]);const R=o()(N,{[P]:p});return(0,m.jsxs)(f.A,{className:V,animation:{overlay:{base:z,beforeClose:_,afterOpen:L},closeTimeoutMs:300},isOpen:!u,parentSelector:()=>document.querySelector(".VTO__modal-slot"),shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,contentLabel:l.Ru.get("ad-formats.advertisement"),children:[(0,m.jsxs)("div",{className:R,children:[(0,m.jsx)("a",{"aria-label":l.Ru.get("ad-formats.video-ad-overlay.cta-button",{advertiserName:d}),className:R,"data-testid":"video-takeover-link",href:r?(0,g.H)(r):void 0,onClick:()=>{t((0,c.i2)(h.ee.CLICKED,h.Wh.VIDEO_TAKEOVER,h.Lv.VIDEO_PLAYER))},ref:e=>{E(e)},target:"_blank"}),I===x.z.CLOSED&&(0,m.jsx)(v,{onMinimizeButtonClick:()=>{t((0,c.Oc)()),t((0,c.i2)(h.ee.COLLAPSED,h.Wh.MINIMIZE_BUTTON,h.Lv.VIDEO_PLAYER))}})]}),I===x.z.NOW_PLAYING_VIEW&&(0,w.N)(n)&&(0,m.jsx)(b.h,{item:n,className:j})]})},k=({setVideoContainer:e})=>(0,a.d4)((e=>e?.ads?.vto?.isHidden))?null:(0,m.jsx)(M,{setVideoContainer:e});var I=n(73493),A=n(8143),E=n(75044),R=n(40638);function B(){const[e,t]=(0,i.useState)(!1),n=(0,i.useRef)(null),a=(0,R.YQ)((()=>{n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{t(!1)}),1500),t(!0)}),100,{maxWait:100,leading:!0}),r=(0,i.useCallback)((e=>{t(e),a.cancel()}),[a]);return(0,i.useEffect)((()=>()=>{n.current&&clearTimeout(n.current)}),[]),{isControlsVisible:e,setIsControlsVisible:r,handleKeepViewVisible:a}}var O=n(12876),S=n(96182),F=n(83670),D=n(59095),W=n(86239),H=n(43294),T=n(32712),U=n(85827),K=n(58979),Z=n(9297),G=n(53443),X=n(77171),Y=n(49908),$=n(49361),q=n(35397),Q=n(55405),J=n(3784),ee=n(5141);const te="Wkw36VsNH5vn2NWdtLuR",ne="MBzbwWcyfbqSftBtnn3g",ie=({noBackground:e,iconSize:t="small",className:n})=>{const{setVideoPlayerUIFlag:i,videoPlayerUIFlags:a,videoPlayerMode:r}=(0,$.d)(),s=r===q.Kz.cinemaLegacy,{uri:c}=(0,J.f)(),{hideLyrics:d}=(0,Y.A)({referrer:"cinema-mode-toggle"}),u=(0,E.NC)(Q.Au4),{spec:p,logger:v}=(0,ee.r)(D.E,{data:{uri:c??"",identifier:q.Kz.cinemaLegacy}});if(!u||r===q.Kz.fullscreen)return null;return(0,m.jsx)("div",{className:o()({[ne]:s}),children:(0,m.jsx)(W.D,{noBackground:e,active:s,label:s?l.Ru.get("video-player.default-view"):l.Ru.get("video-player.cinema-mode"),onClick:()=>{s?v.logInteraction(p.cinemaModeButtonFactory().hitUiHide()):v.logInteraction(p.cinemaModeButtonFactory().hitUiReveal()),d(),i(q.nP.cinemaLegacy,!a.cinemaLegacy)},className:o()(te,n),children:s?(0,m.jsx)(G.Q,{size:t}):(0,m.jsx)(X.C,{size:t})})})};var ae=n(46462),re=n(91292),oe=n(58325),se=n(61101);const le=({className:e})=>{const t=(0,se.l)(),n=(0,i.useCallback)((()=>{t(x.z.NOW_PLAYING_VIEW)}),[t]);return(0,m.jsx)(oe.Zp,{label:l.Ru.get("web-player.now-playing-view.cinema-mode.expand"),children:(0,m.jsx)(ae.H,{iconOnly:re.L,size:"small",onClick:n,"aria-label":l.Ru.get("web-player.now-playing-view.cinema-mode.expand"),semanticColor:"textBase",className:e})})},ce="music",de="1.0.1",ue="default",pe="15.2.1";class me{constructor(e){this._path=[{name:"desktop-pip-button"}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}pipButtonFactory(e){return new me.PipButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ue,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[de,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}!function(e){e.PipButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"pip_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[ue,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[de,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:ce,generatorVersion:pe,interactionType:"hit",specificationMode:ue,specificationVersion:de,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:ce,generatorVersion:pe,interactionType:"hit",specificationMode:ue,specificationVersion:de,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(me||(me={}));var ve=n(72029),ge=n(71267),he=n(37953),fe=n(46628),be=n(57689);function xe(){const e=(0,a.wA)(),t=(0,he.XB)();return{enterPipVideoMode:(0,i.useCallback)((()=>{e((0,be.R)(q.Kz.pip))}),[e]),leavePipVideoMode:(0,i.useCallback)((()=>{t===fe.Z.NowPlayingView&&e((0,be.R)(q.Kz.npv))}),[e,t])}}var ye=n(13637),Ce=n(29645);const we="fuONPgUcYO2bf15HunlX",Ne=({noBackground:e,iconSize:t="small",uri:n})=>{const i=(0,a.d4)(ve.c),r=i===q.Kz.pip,{enterPipVideoMode:s,leavePipVideoMode:c}=xe(),{item:d}=(0,Z.L)()??{},{isActive:u}=(0,ge.D)({item:d}),p=(0,C.o)(Ce.A3),{spec:v,logger:g}=(0,ee.r)(D.E,{data:{uri:n,identifier:i}}),h=(f={parentAbsoluteLocation:v.pipButtonContainerFactory().getAbsoluteLocation()},new me(f));var f;if(!p)return null;let b=l.Ru.get("video-player.default-view");return r||(b=u?l.Ru.get("miniplayer.close"):l.Ru.get("miniplayer.open-in")),(0,m.jsx)("div",{className:o()({[we]:r}),children:(0,m.jsx)(W.D,{noBackground:e,active:r,label:b,onClick:()=>{(0,ye.ge)()&&(0,ye.SP)(),r?(c(),g.logInteraction(h.pipButtonFactory({uri:n}).hitUiHide())):(s(),h.pipButtonFactory({uri:n}).hitUiReveal())},children:(0,m.jsx)(O.F,{size:t})})})};var Pe=n(35514),Ve=n(96381),je=n(95083),ze=n(76e3),Le=n(45624);const _e="aHe1QDDI5hmYWAKf4MoR",Me="ACGZS5YQp3lxBSr4RKaF",ke="DtWKCk0YYDlZT11U1niL",Ie="RTSxo7zS2ozOeg4gnC2c",Ae="ZcIaDrsIojjWZ_Xf_6iN",Ee="viN5UfPr2XfnYOWHTS0W",Re="pLL2Ok4QckLG8GAWriCB",Be="OrGQiDAXobDXrw9LVnnD",Oe=()=>{const e=(0,se.l)(),{isFullScreenSupported:t,toggleFullScreen:n}=(0,Le.H)({refOrElement:document.body}),a=(0,i.useCallback)((async()=>{try{await n()}catch(e){}e(x.z.NOW_PLAYING_VIEW)}),[e,n]);return t?(0,m.jsx)(oe.Zp,{label:l.Ru.get("npv.full-screen"),children:(0,m.jsx)(ae.H,{iconOnly:ze.T,size:"small",onClick:a,"aria-label":l.Ru.get("npv.full-screen"),semanticColor:"textBase",className:o()("encore-over-media-set",Me)})}):null},Se=()=>{const e=(0,a.wA)(),t=(0,i.useContext)(je.s),n=(0,i.useCallback)((()=>{t?.current&&((0,ye.X8)(t.current),e((0,Ve.f)()))}),[e,t]);return(0,m.jsx)(oe.Zp,{label:l.Ru.get("npv.full-screen"),children:(0,m.jsx)(ae.H,{iconOnly:re.L,size:"small","aria-label":l.Ru.get("npv.full-screen"),semanticColor:"textBase",onClick:n,className:o()("encore-over-media-set",Me)})})},Fe=(0,i.memo)((()=>(0,E.NC)(Q.mzn)?(0,m.jsx)(Oe,{}):(0,m.jsx)(Se,{})));var De=n(35144),We=n(72806),He=n(36838),Te=n(12434);const Ue=[{transform:"scale(1)",opacity:0},{transform:"scale(1.3)",opacity:1},{transform:"scale(1.6)",opacity:0}],Ke=[{transform:"scale(1)",opacity:1},{transform:"scale(1)",opacity:1}],Ze={duration:500,easing:"ease-out"},Ge=function({visible:e,className:t,darkOverlayOnHover:n=!1,animatePlayPauseButtonOnClick:r=!0,showProgressbar:s=!1}){const{videoPlayerMode:c}=(0,$.d)(),d=(0,T.lZ)(),u=(0,De.$)(),p=(0,E.NC)(Q.mzn),v=c===q.Kz.cinemaLegacy,g=(0,y.S)(),h=(0,We.j)(),f=(0,a.d4)((e=>e.platform.isDesktop)),{item:b,context:w}=(0,Z.L)()??{},N=b?.uri??"",{isActive:P,onClick:V,showButton:j}=(0,ge.D)({item:b}),z=u.getCapabilities().hasPipSupport,L=(0,He.z)(),_=(0,C.o)((e=>e),((e,t)=>(0,Te.a)(e?.restrictions,t?.restrictions)&&e?.item?.uri===t?.item?.uri&&e?.isPaused===t?.isPaused)),{isPaused:M,canResume:k,canPause:I}=(0,T.Nh)(_),{spec:A,logger:R,UBIFragment:B}=(0,ee.r)(D.E,{data:{uri:N,identifier:q.Kz.npv}}),G=(0,i.useRef)(null),X=(0,i.useRef)(null),Y=o()("encore-over-media-set",Me),J=(0,i.useCallback)((()=>{let e=null;M&&k?(L.resume({featureIdentifier:"video-player"}),R.logInteraction(A.playButtonFactory().hitPlay({itemToBePlayed:N})),e=G):!M&&I&&(L.pause({featureIdentifier:"video-player"}),R.logInteraction(A.playButtonFactory().hitPause({itemToBePaused:N})),e=X),r&&e?.current?.animate&&e.current.animate(h?Ke:Ue,Ze)}),[I,k,M,R,L,A,N,r,h]),te=(0,i.useMemo)((()=>v?null:j?(0,m.jsx)(W.D,{label:P?l.Ru.get("miniplayer.close"):l.Ru.get("miniplayer.open-in"),onClick:V,active:P,className:Y,noBackground:!0,children:(0,m.jsx)(O.F,{size:"small",semanticColor:"textBase"})}):f&&z?(0,m.jsx)(Ne,{uri:N}):null),[P,v,f,z,V,j,N,Y]);return b&&w?(0,m.jsxs)(B,{spec:A,children:[g!==x.z.NOW_PLAYING_VIEW&&(0,m.jsxs)("div",{className:o()(_e,t,{[Re]:e}),children:[(0,m.jsx)(Pe.C,{renderInline:!0,className:o()(Y,{[Be]:p}),noBackground:!0}),te,d&&(0,m.jsx)(Fe,{}),p?(0,m.jsx)(le,{className:Y}):(0,m.jsx)(ie,{noBackground:!0,className:Y})]}),n&&(0,m.jsx)("div",{tabIndex:-1,"data-prevents-ambient-mode":"false",className:o()(ke,{[Re]:e})}),(0,m.jsx)(H.h,{menu:(0,m.jsx)(U.W,{context:w,item:b}),children:(0,m.jsxs)("div",{className:Ie,tabIndex:-1,"data-prevents-ambient-mode":"false",onClick:J,onKeyDown:()=>{},"aria-label":M?l.Ru.get("play"):l.Ru.get("pause"),role:"button",children:[(0,m.jsx)("div",{className:Ae,ref:G,children:(0,m.jsx)(S.x,{size:"xlarge",width:48})}),(0,m.jsx)("div",{className:Ae,ref:X,children:(0,m.jsx)(F.B,{size:"xlarge",width:48})})]})}),s&&p&&(0,m.jsx)("div",{className:o()(Ee,{[Re]:e}),children:(0,m.jsx)(K.x,{isPreview:!1,timerPlacement:"indicatorOnly"})})]}):(0,m.jsx)(m.Fragment,{})};function Xe(e,t){(0,i.useLayoutEffect)((()=>{t.current&&e(t.current)}),[t,e])}const Ye="kJKEEG391Pf_PLzwG2Vm",$e=({setVideoContainer:e})=>{const t=(0,i.useRef)(null);Xe(e,t);const{isControlsVisible:n,handleKeepViewVisible:a}=B(),r=(0,E.NC)(Q.mzn),o=document.getElementById("VideoPlayerCinema_ReactPortal");return null===o?null:(0,A.createPortal)((0,m.jsx)("div",{ref:t,hidden:!1,className:Ye,onMouseMove:a,onFocus:a,"data-testid":"video-player-cinema",children:(0,m.jsx)(Ge,{visible:n&&!r})}),o)};var qe=n(94647),Qe=n(6976),Je=n(93805);const et="dg_LeRfnn0R3ivigmbze",tt="wdZZT43qDlLzMbBxRH7T",nt=({cinemaModeRef:e,setVideoContainer:t})=>{const n=(0,i.useRef)(null),{nowPlayingBarRef:a}=(0,qe.JT)(),{videoPlayerUIFlags:r,setVideoPlayerUIFlag:o}=(0,Qe.d)();Xe(t,n);const{isControlsVisible:s,handleKeepViewVisible:l}=B();return(0,i.useEffect)((()=>{const e=e=>{"Escape"===e.key&&o(q.nP.cinemaLegacy,!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[o,r.cinemaLegacy]),e.current?a.current?(0,A.createPortal)((0,m.jsxs)("div",{ref:n,className:et,onMouseMove:l,onFocus:l,"data-testid":"video-player-cinema",children:[(0,m.jsx)(Je.s,{containerElements:[e.current,a.current],active:!0,focusTrapOptions:{allowOutsideClick:!0}}),(0,m.jsx)(Ge,{visible:s,className:tt})]}),e.current):(console.error("No ref found for nowPlayingBar!"),null):(console.error("No container found for cinema video!"),null)};var it=n(70856);const at=({setVideoContainer:e})=>{const t=(0,i.useRef)(null);Xe(e,t);const n=window.documentPictureInPicture?.window,a=n?.document.getElementById("document-pip-main-container"),r=(0,De.$)();return(0,i.useEffect)((()=>(n&&r.setWindow(n),()=>{r.setWindow(window)})),[n,r]),a?(0,A.createPortal)((0,m.jsx)("div",{ref:t,"data-testid":"video-player-document-pip",className:it.A.videoPlayerContainer}),a):(0,m.jsx)(m.Fragment,{})},rt=i.memo((function({setVideoContainer:e,fullscreenModeRef:t}){const n=(0,i.useRef)(null);return Xe(e,n),t.current?(0,A.createPortal)((0,m.jsx)("div",{"data-testid":"video-player-fullscreen",className:o()("VideoFullscreenMode"),children:(0,m.jsx)("div",{className:"VideoFullscreenMode__video-container",ref:n})}),t.current):(console.error("No container found for fullscreen video!"),null)}));var ot=n(83531);const st="_2r290M0vbnbQGfhLbvq",lt=({setVideoContainer:e})=>{const t=(0,i.useRef)(null),n=(0,ot.SF)();Xe(e,t);const a=document.getElementById("VideoPlayerNpb_ReactPortal");return null===a?null:(0,A.createPortal)((0,m.jsx)("div",{ref:t,hidden:!1,className:st,style:{position:"relative"},onMouseDown:e=>{t.current&&n.current&&(e.stopPropagation(),e.preventDefault())},"data-testid":"video-player-npb"}),a)};var ct=n(53476),dt=n(87751);const ut="H2mo30Z5kNiGZbZ9U2Nu",pt="TbZ7pNOfpFK2FmnFuQcW",mt="BRt_JFU0qTnWIGCaWWJY",vt=({visible:e})=>{const t=(0,a.wA)(),n=o()(pt,{[mt]:e});return(0,m.jsx)("div",{className:ut,children:(0,m.jsx)("div",{className:n,children:(0,m.jsx)(d.$,{"aria-label":l.Ru.get("npv.full-screen"),colorSet:"overMedia",iconOnly:re.L,onClick:e=>{e.stopPropagation(),e.preventDefault(),t((0,c.MW)()),t((0,c.i2)(h.ee.EXPANDED))},size:"small"})})})},gt="Qhq7SHNg9UlhtkK9I6Km",ht="ZWx9Xu8F_WoC4M_KEbtW",ft=({element:e,handleKeepViewVisible:t,isControlsVisible:n,item:i,scrollNodeRef:r,setIsControlsVisible:s,setVideoContainer:l,videoContainerRef:c})=>{Xe(l,c);const d=(0,a.wA)(),u="portrait"===i.videoOrientation,p=i.url??void 0,v=o()(gt,{[ht]:u});return(0,A.createPortal)((0,m.jsx)("div",{ref:c,hidden:!1,className:v,onMouseLeave:()=>{s(!1)},onMouseDown:e=>{c.current&&r.current&&(e.stopPropagation(),e.preventDefault())},onMouseMove:t,onFocus:t,"data-testid":"ads-video-player-npv",children:p?(0,m.jsx)("a",{style:{zIndex:2},href:p,onClick:()=>{d((0,dt.q5)(ct.c.VIDEO_PLAYER,ct.V.AD_NPV))},"data-testid":"video-player-ad-wrapper",children:(0,m.jsx)(vt,{visible:n})}):(0,m.jsx)(vt,{visible:n})}),e)},bt="ouiL5cH1WduxtprQ0Iig",xt="ZFMDHV2keRjBzLaxEHri",yt="jJ41rQFZ_WobELYKsjJz",Ct="Ml4Cdu0qida6i2P4xr5z",wt=({setVideoContainer:e})=>{const t=(0,i.useRef)(null),n=(0,ot.SF)(),a=(0,C.o)((e=>e?.item??void 0),((e,t)=>e?.uri===t?.uri));Xe(e,t);const{isControlsVisible:r,setIsControlsVisible:o,handleKeepViewVisible:s}=B(),l=document.getElementById("VideoPlayerNpv_ReactPortal");return null===l?null:(0,w.N)(a)?(0,m.jsx)(ft,{element:l,handleKeepViewVisible:s,isControlsVisible:r,item:a,scrollNodeRef:n,setIsControlsVisible:o,setVideoContainer:e,videoContainerRef:t}):(0,A.createPortal)((0,m.jsx)("div",{className:bt,children:(0,m.jsx)("div",{ref:t,hidden:!1,className:xt,onMouseLeave:()=>{o(!1)},onMouseDown:e=>{t.current&&n.current&&(e.stopPropagation(),e.preventDefault())},onMouseMove:s,onFocus:s,"data-testid":"video-player-npv",children:(0,m.jsx)("div",{ref:t,children:(0,m.jsx)(Ge,{visible:r,darkOverlayOnHover:!0,showProgressbar:!0,className:r?yt:Ct})})})}),l)};const Nt=e=>{const t=(()=>{const[e]=(0,i.useState)((()=>{const e=document.createElement("div");return e.classList.add("VideoPlayer__container"),e}));return e})();if((0,i.useLayoutEffect)((()=>{null!==e&&null!==t&&e.insertBefore(t,e.firstChild)}),[e,t]),t&&t.firstChild instanceof HTMLVideoElement){const e=t.firstChild;return`${e.videoWidth}/${e.videoHeight}`}return"16/9"};var Pt=n(55912);var Vt=n(9981),jt=n(59242);const zt=n(78268).S.PICTURE_IN_PICTURE_CHANGED;const Lt=({setVideoContainer:e,videoContainerRef:t})=>(Xe(e,t),(0,m.jsx)("div",{ref:t,style:{display:"none"}})),_t=({cinemaModeRef:e,fullscreenModeRef:t})=>{const{videoPlayerMode:n}=(0,Qe.d)(),r=(0,i.useRef)(null),[o,s]=(0,i.useState)(null),l=(0,a.d4)((e=>e.platform.isDesktop)),{isPlayingVideoAd:d}=(0,C.o)((e=>{const t=e?.item??void 0;return{isPlayingVideoAd:(0,Ce.A3)(e)&&(0,w.N)(t)}})),u=(0,a.d4)((e=>e?.ads?.vto?.isMinimized));if(Nt(o),(()=>{const{isPlayingVideo:e,contextUri:t}=(0,C.o)((e=>({isPlayingVideo:(0,Ce.A3)(e),contextUri:e?.context.uri}))),{setVideoPlayerUIFlag:n}=(0,$.d)(),a=(0,Vt.v)((({connectionStatus:e})=>e===jt.zP.CONNECTED||e===jt.zP.CONNECTING));(0,i.useEffect)((()=>{const t=e&&!a;n(q.nP.videoAvailable,t)}),[e,a,n,t])})(),(()=>{const{setVideoPlayerUIFlag:e}=(0,$.d)(),t=(0,E.NC)(Q.mzn);(0,Pt.P)((n=>{t||e(q.nP.fullscreen,n)}))})(),(()=>{const e=(0,De.$)(),{videoPlayerMode:t}=(0,Qe.d)(),{leavePipVideoMode:n}=xe(),a=t===q.Kz.pip;(0,i.useEffect)((()=>e.getEvents().addListener(zt,(({data:e})=>{!e&&a&&n()}))),[e,a,n]),(0,i.useEffect)((()=>{const t=document.pictureInPictureElement;a&&!t&&e.setPip?.(!0),!a&&t&&e.setPip?.(!1)}),[e,a])})(),function(){const e=(0,De.$)(),{videoPlayerMode:t}=(0,$.d)(),[n,a]=(0,i.useState)(!document.hidden),[r,o]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e="visibilitychange",t=()=>{a(!document.hidden)};return document.addEventListener(e,t),()=>{document.removeEventListener(e,t)}}),[e,a]),(0,i.useEffect)((()=>{const i=!(t===q.Kz.pip||t===q.Kz.documentPip||t!==q.Kz.none&&n),a=e.getCapabilities().hasMinimizeBitrateSupport&&i;r!==a&&(e.setMinimizeBitrate(a),o(a))}),[e,t,n,r,o])}(),(()=>{const e=(0,a.wA)(),t=(0,i.useRef)(),{isPlayingVideoAd:n,playbackId:r}=(0,C.o)((e=>{const t=e?.item??void 0;return{isPlayingVideoAd:(0,Ce.A3)(e)&&(0,w.N)(t),playbackId:e?.playbackId}}));(0,i.useEffect)((()=>{n&&t.current!==r&&(e((0,c.MW)()),t.current=r)}),[r,n,e])})(),l&&d&&n!==q.Kz.pip&&!u)return(0,m.jsx)(k,{setVideoContainer:s});switch(n){case q.Kz.fullscreen:return(0,m.jsx)(I.s,{children:(0,m.jsx)("div",{ref:r,children:(0,m.jsx)(rt,{fullscreenModeRef:t,setVideoContainer:s})})});case q.Kz.cinema:return(0,m.jsx)(I.s,{children:(0,m.jsx)("div",{ref:r,children:(0,m.jsx)($e,{setVideoContainer:s})})});case q.Kz.cinemaLegacy:return(0,m.jsx)(I.s,{children:(0,m.jsx)("div",{ref:r,children:(0,m.jsx)(nt,{cinemaModeRef:e,setVideoContainer:s})})});case q.Kz.npv:return(0,m.jsx)(I.s,{children:(0,m.jsx)("div",{ref:r,children:(0,m.jsx)(wt,{setVideoContainer:s})})});case q.Kz.documentPip:return(0,m.jsx)(I.s,{children:(0,m.jsx)("div",{ref:r,children:(0,m.jsx)(at,{setVideoContainer:s})})});case q.Kz.nowPlayingBar:return(0,m.jsx)(I.s,{children:(0,m.jsx)("div",{ref:r,children:(0,m.jsx)(lt,{setVideoContainer:s})})});case q.Kz.none:default:return(0,m.jsx)("div",{ref:r,children:(0,m.jsx)(Lt,{videoContainerRef:r,setVideoContainer:s})})}}},12876:(e,t,n)=>{n.d(t,{F:()=>r});var i=n(30758),a=n(29032);function r(e){var t,n,r,o,s,l=e.size?a.$Z[e.size]:e.iconSize,c=(0,a._C)([{size:16,svgContent:"<path d='M16 2.45c0-.8-.65-1.45-1.45-1.45H1.45C.65 1 0 1.65 0 2.45v11.1C0 14.35.65 15 1.45 15h5.557v-1.5H1.5v-11h13V7H16V2.45z'/><path d='M15.25 9.007a.75.75 0 0 1 .75.75v4.493a.75.75 0 0 1-.75.75H9.325a.75.75 0 0 1-.75-.75V9.757a.75.75 0 0 1 .75-.75h5.925z'/>"},{size:24,svgContent:"<path d='M1 19a2 2 0 0 0 2 2h8.17c-.11-.313-.17-.65-.17-1v-1H3V5h18v7h1c.35 0 .687.06 1 .17V5a2 2 0 0 0-2-2H3a2 2 0 0 0-2 2v14z'/><path d='M14 21a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-8z'/>"}],l||24),d=null!==(t=e.autoMirror)&&void 0!==t&&t;return i.createElement(a.In,Object.assign({},e,{autoMirror:d,viewBox:"0 0 ".concat(c.size," ").concat(c.size),dangerouslySetInnerHTML:{__html:"".concat((o=e.title,s=e.titleId,o?"<title ".concat(s?'id="'.concat(s,'"'):"",">").concat(o,"</title>"):"")).concat((n=e.desc,r=e.descId,n?"<desc ".concat(r?'id="'.concat(r,'"'):"",">").concat(n,"</desc>"):"")).concat(c.svgContent)}}))}},32712:(e,t,n)=>{n.d(t,{sY:()=>x,Nh:()=>b,bo:()=>y,r3:()=>f,EX:()=>h,lZ:()=>g});var i=n(75044),a=n(24792);n(31491);const r=new a.l("queryFullscreenMode","query","5d8427bc0f6f2f6b96521121faf162094c2a3f14f0511b5ca0628c6a5028a3ea",null);var o=n(55405),s=n(11957),l=n(31889),c=n(63715),d=n(47219),u=n(24821),p=n(6725),m=n(29645),v=n(91563);const g=()=>{const e=(0,i.NC)(o.WYm,{loadingValue:!1});return(0,s.o)(m.A3)||e};function h(e){return(0,u.v)(e)?{uri:e.uri,name:e.name,creatorName:e.artists[0]?.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,d.p)(e)?{uri:e.uri,name:e.name,creatorName:e.show.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,c.d)(e)?{uri:e.uri,name:e.name,creatorName:e.book.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,l.N)(e)?{uri:e.uri,name:e.title??"",creatorName:e.advertiser??"",coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,p.v)(e)||void 0===e?void 0:(0,v.d)(e)}function f(e){const t=h(e);return(0,u.v)(e)||(0,d.p)(e)||(0,c.d)(e)||(0,l.N)(e)?{...t,duration:e.duration.milliseconds,mediaType:(n=e.mediaType,"video"===n||"mixed"===n?"video":"audio")}:(0,p.v)(e)||void 0===e?void 0:(0,v.d)(e);var n}function b(e){const t=e?.context.metadata?.context_description,n=e?.context.uri||void 0,i=e?.positionAsOfTimestamp??void 0,a=e?.timestamp,r=e?.isPaused,o=e?.restrictions.canPause,s=e?.restrictions.canResume;return{contextName:t,contextUri:n,position:i,timestamp:a,isPaused:r,canPause:o,canResume:s}}async function x(e,t){return e(r,{artistUri:t}).then((e=>{if("Artist"===e?.data?.artistUnion.__typename){const t=e.data.artistUnion.headerImage;if("ImageV2"===t?.data?.__typename)return t?.data.sources[0]?.url}})).catch((()=>{}))}function y(e,t,n){if(e&&n&&n.hasLyrics)return{status:t?"loading":"success",content:{provider:n.provider,syncType:n.syncType,lines:n.lyrics.map((e=>({timestamp:Number(e.start),text:e.text})))}}}},49908:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(85387),a=n(2849),r=n(49361),o=n(35397);function s({referrer:e,onChange:t}){const n=(0,i.Zp)(),{isActive:s,routeDestination:l}=(0,a.$)(),{setVideoPlayerUIFlag:c}=(0,r.d)(),d=()=>{s||(c(o.nP.cinemaLegacy,!1),n(l,{state:{referrer:e}}),t?.(l))},u=()=>{s&&(n(-1),t?.(null))};return{isActive:s,showLyrics:d,hideLyrics:u,toggleLyrics:()=>{s?u():d()}}}},58979:(e,t,n)=>{n.d(t,{x:()=>i.x});var i=n(74598)},70856:(e,t,n)=>{n.d(t,{A:()=>i});const i={videoPlayerContainer:"ngkFeIGFyNUaxRspbs5H"}},71267:(e,t,n)=>{n.d(t,{D:()=>d});var i=n(30758),a=n(52223);var r=n(49361),o=n(35397),s=n(12543),l=n(61542),c=n(5141);const d=({item:e,onClick:t})=>{const n=(0,s.W)(),{capabilities:{isEnabled:d},isOpen:u,close:p,open:m,canOpen:v}=(0,l.H)(),{videoPlayerMode:g}=(0,r.d)(),{spec:h,logger:f}=(0,c.r)(a.h9,{data:{identifier:g===o.Kz.cinemaLegacy?a.gw.CINEMA:a.gw.DESKTOP}}),b=(0,i.useCallback)((()=>{let i;d&&(u?(p(),e?.uri&&f.logInteraction(h.pipButtonFactory({uri:e.uri}).hitUiHide()),i="close-picture-in-picture"):(m(),e?.uri&&(({spec:e,logger:t,uri:n})=>{const i=window.documentPictureInPicture;if(!i)return;const a=r=>{setTimeout((()=>{const i=r.window?.innerWidth,a=r.window?.innerHeight;if(!i||!a)return;const o=e.pipButtonFactory({uri:n}).hitUiOpenWindow({widthPx:i,heightPx:a});t.logInteraction(o)}),100),i.removeEventListener("enter",a)};i.addEventListener("enter",a)})({spec:h,logger:f,uri:e.uri}),i="show-picture-in-picture"),t?.(!u,e?.uri),n({type:"click",intent:i,targetUri:e?.uri,itemIdSuffix:"picture-in-picture-toggle"}))}),[p,d,u,e?.uri,f,t,n,m,h]);return{showButton:v,isActive:u,onClick:b}}},74598:(e,t,n)=>{n.d(t,{x:()=>H});const i="playback-bar",a="playback-bar__progress-time-elapsed",r="gglUjikTBtMzCZFgSmpS",o="dN6OLjjcmnuleiECu55A",s="DSdahCi0SDG37V9ZmsGO",l="playback-progressbar-container";var c=n(30758),d=n(97500),u=n.n(d),p=n(25270),m=n(75044),v=n(17640),g=n(38864),h=n(79825),f=n(99565),b=n(87983);const x="main-playbackBarRemainingTime-container";var y=n(86070);const C=({position:e,duration:t,isPreview:n,semanticColor:i="textSubdued",isFullscreenMode:a=!1,className:r})=>{const[o,s]=(0,f.x)(h.fC,!1),l=(0,c.useCallback)((()=>{n||s(!o)}),[o,s,n]);return(0,y.jsx)(p.E,{as:"div","data-testid":"playback-duration","data-test-position":e,variant:a?"bodyMedium":"marginal",className:u()(x,r),onClick:l,semanticColor:i,children:o?`-${(0,b.f)(t-e)}`:(0,b.f)(t)})};var w=n(42594),N=n(11957),P=n(24821);const V="Bn7RYdPUyzN4qo1bC1Ic",j="OEe8k2xe6o6x9x0FAc4b",z=[{name:"Anakin",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"7px","--core-color":"white","--edge-glow-color":"rgb(55, 132, 214)","--blur-glow-color":"#2e77d0","--blur-radius":"16px","--spread-radius":"8px","--saber-hilt-url":`url(${(0,w.b)("images/sw_saber_anakin.png")})`,"--saber-hilt-overlap":"5px"}},{name:"Luke",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"9px","--core-color":"white","--edge-glow-color":"rgb(135, 220, 90)","--blur-glow-color":"#1ed760","--blur-radius":"16px","--spread-radius":"4px","--saber-hilt-url":`url(${(0,w.b)("images/sw_saber_luke.png")})`,"--saber-hilt-overlap":"5px"}},{name:"Vader",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"10px","--core-color":"white","--edge-glow-color":"rgb(229, 17, 21)","--blur-glow-color":"#cd1a2b","--blur-radius":"20px","--spread-radius":"14px","--saber-hilt-url":`url(${(0,w.b)("images/sw_saber_vader.png")})`,"--saber-hilt-overlap":"6px"}},{name:"Rey",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"8px","--core-color":"white","--edge-glow-color":"rgb(249, 164, 11)","--blur-glow-color":"rgb(253, 175, 33)","--blur-radius":"20px","--spread-radius":"5px","--saber-hilt-url":`url(${(0,w.b)("images/sw_saber_rey.png")})`,"--saber-hilt-overlap":"3px"}},{name:"Leia",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"9px","--core-color":"white","--edge-glow-color":"rgb(55, 132, 214)","--blur-glow-color":"#2e77d0","--blur-radius":"16px","--spread-radius":"8px","--saber-hilt-url":`url(${(0,w.b)("images/sw_saber_leia.png")})`,"--saber-hilt-overlap":"2px"}},{name:"Mace",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"9px","--core-color":"white","--edge-glow-color":"rgb(90, 22, 167)","--blur-glow-color":"rgb(172, 57, 193)","--blur-radius":"20px","--spread-radius":"8px","--saber-hilt-url":`url(${(0,w.b)("images/sw_saber_mace.png")})`,"--saber-hilt-overlap":"1px"}},{name:"Ahsoka",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"6px","--core-color":"white","--edge-glow-color":"rgb(255,255,255)","--blur-glow-color":"rgb(255,255,255)","--blur-radius":"20px","--spread-radius":"5px","--saber-hilt-url":`url(${(0,w.b)("images/sw_saber_ahsoka1.png")})`,"--saber-hilt-overlap":"-9px","--saber-hilt-width":"100px","--saber-hilt-height":"36px"}}],L=["spotify:playlist:37i9dQZF1DXaUaRhCgtpCo","spotify:playlist:69BOXIItwwyxTgdz6flzvU","spotify:playlist:37i9dQZF1DWUgUvAPAFxdh"],_=["official_star_wars","kirbysayshi","hansencc"],M=/Star Wars/i,k="THX1138";function I({onChange:e}){const t=function(){const[e,t]=(0,c.useState)([]),[n,i]=(0,c.useState)(!1);return(0,c.useEffect)((()=>{const a=a=>{for(e.push(a.key);e.length>7;)e.shift();e.join("")===k&&i(!n),t([...e])};return window.addEventListener("keypress",a),()=>{window.removeEventListener("keypress",a)}}),[e,n]),(0,N.o)((e=>{const t=e?.context.uri??"",n=e?.context?.metadata?.context_owner??"",i=e?.item??void 0;return!!L.includes(t)||!!_.includes(n)||!!(0,P.v)(i)&&(M.test(i.name)||M.test(i.album.name))}))||n}(),{next:n,config:i}=function(e){const[t,n]=(0,c.useState)(0);return{next:()=>{n((t+1)%z.length)},config:e?z[t]:null}}(t),a=(0,c.useRef)(e);return a.current=e,(0,c.useEffect)((()=>{a.current(i?.vars??null)}),[i]),i?(0,y.jsx)("div",{className:V,children:(0,y.jsx)("button",{"data-testid":"saber-hilt-button","aria-label":v.Ru.get("playback-control.a11y.lightsaber-hilt-button",i?.name),className:j,style:i.vars,onClick:n})}):null}var A=n(62564),E=n(88025),R=n(27733);const B=["spotify:playlist:37i9dQZF1DXc3KPAjGyPdm"];var O=n(55405),S=n(36838),F=n(19099),D=n(90782);const W=1e3,H=({isPreview:e,isFullscreenMode:t=!1,timerPlacement:n="inline",onChange:d,onDragStart:h,onDragEnd:f})=>{const x=(0,m.NC)(O.O14),[w,P]=(0,c.useState)(null),V=(0,S.z)(),j=(0,N.o)((e=>e),((e,t)=>e?.duration===t?.duration&&e?.hasContext===t?.hasContext&&e?.restrictions?.canSeek===t?.restrictions?.canSeek)),{seekOffsetMs:z}=(0,D.p)(),L=j?.duration??0,_=j?.hasContext??!1,M=j?.restrictions?.canSeek??!1,[k,H,T]=(0,F.S)(W),[U,K]=(0,c.useState)(null),Z=null!==U?U:k,G=null!==U?U:k+(x&&!T?W:0),X=e=>{K(e*L),h?.()},Y=(Z>0||L>0)&&"true"!==j?.item?.metadata?.is_narration,$=(0,b.f)(Y?Z:NaN),q=(0,b.f)(Y?L:NaN),Q=function(){const e=(0,R.S)()!==E.z.CLOSED,t=(0,N.o)((e=>{const t=e?.context.uri??"";return B.includes(t)}));return!e&&t}(),J=(0,A.l)(),ee="above"===n?o:r;return(0,y.jsxs)("div",{className:u()(i,ee),children:["indicatorOnly"!==n&&(0,y.jsx)(p.E,{"data-testid":"playback-position",as:"div",variant:t?"bodyMedium":"marginal",className:a,semanticColor:t?"textBase":"textSubdued",children:$}),(0,y.jsxs)("div",{className:l,children:[_?(0,y.jsx)(I,{onChange:e=>{P(e)}}):null,(0,y.jsx)(g.z2,{labelText:v.Ru.get("playback-control.a11y.seek-slider-button"),value:G,updateFrequency:W,offFrequencyUpdate:T,max:L,step:z,"aria-valuetext":v.Ru.get("download.progress-global",$,q),isInteractive:_&&Y,onDragStart:X,onDragMove:X,onDragEnd:(e,{wasDraggedBeforeReleased:t})=>{if(K(null),f?.(),!M)return;const n=e*L;H(n),V.seekTo(n);const i=t?"drag":"hit";d?.(n,i)},saberConfig:w,isPlayingStrangerThings:Q,"data-testid":"playback-progressbar",enableAnimation:x,showValueAsTimeOverHandle:"indicatorOnly"===n,easterEggConfig:J})]}),"indicatorOnly"!==n&&(0,y.jsx)(C,{position:Z,duration:Y?L:NaN,isPreview:e,semanticColor:t?"textBase":"textSubdued",isFullscreenMode:t,className:s})]})}},77171:(e,t,n)=>{n.d(t,{C:()=>r});var i=n(30758),a=n(29032);function r(e){var t,n,r,o,s,l=e.size?a.$Z[e.size]:e.iconSize,c=(0,a._C)([{size:16,svgContent:"<path d='M14.55 1c.8 0 1.45.65 1.45 1.45V7h-1.5V2.5h-13v11h5.507V15H1.45C.65 15 0 14.35 0 13.55V2.45C0 1.65.65 1 1.45 1h13.1z'/><path d='M16 9.757a.75.75 0 0 0-.75-.75H9.068L6.56 6.5h1.385a.75.75 0 1 0 0-1.5H4v3.946a.75.75 0 0 0 1.5 0V7.561l3.076 3.075v3.614c0 .414.336.75.75.75h5.925a.75.75 0 0 0 .75-.75V9.757z'/>"},{size:24,svgContent:"<path d='M3 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h18a2 2 0 0 1 2 2v7.17c-.313-.11-.65-.17-1-.17h-1V5H3v14h8v1c0 .35.06.687.17 1H3z'/><path d='M14 21h8a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1h-8.906L8.56 9.467h1.94a.75.75 0 0 0 0-1.5H6v4.526a.75.75 0 0 0 1.5 0v-1.966l5.5 5.5V20a1 1 0 0 0 1 1z'/>"}],l||24),d=null!==(t=e.autoMirror)&&void 0!==t&&t;return i.createElement(a.In,Object.assign({},e,{autoMirror:d,viewBox:"0 0 ".concat(c.size," ").concat(c.size),dangerouslySetInnerHTML:{__html:"".concat((o=e.title,s=e.titleId,o?"<title ".concat(s?'id="'.concat(s,'"'):"",">").concat(o,"</title>"):"")).concat((n=e.desc,r=e.descId,n?"<desc ".concat(r?'id="'.concat(r,'"'):"",">").concat(n,"</desc>"):"")).concat(c.svgContent)}}))}}}]);
//# sourceMappingURL=dwp-video-player.js.map