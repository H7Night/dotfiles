"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5853],{10584:(e,t,a)=>{a.d(t,{Z:()=>c});a(54615),a(32807);var n=a(30758),r=a(23736),o=a(29174),i=a(43026);const s=e=>"uri"in e,c=e=>{const t=(0,i.s)(),a=s(e.data)?(0,r.o_h)(e.data.uri):void 0,c=(0,n.useMemo)((()=>e.spec?.eventCardFactory({identifier:a?.id,position:e.position,uri:a?.toURI()??""})),[e,a]);if(s(e.data))return{uri:e.data.uri,title:e.data.venueConcerts.items.map((e=>{if(!(t=e.data)||!("artists"in t))return null;var t;const[a]=e.data.artists.items;return(n=a.data)&&"uri"in n?a.data.profile.name:null;var n})).filter(Boolean).join(o.Ru.getSeparator()),imageUrl:e.data.marketing.coverImage??void 0,handleClick:()=>c&&a&&t.logInteraction(c.hitUiNavigate({destination:a?.toString()}))}}},12171:(e,t,a)=>{a.d(t,{C:()=>p});var n=a(17369),r=a(70719),o=a(70658),i=a(6317);const s="k1Ab_RdxMGZYLD1Y2cYM",c="XydWclkpDI6Jrv6hOvvH",l="_lQHlZ3nuYz5jjUSyoj7",d="f5re1_09HMOZmM62Mpb5",u="cWSRXQ3eF6vWtAmzttpj";var h=a(86070);const p=e=>{const{uri:t,onClick:a,title:p}=e;return(0,h.jsx)(r.N,{to:t,className:s,onClick:a,"data-testid":"venue-card",children:(0,h.jsxs)("div",{className:c,children:[(0,h.jsx)(i.b,{children:(0,h.jsx)("div",{role:"img",className:l,style:{backgroundImage:`url(${e.imageUrl})`},children:!e.imageUrl&&(0,h.jsx)(o.r,{iconSize:48})})}),(0,h.jsx)("div",{className:d,children:(0,h.jsx)(n.E,{as:"span",variant:"bodySmall",className:u,semanticColor:"textSubdued",children:p})})]})})}},17377:(e,t,a)=>{a.d(t,{A:()=>x});var n=a(30758),r=a(29603),o=a(17369),i=a(91395),s=a(70719),c=a(99078),l=a(6317);const d="wedRUk4eiBo9n9vqXLhU",u="hMbtEskyvMbDiwq1EScA",h="HYVIJaYYiCTgSCHie70L",p="SPbe_Q1wtiZQCmo0QKUy",m="TRp4tgG7_cymGIXDevIP",g="tC1Y_nwyyly7cpIGqF5K",v="l93AfoV_qHnMQSQBB5GK",C="DgDBmSR2sbwji2UfqxIf",y="EkGb0ZzhswreSvpZoioY";var _=a(86070);const x=(0,n.memo)((e=>{const{uri:t,title:a,imageUrl:n,date:x,subTitle:b,firstParty:j,onClick:f}=e,A=x?(0,c.l4)(x):void 0;return(0,_.jsx)(s.N,{to:t,className:d,"data-testid":"concert-card",onClick:f,children:(0,_.jsxs)("div",{className:u,children:[(0,_.jsx)(l.b,{children:(0,_.jsx)("div",{role:"img",className:y,style:{backgroundImage:`url(${n})`},children:!n&&(0,_.jsx)(r.r,{role:"img",size:"xxlarge",semanticColor:"textSubdued"})})}),A&&(0,_.jsxs)("time",{className:h,dateTime:x,children:[(0,_.jsx)(o.E,{as:"div",variant:"bodySmall",children:(0,c.tj)(A)}),(0,_.jsx)(o.E,{as:"div",variant:"bodyMediumBold",children:(0,c.Py)(A)})]}),(0,_.jsxs)("div",{className:p,dir:"auto",children:[(0,_.jsx)(o.E,{as:"h3",variant:"bodyMedium",className:m,children:a}),(0,_.jsxs)("div",{className:g,children:[j&&(0,_.jsx)("span",{className:C,children:(0,_.jsx)(i.D,{size:"small"})}),(0,_.jsx)(o.E,{as:"span",className:v,variant:"bodySmall","data-testid":"location-name",semanticColor:"textSubdued",children:b})]})]})]})})}))},30631:(e,t,a)=>{a.d(t,{Q:()=>n});const n=e=>{const[t]=e;if(!("visuals"in t.data))return;const[a]=t.data.visuals.avatarImage?.sources??[];return a?.url}},34430:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});a(32807);var n=a(97500),r=a.n(n),o=a(66590),i=a(36948);const s="0.1.0",c="default";function l(e){return new d(e)}class d{constructor(e){this._path=[{name:"desktop-concerts-gallery"}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}eventSectionFactory(e){return new d.EventSectionEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[c,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[s,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}!function(e){e.EventSectionEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({...a,name:"event_section"}),t&&(this._parentAbsoluteLocation=t)}eventCardFactory(t){return new e.EventSectionEventFactory.EventCardEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[c,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[s,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}}(d||(d={})),function(e){!function(e){e.EventCardEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({...a,name:"event_card"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[c,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[s,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:"music",generatorVersion:"16.2.6",interactionType:"hit",specificationMode:c,specificationVersion:s,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(e.EventSectionEventFactory||(e.EventSectionEventFactory={}))}(d||(d={}));var u=a(29174),h=a(39651),p=a(90658),m=a(6836),g=a(46749),v=a(72226),C=a(22775),y=a(11689),_=a(48796),x=a(37461),b=a(30758),j=a(25201),f=a(17377),A=a(84601),L=a(86070);var S=a(12171),k=a(10584);const N=(e,t)=>{const a={genreForYou:u.Ru.get("concerts.genre_for_you",...t),genreAll:u.Ru.get("concerts.genre_all_events",...t),genreAllNearYou:u.Ru.get("concerts.genre_all_events_near_you",...t)};return null!=(n=e)&&n in a?a[e]:e;var n},G={ConcertGalleryVenueCard:e=>{const t=(0,k.Z)({data:(a=e.data,"__typename"in a&&"ConcertGalleryVenueCard"===a.__typename?e.data.venue.data:{}),position:e.position,spec:e.spec});var a;return t?(0,L.jsx)(S.C,{uri:t.uri,title:t.title,imageUrl:t.imageUrl,onClick:t.handleClick}):null},ConcertGalleryConcertCard:e=>{const t=(0,A.I)({...(a=e.data,"__typename"in a&&"ConcertGalleryConcertCard"===a.__typename?e.data.concert:{}),position:e.position,spec:e.spec});var a;return t?(0,L.jsx)(f.A,{...t,onClick:t.handleClick}):null}},E=({position:e,header:t,items:a,spec:n})=>{const r=(0,b.useMemo)((()=>n?.eventSectionFactory({position:e})),[n,e]);return(0,L.jsx)(j.$,{total:a.length,showAll:!0,title:N(t?.title,t?.titleAttributes??[]),withEncoreCards:!1,children:a.map(((e,t)=>{if("ConcertGalleryTitle"===e.__typename)return null;if(!Object.keys(G).includes(e.__typename))return null;const a=G[e.__typename];return(0,L.jsx)(a,{position:t,data:e,spec:r},t)}))})};a(54615),a(88747);var w=a(88657),M=a(85387),V=a(60749),I=a(61179);a(12074);const P=Spicetify.GraphQL.Definitions["ConcertGallery"]=new I.l("ConcertGallery","query","38dffa5bd586bc7b714ea89e7ad86c23d59d9d3153553af2fb6d33e35543553b",null);var R=a(96455),F=a(66796);const U=e=>void 0!==e&&"__typename"in e&&"ConcertGalleryView"===e.__typename,H=({useInfiniteQuery:e=w.q}={})=>{const{request:t}=(0,b.useContext)(R.j),{slug:a}=(0,M.g)(),[n]=(0,V.ok)(),r=`spotify:concert-gallery:${a}${n?`?${n.toString()}`:""}`,o=e({queryKey:["concert-gallery",r],queryFn:({pageParam:e})=>(0,F.c)(t,P,{uri:r,nextPageToken:e}),staleTime:6e4,gcTime:6e4,initialPageParam:"",getNextPageParam:e=>U(e?.data?.concertGallery)?e.data.concertGallery.nextPageToken:void 0}),i=(s=o.data?.pages,s?.reduce(((e,t)=>{const a=U(e.concertGallery)?e.concertGallery:void 0,n=U(t?.data?.concertGallery)?t.data.concertGallery:void 0,r=a?.items??[];return{concertGallery:{...n,...a,items:[...r,...n?.items??[]]}}}),{concertGallery:{}}));var s;if(!U(i?.concertGallery))return{loading:o.isLoading};const c=i.concertGallery.items.reduce(((e,t)=>{if("ConcertGalleryTitle"===t.__typename)return[...e,[t]];const a=e.pop()??[];return[...e,[...a,t]]}),[]).filter((e=>{const[t]=e;return"ConcertGalleryTitle"===t.__typename?e.length>1:e.length>0}));return{data:i.concertGallery,sections:c,loading:o.isLoading,fetchNextPage:o.fetchNextPage}};var T=a(17154);const Q="qivAyVC3g48WmEmuzJFu",Y="SmXDRdhHxX2kRPHxvMu9",q=()=>{const{data:e,sections:t,loading:a,fetchNextPage:n}=H(),{spec:s}=(0,T.r)(l,{});return a?(0,L.jsx)(x.LoadingPage,{hasError:!1,errorMessage:""}):e?(0,L.jsxs)("section",{children:[e.header?.title&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.Q,{children:e.header.title}),(0,L.jsxs)(m.z,{size:m.K.SMALL,backgroundColor:e.header.hexColor||o.Ql9,children:[(0,L.jsx)(v.Y,{children:(0,L.jsx)(_.mm,{children:e.header.title})}),e.header.description&&(0,L.jsx)(g.Z,{children:e.header.description}),(0,L.jsx)(C.h,{children:(0,L.jsx)("div",{children:(0,L.jsx)(y.X,{text:e.header.title})})})]})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)(h.K,{backgroundColor:e.header?.hexColor||o.Ql9}),(0,L.jsxs)("div",{className:r()(Q,"contentSpacing"),children:[t?.map(((e,t)=>{const[a,...n]=e,r="ConcertGalleryTitle"===a.__typename?a:void 0,o=r?n:e;return(0,L.jsx)(E,{position:t,header:r,items:o,spec:s},t)})),n&&(0,L.jsx)(i.n,{onClick:n,className:Y,children:u.Ru.get("concerts.load_more")})]})]})]}):(0,L.jsx)(x.LoadingPage,{hasError:!0,errorMessage:u.Ru.get("concert.error.concert_not_found_title")})}},70658:(e,t,a)=>{a.d(t,{r:()=>r});var n=a(86070);const r=e=>(0,n.jsx)("svg",{width:e.iconSize,height:e.iconSize,viewBox:"0 0 42 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 0C21.0532 0 22.0879 0.278738 23 0.808199L38 9.51508C38.6081 9.86805 39.113 10.3757 39.4641 10.9871C39.8151 11.5984 40 12.2919 40 12.9978V39.9892C40 40.5225 39.7893 41.0339 39.4142 41.411C39.0391 41.7882 38.5304 42 38 42H26H14H2C1.46957 42 0.960859 41.7882 0.585786 41.411C0.210714 41.0339 0 40.5225 0 39.9892V12.9978C1.78369e-05 12.2919 0.184851 11.5984 0.535924 10.9871C0.886996 10.3757 1.39194 9.86805 2 9.51508L17 0.808199C17.9121 0.278738 18.9468 0 20 0ZM29.2728 14.7624H12.9091V27.5589H11.2728C10.5176 27.5589 9.77939 27.7841 9.15149 28.2059C8.52359 28.6277 8.03421 29.2273 7.74522 29.9287C7.45623 30.6302 7.38062 31.402 7.52794 32.1467C7.67527 32.8914 8.03891 33.5754 8.5729 34.1123C9.10688 34.6491 9.78721 35.0148 10.5279 35.1629C11.2685 35.311 12.0362 35.235 12.7339 34.9444C13.4316 34.6539 14.0279 34.1618 14.4475 33.5305C14.867 32.8992 15.0909 32.157 15.0909 31.3978V16.956H27.0909V27.5589H25.4546C24.6994 27.5589 23.9612 27.7841 23.3333 28.2059C22.7054 28.6277 22.216 29.2273 21.927 29.9287C21.638 30.6302 21.5624 31.402 21.7098 32.1467C21.8571 32.8914 22.2207 33.5754 22.7547 34.1123C23.2887 34.6491 23.969 35.0148 24.7097 35.1629C25.4503 35.311 26.2181 35.235 26.9157 34.9444C27.6134 34.6539 28.2097 34.1618 28.6293 33.5305C29.0488 32.8992 29.2728 32.157 29.2728 31.3978V14.7624Z",fill:"currentColor"})})},84601:(e,t,a)=>{a.d(t,{I:()=>d});var n=a(30758),r=a(23736),o=a(29174),i=a(34597),s=a(30631),c=a(99078),l=a(43026);const d=e=>{const t=(0,l.s)(),a=(0,n.useMemo)((()=>{const t=(0,r.o_h)((0,i.$V)(e)?e.data.uri:"");return e.spec?.eventCardFactory({identifier:t?.id,position:e.position,uri:t?.toURI()??""})}),[e]);if(!(0,i.$V)(e))return;return{imageUrl:(0,s.Q)(e.data.artists.items)??"",uri:e.data.uri,title:e.data.title,subTitle:[e.data.location.name,e.data.location.city].join(o.Ru.getSeparator()),date:e.data.startDateIsoString,dateRange:(0,c.Y)(new Date(e.data.startDateIsoString)),handleClick:()=>a&&t.logInteraction(a.hitUiNavigate({destination:e.data.uri}))}}}}]);
//# sourceMappingURL=xpui-routes-collection-concert-gallery.js.map