"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8606],{18733:(e,t,a)=>{a.d(t,{W:()=>i});var s=a(30758);const i=()=>{const[e,t]=(0,s.useState)(!1);return{isOpen:e,openModal:(0,s.useCallback)((()=>t(!0)),[]),closeModal:(0,s.useCallback)((()=>t(!1)),[])}}},19929:(e,t,a)=>{a.d(t,{B:()=>I,q:()=>A});var s=a(30758),i=a(62411),r=a(6300),n=a(31014),o=a(59429),l=a(65924),c=a(47290),d=a(27649),u=a(61328),m=a(37114),h=a(68283),p=a(44718),g=a(42812),x=a(55995),y=a(12304),b=a(67762),v=a(92297),j=a(72308),f=a(33782),C=a(62935),P=a(20579),k=a(51283),w=a(3161),R=a(84785),S=a(38138),E=a(86070);function I(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const N=e=>`activation-trigger-mme-${e}`,A=s.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:A,status:B,variant:_}){const T=(0,b.c)(),F=a.playedState.playPositionMilliseconds,U=a.uri,D=(0,s.useRef)(null),L=(0,g.N)(t.uri),{draggable:M,onDragStart:O}=(0,x.P)(),z=(0,y.V)(),H=(0,f.y)(),V=(0,i.wA)(),{UBIFragment:q,spec:G,logger:W}=(0,w.r)(r.d,{data:{uri:U,reason:a.requestId||"",position:e}}),K=(0,k.t)(G),{isActive:$,isPlaying:X,togglePlay:Y}=A({uri:U}),[Q]=(0,C.S)(1e4,(e=>e?.item?.uri===U)),{isFullyPlayed:Z,setIsFullyPlayed:J}=(0,P.e)(U,a.duration.milliseconds,X);(0,s.useEffect)((()=>{X&&(D.current=Q)}),[X,Q]),(0,s.useEffect)((()=>{!X&&D.current&&a.duration.milliseconds<=D.current&&J(!0)}),[X,a.duration.milliseconds,J]);const ee=(0,s.useCallback)((e=>{e||(D.current=0),J(e)}),[J]),te=I(t),ae=(0,v.C)({...a,coverArt:{sources:a.coverArt}},te),se=(0,s.useCallback)((()=>{if(a.episodeType===R.I_.Episode&&T)m.h.set((()=>({triggerId:N(a.uri),triggerAction:null})));else if(z)ae();else{let e;e=X?G.playButtonFactory().hitPause({itemToBePaused:U}):$?G.playButtonFactory().hitResume({itemToBeResumed:U}):G.playButtonFactory().hitPlay({itemToBePlayed:U});const t=W.logInteraction(e);Y({loggingParams:t})}}),[$,ae,Y,U,X,z,a,T,W,G]),ie=(0,s.useCallback)((()=>{W.logInteraction(G.hitUiNavigate({destination:U}))}),[U,W,G]),re=a.podcastSubscription?.isPaywalled??!1,ne=a.podcastSubscription?.isUserSubscribed??!1,oe=re&&!ne,le=re&&z,{badges:ce}=(0,S.b)({contentRating:a.contentRating?.label,isPaywalled:re}),de=(0,s.useCallback)((()=>V((0,o.Tf)(t.uri))),[t.uri,V]),ue=(0,s.useCallback)((e=>{let s=e;return(oe||le)&&(s=(0,E.jsx)(h.N,{enabled:!0,showUri:a.podcast?.uri||t.uri,renderInline:!1,children:s})),!a.playability.playable&&ce.nineteen&&(s=(0,E.jsx)("div",{onClick:e=>{e.stopPropagation(),de()},children:e})),s=(0,E.jsx)(l.k,{id:N(U),targetURI:(0,n.o_h)(U),children:s}),s}),[U,oe,le,t.uri,ce.nineteen,a.playability.playable,de,a.podcast?.uri]);return(0,E.jsx)(q,{spec:G,children:(0,E.jsx)(j.pZ,{value:"row",index:e,children:(0,E.jsx)(c.h,{onShow:()=>{W.logInteraction(G.secondaryHitUiReveal())},menu:(0,E.jsx)(d.b,{uri:U,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:Z,onMarkAsPlayed:ee}),children:(0,E.jsx)(u.k,{ref:K,requestId:a.requestId,index:e,uri:U,size:H,images:a.coverArt||[],name:a.name,showName:a.podcast?.name||t.name,description:a.description,isPlayable:a.playability.playable||oe,fullyPlayed:Z,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate,resumePositionMs:D.current??F,draggable:M,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const s=`${a.name} • ${t.name}`;O(e,{itemUris:[U],dragLabelText:s,contextUri:t.uri})},handlePlaybackClick:se,handleClick:ie,isCurrentlyPlaying:$,isPaywalled:re,isUserSubscribed:ne,isCourseLesson:L,isPlaying:X,position:X?Q:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:ee,contentInformation:a.contentInformation,showUri:a.podcast?.uri||t.uri,mediaTypes:a.mediaTypes??void 0,badges:(0,E.jsx)(p.P,{episode:a}),playButtonWrapper:ue,onMoreButtonClick:()=>{W.logInteraction(G.moreButtonFactory().hitUiReveal())},status:B,variant:_})})})})}))},20634:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Hs});var s=a(30758),i=a(85387),r=a(30145),n=a(46233),o=a(31014),l=a(79252),c=a(11936),d=a(89339),u=a(97500),m=a.n(u),h=a(62411),p=a(77812),g=a(93960),x=a(8236),y=a(67e3),b=a(66105),v=a(24313),j=a(90298),f=a(45804),C=a(26240),P=a(31905),k=a(97837),w=a(25451),R=a(64389),S=a(309),E=a(20359),I=a(46412),N=a(76688),A=a(10311),B=a(1263),_=a(38138);const T="Bns6t3CfzQaCA4DLRzPQ",F="zGFcpmwFVhJxRDXUXoXA",U="_FLyhB96W9W0msGYNWUl",D="Si5iVyGLDY7mGWH_U2wA",L="HLBtD6mJyIB9EeOzDtXE",M="DRO0ur1WXqpK9BelywtE",O="vtlBEOtYFwv1cxC32ccc",z="Pq_DZj9ECxwTsK8pBxe0",H="bu7LVUNyDPF_FcrKMv74",V="bYP2npsc_CeChpMGcr6g",q="Ux7aVnDYlwojS4AmkSLg";var G=a(86070);let W=function(e){return e.SMALL="small",e.LARGE="large",e}({});const K=({images:e,title:t,contentRating:a,duration:s,moreButton:i,onClick:r,onContextMenu:n,onTouchStart:o,onTouchEnd:l,isPlaying:c,isActive:d,size:u,className:h,label:p,isPlayable:g=!0})=>{const x=u===W.LARGE?"medium":"small",{badges:y}=(0,_.b)({contentRating:a});return(0,G.jsxs)("div",{"data-testid":"trailer-component",className:m()(T,h,{[F]:d}),onContextMenu:n,onTouchStart:o,onTouchEnd:l,children:[(0,G.jsxs)("div",{className:D,children:[(0,G.jsxs)("div",{className:z,children:[(0,G.jsx)(E.b,{type:B.c.EPISODE,title:t,className:m()(O,{[q]:u===W.SMALL,[V]:u===W.LARGE}),size:I.Qe.SIZE_56,images:e,shape:E.u.ROUNDED_CORNERS}),(0,G.jsx)("div",{className:H,children:(0,G.jsx)(w.R,{"data-testid":"trailer-play-button",version:k.H4.transparent,size:x,isPlaying:c,onClick:r,disabled:!g})})]}),(0,G.jsxs)("div",{children:[(0,G.jsx)("div",{className:L,children:(0,G.jsx)(P.Z,{dir:"auto",className:U,variant:"balladBold",children:t})}),(0,G.jsxs)("div",{className:M,children:[(0,G.jsx)(R.E,{text:p}),y.explicit&&(0,G.jsx)(S.U,{}),y.nineteen&&(0,G.jsx)(N.q,{}),(0,G.jsx)(P.Z,{dir:"auto",variant:"mesto",children:(0,G.jsx)(A.d,{durationMs:s})})]})]})]}),i]})};var $=a(11966),X=a(15845);const Y=({htmlDescription:e,narrators:t,spec:a,isPreRelease:i})=>{const r=(0,X.s)(),n=(0,s.useCallback)((e=>{const t=a.seeMoreButtonFactory();r.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[r,a]);return(0,G.jsxs)(G.Fragment,{children:[t.length?(0,G.jsx)(p.E,{as:"p",variant:"bodyMedium",children:l.Ru.get("web-player.audiobooks.narratedByX",t.join(l.Ru.getSeparator()))}):null,e&&(0,G.jsx)($.N,{maxLines:4,content:e,htmlContent:e,onExpanded:n,isOpen:i||null})]})};var Q=a(50821),Z=a(55784),J=a(19730),ee=a(24771),te=a(81172),ae=a(77599),se=a(78723),ie=a(62502),re=a(33386),ne=a(81469);const oe="e74TmRHu_W1yZHspTBmR",le="rrcjfInomKt1lXRDRdR8",ce="Wj9mxFJDtPdiMcUtS1te",de="SCwESjClY3m_9JlV2L7S",ue="Yoa_yG2jhELT4w9wJpHf",me="xsw253oiwmIAafVfjl1J",he="JPqnsg5dgBTzsEoClLmD",pe="bhuRgaz03VXMf0mOG3Q2",ge="GP_qgmZlmL0CJ9r22AD9",xe="bilV2VquzmEnhV4d97Tc",ye="caqddwmUJf4ix6GI84NX",be=({explicit:e,durationMs:t,publishDate:a,preReleaseEndDateTime:s,isPreRelease:i,uri:r,isPlaying:n})=>{const o=(0,re.p)(r),{isMarkedAsFinished:c}=(0,ie.z)(r);let d;return i&&s?d=l.Ru.get("web-player.prerelease.releases_on",{date:l.Ru.formatDate(s)}):!i&&a&&(d=l.Ru.formatDate(a)),(0,G.jsxs)("div",{className:pe,children:[e&&(0,G.jsx)(S.U,{className:ye}),(0,G.jsxs)("div",{className:ge,children:[d&&(0,G.jsx)(p.E,{variant:"bodySmall",className:xe,children:d}),t?(0,G.jsxs)(G.Fragment,{children:[o?.playPositionMilliseconds?(0,G.jsx)(p.E,{variant:"bodySmall",className:xe,children:(0,G.jsx)(A.d,{durationMs:t})}):null,(0,G.jsx)(ne.j,{isPlaying:n,fullyPlayed:c,durationMs:t,position:o?.playPositionMilliseconds})]}):null]})]})};var ve=a(82499),je=a(27220);const fe=(0,s.createContext)(null),Ce=({children:e,isPreRelease:t})=>{const[a,i]=(0,s.useState)(!t),r=(0,s.useMemo)((()=>({isPreRelease:t,isCountdownFinished:a,setCountdownFinished:()=>i(!0)})),[t,a,i]);return(0,G.jsx)(fe.Provider,{value:r,children:e})};function Pe(){const e=(0,s.useContext)(fe);if(null===e)throw new Error("Trying to use 'PreRealeaseCountdownContext' without 'PreRealeaseCountdownProvider'!");return e}var ke=a(23149);const we="nz8Wc80RAtdAb3yU9FxM",Re=({uri:e})=>{const{isCountdownFinished:t}=Pe(),{invalidateCache:a}=(0,ke.W)(e);return(0,G.jsx)("div",{className:we,children:t?(0,G.jsx)(ve.$,{onClick:a,children:l.Ru.get("web-player.audiobooks.goToAudiobook")}):(0,G.jsx)(je.v,{uri:e,isBook:!0})})};var Se=a(2384),Ee=a(40638),Ie=a(35953),Ne=a(12304),Ae=a(20029);const Be="NQAShVY0o7RQ2bCTDSkw";function _e({uri:e,price:t,size:a,spec:s,logger:i,onPlayback:r}){const{enqueueSnackbar:n}=(0,Ie.d)(),o=(0,Ne.V)(),c=0===t?.finalPrice?.amount,d=c?s.getButtonFactory({uri:e}):s.buyButtonFactory({uri:e}),u=(0,Ee.YQ)((async()=>{if(i.logInteraction(d.hitShowPaywall({paywalledItem:e})),o)r();else{try{t?.finalPrice?await(0,Ae.S)({show_uri:e,currency:t.finalPrice.currency,price:t.finalPrice.amount}):n(l.Ru.get("error.generic"))}catch(e){n(l.Ru.get("error.generic"))}r()}}),2e3,{leading:!0,trailing:!1});return(0,G.jsx)(ve.$,{size:a,className:Be,style:{flexShrink:0},onClick:u,children:c?l.Ru.get("web-player.audiobooks.buyFree"):l.Ru.get("web-player.audiobooks.buy")})}const Te=({uri:e,isLocked:t,price:a,isPlaying:s,isConsumptionCapped:i,onPlayback:r,logger:n,spec:o,size:l="large"})=>t&&!i?(0,G.jsx)(_e,{size:l,uri:e,price:a,logger:n,spec:o,onPlayback:r}):(0,G.jsx)(Se.D,{size:l,isPlaying:s,uri:e,onClick:r});var Fe=a(85852),Ue=a(33796),De=a(81882),Le=a(19792),Me=a(15727),Oe=a(3161);const ze="8px",He=s.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:i,togglePlay:r,isLocked:n,isSaved:o,consumptionCapExplanation:c,price:d,spec:u,isExplicit:m,publishDate:p,preReleaseEndDateTime:g,duration:x}){const[y,f]=(0,Le.A)(t,o),C=!(0,De.n)(),{isPreRelease:P}=Pe(),k=(0,h.wA)(),w=(0,X.s)(),R=(0,Fe.d$)(),{spec:S,logger:E}=(0,Oe.r)(Q.e,{data:{uri:t}});(0,s.useEffect)((()=>{R&&E.logImpression(S.impression())}),[R,E,S]);const I=(0,s.useCallback)((()=>{const e=u.saveToLibraryButtonFactory();y?w.logInteraction(e.hitUnfollow({itemToBeUnfollowed:t})):(w.logInteraction(e.hitFollow({itemToBeFollowed:t})),R&&E.logInteraction(S.hitFollow({itemToBeFollowed:t}))),f(!y)}),[t,y,u,f,w,R,E,S]),N=(0,s.useCallback)(((e,a)=>{const s=u.downloadButtonFactory();c?k((0,b._3)(c)):a===Me.NV.ADD?w.logInteraction(s.hitDownload({itemToDownload:t})):a===Me.NV.REMOVE?w.logInteraction(s.hitRemoveDownload({itemToRemoveFromDownloads:t})):a===Me.NV.NO_PERMISSION&&w.logInteraction(s.hitUiReveal())}),[c,k,w,u,t]),A=(0,s.useCallback)((()=>{const e=u.contextButtonFactory().hitUiReveal();w.logInteraction(e)}),[w,u]),B=(0,Ue.j)(),_=!!c,T=!n&&!_;return(0,G.jsxs)(Z.E,{backgroundColor:e,style:{"--action-bar-padding-bottom":ze},children:[(0,G.jsx)(J.S,{testId:"book-action-bar-metadata",children:(0,G.jsx)(be,{explicit:m,publishDate:p,preReleaseEndDateTime:g,durationMs:x,isPreRelease:P,uri:t,isPlaying:i})}),(0,G.jsxs)(J.S,{children:[P&&(0,G.jsx)(Re,{uri:t}),!P&&(0,G.jsx)(Te,{uri:t,isLocked:n,isConsumptionCapped:_,price:d,isPlaying:i,onPlayback:r,logger:w,spec:u,size:B}),!P&&(0,G.jsx)(se.e,{children:(0,G.jsx)(ee.M,{isAdded:y,onClick:I,disabled:C,size:B,condensed:!0})},"follow-button"),(0,G.jsx)(te.I,{uri:t,onClick:N,size:B,canDownload:T}),(0,G.jsx)(j.b,{menu:(0,G.jsx)(ae.p,{uri:t,isPreRelease:P,price:d,isLocked:n,isCapped:_}),children:(0,G.jsx)(v.e,{label:l.Ru.get("more.label.context",a),onClick:A,size:B})})]})]})}));var Ve=a(47290),qe=a(80669),Ge=a(20535),We=a(94341),Ke=a(83415),$e=a(11891),Xe=a(7106),Ye=a(9242),Qe=a(35929),Ze=a(41882),Je=a(66444),et=a(9080),tt=a(46681),at=a(79447),st=a(18733),it=a(52748),rt=a(33782);const nt="BBK_i9SHovXTLVjas0kc",ot=s.memo((function({coverArt:e,name:t,authorName:a,authors:s,uri:i,backgroundColor:r,isPlaying:n,togglePlay:o,isLocked:c,price:d,isConsumptionCapped:u,logger:m,spec:h,preReleaseEndDateTime:g}){const x=(0,rt.y)(),y=x===it.E.SMALL||x===it.E.XSMALL,{isOpen:b,openModal:v,closeModal:j}=(0,st.W)(),{isPreRelease:f,setCountdownFinished:C}=Pe(),P=f&&y,k=(0,G.jsx)(ae.p,{uri:i,price:d,isLocked:c,isCapped:u}),w=(0,G.jsx)(tt.O,{authorName:a,authors:s});return(0,G.jsxs)(We.z,{backgroundColor:r,size:f?We.K.XLARGE:We.K.DEFAULT,children:[(0,G.jsxs)(Xe.h,{children:[f&&(0,G.jsx)(Re,{uri:i}),!f&&(0,G.jsx)(Te,{uri:i,isLocked:c,price:d,isPlaying:n,isConsumptionCapped:u,onPlayback:o,logger:m,spec:h,size:"medium"}),(0,G.jsx)(Ve.h,{menu:k,children:(0,G.jsx)(Ye.X,{text:t,dragUri:i,dragLabel:t})})]}),!P&&(0,G.jsx)(Ve.h,{menu:k,children:(0,G.jsx)(Ke.K,{images:e,name:t,dragUri:i,dragMimeType:Ge.fl.AUDIOBOOKS,shape:E.u.SQUARE,onClick:v,ariaLabel:l.Ru.get("web-player.audiobooks.open_cover_modal")})}),(0,G.jsxs)($e.Y,{children:[(0,G.jsx)(Ze.B,{children:l.Ru.get("web-player.audiobooks.audiobook")}),(0,G.jsx)(Ve.h,{menu:k,children:(0,G.jsx)(et.mm,{canEdit:!1,onClick:()=>{},scaleAtMinWidth:et.tw,dragUri:i,dragMimeType:Ge.fl.AUDIOBOOKS,dragLabel:t,children:t})}),f?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Qe.X,{children:(0,G.jsx)(p.E,{className:nt,variant:"bodySmallBold","data-testid":"entityAuthor",children:w})}),g&&(0,G.jsx)(qe.G,{targetDate:g,images:P?e:[],imageTitle:t,onComplete:C})]}):(0,G.jsx)(Je.g,{children:w})]}),(0,G.jsx)(at.K,{images:e,isOpen:b,onClose:j,title:t})]})})),lt="pwjwUMaZVoJ0wBcQlIDf",ct=s.memo((({price:e})=>e.finalPrice&&e.finalListPrice?0===e.finalPrice.amount&&0===e.finalListPrice.amount?(0,G.jsxs)("div",{className:lt,children:[(0,G.jsx)(p.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:l.Ru.get("audiobook.freePriceDescription")}),(0,G.jsx)(p.E,{variant:"bodySmall",children:l.Ru.get("audiobook.freePriceExplanation")})]}):(0,G.jsxs)("div",{className:lt,children:[(0,G.jsx)(p.E,{variant:"titleSmall",semanticColor:"textBase",children:e.finalPrice.formattedPrice}),e.finalPrice.amount<e.finalListPrice.amount&&(0,G.jsx)(p.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:l.Ru.get("web-player.audiobooks.retailPrice",(0,G.jsx)("span",{style:{textDecoration:"line-through"},children:e.finalListPrice.formattedPrice}))})]}):null));var dt=a(67307),ut=a(53514),mt=a(28823),ht=a(95961),pt=a(92505),gt=a(16440);const xt="XzRW0BrBLoXKWET5f8m4",yt="ooqITYCPJKua4e5yv8_9",bt="zN8lTnSnAUSRAMPb7XYV",vt="llVyicNXe8z0QAnoRur1",jt="fCrjgF2UgDUWjtqWls4Q",ft="CLnKy_BRVtIluLfBWy5t",Ct="RZa0qnXymlZCoGOdE03d",Pt="RFXE57hUzWvvK4_7GX13",kt="ALQqkJiR2lZOSYvhHesh",wt="BQwrI2BbKK4n451iu2QC",Rt="VYLq_YaQVNISHPQOu2af",St=s.memo((function({name:e,duration:t,uri:a,bookName:i,usePlayContextItem:r,isChapterLocked:n,isPlayable:o,resumePositionMs:c,isFullyPlayed:d,isExplicit:u,is19PlusOnly:g,spec:x,index:y,consumptionCapExplanation:v}){const C=(0,s.useRef)(c),{isPlaying:P,togglePlay:k,isActive:R}=r({uri:a}),E=(0,X.s)(),I=(0,h.wA)(),B=(0,pt.o)((e=>{if(e?.item?.uri===a){const t=(0,gt.s)(e)??0;return C.current=t,t}return 0})),_=(0,s.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),T=(0,s.useCallback)((e=>{if(_(e),v)return void I((0,b._3)(v));const t=x.chapterBlockFactory({position:y,uri:a}).playButtonFactory();if(n)E.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,ht.$I)({isPlaying:P,isActive:R,spec:t,logger:E,uri:a});k({loggingParams:e})}}),[v,I,y,R,n,P,E,x,_,k,a]),F=(0,s.useCallback)((()=>{const e=x.chapterBlockFactory({position:y,uri:a}).secondaryHitUiReveal();E.logInteraction(e)}),[y,E,x,a]),U=(0,s.useCallback)((e=>{_(e);const t=x.chapterBlockFactory({position:y,uri:a}).contextMenuFactory().hitUiReveal();E.logInteraction(t)}),[y,E,x,_,a]),D=!(n||v),L=(0,G.jsx)(dt.d,{className:m()({[yt]:R}),children:e}),M=(0,G.jsxs)("div",{className:ft,children:[u&&(0,G.jsx)(S.U,{fullText:!0}),g&&(0,G.jsx)(N.q,{size:16}),(0,G.jsxs)("div",{className:Ct,children:[C.current?(0,G.jsx)(p.E,{variant:"bodySmall",className:Rt,children:(0,G.jsx)(A.d,{durationMs:t.milliseconds})}):null,(0,G.jsx)(ne.j,{isPlaying:P,fullyPlayed:d,durationMs:t.milliseconds,resumePositionMs:C.current,position:P?B:void 0})]})]}),O=(0,G.jsxs)("div",{className:kt,children:[(0,G.jsx)("div",{className:wt,children:D?(0,G.jsx)(j.b,{menu:(0,G.jsx)(f.r,{uri:a}),children:(0,G.jsx)(mt.e,{className:jt,size:mt.M.xs,label:l.Ru.get("more.label.context",e),onClick:U})}):null}),(0,G.jsx)("div",{className:Pt,children:(0,G.jsx)(w.R,{size:"small",version:w.H.secondary,onClick:T,isPlaying:P,ariaPlayLabel:l.Ru.get("tracklist.a11y.play",e,i),ariaPauseLabel:l.Ru.get("tracklist.a11y.pause",e,i),locked:n&&!v,disabled:!o&&!(n||v)})})]}),z=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("hr",{className:bt,"aria-hidden":!0}),(0,G.jsx)(ut.v,{id:`chapter-${y}`,title:L,body:M,footer:O,onDoubleClick:e=>{T(e)},className:xt})]});return D?(0,G.jsx)(Ve.h,{menu:(0,G.jsx)(f.r,{uri:a}),onShow:F,children:(0,G.jsx)("div",{className:vt,children:z})}):(0,G.jsx)("div",{className:vt,children:z})}));var Et=a(86672),It=a(15658);var Nt=a(12675);const At=({bookUri:e,bookName:t,sampleUri:a,isFinishedUnlockingJourney:i,usePlayContextItem:r,spec:n,consumptionCapExplanation:o})=>{const l=function(e,t){const a=(0,It.T)();return(0,s.useCallback)((async(s,i)=>a.getBookContents(e,{offset:s,limit:i,doRefreshSubscription:t})),[t,a,e])}(e,i),c=(0,s.useRef)(!1),d=(0,s.useRef)(0),{isMarkedAsFinished:u}=(0,ie.z)(e),[m,h]=(0,s.useState)([]),p=(0,s.useCallback)((e=>e?.uri===a),[a]),g=(0,s.useCallback)((e=>(e=>null!==e)(e)&&!p(e)),[p]),x=(0,s.useCallback)((()=>{l&&(c.current||null===d.current||(c.current=!0,l(d.current,50).then((e=>{c.current=!1,d.current=e.nextOffset,e.items.length>0&&h((t=>t.concat(e.items.filter(g))))}))))}),[l,g]);return(0,s.useEffect)((()=>{d.current=0,h([])}),[e]),(0,G.jsx)("ul",{children:(0,G.jsx)(Et._,{onReachBottom:x,triggerOnInitialLoad:!0,children:m.map(((e,a)=>{const{name:s,duration:i,uri:l,playability:{playable:c},playedState:{playPositionMilliseconds:d,state:m},isExplicit:h,is19PlusOnly:p}=e,g=m===Nt._w.Completed||u,x=function(e){return!e.playability?.playable&&(e.playability?.reason===Nt.Uk.PaymentRequired||e.playability?.reason===Nt.Uk.Anonymous)}(e);return(0,G.jsx)(St,{name:s,duration:i,uri:l,bookName:t,usePlayContextItem:r,isPlayable:c,isChapterLocked:x,consumptionCapExplanation:o,resumePositionMs:d,isFullyPlayed:g,isExplicit:h,is19PlusOnly:p,spec:n,index:a},l)}))})})};var Bt=a(55113),_t=a(65421),Tt=a(17145),Ft=a(33963),Ut=a(67532),Dt=a(67697);const Lt="_yl4tOZxcpoUt28k6B8I",Mt="lcJflizNrSwDM9yPNk6h",Ot="ret7iHkCxcJvsZU14oPY",zt=({rating:e,className:t,onClick:a})=>{if(!e)return null;const s=Boolean(e.rating?.rating);return(0,G.jsxs)("button",{className:m()(Lt,t),onClick:a,children:[(0,G.jsx)(P.Z,{dir:"auto",variant:"mestoBold",children:e.averageRating?.showAverage?l.Ru.formatNumber(e.averageRating.average,{maximumFractionDigits:1}):l.Ru.get("web-player.audiobooks.noRating")}),s?(0,G.jsx)(Ut.j,{iconSize:16,className:m()(Mt)}):(0,G.jsx)(Dt.a,{iconSize:16,className:m()(Mt)}),e.averageRating?.showAverage&&(0,G.jsxs)(P.Z,{variant:"mesto",className:m()(Ot),children:["(",l.Ru.formatNumberCompact(Number(e.averageRating.totalRatings)),")"]})]})};var Ht=a(23898),Vt=a(24848),qt=a(25945),Gt=a(26068);const Wt={shuffle:!1,repeat:qt.p.REPEAT_NONE},Kt=s.memo((function({metadata:e}){const{uri:t,coverArt:a,name:r,htmlDescriptionPlain:o,authorName:d,authors:u,sample:P,narrators:k,rating:w,isExplicit:R,duration:S,copyrights:E,publishDate:I,price:N,isLocked:A,isSaved:_,consumptionCapExplanation:T,signifierText:F,resumeEpisodeLink:U,topics:D,isPreRelease:L,preReleaseEndDateTime:M}=e,{search:O}=(0,i.zy)(),z=!!new URLSearchParams(O).get("isUnlockingAudiobook"),H=!(!(0,Ht.Z)(z)||z),V=(0,Ne.V)(),q=(0,_t.H)(a[0]?.url),$=(0,h.wA)(),X=(0,g.NC)(Tt.NzS,{loadingValue:!1}),{spec:Q,logger:Z}=(0,Oe.r)(x.U,{data:{uri:t,identifier:n.$h.PODCAST_SHOW_AUDIOBOOK}}),{spec:J,logger:ee}=(0,Oe.r)(x.U,{data:{uri:t,identifier:n.$h.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:te,logger:ae}=(0,Oe.r)(y.Y,{data:{uri:t,identifier:n.$h.PODCAST_SHOW_AUDIOBOOK}}),se=(0,s.useMemo)((()=>Q.actionBarFactory()),[Q]),ie=(0,s.useMemo)((()=>J.aboutSectionFactory()),[J]),re=(0,s.useMemo)((()=>Q.chapterListFactory()),[Q]);(0,s.useEffect)((()=>{A&&ae.logImpression(te.impression())}),[te,ae,A]);const{isPlaying:ne,togglePlay:pe,usePlayContextItem:ge,isActive:xe,triggerPlay:ye}=(0,Vt.P)({uri:t},{featureIdentifier:"audiobook"},Wt),{togglePlay:be,isPlaying:ve,isActive:je}=(0,Vt.P)({uri:P?.uri??"",pages:[{items:[{uri:P?.uri??"",uid:P?.uri??"",type:B.c.CHAPTER,provider:null,metadata:L?{is_pre_release:"true",type:"trailer"}:void 0}]}]},{featureIdentifier:"audiobook"},Wt),fe=ne&&!ve,Pe=xe&&!je,ke=(0,s.useCallback)((async()=>{const e=Q.actionBarFactory().playButtonFactory();if(T)return Z.logInteraction(e.hitShowPaywall({paywalledItem:t})),void $((0,b._3)(T));if(!A||V)if(V)pe();else{const a=(0,ht.$I)({isPlaying:fe,isActive:Pe,spec:e,logger:Z,uri:t});Pe?pe({loggingParams:a}):ye({skipTo:U?{uri:U}:void 0,loggingParams:a})}}),[Q,T,V,A,Z,t,$,pe,fe,Pe,ye,U]),we=(0,s.useCallback)((()=>{P?.uri&&be()}),[be,P?.uri]),Re=(0,s.useCallback)((()=>{const a=ie.ratingButtonFactory().hitUiReveal();ee.logInteraction(a),$((0,b.eH)(t,e))}),[ie,$,e,ee,t]),Se=(0,rt.y)(),Ee=A&&!T&&N;return(0,G.jsx)("section",{children:(0,G.jsxs)(Ce,{isPreRelease:L,children:[(0,G.jsx)(c.Q,{children:(0,Gt.hV)({showOrAudiobookName:r,type:"Audiobook"})}),(0,G.jsx)(Bt.c,{artistOrShow:d,title:r,uri:t,entityType:Bt.p.AUDIOBOOK}),(0,G.jsx)(ot,{name:r,authorName:d,authors:u,uri:t,coverArt:a,backgroundColor:q,togglePlay:ke,isPlaying:fe,isLocked:A,isConsumptionCapped:!!T,price:N,logger:Z,spec:Q.actionBarFactory(),preReleaseEndDateTime:M}),(0,G.jsx)(He,{name:r,backgroundColor:q,uri:t,togglePlay:ke,isPlaying:fe,isLocked:A,isSaved:_,consumptionCapExplanation:T,isExplicit:R,duration:S,publishDate:I,preReleaseEndDateTime:M,price:N,spec:se}),(0,G.jsxs)("div",{className:m()(oe,"contentSpacing",{[le]:Se===it.E.LARGE}),children:[(0,G.jsxs)("div",{className:ce,children:[(0,G.jsxs)("div",{className:he,children:[F&&(0,G.jsx)(p.E,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:F}),!F&&Ee&&(0,G.jsx)(ct,{price:N})]}),(0,G.jsx)(Y,{htmlDescription:o,narrators:k,spec:ie,isPreRelease:L??!1})]}),(0,G.jsxs)("div",{className:de,children:[P?.isPlayable&&(0,G.jsx)(K,{label:l.Ru.get("audiobook.page.sample"),images:P.coverArt,title:P.name,duration:P.duration.milliseconds,moreButton:A?null:(0,G.jsx)(j.b,{menu:(0,G.jsx)(f.r,{uri:P.uri}),children:(0,G.jsx)(v.e,{})}),onClick:we,isPlaying:ve,isActive:je,size:W.LARGE,contentRating:P.contentRating?.label,isPlayable:P.isPlayable}),!L&&(0,G.jsx)("div",{className:ue,children:(0,G.jsx)(zt,{rating:w,onClick:Re})}),D.length>0&&(0,G.jsx)(C.N,{topics:D})]}),(0,G.jsxs)("div",{className:me,children:[!L&&(0,G.jsx)(At,{bookUri:t,bookName:r,sampleUri:P?.uri,isFinishedUnlockingJourney:H,usePlayContextItem:ge,spec:re,consumptionCapExplanation:T},`${t}-${A}-${!!T}`),X&&(0,G.jsx)(Ft.Z,{copyrights:E})]})]})]})})}));var $t=a(61702),Xt=a(25710),Yt=a(83968);const Qt=({uri:e,name:t,isSaved:a,backgroundColor:i,spec:r})=>{const n=(0,X.s)(),o=!(0,De.n)(),[c,d]=(0,Le.A)(e,a),u=(0,Fe.d$)(),{spec:m,logger:h}=(0,Oe.r)(Q.e,{data:{uri:e}});(0,s.useEffect)((()=>{u&&h.logImpression(m.impression())}),[u,h,m]);const p=(0,s.useCallback)((()=>{const t=r.followButtonFactory();n.logInteraction(c?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),!c&&u&&h.logInteraction(m.hitFollow({itemToBeFollowed:e})),d(!c)}),[e,c,r,n,d,u,h,m]),g=(0,s.useCallback)((()=>{n.logInteraction(r.contextButtonFactory().hitUiReveal())}),[n,r]),x=(0,Ue.j)();return(0,G.jsx)(Z.E,{backgroundColor:i,children:(0,G.jsxs)(J.S,{children:[(0,G.jsx)(se.e,{children:(0,G.jsx)(Yt.W,{isFollowing:c,onClick:p,disabled:o})},"follow-button"),(0,G.jsx)(j.b,{menu:(0,G.jsx)(Xt.H,{uri:e}),onShow:g,children:(0,G.jsx)(v.e,{label:l.Ru.get("more.label.context",t),size:x})})]})})};var Zt=a(86403),Jt=a(35426),ea=a(11926),ta=a(86949),aa=a(90666),sa=a(54461),ia=a(49255),ra=a(58206),na=a(45127);const oa="BknvXMyUnN3fQCz8mvLI",la="slMInsl3HL9_02zHT22R",ca="40px",da=({leavebehinds:e})=>{let t;return 1===e.length&&(t=(0,G.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser})),2===e.length&&(t=l.Ru.get("podcast-ads.recent_ads_just_two",(0,G.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,G.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),e.length>2&&(t=l.Ru.get("podcast-ads.recent_ads_more_than_two",(0,G.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,G.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),(0,G.jsxs)(p.E,{variant:"bodySmall",semanticColor:"textSubdued","data-testid":"show-leavebehinds-text",children:[l.Ru.get("podcast-ads.recent_ads_from"),t]})},ua=({leavebehinds:e,uri:t,surface:a})=>{const i=(0,na.vh)();if((0,s.useEffect)((()=>{t&&e.length>0&&i.send((0,ta.x)({leavebehind_request_id:e[0].requestId,event:"event_viewed",event_reason:`viewed_on_${(0,aa.Fh)(a).toLowerCase()}`,surface:(0,aa.Fh)(a),uri:t}))}),[i,e,t,a]),0===e.length)return null;const r=(0,o.o_h)(t)?.id,n=1===e.length?e[0].clickthroughUrl:(0,sa.q)(r),c=ia.Qd,d=e.length>c,u=e.length-(c-1),m=e.slice(0,d?c-1:c);return(0,G.jsx)(ra.N,{to:n,pathname:e.length>1?n:void 0,state:{uri:t},className:la,onClick:()=>i.send((0,ta.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,aa.Fh)(a),uri:t})),"data-testid":"show-leavebehinds-container",children:(0,G.jsx)(ut.v,{layout:"wide",variant:"tinted",size:"xl",id:"show-leavebehinds",title:(0,G.jsxs)("div",{className:oa,"data-testid":"show-leavebehinds-logos-container",children:[m.map((e=>(0,G.jsx)(Jt.C,{"data-testid":"show-leavebehind-image",src:e.displayImage.src,alt:e.displayImage.alt,imageHeight:ca,imageWidth:ca},e.adId))),d?(0,G.jsx)(ma,{"data-testid":"show-leavebehinds-more-count-indicator",variant:"tinted",minBlockSize:ca,borderRadius:"4px",padding:"6px",children:(0,G.jsx)(p.E,{variant:"bodyMedium","data-testid":"show-leavebehinds-more-count-indicator-text",children:l.Ru.get("podcast-ads.show_more_indicator",u)})}):null]}),body:(0,G.jsx)(da,{leavebehinds:e})})})};var ma=(0,Zt.Ay)(ea.a).withConfig({displayName:"LeavebehindsPreview___StyledBox",componentId:"sc-qakd80-0"})({backgroundColor:"#121212",width:"40px",display:"flex",alignItems:"center",justifyContent:"center"}),ha=a(81544);const pa=aa.ui.SHOW_PAGE;function ga({uri:e}){const{data:t,error:a,getLeavebehinds:i}=(0,ha.A)({surface:pa,uri:e});(0,s.useEffect)((()=>{i()}),[i]);const r=(0,s.useMemo)((()=>t?(0,ia.iT)(t,e):[]),[t?.requestId]);return a||t?.leavebehindAds&&t?.leavebehindAds?.length<1?null:(0,G.jsx)(ua,{leavebehinds:r,uri:e,surface:pa})}var xa=a(27649),ya=a(48585),ba=a(64600),va=a(96083),ja=a(18587),fa=a(84047),Ca=a(73852),Pa=a(59699),ka=a(76608),wa=a(28025);const Ra=({className:e,title:t,uri:a})=>{const{data:s}=(0,fa.v)({uri:a}),i=s?.seoRecommendedPodcast.totalCount,r=s?.seoRecommendedPodcast.items,n=function(e){return(e||[]).filter((e=>(0,Pa.K)(e.data)))}(r);if(0===i)return null;const c=(0,o.o_h)(a)?.id;return(0,G.jsx)(ka.$,{className:e,title:t,seeAllLabel:l.Ru.get("shelf.see-all"),total:i,alwaysShowSeeAll:!0,seeAllUri:`spotify:app:show:${c}:more-like-this`,children:n?.map((({data:e},t)=>(0,G.jsx)(va.o,{uri:e.uri,name:e.name,images:e.coverArt?.sources||[],publisher:e.publisher?.name??"",sharingInfo:null,mediaType:(0,wa.w)(e.mediaType),index:t},e.uri)))})},Sa=e=>{const t=(0,Ca.D)({entityType:B.c.SHOW,componentType:"shelf",uri:e.uri});return(0,G.jsx)(ja.s,{onError:t,children:(0,G.jsx)(Ra,{...e})})};var Ea=a(63982),Ia=a(19929),Na=a(19339),Aa=a(26600),Ba=a(63377);const _a=(0,s.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),Ta=s.memo((function({uri:e,children:t}){return(0,G.jsx)(Ba.E,{uri:e,defaultState:[],sortContext:_a,localStorageKey:"showFilterParams-v2",children:t})}));var Fa=a(38085);const Ua={field:Fa.WY.PUBLISH_DATE,order:Fa.AX.DESC},Da={field:Fa.WY.PUBLISH_DATE,order:Fa.AX.ASC},La=Da,Ma={episodic:Ua,sequential:Da,recent:Ua};function Oa(){return new Map([[Ua,{key:"newest-to-oldest",value:l.Ru.get("shows.sort.newest-to-oldest")}],[Da,{key:"oldest-to-newest",value:l.Ru.get("shows.sort.oldest-to-newest")}]])}function za(e){return Ma[e]}const Ha=(0,s.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:za("recent")}),Va=e=>{const t=Oa();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},qa=s.memo((function({uri:e,children:t,defaultSortParam:a}){return(0,G.jsx)(Ba.E,{uri:e,defaultState:a,sortContext:Ha,localStorageKey:"showSortParam",validator:Va,children:t})}));var Ga=a(67762),Wa=a(72308),Ka=a(39667),$a=a(88308);const Xa="ysJC093hc_2ixGCy40_s",Ya="mJP3Bamg3hN7S0p7XKfN",Qa="clPqCj1L_KSfoVuTuP6x",Za="vqQmhCMZq7eUtTV7YYOQ",Ja=s.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,s.useContext)(Ha),{sortState:i}=(0,s.useContext)(_a),r=function(e,t,a){const s=(0,It.T)(),{canSort:i}=s.capabilities,r=(0,$a.U0)((async(i,r)=>s.getContents(e,{offset:i,limit:r,sort:t,filters:a})),[s,e,t,a]),n=(0,$a.U0)((async(t,a)=>s.getContents(e,{offset:t,limit:a})),[s,e]);return i?r:n}(e.uri,a,i),n=(0,Ga.c)(),o=n?6:50,[c,d]=(0,s.useState)(o),u=(0,s.useCallback)((async(e,t)=>{const a=await r(e,t);return{items:a.items,totalLength:a.totalCount}}),[r]),{getItems:m,nrValidItems:h}=(0,Ka.E)({fetch:u,nrItems:o,limit:50}),g=(0,s.useCallback)((()=>{d((e=>e+o))}),[o]),x=n&&h>c;return(0,G.jsxs)(Wa.pZ,{value:"track-list",children:[(0,G.jsx)(Et._,{onReachBottom:n?void 0:g,children:m(0,c-1).map(((a,s)=>a&&(0,G.jsxs)("div",{className:Ya,children:[(0,G.jsx)("hr",{className:Xa,"aria-hidden":!0}),(0,G.jsx)(Ia.q,{index:s,episode:a,showMetadata:e,usePlayContextItem:t},`${a.uri}/${s}`)]},`${s}${a.uri}`)))}),x&&(0,G.jsx)("div",{className:Qa,children:(0,G.jsxs)(Na.v,{onClick:()=>{g()},className:Za,children:[(0,G.jsx)(p.E,{variant:"bodySmallBold",children:l.Ru.get("internal-link-recommender.load-more-episodes")}),(0,G.jsx)(Aa.V,{size:"xsmall"})]})})]})}));var es=a(46717);const ts={field:Fa.K$.ISPLAYED,operator:Fa.uj.EQUALS,value:!1},as={field:Fa.K$.STARTEDPLAYING,operator:Fa.uj.GREATER_THAN,value:0};const ss="all-episodes",is=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,s.useContext)(_a),i=new Map([[ts,{key:"is-played",value:l.Ru.get("shows.filter.unplayed")}],[as,{key:"started-playing",value:l.Ru.get("shows.filter.in-progress")}]]),r=Array.from(i.values());r.unshift({key:ss,value:l.Ru.get("mwp.podcast.all.episodes")});const n=Array.from(i.keys()),o=(0,s.useCallback)((t=>{if(t===ss)a([]);else{const e=n.find((e=>i.get(e)?.key===t));e&&a([e])}e()}),[e,a,n,i]);if(!i.size||!n)return null;let c=r[0];const d=Array.from(i.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return d.length>0&&(c=d[0][1]),(0,G.jsx)(es.g,{options:r,onSelect:e=>o(e),selected:c,variant:"bodyMediumBold",semanticColor:"textBase",heading:l.Ru.get("drop_down.filter_by")})},rs=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,s.useContext)(Ha),i=Oa(),r=Array.from(i.values()),n=Array.from(i.keys()),o=(0,s.useCallback)((t=>{const s=n.find((e=>i.get(e)?.key===t));s&&a(s),e()}),[n,e,i,a]);if(!i.size||!t)return null;const c=Array.from(i.keys()).find((e=>e.field===t.field&&e.order===t.order));if(!c)return null;const d=i.get(c);return d?(0,G.jsx)(es.g,{options:r,onSelect:e=>o(e),selected:d,heading:l.Ru.get("drop_down.sort_by")}):null},ns="jVWq1orbpiIK34UFHkFb",os="gYTsg8kvcGmu41_lilIb",ls="GMHh7OED_Nijo4zzSfrb",cs="sNEwCEh44Lapg36PnVFw",ds="SoIsw3P_1RnUtFBHs_2d",us="OMG3QMzpwer8oWsiJpzs",ms="r0yVSge7A1iSTNfudfyV",hs="yP6EeRtQJeqKq10IsMxn",ps="MIaGJ1KyQ3JLblOjWL19",gs="p8WHC1qBUrwrBwzp_vYY",xs="Uzyuaxpkm_Gwb6jOGbva",ys="TSNj_F4gGzCuxrzx6n98",bs="E4HX0M3aD0MY5dUCKSCb",vs="CbSqM7wDwoLFnyIo1iKL",js="c0h80mSMc3PkNlHX0DYs",fs="SGGetEMTKgQk1aJvG4k9",Cs="ne3ntrWAoMrE6_4A23Mf",Ps=({spec:e})=>{const t=(0,X.s)(),{canSort:a,canFilter:i}=(0,It.T)().capabilities,r=(0,s.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),n=(0,s.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return(0,G.jsxs)("div",{className:hs,children:[i&&(0,G.jsx)("div",{className:gs,children:(0,G.jsx)(is,{onFilter:r})}),!i&&(0,G.jsx)(p.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:xs,children:l.Ru.get("mwp.podcast.all.episodes")}),a&&(0,G.jsx)("div",{className:ps,children:(0,G.jsx)(rs,{onSort:n})})]})};var ks=a(42812),ws=a(22513),Rs=a(48735);var Ss=a(92297),Es=a(62363),Is=a(58151),Ns=a(16859);const As=e=>{switch(e){case Nt.t5.TRAILER:return l.Ru.get("podcasts.next-episode.trailer");case Nt.t5.UP_NEXT:return l.Ru.get("podcasts.next-episode.up-next");case Nt.t5.CONTINUE_LISTENING:return l.Ru.get("podcasts.next-episode.continue-listening");case Nt.t5.FIRST_PUBLISHED:return l.Ru.get("podcasts.next-episode.first-published");case Nt.t5.LATEST_PUBLISHED:return l.Ru.get("podcasts.next-episode.latest-published");default:return}},Bs=({breakpoint:e,metadata:t,spec:a})=>{const{uri:i,trailer:n,topics:o,description:c,htmlDescription:d,rating:u}=t,x=(0,ks.N)(i),y=(0,X.s)(),{spec:v,logger:f}=(0,Oe.r)(r.R,{data:{uri:i}}),P=(0,s.useMemo)((()=>v.aboutSectionFactory()),[v]),k=(0,s.useMemo)((()=>a.episodeListFactory()),[a]),w=(0,h.wA)(),R=(0,g.NC)(Tt.Pfj,{loadingValue:!1}),S=(0,Ne.V)(),{sortState:E}=(0,s.useContext)(_a),I=(0,It.T)(),N=(0,Ga.c)(),{usePlayContextItem:A}=(0,Vt.P)({uri:i,metadata:{[Is.W.SORTING_CRITERIA]:I.getPlayerSort(La),[Is.W.FILTERING_PREDICATE]:I.getPlayerFilter(E)}},{featureIdentifier:"show"}),{isActive:B,isPlaying:_,togglePlay:T}=A({uri:n?.uri||""}),F=(0,s.useCallback)((e=>{const t=a.aboutSectionFactory().seeMoreButtonFactory(),s=e?t.hitUiReveal():t.hitUiHide();y.logInteraction(s)}),[y,a]),U=(0,s.useCallback)(((e,t)=>{const s=a.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});y.logInteraction(s)}),[y,a]),D=n?{name:n.name,uri:n.uri,audio:{items:n.audio.items.map((e=>({url:e.url})))}}:null,L=(0,Ia.B)(t),M=(0,Ss.C)(D,L),O=(0,s.useCallback)((()=>{n?.uri&&(S?M():T())}),[M,S,T,n?.uri]),{ref:z,breakpoint:H}=(0,Es.x)({[it.E.MEDIUM]:0,[it.E.LARGE]:600}),V=o.length>0,q=c||d,Y=q||V,Q=t.nextBestEpisode?.type===Nt.t5.LATEST_PUBLISHED&&R,Z=(0,ya.C)();return(e=>{const t=(0,h.wA)(),a=(0,Ga.c)(),i=(0,h.d4)(Rs.uY);(0,s.useEffect)((()=>{a&&e!==i&&t((0,ws.SC)(e))}),[e,i,t,a])})(i),(0,G.jsxs)("div",{className:m()(ns,"contentSpacing",{[ls]:e===it.E.LARGE}),ref:z,children:[(0,G.jsx)(Ea.q,{className:os,gatedEntityCoverArt:t.gatedEntityCoverArt,gatedEntityRelations:t.gatedEntityRelations,upsellExplanation:t.upsellExplanation,hasAccess:t.hasGatedEntityRelationAccess,showCoverArt:!0}),(0,G.jsxs)("div",{className:cs,children:[Y&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(p.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:xs,children:l.Ru.get("artist.about")}),q&&(0,G.jsx)($.N,{maxLines:4,content:(c||"").trim(),onExpanded:F,htmlContent:d||void 0}),n&&(0,G.jsx)(Ve.h,{menu:(0,G.jsx)(xa.b,{uri:n.uri,showUri:i,sharingInfo:n.sharingInfo}),children:(0,G.jsx)(K,{label:l.Ru.get("track-trailer"),className:ys,images:n.coverArt,title:n.name,duration:n.duration.milliseconds,moreButton:(0,G.jsx)(j.b,{menu:(0,G.jsx)(xa.b,{uri:n.uri,sharingInfo:n.sharingInfo,showUri:i}),children:(0,G.jsx)(mt.e,{})}),onClick:O,isPlaying:_,isActive:B,size:W.LARGE,contentRating:n.contentRating?.label})}),(0,G.jsxs)("div",{className:vs,children:[u&&!x&&(0,G.jsx)("div",{className:js,children:(0,G.jsx)(zt,{rating:u,onClick:()=>{const e=P.ratingButtonFactory().hitUiReveal();f.logInteraction(e),w((0,b.eH)(i,t))}})}),V&&(0,G.jsx)(C.N,{topics:o,className:fs,onClick:U})]})]}),(0,G.jsx)(ga,{uri:i})]}),(0,G.jsx)(rt.o.Provider,{value:H,children:(0,G.jsxs)("div",{className:m()(us,{[ms]:N}),"data-testid":"show-all-episode-list",children:[t.nextBestEpisode&&!Q&&(0,G.jsx)(Ia.q,{showMetadata:t,episode:t.nextBestEpisode.data,usePlayContextItem:A,status:As(t.nextBestEpisode.type),variant:"next-best-episode"}),(0,G.jsx)(Ps,{spec:a}),(0,G.jsx)(Ns.r,{spec:k,children:(0,G.jsx)(Ja,{showMetadata:t,usePlayContextItem:A})})]})}),(0,G.jsx)(Ft.Z,{copyrights:[]}),(0,G.jsxs)("div",{className:ds,children:[Z&&(0,G.jsx)(ba.w,{uri:i,title:l.Ru.get("internal-link-recommender.popular-episodes"),"data-testid":"popular-episodes-above"}),N&&(0,G.jsx)(Sa,{title:l.Ru.get("internal-link-recommender.more-podcasts-like-this"),uri:i,className:Cs})]})]})},_s=s.memo(Bs);var Ts=a(17662),Fs=a(75489);const Us=({reason:e})=>{const t=function(e){switch(e){case"OTP":return l.Ru.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l.Ru.get("podcasts.subscriber-indicator.subscription");default:return""}}(e);return t?(0,G.jsx)(p.E,{variant:"bodySmall",semanticColor:"textBase",className:bs,children:t}):null};const Ds=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:s,name:i,podcastType:r,publisherName:n,gatedContentAccessReason:o}=e,c=(0,G.jsx)(Xt.H,{uri:a});return(0,G.jsxs)(We.z,{backgroundColor:t,children:[(0,G.jsx)(Xe.h,{children:(0,G.jsx)(Ve.h,{menu:c,children:(0,G.jsx)(Ye.X,{text:i,dragUri:a,dragLabel:i})})}),(0,G.jsx)(Ts.X,{children:(0,G.jsx)(Ve.h,{menu:c,children:(0,G.jsx)(Fs.b,{loading:"eager",name:i,images:s,placeholderType:"show",shape:Fs.u.SQUARE})})}),(0,G.jsxs)($e.Y,{children:[(0,G.jsxs)(Ze.B,{children:["SHOW"===r?l.Ru.get("type.show"):l.Ru.get("type.podcast"),o&&(0,G.jsx)(Us,{reason:o})]}),(0,G.jsx)(Ve.h,{menu:c,children:(0,G.jsx)(et.mm,{dragUri:a,dragLabel:i,scaleAtMinWidth:et.tw,children:(0,G.jsx)("span",{"data-testid":"show-title",children:i})})}),(0,G.jsx)(Je.g,{children:n})]})]})};var Ls=a(31166),Ms=a(62461),Os=a(8759);const zs=({metadata:e,showId:t})=>{const{coverArt:a,name:i,uri:n,isSaved:o}=e,{spec:l}=(0,Oe.r)(r.R,{data:{uri:n}}),d=(0,s.useMemo)((()=>l.actionBarFactory()),[l]),u=(0,_t.H)(a[0]?.url||null),m=(0,rt.y)();return(0,G.jsxs)("section",{children:[(0,G.jsx)(c.Q,{children:(0,Gt.hV)({showOrAudiobookName:i,type:"Podcast"})}),(0,G.jsx)(Bt.c,{artistOrShow:i,uri:n,entityType:Bt.p.PODCAST}),(0,G.jsx)(Ds,{metadata:e,backgroundColor:u}),(0,G.jsx)(Qt,{uri:n,name:i,isSaved:o,backgroundColor:u,spec:d}),(0,G.jsx)(_s,{breakpoint:m,metadata:e,showId:t,spec:l})]})},Hs=(0,s.memo)((function(){const{showId:e=""}=(0,i.g)(),t=`spotify:show:${e}`,{data:a,error:r,redirectUri:c}=(0,ke.W)(t);if(c){const e=(0,o.Lce)(c);return(0,G.jsx)($t.$,{to:e.toURLPath(!0)})}const u=a&&(0,Nt.Go)(a);return!a||r?r instanceof Os.W?(0,G.jsx)(d.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error-page.not-available-in-region.title")}):(0,G.jsx)(d.LoadingPage,{hasError:!!r,errorMessage:l.Ru.get("error.not_found.title.page")}):u?(0,G.jsx)(s.Suspense,{fallback:null,children:(0,G.jsx)(Ls.u,{pageId:n.$h.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,G.jsx)(Ms.d,{dynamicColors:a.dynamicColors,children:(0,G.jsx)(Kt,{metadata:a},`${!!a.consumptionCapExplanation}`)})})}):(0,G.jsx)(s.Suspense,{fallback:null,children:(0,G.jsx)(Ls.u,{pageId:n.$h.PODCAST,uri:t,children:(0,G.jsx)(Ta,{uri:a.uri,children:(0,G.jsx)(qa,{uri:a.uri,defaultSortParam:za(a.consumptionOrder),children:(0,G.jsx)(Ms.d,{dynamicColors:a.dynamicColors,children:(0,G.jsx)(zs,{showId:e,metadata:a})})})})})})}))},27220:(e,t,a)=>{a.d(t,{v:()=>m});var s=a(33160),i=a(16523),r=a(82499),n=a(76120),o=a(79252),l=a(42880),c=a(52697),d=a(16947),u=a(86070);const m=({uri:e,isBook:t=!1})=>{const{isPreSaved:a,addPresave:m,removePresave:h}=(0,c.w)({uri:e,isBook:t});return a?(0,u.jsx)(s.n,{onClick:h,iconTrailing:i.k,children:o.Ru.get("web-player.prerelease.presaved")}):(0,u.jsx)(l.h,{uri:e,action:d.no.SAVE_PRERELEASE,children:(0,u.jsx)(r.$,{disabled:void 0===a,onClick:m,iconTrailing:n.P,children:o.Ru.get("web-player.prerelease.presave")})})}},33963:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(31905);const i="rTMkDBDp47Eo12ZEQv4U";var r=a(86070);const n=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{if(e.untyped)return(0,r.jsx)(s.Z,{as:"p",variant:"finale",dir:"auto",children:e.text},t);const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let i;return i="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,r.jsx)(s.Z,{as:"p",variant:"finale",dir:"auto",children:`${i} ${a}`},t)}));return t&&a.unshift((0,r.jsx)(s.Z,{as:"p",variant:"finale",dir:"auto",children:t},a.length)),(0,r.jsx)("div",{className:i,children:a})}},42880:(e,t,a)=>{a.d(t,{h:()=>u});var s=a(30758),i=a(37114),r=a(11129),n=a(12304),o=a(40184),l=a(53507);var c=a(19636),d=a(86070);const u=({children:e,action:t,uri:a})=>{const u=(0,n.V)(),m=(0,l.N)(o.JD);let h;const p=()=>{const e={triggerId:r.d,triggerAction:{type:t}};i.h.set((t=>({...t,...e}))),m.storeAction(o.j8,{operation:c.tS.ADD,uris:[a]})};try{h=s.Children.only(e)}catch(t){return(0,d.jsx)(d.Fragment,{children:e})}return u?s.cloneElement(h,{onClick:p}):(0,d.jsx)(d.Fragment,{children:e})}},42976:(e,t,a)=>{function s(e){const t=new Date;return(e instanceof Date?e:new Date(e)).getTime()-t.getTime()}a.d(t,{u:()=>s})},46681:(e,t,a)=>{a.d(t,{O:()=>d});var s=a(30758),i=a(79252),r=a(58206),n=a(60689);const o="IIKJOrbx5pjNtg3gpI0H";var l=a(86070);const c=e=>e,d=({authorName:e="",authors:t,nameHighlighter:a=c})=>(0,n.H)()&&t?.length?t.map((({uri:e,name:t},n)=>(0,l.jsxs)(s.Fragment,{children:[n?i.Ru.getSeparator():null,e?(0,l.jsx)(r.N,{to:e,className:o,children:a(t)},n):a(t)]},n))):a(e)},52697:(e,t,a)=>{a.d(t,{w:()=>d});var s=a(30758),i=a(2265),r=a(79252),n=a(35953),o=a(74268),l=a(19813),c=a(3161);const d=({uri:e,isBook:t})=>{const{add:a,remove:d}=(0,l.p)("prerelease"),u=(0,o.o)("prerelease",[e]).at(0),{enqueueSnackbar:m}=(0,n.d)(),{spec:h,logger:p}=(0,c.r)(i.k,{data:{uri:e}});return{isPreSaved:u,addPresave:(0,s.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await a(e),m(t?r.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):r.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[a,m,t,p,h,e]),removePresave:(0,s.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await d(e)}),[p,d,h,e])}}},59699:(e,t,a)=>{a.d(t,{K:()=>s});const s=e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"Podcast"===e.__typename;var t}},79447:(e,t,a)=>{a.d(t,{K:()=>x});var s=a(30758),i=a(10728),r=a(79252),n=a(22653),o=a(57147),l=a(61828);const c="bhvAemcPYUmxOdBe1mVi",d="hmgHdasWrZaA9tiXVw_u",u="RmbxUFLb4j9KmgftJyk1",m="boNCdFnbh9y0PBweIDUt",h="LfQtKa295FPgk8VuZRfD",p="Oytey9nANMtSDKSmZpJ6";var g=a(86070);const x=s.memo((function(e){const{images:t,title:a,isOpen:x,onClose:y}=e,b=(0,s.useMemo)((()=>(0,l.g)(t,{desiredSize:1e4})),[t]);return b?(0,g.jsx)(n.A,{className:c,isOpen:x,onRequestClose:y,animation:{modal:{base:m,afterOpen:h,beforeClose:p}},animated:!0,children:(0,g.jsxs)("div",{style:{"--image-width":`${b.width}px`,"--image-height":`${b.height}px`},className:d,children:[(0,g.jsx)(o._,{loading:"eager",alt:a,src:b.url,className:u}),(0,g.jsx)(i.H,{onClick:y,semanticColor:"textBase",children:r.Ru.get("web-player.cover-art-modal.close")})]})}):null}))},80669:(e,t,a)=>{a.d(t,{G:()=>w});var s=a(97500),i=a.n(s),r=a(79252),n=a(77812);const o="YNXLVjlRXPfM4xObTojA",l="CVRy4NtxZYSle8dJ1E67",c="holKDGFNEFSz85czBeSv",d="gqidZhN1lgoZDfI_7E6w",u="_IQ8dgA5pEr_V8PfUkWa",m="xNkPMA_OvAxcFTdfyroI";var h=a(86070);const p=({value:e,label:t,hasDivider:a=!1})=>(0,h.jsxs)("div",{className:c,"aria-hidden":"true",children:[(0,h.jsx)(n.E,{variant:"titleSmall",className:i()({[u]:a}),children:e}),(0,h.jsx)(n.E,{variant:"marginal",semanticColor:"textSubdued",children:t})]});var g=a(30758);const x=6e4,y=36e5,b=864e5;var v=a(42976),j=a(22682);const f={days:0,hours:0,minutes:0,seconds:0};function C(e){return e>0?function(e){const t=Math.abs(e);return{days:Math.floor(t/b),hours:Math.floor(t%b/y),minutes:Math.floor(t%y/x),seconds:Math.floor(t%x/1e3)}}(e):f}var P=a(20359),k=a(1263);const w=({targetDate:e,className:t,onComplete:a,images:s,imageTitle:n})=>{const{days:c,hours:u,minutes:x,seconds:y}=((e,t)=>{const a=(0,g.useRef)(t);a.current=t;const[s,i]=(0,g.useState)((()=>C((0,v.u)(e))));return(0,j.$)((t=>{const s=(0,v.u)(e),r=C(s);i(r),s<=0&&(t(),a.current?.())}),1e3),s})(e,a),b=void 0!==s&&s.length>0&&n,f=r.Ru.get("web-player.prerelease.countdown_label",{days:c,hours:u,minutes:x,seconds:y});return(0,h.jsxs)("div",{className:i()(o,t,{[l]:b}),role:"timer","data-testid":"countdown",children:[(0,h.jsx)("span",{className:m,children:f}),b&&(0,h.jsx)(P.b,{images:s,type:k.c.ALBUM,shape:P.u.ROUNDED_CORNERS,className:d,title:n}),(0,h.jsx)(p,{value:c,label:r.Ru.get("web-player.prerelease.days",c),hasDivider:!0}),(0,h.jsx)(p,{value:u,label:r.Ru.get("web-player.prerelease.hours",u),hasDivider:!0}),(0,h.jsx)(p,{value:x,label:r.Ru.get("web-player.prerelease.minutes",x),hasDivider:!0}),(0,h.jsx)(p,{value:y,label:r.Ru.get("web-player.prerelease.seconds",y)})]})}},81172:(e,t,a)=>{a.d(t,{I:()=>l});var s=a(30758),i=a(45619),r=a(92915),n=a(19792),o=a(86070);const l=s.memo((function({uri:e,size:t=i.M.md,className:a,onClick:l,canDownload:c,condensedAll:d}){const[u,m]=(0,n.A)(e),h=(0,r.W)(),p=(0,s.useCallback)((()=>{h({targetUri:e,intent:u?"unsave":"save",type:"click"}),m(!u)}),[h,e,u,m]);return(0,o.jsx)(i.f,{className:a,isFollowing:u,onFollow:p,onClick:l,uri:e,size:t,canDownload:c,condensedAll:d,condensed:!0})}))},84047:(e,t,a)=>{a.d(t,{v:()=>n});var s=a(5820),i=a(33031);const r=new s.l("internalLinkRecommenderShow","query","6c369ff272a666b31fef1629c169925a1bd80f372195396c82304142cacd89e8",null),n=(e,t)=>(0,i.I)(r,e,t)},96083:(e,t,a)=>{a.d(t,{o:()=>h});var s=a(79252),i=a(82770),r=a(45595),n=a(92276),o=a(57401),l=a(69774),c=a(47290),d=a(25710),u=a(27817),m=a(86070);const h=({images:e,name:t,uri:a,publisher:h,sharingInfo:p,mediaType:g,isHero:x=!1,onClick:y,testId:b,index:v,requestId:j,color:f,variant:C,logCardImpressions:P=!1})=>{let k;const w=g===u.Q.MIXED?s.Ru.get("type.show"):s.Ru.get("card.tag.show");return k=x?(0,m.jsx)(o.A,{index:v,onClick:y,delegatePlayback:!0,headerText:t,featureIdentifier:"show",uri:a,isPlayable:!1,renderCardImage:()=>(0,m.jsx)(r.M,{isHero:!0,images:e,color:f}),renderSubHeaderContent:()=>(0,m.jsxs)(n.c,{isHero:!0,children:[(0,m.jsx)(l.t,{children:w}),h&&(0,m.jsx)("span",{children:h})]}),testId:b,requestId:j,logCardImpressions:P}):(0,m.jsx)(i.Z,{variant:C,onClick:y,isPlayable:!1,delegatePlayback:!0,headerText:t,featureIdentifier:"show",uri:a,index:v,renderCardImage:()=>(0,m.jsx)(r.M,{isHero:x,images:e,color:f}),renderSubHeaderContent:()=>(0,m.jsx)(n.c,{children:h&&(0,m.jsx)("span",{children:h})}),testId:b,requestId:j,logCardImpressions:P}),(0,m.jsx)(c.h,{menu:(0,m.jsx)(d.H,{uri:a,sharingInfo:p}),children:k})}}}]);
//# sourceMappingURL=xpui-routes-show.js.map