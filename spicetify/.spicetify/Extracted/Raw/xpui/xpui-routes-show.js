"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8606],{15:(e,t,a)=>{a.d(t,{h:()=>u});var s=a(30758),i=a(27776),r=a(79845),n=a(8044),o=a(82372),l=a(46822);var c=a(43408),d=a(86070);const u=({children:e,action:t,uri:a})=>{const u=(0,n.V)(),m=(0,l.N)(o.JD);let h;const p=()=>{const e={triggerId:r.d,triggerAction:{type:t}};i.h.set((t=>({...t,...e}))),m.storeAction(o.j8,{operation:c.tS.ADD,uris:[a]})};try{h=s.Children.only(e)}catch(t){return(0,d.jsx)(d.Fragment,{children:e})}return u?s.cloneElement(h,{onClick:p}):(0,d.jsx)(d.Fragment,{children:e})}},4487:(e,t,a)=>{a.d(t,{K:()=>s});const s=e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"Podcast"===e.__typename;var t}},9059:(e,t,a)=>{a.d(t,{v:()=>n});var s=a(24792),i=a(31491);const r=new s.l("internalLinkRecommenderShow","query","6c369ff272a666b31fef1629c169925a1bd80f372195396c82304142cacd89e8",null),n=(e,t)=>(0,i.I)(r,e,t)},13997:(e,t,a)=>{a.d(t,{w:()=>d});var s=a(30758),i=a(40876),r=a(17640),n=a(93301),o=a(60464),l=a(33425),c=a(5141);const d=({uri:e,isBook:t})=>{const{add:a,remove:d}=(0,l.p)("prerelease"),u=(0,o.o)("prerelease",[e]).at(0),{enqueueSnackbar:m}=(0,n.d)(),{spec:h,logger:p}=(0,c.r)(i.k,{data:{uri:e}});return{isPreSaved:u,addPresave:(0,s.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await a(e),m(t?r.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):r.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[a,m,t,p,h,e]),removePresave:(0,s.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await d(e)}),[p,d,h,e])}}},22902:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(92579);const i="rTMkDBDp47Eo12ZEQv4U";var r=a(86070);const n=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{if(e.untyped)return(0,r.jsx)(s.Z,{as:"p",variant:"finale",dir:"auto",children:e.text},t);const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let i;return i="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,r.jsx)(s.Z,{as:"p",variant:"finale",dir:"auto",children:`${i} ${a}`},t)}));return t&&a.unshift((0,r.jsx)(s.Z,{as:"p",variant:"finale",dir:"auto",children:t},a.length)),(0,r.jsx)("div",{className:i,children:a})}},23192:(e,t,a)=>{a.d(t,{v:()=>m});var s=a(80366),i=a(67009),r=a(57221),n=a(23454),o=a(17640),l=a(15),c=a(13997),d=a(53047),u=a(86070);const m=({uri:e,isBook:t=!1})=>{const{isPreSaved:a,addPresave:m,removePresave:h}=(0,c.w)({uri:e,isBook:t});return a?(0,u.jsx)(s.n,{onClick:h,iconTrailing:i.k,children:o.Ru.get("web-player.prerelease.presaved")}):(0,u.jsx)(l.h,{uri:e,action:d.no.SAVE_PRERELEASE,children:(0,u.jsx)(r.$,{disabled:void 0===a,onClick:m,iconTrailing:n.P,children:o.Ru.get("web-player.prerelease.presave")})})}},35792:(e,t,a)=>{a.d(t,{I:()=>l});var s=a(30758),i=a(25718),r=a(12543),n=a(71468),o=a(86070);const l=s.memo((function({uri:e,size:t=i.M.md,className:a,onClick:l,canDownload:c,condensedAll:d}){const[u,m]=(0,n.A)(e),h=(0,r.W)(),p=(0,s.useCallback)((()=>{h({targetUri:e,intent:u?"unsave":"save",type:"click"}),m(!u)}),[h,e,u,m]);return(0,o.jsx)(i.f,{className:a,isFollowing:u,onFollow:p,onClick:l,uri:e,size:t,canDownload:c,condensedAll:d,condensed:!0})}))},61170:(e,t,a)=>{a.d(t,{B:()=>E,q:()=>N});var s=a(30758),i=a(62411),r=a(31714),n=a(12599),o=a(7705),l=a(97304),c=a(43294),d=a(56952),u=a(32925),m=a(27776),h=a(71226),p=a(83242),g=a(80864),x=a(37833),y=a(8044),v=a(99150),b=a(15310),j=a(82232),f=a(85586),C=a(19099),P=a(65927),k=a(5141),w=a(81637),R=a(56838),S=a(86070);function E(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const I=e=>`activation-trigger-mme-${e}`,N=s.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:N,status:A,variant:B}){const T=(0,v.c)(),_=a.playedState.playPositionMilliseconds,U=a.uri,F=(0,s.useRef)(null),D=(0,g.N)(t.uri),[L,M]=(0,s.useState)(a.playedState.state===w._w.Completed),{draggable:O,onDragStart:z}=(0,x.P)(),H=(0,y.V)(),q=(0,f.y)(),G=(0,i.wA)(),{UBIFragment:V,spec:K,logger:W}=(0,k.r)(r.d,{data:{uri:U,reason:a.requestId||"",position:e}}),Q=(0,P.t)(K),{isActive:$,isPlaying:X,togglePlay:Y}=N({uri:U}),[Z]=(0,C.S)(1e4,(e=>e?.item?.uri===U));(0,s.useEffect)((()=>{X&&(F.current=Z)}),[X,Z]),(0,s.useEffect)((()=>{!X&&F.current&&a.duration.milliseconds<=F.current&&M(!0)}),[X,a.duration.milliseconds]);const J=(0,s.useCallback)((e=>{e||(F.current=0),M(e)}),[]),ee=E(t),te=(0,b.C)({...a,coverArt:{sources:a.coverArt}},ee),ae=(0,s.useCallback)((()=>{if(a.episodeType===w.I_.Episode&&T)m.h.set((()=>({triggerId:I(a.uri),triggerAction:null})));else if(H)te();else{let e;e=X?K.playButtonFactory().hitPause({itemToBePaused:U}):$?K.playButtonFactory().hitResume({itemToBeResumed:U}):K.playButtonFactory().hitPlay({itemToBePlayed:U});const t=W.logInteraction(e);Y({loggingParams:t})}}),[$,te,Y,U,X,H,a,T,W,K]),se=(0,s.useCallback)((()=>{W.logInteraction(K.hitUiNavigate({destination:U}))}),[U,W,K]),ie=a.podcastSubscription?.isPaywalled??!1,re=a.podcastSubscription?.isUserSubscribed??!1,ne=ie&&!re,oe=ie&&H,{badges:le}=(0,R.b)({contentRating:a.contentRating?.label,isPaywalled:ie}),ce=(0,s.useCallback)((()=>G((0,o.Tf)(t.uri))),[t.uri,G]),de=(0,s.useCallback)((e=>{let s=e;return(ne||oe)&&(s=(0,S.jsx)(h.N,{enabled:!0,showUri:a.podcast?.uri||t.uri,renderInline:!1,children:s})),!a.playability.playable&&le.nineteen&&(s=(0,S.jsx)("div",{onClick:e=>{e.stopPropagation(),ce()},children:e})),s=(0,S.jsx)(l.k,{id:I(U),targetURI:(0,n.o_h)(U),children:s}),s}),[U,ne,oe,t.uri,le.nineteen,a.playability.playable,ce,a.podcast?.uri]);return(0,S.jsx)(V,{spec:K,children:(0,S.jsx)(j.pZ,{value:"row",index:e,children:(0,S.jsx)(c.h,{onShow:()=>{W.logInteraction(K.secondaryHitUiReveal())},menu:(0,S.jsx)(d.b,{uri:U,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:L,onMarkAsPlayed:J}),children:(0,S.jsx)(u.k,{ref:Q,requestId:a.requestId,index:e,uri:U,size:q,images:a.coverArt||[],name:a.name,showName:a.podcast?.name||t.name,description:a.description,isPlayable:a.playability.playable||ne,fullyPlayed:L,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate,resumePositionMs:F.current??_,draggable:O,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const s=`${a.name} • ${t.name}`;z(e,{itemUris:[U],dragLabelText:s,contextUri:t.uri})},handlePlaybackClick:ae,handleClick:se,isCurrentlyPlaying:$,isPaywalled:ie,isUserSubscribed:re,isCourseLesson:D,isPlaying:X,position:X?Z:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:J,contentInformation:a.contentInformation,showUri:a.podcast?.uri||t.uri,mediaTypes:a.mediaTypes??void 0,badges:(0,S.jsx)(p.P,{episode:a}),playButtonWrapper:de,onMoreButtonClick:()=>{W.logInteraction(K.moreButtonFactory().hitUiReveal())},status:A,variant:B})})})})}))},69107:(e,t,a)=>{a.d(t,{t:()=>r});var s=a(46822),i=a(11338);function r(){return(0,s.N)(i.Z)}},70884:(e,t,a)=>{a.d(t,{I:()=>m});var s=a(99101),i=a(12599);var r=a(89723),n=a(69107),o=a(5305),l=a(16318),c=a(30758),d=a(59567),u=a(88308);function m(e){const t=function(e,t,a){const s=(0,n.t)(),i=(0,o.jE)(),m=(0,c.useMemo)((()=>Array.isArray(e)?e:[e]),[e]),h=(0,c.useMemo)((()=>Array.isArray(t)?t:[t]),[t]),p=(0,u.lB)((()=>["use-metadata-extensions",m,h]),[m,h]),g=(0,c.useCallback)((()=>{i.invalidateQueries({queryKey:p})}),[i,p]);(0,c.useEffect)((()=>s.getEvents().addListener(d.C.EXPIRE,(e=>{h.includes(e.data.extensionKind)&&e.data.entityUris.some((e=>m.includes(e)))&&g()}))),[s,m,h,g]);const x=(0,c.useCallback)((a=>{const s=a.map((e=>e.extensions));let i;return i=(0,r.yQ)(t)&&"string"==typeof e?s?.at(0)?.[t]:(0,r.yQ)(t)&&"string"!=typeof e?s.map((e=>e[t])):(0,r.yQ)(t)||"string"!=typeof e?s:s.at(0),i}),[e,t]);return(0,l.I)({...a,queryKey:p,queryFn:()=>s.fetch(m,h),select:x})}(e,r.UH.IDENTITY_TRAIT,{staleTime:36e5,gcTime:72e5,enabled:(0,s.H)()}).data?.contributors.at(0)?.uri;return function(e){const t=(0,i.o_h)(e);return(0,i.Exu)(t)?t:null}(t)}},85182:(e,t,a)=>{a.d(t,{G:()=>w});var s=a(97500),i=a.n(s),r=a(17640),n=a(25270);const o="YNXLVjlRXPfM4xObTojA",l="CVRy4NtxZYSle8dJ1E67",c="holKDGFNEFSz85czBeSv",d="gqidZhN1lgoZDfI_7E6w",u="_IQ8dgA5pEr_V8PfUkWa",m="xNkPMA_OvAxcFTdfyroI";var h=a(86070);const p=({value:e,label:t,hasDivider:a=!1})=>(0,h.jsxs)("div",{className:c,"aria-hidden":"true",children:[(0,h.jsx)(n.E,{variant:"titleSmall",className:i()({[u]:a}),children:e}),(0,h.jsx)(n.E,{variant:"marginal",semanticColor:"textSubdued",children:t})]});var g=a(30758);const x=6e4,y=36e5,v=864e5;var b=a(86380),j=a(4598);const f={days:0,hours:0,minutes:0,seconds:0};function C(e){return e>0?function(e){const t=Math.abs(e);return{days:Math.floor(t/v),hours:Math.floor(t%v/y),minutes:Math.floor(t%y/x),seconds:Math.floor(t%x/1e3)}}(e):f}var P=a(68583),k=a(75539);const w=({targetDate:e,className:t,onComplete:a,images:s,imageTitle:n})=>{const{days:c,hours:u,minutes:x,seconds:y}=((e,t)=>{const a=(0,g.useRef)(t);a.current=t;const[s,i]=(0,g.useState)((()=>C((0,b.u)(e))));return(0,j.$)((t=>{const s=(0,b.u)(e),r=C(s);i(r),s<=0&&(t(),a.current?.())}),1e3),s})(e,a),v=void 0!==s&&s.length>0&&n,f=r.Ru.get("web-player.prerelease.countdown_label",{days:c,hours:u,minutes:x,seconds:y});return(0,h.jsxs)("div",{className:i()(o,t,{[l]:v}),role:"timer","data-testid":"countdown",children:[(0,h.jsx)("span",{className:m,children:f}),v&&(0,h.jsx)(P.b,{images:s,type:k.c.ALBUM,shape:P.u.ROUNDED_CORNERS,className:d,title:n}),(0,h.jsx)(p,{value:c,label:r.Ru.get("web-player.prerelease.days",c),hasDivider:!0}),(0,h.jsx)(p,{value:u,label:r.Ru.get("web-player.prerelease.hours",u),hasDivider:!0}),(0,h.jsx)(p,{value:x,label:r.Ru.get("web-player.prerelease.minutes",x),hasDivider:!0}),(0,h.jsx)(p,{value:y,label:r.Ru.get("web-player.prerelease.seconds",y)})]})}},86380:(e,t,a)=>{function s(e){const t=new Date;return(e instanceof Date?e:new Date(e)).getTime()-t.getTime()}a.d(t,{u:()=>s})},86527:(e,t,a)=>{a.d(t,{o:()=>h});var s=a(17640),i=a(46966),r=a(84439),n=a(44538),o=a(46656),l=a(11786),c=a(43294),d=a(88800),u=a(4077),m=a(86070);const h=({images:e,name:t,uri:a,publisher:h,sharingInfo:p,mediaType:g,isHero:x=!1,onClick:y,testId:v,index:b,requestId:j,color:f,variant:C,logCardImpressions:P=!1})=>{let k;const w=g===u.Q.MIXED?s.Ru.get("type.show"):s.Ru.get("card.tag.show");return k=x?(0,m.jsx)(o.A,{index:b,onClick:y,delegatePlayback:!0,headerText:t,featureIdentifier:"show",uri:a,isPlayable:!1,renderCardImage:()=>(0,m.jsx)(r.M,{isHero:!0,images:e,color:f}),renderSubHeaderContent:()=>(0,m.jsxs)(n.c,{isHero:!0,children:[(0,m.jsx)(l.t,{children:w}),h&&(0,m.jsx)("span",{children:h})]}),testId:v,requestId:j,logCardImpressions:P}):(0,m.jsx)(i.Z,{variant:C,onClick:y,isPlayable:!1,delegatePlayback:!0,headerText:t,featureIdentifier:"show",uri:a,index:b,renderCardImage:()=>(0,m.jsx)(r.M,{isHero:x,images:e,color:f}),renderSubHeaderContent:()=>(0,m.jsx)(n.c,{children:h&&(0,m.jsx)("span",{children:h})}),testId:v,requestId:j,logCardImpressions:P}),(0,m.jsx)(c.h,{menu:(0,m.jsx)(d.H,{uri:a,sharingInfo:p}),children:k})}},90797:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Os});var s=a(30758),i=a(85387),r=a(74899),n=a(20435),o=a(12599),l=a(17640),c=a(80478),d=a(83467),u=a(97500),m=a.n(u),h=a(62411),p=a(25270),g=a(75044),x=a(91494),y=a(77870),v=a(96381),b=a(2565),j=a(52110),f=a(31008),C=a(76082),P=a(92579),k=a(5719),w=a(15792),R=a(11201),S=a(78249),E=a(68583),I=a(71264),N=a(88774),A=a(71840),B=a(75539),T=a(56838);const _="Bns6t3CfzQaCA4DLRzPQ",U="zGFcpmwFVhJxRDXUXoXA",F="_FLyhB96W9W0msGYNWUl",D="Si5iVyGLDY7mGWH_U2wA",L="HLBtD6mJyIB9EeOzDtXE",M="DRO0ur1WXqpK9BelywtE",O="vtlBEOtYFwv1cxC32ccc",z="Pq_DZj9ECxwTsK8pBxe0",H="bu7LVUNyDPF_FcrKMv74",q="bYP2npsc_CeChpMGcr6g",G="Ux7aVnDYlwojS4AmkSLg";var V=a(86070);let K=function(e){return e.SMALL="small",e.LARGE="large",e}({});const W=({images:e,title:t,contentRating:a,duration:s,moreButton:i,onClick:r,onContextMenu:n,onTouchStart:o,onTouchEnd:l,isPlaying:c,isActive:d,size:u,className:h,label:p,isPlayable:g=!0})=>{const x=u===K.LARGE?"medium":"small",{badges:y}=(0,T.b)({contentRating:a});return(0,V.jsxs)("div",{"data-testid":"trailer-component",className:m()(_,h,{[U]:d}),onContextMenu:n,onTouchStart:o,onTouchEnd:l,children:[(0,V.jsxs)("div",{className:D,children:[(0,V.jsxs)("div",{className:z,children:[(0,V.jsx)(E.b,{type:B.c.EPISODE,title:t,className:m()(O,{[G]:u===K.SMALL,[q]:u===K.LARGE}),size:I.Qe.SIZE_56,images:e,shape:E.u.ROUNDED_CORNERS}),(0,V.jsx)("div",{className:H,children:(0,V.jsx)(w.R,{"data-testid":"trailer-play-button",version:k.H4.transparent,size:x,isPlaying:c,onClick:r,disabled:!g})})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("div",{className:L,children:(0,V.jsx)(P.Z,{dir:"auto",className:F,variant:"balladBold",children:t})}),(0,V.jsxs)("div",{className:M,children:[(0,V.jsx)(R.E,{text:p}),y.explicit&&(0,V.jsx)(S.U,{}),y.nineteen&&(0,V.jsx)(N.q,{}),(0,V.jsx)(P.Z,{dir:"auto",variant:"mesto",children:(0,V.jsx)(A.d,{durationMs:s})})]})]})]}),i]})};var Q=a(23903),$=a(58089);const X=({htmlDescription:e,narrators:t,spec:a,isPreRelease:i})=>{const r=(0,$.s)(),n=(0,s.useCallback)((e=>{const t=a.seeMoreButtonFactory();r.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[r,a]);return(0,V.jsxs)(V.Fragment,{children:[t.length?(0,V.jsx)(p.E,{as:"p",variant:"bodyMedium",children:l.Ru.get("web-player.audiobooks.narratedByX",t.join(l.Ru.getSeparator()))}):null,e&&(0,V.jsx)(Q.N,{maxLines:4,content:e,htmlContent:e,onExpanded:n,isOpen:i||null})]})};var Y=a(87015),Z=a(66108),J=a(49086),ee=a(79583),te=a(35792),ae=a(28957),se=a(49671),ie=a(9837),re=a(91174),ne=a(48632);const oe="e74TmRHu_W1yZHspTBmR",le="rrcjfInomKt1lXRDRdR8",ce="Wj9mxFJDtPdiMcUtS1te",de="SCwESjClY3m_9JlV2L7S",ue="Yoa_yG2jhELT4w9wJpHf",me="xsw253oiwmIAafVfjl1J",he="JPqnsg5dgBTzsEoClLmD",pe="bhuRgaz03VXMf0mOG3Q2",ge="GP_qgmZlmL0CJ9r22AD9",xe="bilV2VquzmEnhV4d97Tc",ye="caqddwmUJf4ix6GI84NX",ve=({explicit:e,durationMs:t,publishDate:a,preReleaseEndDateTime:s,isPreRelease:i,uri:r,isPlaying:n})=>{const o=(0,re.p)(r),{isMarkedAsFinished:c}=(0,ie.z)(r);let d;return i&&s?d=l.Ru.get("web-player.prerelease.releases_on",{date:l.Ru.formatDate(s)}):!i&&a&&(d=l.Ru.formatDate(a)),(0,V.jsxs)("div",{className:pe,children:[e&&(0,V.jsx)(S.U,{className:ye}),(0,V.jsxs)("div",{className:ge,children:[d&&(0,V.jsx)(p.E,{variant:"bodySmall",className:xe,children:d}),t?(0,V.jsxs)(V.Fragment,{children:[o?.playPositionMilliseconds?(0,V.jsx)(p.E,{variant:"bodySmall",className:xe,children:(0,V.jsx)(A.d,{durationMs:t})}):null,(0,V.jsx)(ne.j,{isPlaying:n,fullyPlayed:c,durationMs:t,position:o?.playPositionMilliseconds})]}):null]})]})};var be=a(57221),je=a(23192);const fe=(0,s.createContext)(null),Ce=({children:e,isPreRelease:t})=>{const[a,i]=(0,s.useState)(!t),r=(0,s.useMemo)((()=>({isPreRelease:t,isCountdownFinished:a,setCountdownFinished:()=>i(!0)})),[t,a,i]);return(0,V.jsx)(fe.Provider,{value:r,children:e})};function Pe(){const e=(0,s.useContext)(fe);if(null===e)throw new Error("Trying to use 'PreRealeaseCountdownContext' without 'PreRealeaseCountdownProvider'!");return e}var ke=a(18886);const we="nz8Wc80RAtdAb3yU9FxM",Re=({uri:e})=>{const{isCountdownFinished:t}=Pe(),{invalidateCache:a}=(0,ke.W)(e);return(0,V.jsx)("div",{className:we,children:t?(0,V.jsx)(be.$,{onClick:a,children:l.Ru.get("web-player.audiobooks.goToAudiobook")}):(0,V.jsx)(je.v,{uri:e,isBook:!0})})};var Se=a(62372),Ee=a(40638),Ie=a(93301),Ne=a(8044),Ae=a(27809);const Be="NQAShVY0o7RQ2bCTDSkw";function Te({uri:e,price:t,size:a,spec:s,logger:i,onPlayback:r}){const{enqueueSnackbar:n}=(0,Ie.d)(),o=(0,Ne.V)(),c=0===t?.finalPrice?.amount,d=c?s.getButtonFactory({uri:e}):s.buyButtonFactory({uri:e}),u=(0,Ee.YQ)((async()=>{if(i.logInteraction(d.hitShowPaywall({paywalledItem:e})),o)r();else{try{t?.finalPrice?await(0,Ae.S)({show_uri:e,currency:t.finalPrice.currency,price:t.finalPrice.amount}):n(l.Ru.get("error.generic"))}catch(e){n(l.Ru.get("error.generic"))}r()}}),2e3,{leading:!0,trailing:!1});return(0,V.jsx)(be.$,{size:a,className:Be,style:{flexShrink:0},onClick:u,children:c?l.Ru.get("web-player.audiobooks.buyFree"):l.Ru.get("web-player.audiobooks.buy")})}const _e=({uri:e,isLocked:t,price:a,isPlaying:s,isConsumptionCapped:i,onPlayback:r,logger:n,spec:o,size:l="large"})=>t&&!i?(0,V.jsx)(Te,{size:l,uri:e,price:a,logger:n,spec:o,onPlayback:r}):(0,V.jsx)(Se.D,{size:l,isPlaying:s,uri:e,onClick:r});var Ue=a(25072),Fe=a(92144),De=a(81286),Le=a(71468),Me=a(63043),Oe=a(5141);const ze="8px",He=s.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:i,togglePlay:r,isLocked:n,isSaved:o,consumptionCapExplanation:c,price:d,spec:u,isExplicit:m,publishDate:p,preReleaseEndDateTime:g,duration:x}){const[y,f]=(0,Le.A)(t,o),C=!(0,De.n)(),{isPreRelease:P}=Pe(),k=(0,h.wA)(),w=(0,$.s)(),R=(0,Ue.d$)(),{spec:S,logger:E}=(0,Oe.r)(Y.e,{data:{uri:t}});(0,s.useEffect)((()=>{R&&E.logImpression(S.impression())}),[R,E,S]);const I=(0,s.useCallback)((()=>{const e=u.saveToLibraryButtonFactory();y?w.logInteraction(e.hitUnfollow({itemToBeUnfollowed:t})):(w.logInteraction(e.hitFollow({itemToBeFollowed:t})),R&&E.logInteraction(S.hitFollow({itemToBeFollowed:t}))),f(!y)}),[t,y,u,f,w,R,E,S]),N=(0,s.useCallback)(((e,a)=>{const s=u.downloadButtonFactory();c?k((0,v._3)(c)):a===Me.NV.ADD?w.logInteraction(s.hitDownload({itemToDownload:t})):a===Me.NV.REMOVE?w.logInteraction(s.hitRemoveDownload({itemToRemoveFromDownloads:t})):a===Me.NV.NO_PERMISSION&&w.logInteraction(s.hitUiReveal())}),[c,k,w,u,t]),A=(0,s.useCallback)((()=>{const e=u.contextButtonFactory().hitUiReveal();w.logInteraction(e)}),[w,u]),B=(0,Fe.j)(),T=!!c,_=!n&&!T;return(0,V.jsxs)(Z.E,{backgroundColor:e,style:{"--action-bar-padding-bottom":ze},children:[(0,V.jsx)(J.S,{testId:"book-action-bar-metadata",children:(0,V.jsx)(ve,{explicit:m,publishDate:p,preReleaseEndDateTime:g,durationMs:x,isPreRelease:P,uri:t,isPlaying:i})}),(0,V.jsxs)(J.S,{children:[P&&(0,V.jsx)(Re,{uri:t}),!P&&(0,V.jsx)(_e,{uri:t,isLocked:n,isConsumptionCapped:T,price:d,isPlaying:i,onPlayback:r,logger:w,spec:u,size:B}),!P&&(0,V.jsx)(se.e,{children:(0,V.jsx)(ee.M,{isAdded:y,onClick:I,disabled:C,size:B,condensed:!0})},"follow-button"),(0,V.jsx)(te.I,{uri:t,onClick:N,size:B,canDownload:_}),(0,V.jsx)(j.b,{menu:(0,V.jsx)(ae.p,{uri:t,isPreRelease:P,price:d,isLocked:n,isCapped:T}),children:(0,V.jsx)(b.e,{label:l.Ru.get("more.label.context",a),onClick:A,size:B})})]})]})}));var qe=a(60749),Ge=a(43294),Ve=a(85182),Ke=a(71331),We=a(33860),Qe=a(9467),$e=a(46511),Xe=a(80678),Ye=a(86422),Ze=a(59276),Je=a(84318),et=a(10227),tt=a(58993),at=a(70884),st=a(41952),it=a(85586);const rt="BBK_i9SHovXTLVjas0kc",nt=s.memo((function({coverArt:e,name:t,authorName:a,uri:s,backgroundColor:i,isPlaying:r,togglePlay:n,isLocked:o,price:c,isConsumptionCapped:d,logger:u,spec:m,preReleaseEndDateTime:h}){const g=(0,it.y)(),x=g===st.E.SMALL||g===st.E.XSMALL,{isPreRelease:y,setCountdownFinished:v}=Pe(),b=y&&x,j=(0,V.jsx)(ae.p,{uri:s,price:c,isLocked:o,isCapped:d}),f=(0,at.I)(s),C=f?(0,V.jsx)(qe.N_,{to:f.toURLPath(!0),children:a}):a;return(0,V.jsxs)(We.z,{backgroundColor:i,size:y?We.K.XLARGE:We.K.DEFAULT,children:[(0,V.jsxs)(Xe.h,{children:[y&&(0,V.jsx)(Re,{uri:s}),!y&&(0,V.jsx)(_e,{uri:s,isLocked:o,price:c,isPlaying:r,isConsumptionCapped:d,onPlayback:n,logger:u,spec:m,size:"medium"}),(0,V.jsx)(Ge.h,{menu:j,children:(0,V.jsx)(Ye.X,{text:t,dragUri:s,dragLabel:t})})]}),!b&&(0,V.jsx)(Ge.h,{menu:j,children:(0,V.jsx)(Qe.K,{images:e,name:t,dragUri:s,dragMimeType:Ke.fl.AUDIOBOOKS,shape:E.u.SQUARE})}),(0,V.jsxs)($e.Y,{children:[(0,V.jsx)(Je.B,{children:l.Ru.get("web-player.audiobooks.audiobook")}),(0,V.jsx)(Ge.h,{menu:j,children:(0,V.jsx)(tt.mm,{canEdit:!1,onClick:()=>{},scaleAtMinWidth:tt.tw,dragUri:s,dragMimeType:Ke.fl.AUDIOBOOKS,dragLabel:t,children:t})}),y?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ze.X,{children:(0,V.jsx)(p.E,{className:rt,variant:"bodySmallBold","data-testid":"entityAuthor",children:C})}),h&&(0,V.jsx)(Ve.G,{targetDate:h,images:b?e:[],imageTitle:t,onComplete:v})]}):(0,V.jsx)(et.g,{children:C})]})]})})),ot="pwjwUMaZVoJ0wBcQlIDf",lt=s.memo((({price:e})=>e.finalPrice&&e.finalListPrice?0===e.finalPrice.amount&&0===e.finalListPrice.amount?(0,V.jsxs)("div",{className:ot,children:[(0,V.jsx)(p.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:l.Ru.get("audiobook.freePriceDescription")}),(0,V.jsx)(p.E,{variant:"bodySmall",children:l.Ru.get("audiobook.freePriceExplanation")})]}):(0,V.jsxs)("div",{className:ot,children:[(0,V.jsx)(p.E,{variant:"titleSmall",semanticColor:"textBase",children:e.finalPrice.formattedPrice}),e.finalPrice.amount<e.finalListPrice.amount&&(0,V.jsx)(p.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:l.Ru.get("web-player.audiobooks.retailPrice",(0,V.jsx)("span",{style:{textDecoration:"line-through"},children:e.finalListPrice.formattedPrice}))})]}):null));var ct=a(58837),dt=a(29529),ut=a(3880),mt=a(90677),ht=a(11957),pt=a(69796);const gt="XzRW0BrBLoXKWET5f8m4",xt="ooqITYCPJKua4e5yv8_9",yt="zN8lTnSnAUSRAMPb7XYV",vt="llVyicNXe8z0QAnoRur1",bt="fCrjgF2UgDUWjtqWls4Q",jt="CLnKy_BRVtIluLfBWy5t",ft="RZa0qnXymlZCoGOdE03d",Ct="RFXE57hUzWvvK4_7GX13",Pt="ALQqkJiR2lZOSYvhHesh",kt="BQwrI2BbKK4n451iu2QC",wt="VYLq_YaQVNISHPQOu2af",Rt=s.memo((function({name:e,duration:t,uri:a,bookName:i,usePlayContextItem:r,isChapterLocked:n,isPlayable:o,resumePositionMs:c,isFullyPlayed:d,isExplicit:u,is19PlusOnly:g,spec:x,index:y,consumptionCapExplanation:b}){const C=(0,s.useRef)(c),{isPlaying:P,togglePlay:k,isActive:R}=r({uri:a}),E=(0,$.s)(),I=(0,h.wA)(),B=(0,ht.o)((e=>{if(e?.item?.uri===a){const t=(0,pt.s)(e)??0;return C.current=t,t}return 0})),T=(0,s.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),_=(0,s.useCallback)((e=>{if(T(e),b)return void I((0,v._3)(b));const t=x.chapterBlockFactory({position:y,uri:a}).playButtonFactory();if(n)E.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,mt.$I)({isPlaying:P,isActive:R,spec:t,logger:E,uri:a});k({loggingParams:e})}}),[b,I,y,R,n,P,E,x,T,k,a]),U=(0,s.useCallback)((()=>{const e=x.chapterBlockFactory({position:y,uri:a}).secondaryHitUiReveal();E.logInteraction(e)}),[y,E,x,a]),F=(0,s.useCallback)((e=>{T(e);const t=x.chapterBlockFactory({position:y,uri:a}).contextMenuFactory().hitUiReveal();E.logInteraction(t)}),[y,E,x,T,a]),D=!(n||b),L=(0,V.jsx)(ct.d,{className:m()({[xt]:R}),children:e}),M=(0,V.jsxs)("div",{className:jt,children:[u&&(0,V.jsx)(S.U,{fullText:!0}),g&&(0,V.jsx)(N.q,{size:16}),(0,V.jsxs)("div",{className:ft,children:[C.current?(0,V.jsx)(p.E,{variant:"bodySmall",className:wt,children:(0,V.jsx)(A.d,{durationMs:t.milliseconds})}):null,(0,V.jsx)(ne.j,{isPlaying:P,fullyPlayed:d,durationMs:t.milliseconds,resumePositionMs:C.current,position:P?B:void 0})]})]}),O=(0,V.jsxs)("div",{className:Pt,children:[(0,V.jsx)("div",{className:kt,children:D?(0,V.jsx)(j.b,{menu:(0,V.jsx)(f.r,{uri:a}),children:(0,V.jsx)(ut.e,{className:bt,size:ut.M.xs,label:l.Ru.get("more.label.context",e),onClick:F})}):null}),(0,V.jsx)("div",{className:Ct,children:(0,V.jsx)(w.R,{size:"small",version:w.H.secondary,onClick:_,isPlaying:P,ariaPlayLabel:l.Ru.get("tracklist.a11y.play",e,i),ariaPauseLabel:l.Ru.get("tracklist.a11y.pause",e,i),locked:n&&!b,disabled:!o&&!(n||b)})})]}),z=(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("hr",{className:yt,"aria-hidden":!0}),(0,V.jsx)(dt.v,{id:`chapter-${y}`,title:L,body:M,footer:O,onDoubleClick:e=>{_(e)},className:gt})]});return D?(0,V.jsx)(Ge.h,{menu:(0,V.jsx)(f.r,{uri:a}),onShow:U,children:(0,V.jsx)("div",{className:vt,children:z})}):(0,V.jsx)("div",{className:vt,children:z})}));var St=a(49932),Et=a(88918);var It=a(4319);const Nt=({bookUri:e,bookName:t,sampleUri:a,isFinishedUnlockingJourney:i,usePlayContextItem:r,spec:n,consumptionCapExplanation:o})=>{const l=function(e,t){const a=(0,Et.T)();return(0,s.useCallback)((async(s,i)=>a.getBookContents(e,{offset:s,limit:i,doRefreshSubscription:t})),[t,a,e])}(e,i),c=(0,s.useRef)(!1),d=(0,s.useRef)(0),{isMarkedAsFinished:u}=(0,ie.z)(e),[m,h]=(0,s.useState)([]),p=(0,s.useCallback)((e=>e?.uri===a),[a]),g=(0,s.useCallback)((e=>(e=>null!==e)(e)&&!p(e)),[p]),x=(0,s.useCallback)((()=>{l&&(c.current||null===d.current||(c.current=!0,l(d.current,50).then((e=>{c.current=!1,d.current=e.nextOffset,e.items.length>0&&h((t=>t.concat(e.items.filter(g))))}))))}),[l,g]);return(0,s.useEffect)((()=>{d.current=0,h([])}),[e]),(0,V.jsx)("ul",{children:(0,V.jsx)(St._,{onReachBottom:x,triggerOnInitialLoad:!0,children:m.map(((e,a)=>{const{name:s,duration:i,uri:l,playability:{playable:c},playedState:{playPositionMilliseconds:d,state:m},isExplicit:h,is19PlusOnly:p}=e,g=m===It._w.Completed||u,x=function(e){return!e.playability?.playable&&(e.playability?.reason===It.Uk.PaymentRequired||e.playability?.reason===It.Uk.Anonymous)}(e);return(0,V.jsx)(Rt,{name:s,duration:i,uri:l,bookName:t,usePlayContextItem:r,isPlayable:c,isChapterLocked:x,consumptionCapExplanation:o,resumePositionMs:d,isFullyPlayed:g,isExplicit:h,is19PlusOnly:p,spec:n,index:a},l)}))})})};var At=a(56691),Bt=a(90089),Tt=a(55405),_t=a(22902),Ut=a(72654),Ft=a(14639);const Dt="_yl4tOZxcpoUt28k6B8I",Lt="lcJflizNrSwDM9yPNk6h",Mt="ret7iHkCxcJvsZU14oPY",Ot=({rating:e,className:t,onClick:a})=>{if(!e)return null;const s=Boolean(e.rating?.rating);return(0,V.jsxs)("button",{className:m()(Dt,t),onClick:a,children:[(0,V.jsx)(P.Z,{dir:"auto",variant:"mestoBold",children:e.averageRating?.showAverage?l.Ru.formatNumber(e.averageRating.average,{maximumFractionDigits:1}):l.Ru.get("web-player.audiobooks.noRating")}),s?(0,V.jsx)(Ut.j,{iconSize:16,className:m()(Lt)}):(0,V.jsx)(Ft.a,{iconSize:16,className:m()(Lt)}),e.averageRating?.showAverage&&(0,V.jsxs)(P.Z,{variant:"mesto",className:m()(Mt),children:["(",l.Ru.formatNumberCompact(Number(e.averageRating.totalRatings)),")"]})]})};var zt=a(21766),Ht=a(42668),qt=a(3109),Gt=a(68456);const Vt={shuffle:!1,repeat:qt.p.REPEAT_NONE},Kt=s.memo((function({metadata:e}){const{uri:t,coverArt:a,name:r,htmlDescriptionPlain:o,authorName:d,sample:u,narrators:P,rating:k,isExplicit:w,duration:R,copyrights:S,publishDate:E,price:I,isLocked:N,isSaved:A,consumptionCapExplanation:T,signifierText:_,resumeEpisodeLink:U,topics:F,isPreRelease:D,preReleaseEndDateTime:L}=e,{search:M}=(0,i.zy)(),O=!!new URLSearchParams(M).get("isUnlockingAudiobook"),z=!(!(0,zt.Z)(O)||O),H=(0,Ne.V)(),q=(0,Bt.H)(a[0]?.url),G=(0,h.wA)(),Q=(0,g.NC)(Tt.NzS,{loadingValue:!1}),{spec:$,logger:Y}=(0,Oe.r)(x.U,{data:{uri:t,identifier:n.$h.PODCAST_SHOW_AUDIOBOOK}}),{spec:Z,logger:J}=(0,Oe.r)(x.U,{data:{uri:t,identifier:n.$h.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:ee,logger:te}=(0,Oe.r)(y.Y,{data:{uri:t,identifier:n.$h.PODCAST_SHOW_AUDIOBOOK}}),ae=(0,s.useMemo)((()=>$.actionBarFactory()),[$]),se=(0,s.useMemo)((()=>Z.aboutSectionFactory()),[Z]),ie=(0,s.useMemo)((()=>$.chapterListFactory()),[$]);(0,s.useEffect)((()=>{N&&te.logImpression(ee.impression())}),[ee,te,N]);const{isPlaying:re,togglePlay:ne,usePlayContextItem:pe,isActive:ge,triggerPlay:xe}=(0,Ht.P)({uri:t},{featureIdentifier:"audiobook"},Vt),{togglePlay:ye,isPlaying:ve,isActive:be}=(0,Ht.P)({uri:u?.uri??"",pages:[{items:[{uri:u?.uri??"",uid:u?.uri??"",type:B.c.CHAPTER,provider:null,metadata:D?{is_pre_release:"true",type:"trailer"}:void 0}]}]},{featureIdentifier:"audiobook"},Vt),je=re&&!ve,fe=ge&&!be,Pe=(0,s.useCallback)((async()=>{const e=$.actionBarFactory().playButtonFactory();if(T)return Y.logInteraction(e.hitShowPaywall({paywalledItem:t})),void G((0,v._3)(T));if(!N||H)if(H)ne();else{const a=(0,mt.$I)({isPlaying:je,isActive:fe,spec:e,logger:Y,uri:t});fe?ne({loggingParams:a}):xe({skipTo:U?{uri:U}:void 0,loggingParams:a})}}),[$,T,H,N,Y,t,G,ne,je,fe,xe,U]),ke=(0,s.useCallback)((()=>{u?.uri&&ye()}),[ye,u?.uri]),we=(0,s.useCallback)((()=>{const a=se.ratingButtonFactory().hitUiReveal();J.logInteraction(a),G((0,v.eH)(t,e))}),[se,G,e,J,t]),Re=(0,it.y)(),Se=N&&!T&&I;return(0,V.jsx)("section",{children:(0,V.jsxs)(Ce,{isPreRelease:D,children:[(0,V.jsx)(c.Q,{children:(0,Gt.hV)({showOrAudiobookName:r,type:"Audiobook"})}),(0,V.jsx)(At.c,{artistOrShow:d,title:r,uri:t,entityType:At.p.AUDIOBOOK}),(0,V.jsx)(nt,{name:r,authorName:d,uri:t,coverArt:a,backgroundColor:q,togglePlay:Pe,isPlaying:je,isLocked:N,isConsumptionCapped:!!T,price:I,logger:Y,spec:$.actionBarFactory(),preReleaseEndDateTime:L}),(0,V.jsx)(He,{name:r,backgroundColor:q,uri:t,togglePlay:Pe,isPlaying:je,isLocked:N,isSaved:A,consumptionCapExplanation:T,isExplicit:w,duration:R,publishDate:E,preReleaseEndDateTime:L,price:I,spec:ae}),(0,V.jsxs)("div",{className:m()(oe,"contentSpacing",{[le]:Re===st.E.LARGE}),children:[(0,V.jsxs)("div",{className:ce,children:[(0,V.jsxs)("div",{className:he,children:[_&&(0,V.jsx)(p.E,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:_}),!_&&Se&&(0,V.jsx)(lt,{price:I})]}),(0,V.jsx)(X,{htmlDescription:o,narrators:P,spec:se,isPreRelease:D??!1})]}),(0,V.jsxs)("div",{className:de,children:[u?.isPlayable&&(0,V.jsx)(W,{label:l.Ru.get("audiobook.page.sample"),images:u.coverArt,title:u.name,duration:u.duration.milliseconds,moreButton:N?null:(0,V.jsx)(j.b,{menu:(0,V.jsx)(f.r,{uri:u.uri}),children:(0,V.jsx)(b.e,{})}),onClick:ke,isPlaying:ve,isActive:be,size:K.LARGE,contentRating:u.contentRating?.label,isPlayable:u.isPlayable}),!D&&(0,V.jsx)("div",{className:ue,children:(0,V.jsx)(Ot,{rating:k,onClick:we})}),F.length>0&&(0,V.jsx)(C.N,{topics:F})]}),(0,V.jsxs)("div",{className:me,children:[!D&&(0,V.jsx)(Nt,{bookUri:t,bookName:r,sampleUri:u?.uri,isFinishedUnlockingJourney:z,usePlayContextItem:pe,spec:ie,consumptionCapExplanation:T},`${t}-${N}-${!!T}`),Q&&(0,V.jsx)(_t.Z,{copyrights:S})]})]})]})})}));var Wt=a(7217),Qt=a(88800),$t=a(87156);const Xt=({uri:e,name:t,isSaved:a,backgroundColor:i,spec:r})=>{const n=(0,$.s)(),o=!(0,De.n)(),[c,d]=(0,Le.A)(e,a),u=(0,Ue.d$)(),{spec:m,logger:h}=(0,Oe.r)(Y.e,{data:{uri:e}});(0,s.useEffect)((()=>{u&&h.logImpression(m.impression())}),[u,h,m]);const p=(0,s.useCallback)((()=>{const t=r.followButtonFactory();n.logInteraction(c?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),!c&&u&&h.logInteraction(m.hitFollow({itemToBeFollowed:e})),d(!c)}),[e,c,r,n,d,u,h,m]),g=(0,s.useCallback)((()=>{n.logInteraction(r.contextButtonFactory().hitUiReveal())}),[n,r]),x=(0,Fe.j)();return(0,V.jsx)(Z.E,{backgroundColor:i,children:(0,V.jsxs)(J.S,{children:[(0,V.jsx)(se.e,{children:(0,V.jsx)($t.W,{isFollowing:c,onClick:p,disabled:o})},"follow-button"),(0,V.jsx)(j.b,{menu:(0,V.jsx)(Qt.H,{uri:e}),onShow:g,children:(0,V.jsx)(b.e,{label:l.Ru.get("more.label.context",t),size:x})})]})})};var Yt=a(74031),Zt=a(39416),Jt=a(23317),ea=a(51357),ta=a(41430),aa=a(87121),sa=a(47827),ia=a(24498),ra=a(67843);const na="BknvXMyUnN3fQCz8mvLI",oa="slMInsl3HL9_02zHT22R",la="40px",ca=({leavebehinds:e})=>{let t;return 1===e.length&&(t=(0,V.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser})),2===e.length&&(t=l.Ru.get("podcast-ads.recent_ads_just_two",(0,V.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,V.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),e.length>2&&(t=l.Ru.get("podcast-ads.recent_ads_more_than_two",(0,V.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,V.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),(0,V.jsxs)(p.E,{variant:"bodySmall",semanticColor:"textSubdued","data-testid":"show-leavebehinds-text",children:[l.Ru.get("podcast-ads.recent_ads_from"),t]})},da=({leavebehinds:e,uri:t,surface:a})=>{const i=(0,ra.vh)();if((0,s.useEffect)((()=>{t&&e.length>0&&i.send((0,ea.x)({leavebehind_request_id:e[0].requestId,event:"event_viewed",event_reason:`viewed_on_${(0,ta.Fh)(a).toLowerCase()}`,surface:(0,ta.Fh)(a),uri:t}))}),[i,e,t,a]),0===e.length)return null;const r=(0,o.o_h)(t)?.id,n=1===e.length?e[0].clickthroughUrl:(0,aa.q)(r),c=sa.Qd,d=e.length>c,u=e.length-(c-1),m=e.slice(0,d?c-1:c);return(0,V.jsx)(ia.N,{to:n,pathname:e.length>1?n:void 0,state:{uri:t},className:oa,onClick:()=>i.send((0,ea.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,ta.Fh)(a),uri:t})),"data-testid":"show-leavebehinds-container",children:(0,V.jsx)(dt.v,{layout:"wide",variant:"tinted",size:"xl",id:"show-leavebehinds",title:(0,V.jsxs)("div",{className:na,"data-testid":"show-leavebehinds-logos-container",children:[m.map((e=>(0,V.jsx)(Zt.C,{"data-testid":"show-leavebehind-image",src:e.displayImage.src,alt:e.displayImage.alt,imageHeight:la,imageWidth:la},e.adId))),d?(0,V.jsx)(ua,{"data-testid":"show-leavebehinds-more-count-indicator",variant:"tinted",minBlockSize:la,borderRadius:"4px",padding:"6px",children:(0,V.jsx)(p.E,{variant:"bodyMedium","data-testid":"show-leavebehinds-more-count-indicator-text",children:l.Ru.get("podcast-ads.show_more_indicator",u)})}):null]}),body:(0,V.jsx)(ca,{leavebehinds:e})})})};var ua=(0,Yt.Ay)(Jt.a).withConfig({displayName:"LeavebehindsPreview___StyledBox",componentId:"sc-qakd80-0"})({backgroundColor:"#121212",width:"40px",display:"flex",alignItems:"center",justifyContent:"center"}),ma=a(64644);const ha=ta.ui.SHOW_PAGE;function pa({uri:e}){const{data:t,error:a,getLeavebehinds:i}=(0,ma.A)({surface:ha,uri:e});(0,s.useEffect)((()=>{i()}),[i]);const r=(0,s.useMemo)((()=>t?(0,sa.iT)(t,e):[]),[t?.requestId]);return a||t?.leavebehindAds&&t?.leavebehindAds?.length<1?null:(0,V.jsx)(da,{leavebehinds:r,uri:e,surface:ha})}var ga=a(56952),xa=a(74242),ya=a(10321),va=a(86527),ba=a(73493),ja=a(9059),fa=a(33880),Ca=a(4487),Pa=a(37924),ka=a(27637);const wa=({className:e,title:t,uri:a})=>{const{data:s}=(0,ja.v)({uri:a}),i=s?.seoRecommendedPodcast.totalCount,r=s?.seoRecommendedPodcast.items,n=function(e){return(e||[]).filter((e=>(0,Ca.K)(e.data)))}(r);if(0===i)return null;const c=(0,o.o_h)(a)?.id;return(0,V.jsx)(Pa.$,{className:e,title:t,seeAllLabel:l.Ru.get("shelf.see-all"),total:i,alwaysShowSeeAll:!0,seeAllUri:`spotify:app:show:${c}:more-like-this`,children:n?.map((({data:e},t)=>(0,V.jsx)(va.o,{uri:e.uri,name:e.name,images:e.coverArt?.sources||[],publisher:e.publisher?.name??"",sharingInfo:null,mediaType:(0,ka.w)(e.mediaType),index:t},e.uri)))})},Ra=e=>{const t=(0,fa.D)({entityType:B.c.SHOW,componentType:"shelf",uri:e.uri});return(0,V.jsx)(ba.s,{onError:t,children:(0,V.jsx)(wa,{...e})})};var Sa=a(87771),Ea=a(61170),Ia=a(76669),Na=a(6306),Aa=a(89301);const Ba=(0,s.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),Ta=s.memo((function({uri:e,children:t}){return(0,V.jsx)(Aa.E,{uri:e,defaultState:[],sortContext:Ba,localStorageKey:"showFilterParams-v2",children:t})}));var _a=a(75409);const Ua={field:_a.WY.PUBLISH_DATE,order:_a.AX.DESC},Fa={field:_a.WY.PUBLISH_DATE,order:_a.AX.ASC},Da=Fa,La={episodic:Ua,sequential:Fa,recent:Ua};function Ma(){return new Map([[Ua,{key:"newest-to-oldest",value:l.Ru.get("shows.sort.newest-to-oldest")}],[Fa,{key:"oldest-to-newest",value:l.Ru.get("shows.sort.oldest-to-newest")}]])}function Oa(e){return La[e]}const za=(0,s.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:Oa("recent")}),Ha=e=>{const t=Ma();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},qa=s.memo((function({uri:e,children:t,defaultSortParam:a}){return(0,V.jsx)(Aa.E,{uri:e,defaultState:a,sortContext:za,localStorageKey:"showSortParam",validator:Ha,children:t})}));var Ga=a(99150),Va=a(82232),Ka=a(66055),Wa=a(88308);const Qa="ysJC093hc_2ixGCy40_s",$a="mJP3Bamg3hN7S0p7XKfN",Xa="clPqCj1L_KSfoVuTuP6x",Ya="vqQmhCMZq7eUtTV7YYOQ",Za=s.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,s.useContext)(za),{sortState:i}=(0,s.useContext)(Ba),r=function(e,t,a){const s=(0,Et.T)(),{canSort:i}=s.capabilities,r=(0,Wa.U0)((async(i,r)=>s.getContents(e,{offset:i,limit:r,sort:t,filters:a})),[s,e,t,a]),n=(0,Wa.U0)((async(t,a)=>s.getContents(e,{offset:t,limit:a})),[s,e]);return i?r:n}(e.uri,a,i),n=(0,Ga.c)(),o=n?6:50,[c,d]=(0,s.useState)(o),u=(0,s.useCallback)((async(e,t)=>{const a=await r(e,t);return{items:a.items,totalLength:a.totalCount}}),[r]),{getItems:m,nrValidItems:h}=(0,Ka.E)({fetch:u,nrItems:o,limit:50}),g=(0,s.useCallback)((()=>{d((e=>e+o))}),[o]),x=n&&h>c;return(0,V.jsxs)(Va.pZ,{value:"track-list",children:[(0,V.jsx)(St._,{onReachBottom:n?void 0:g,children:m(0,c-1).map(((a,s)=>a&&(0,V.jsxs)("div",{className:$a,children:[(0,V.jsx)("hr",{className:Qa,"aria-hidden":!0}),(0,V.jsx)(Ea.q,{index:s,episode:a,showMetadata:e,usePlayContextItem:t},`${a.uri}/${s}`)]},`${s}${a.uri}`)))}),x&&(0,V.jsx)("div",{className:Xa,children:(0,V.jsxs)(Ia.v,{onClick:()=>{g()},className:Ya,children:[(0,V.jsx)(p.E,{variant:"bodySmallBold",children:l.Ru.get("internal-link-recommender.load-more-episodes")}),(0,V.jsx)(Na.V,{size:"xsmall"})]})})]})}));var Ja=a(78165);const es={field:_a.K$.ISPLAYED,operator:_a.uj.EQUALS,value:!1},ts={field:_a.K$.STARTEDPLAYING,operator:_a.uj.GREATER_THAN,value:0};const as="all-episodes",ss=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,s.useContext)(Ba),i=new Map([[es,{key:"is-played",value:l.Ru.get("shows.filter.unplayed")}],[ts,{key:"started-playing",value:l.Ru.get("shows.filter.in-progress")}]]),r=Array.from(i.values());r.unshift({key:as,value:l.Ru.get("mwp.podcast.all.episodes")});const n=Array.from(i.keys()),o=(0,s.useCallback)((t=>{if(t===as)a([]);else{const e=n.find((e=>i.get(e)?.key===t));e&&a([e])}e()}),[e,a,n,i]);if(!i.size||!n)return null;let c=r[0];const d=Array.from(i.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return d.length>0&&(c=d[0][1]),(0,V.jsx)(Ja.g,{options:r,onSelect:e=>o(e),selected:c,variant:"bodyMediumBold",semanticColor:"textBase",heading:l.Ru.get("drop_down.filter_by")})},is=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,s.useContext)(za),i=Ma(),r=Array.from(i.values()),n=Array.from(i.keys()),o=(0,s.useCallback)((t=>{const s=n.find((e=>i.get(e)?.key===t));s&&a(s),e()}),[n,e,i,a]);if(!i.size||!t)return null;const c=Array.from(i.keys()).find((e=>e.field===t.field&&e.order===t.order));if(!c)return null;const d=i.get(c);return d?(0,V.jsx)(Ja.g,{options:r,onSelect:e=>o(e),selected:d,heading:l.Ru.get("drop_down.sort_by")}):null},rs="jVWq1orbpiIK34UFHkFb",ns="gYTsg8kvcGmu41_lilIb",os="GMHh7OED_Nijo4zzSfrb",ls="sNEwCEh44Lapg36PnVFw",cs="SoIsw3P_1RnUtFBHs_2d",ds="OMG3QMzpwer8oWsiJpzs",us="r0yVSge7A1iSTNfudfyV",ms="yP6EeRtQJeqKq10IsMxn",hs="MIaGJ1KyQ3JLblOjWL19",ps="p8WHC1qBUrwrBwzp_vYY",gs="Uzyuaxpkm_Gwb6jOGbva",xs="TSNj_F4gGzCuxrzx6n98",ys="E4HX0M3aD0MY5dUCKSCb",vs="CbSqM7wDwoLFnyIo1iKL",bs="c0h80mSMc3PkNlHX0DYs",js="SGGetEMTKgQk1aJvG4k9",fs="ne3ntrWAoMrE6_4A23Mf",Cs=({spec:e})=>{const t=(0,$.s)(),{canSort:a,canFilter:i}=(0,Et.T)().capabilities,r=(0,s.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),n=(0,s.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return(0,V.jsxs)("div",{className:ms,children:[i&&(0,V.jsx)("div",{className:ps,children:(0,V.jsx)(ss,{onFilter:r})}),!i&&(0,V.jsx)(p.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:gs,children:l.Ru.get("mwp.podcast.all.episodes")}),a&&(0,V.jsx)("div",{className:hs,children:(0,V.jsx)(is,{onSort:n})})]})};var Ps=a(80864),ks=a(23534),ws=a(15310),Rs=a(48383),Ss=a(51907),Es=a(92375);const Is=e=>{switch(e){case It.t5.TRAILER:return l.Ru.get("podcasts.next-episode.trailer");case It.t5.UP_NEXT:return l.Ru.get("podcasts.next-episode.up-next");case It.t5.CONTINUE_LISTENING:return l.Ru.get("podcasts.next-episode.continue-listening");case It.t5.FIRST_PUBLISHED:return l.Ru.get("podcasts.next-episode.first-published");case It.t5.LATEST_PUBLISHED:return l.Ru.get("podcasts.next-episode.latest-published");default:return}},Ns=({breakpoint:e,metadata:t,spec:a})=>{const{uri:i,trailer:n,topics:o,description:c,htmlDescription:d,rating:u}=t,x=(0,Ps.N)(i),y=(0,$.s)(),{spec:b,logger:f}=(0,Oe.r)(r.R,{data:{uri:i}}),P=(0,s.useMemo)((()=>b.aboutSectionFactory()),[b]),k=(0,s.useMemo)((()=>a.episodeListFactory()),[a]),w=(0,h.wA)(),R=(0,g.NC)(Tt.Pfj,{loadingValue:!1}),S=(0,Ne.V)(),{sortState:E}=(0,s.useContext)(Ba),I=(0,Et.T)(),N=(0,Ga.c)(),{usePlayContextItem:A}=(0,Ht.P)({uri:i,metadata:{[Ss.W.SORTING_CRITERIA]:I.getPlayerSort(Da),[Ss.W.FILTERING_PREDICATE]:I.getPlayerFilter(E)}},{featureIdentifier:"show"}),{isActive:B,isPlaying:T,togglePlay:_}=A({uri:n?.uri||""}),U=(0,s.useCallback)((e=>{const t=a.aboutSectionFactory().seeMoreButtonFactory(),s=e?t.hitUiReveal():t.hitUiHide();y.logInteraction(s)}),[y,a]),F=(0,s.useCallback)(((e,t)=>{const s=a.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});y.logInteraction(s)}),[y,a]),D=n?{name:n.name,uri:n.uri,audio:{items:n.audio.items.map((e=>({url:e.url})))}}:null,L=(0,Ea.B)(t),M=(0,ws.C)(D,L),O=(0,s.useCallback)((()=>{n?.uri&&(S?M():_())}),[M,S,_,n?.uri]),{ref:z,breakpoint:H}=(0,Rs.x)({[st.E.MEDIUM]:0,[st.E.LARGE]:600}),q=o.length>0,G=c||d,X=G||q,Y=t.nextBestEpisode?.type===It.t5.LATEST_PUBLISHED&&R,Z=(0,xa.C)();return(0,ks.K)(i),(0,V.jsxs)("div",{className:m()(rs,"contentSpacing",{[os]:e===st.E.LARGE}),ref:z,children:[(0,V.jsx)(Sa.q,{className:ns,gatedEntityCoverArt:t.gatedEntityCoverArt,gatedEntityRelations:t.gatedEntityRelations,upsellExplanation:t.upsellExplanation,hasAccess:t.hasGatedEntityRelationAccess,showCoverArt:!0}),(0,V.jsxs)("div",{className:ls,children:[X&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(p.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:gs,children:l.Ru.get("artist.about")}),G&&(0,V.jsx)(Q.N,{maxLines:4,content:(c||"").trim(),onExpanded:U,htmlContent:d||void 0}),n&&(0,V.jsx)(Ge.h,{menu:(0,V.jsx)(ga.b,{uri:n.uri,showUri:i,sharingInfo:n.sharingInfo}),children:(0,V.jsx)(W,{label:l.Ru.get("track-trailer"),className:xs,images:n.coverArt,title:n.name,duration:n.duration.milliseconds,moreButton:(0,V.jsx)(j.b,{menu:(0,V.jsx)(ga.b,{uri:n.uri,sharingInfo:n.sharingInfo,showUri:i}),children:(0,V.jsx)(ut.e,{})}),onClick:O,isPlaying:T,isActive:B,size:K.LARGE,contentRating:n.contentRating?.label})}),(0,V.jsxs)("div",{className:vs,children:[u&&!x&&(0,V.jsx)("div",{className:bs,children:(0,V.jsx)(Ot,{rating:u,onClick:()=>{const e=P.ratingButtonFactory().hitUiReveal();f.logInteraction(e),w((0,v.eH)(i,t))}})}),q&&(0,V.jsx)(C.N,{topics:o,className:js,onClick:F})]})]}),(0,V.jsx)(pa,{uri:i})]}),(0,V.jsx)(it.o.Provider,{value:H,children:(0,V.jsxs)("div",{className:m()(ds,{[us]:N}),"data-testid":"show-all-episode-list",children:[t.nextBestEpisode&&!Y&&(0,V.jsx)(Ea.q,{showMetadata:t,episode:t.nextBestEpisode.data,usePlayContextItem:A,status:Is(t.nextBestEpisode.type),variant:"next-best-episode"}),(0,V.jsx)(Cs,{spec:a}),(0,V.jsx)(Es.r,{spec:k,children:(0,V.jsx)(Za,{showMetadata:t,usePlayContextItem:A})})]})}),(0,V.jsx)(_t.Z,{copyrights:[]}),(0,V.jsxs)("div",{className:cs,children:[Z&&(0,V.jsx)(ya.w,{uri:i,title:l.Ru.get("internal-link-recommender.popular-episodes"),"data-testid":"popular-episodes-above"}),N&&(0,V.jsx)(Ra,{title:l.Ru.get("internal-link-recommender.more-podcasts-like-this"),uri:i,className:fs})]})]})},As=s.memo(Ns);var Bs=a(82594),Ts=a(19436);const _s=({reason:e})=>{const t=function(e){switch(e){case"OTP":return l.Ru.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l.Ru.get("podcasts.subscriber-indicator.subscription");default:return""}}(e);return t?(0,V.jsx)(p.E,{variant:"bodySmall",semanticColor:"textBase",className:ys,children:t}):null};const Us=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:s,name:i,podcastType:r,publisherName:n,gatedContentAccessReason:o}=e,c=(0,V.jsx)(Qt.H,{uri:a});return(0,V.jsxs)(We.z,{backgroundColor:t,children:[(0,V.jsx)(Xe.h,{children:(0,V.jsx)(Ge.h,{menu:c,children:(0,V.jsx)(Ye.X,{text:i,dragUri:a,dragLabel:i})})}),(0,V.jsx)(Bs.X,{children:(0,V.jsx)(Ge.h,{menu:c,children:(0,V.jsx)(Ts.b,{loading:"eager",name:i,images:s,placeholderType:"show",shape:Ts.u.SQUARE})})}),(0,V.jsxs)($e.Y,{children:[(0,V.jsxs)(Je.B,{children:["SHOW"===r?l.Ru.get("type.show"):l.Ru.get("type.podcast"),o&&(0,V.jsx)(_s,{reason:o})]}),(0,V.jsx)(Ge.h,{menu:c,children:(0,V.jsx)(tt.mm,{dragUri:a,dragLabel:i,scaleAtMinWidth:tt.tw,children:(0,V.jsx)("span",{"data-testid":"show-title",children:i})})}),(0,V.jsx)(et.g,{children:n})]})]})};var Fs=a(40755),Ds=a(44721),Ls=a(78235);const Ms=({metadata:e,showId:t})=>{const{coverArt:a,name:i,uri:n,isSaved:o}=e,{spec:l}=(0,Oe.r)(r.R,{data:{uri:n}}),d=(0,s.useMemo)((()=>l.actionBarFactory()),[l]),u=(0,Bt.H)(a[0]?.url||null),m=(0,it.y)();return(0,V.jsxs)("section",{children:[(0,V.jsx)(c.Q,{children:(0,Gt.hV)({showOrAudiobookName:i,type:"Podcast"})}),(0,V.jsx)(At.c,{artistOrShow:i,uri:n,entityType:At.p.PODCAST}),(0,V.jsx)(Us,{metadata:e,backgroundColor:u}),(0,V.jsx)(Xt,{uri:n,name:i,isSaved:o,backgroundColor:u,spec:d}),(0,V.jsx)(As,{breakpoint:m,metadata:e,showId:t,spec:l})]})},Os=(0,s.memo)((function(){const{showId:e=""}=(0,i.g)(),t=`spotify:show:${e}`,{data:a,error:r,redirectUri:c}=(0,ke.W)(t);if(c){const e=(0,o.Lce)(c);return(0,V.jsx)(Wt.$,{to:e.toURLPath(!0)})}const u=a&&(0,It.Go)(a);return!a||r?r instanceof Ls.W?(0,V.jsx)(d.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error-page.not-available-in-region.title")}):(0,V.jsx)(d.LoadingPage,{hasError:!!r,errorMessage:l.Ru.get("error.not_found.title.page")}):u?(0,V.jsx)(s.Suspense,{fallback:null,children:(0,V.jsx)(Fs.u,{pageId:n.$h.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,V.jsx)(Ds.d,{dynamicColors:a.dynamicColors,children:(0,V.jsx)(Kt,{metadata:a},`${!!a.consumptionCapExplanation}`)})})}):(0,V.jsx)(s.Suspense,{fallback:null,children:(0,V.jsx)(Fs.u,{pageId:n.$h.PODCAST,uri:t,children:(0,V.jsx)(Ta,{uri:a.uri,children:(0,V.jsx)(qa,{uri:a.uri,defaultSortParam:Oa(a.consumptionOrder),children:(0,V.jsx)(Ds.d,{dynamicColors:a.dynamicColors,children:(0,V.jsx)(Ms,{showId:e,metadata:a})})})})})})}))}}]);
//# sourceMappingURL=xpui-routes-show.js.map