"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9528],{5710:(e,t,i)=>{i.d(t,{o:()=>n});var s=i(35987),a=i(63112);function n(){return(0,a.N)(s.g)}},6600:(e,t,i)=>{i.d(t,{J:()=>u});var s=i(60749),a=i(4882),n=i(36585),r=i(87579),o=i(26626),l=i(50175),c=i(30767),d=i(86070);const u=({leavebehinds:e,surface:t,uri:i,pathname:u,state:p})=>{const m=(0,c.vh)(),h=`${r.Ru.get("view.see-all")} (${e.length<=l.E9?r.Ru.formatNumber(e.length):r.Ru.formatNumber(l.E9)})`;return(0,d.jsx)(s.N_,{to:u,state:p,children:(0,d.jsx)(a.H,{"data-testid":"leavebehinds-see-all",size:"small",onClick:()=>{m.send((0,n.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,o.Fh)(t),uri:i}))},children:h})})}},6787:(e,t,i)=>{i.d(t,{L:()=>o});var s=i(30758),a=i(3192),n=i(26945),r=i(32576);function o({episodeUri:e,start:t,stop:i}){const{togglePlay:o,triggerPlay:l,isPlaying:c,isActive:d}=(0,a.P)({uri:e},{featureIdentifier:"episode"}),u=(0,n.o)((e=>(0,r.s)(e)??0)),p=d&&function(e,t,i){return i>=e&&i<t}(t,i,u),m=c&&p;return{onClick:(0,s.useCallback)((e=>{p?o({seekTo:t,loggingParams:e}):l({seekTo:t,loggingParams:e})}),[p,t,o,l]),isPlaying:m,isActive:p}}},36305:(e,t,i)=>{i.r(t),i.d(t,{default:()=>vi});var s=i(30758),a=i(60749),n=i(85387),r=i(89035),o=i(39705),l=i(76082),c=i(87579),d=i(1214),u=i(52662),p=i(81640),m=i(24454),h=i(97910),y=i(62411),g=i(93672),x=i(71581),b=i(8912),v=i(57978),j=i(3224),k=i(87681),P=i(67954),f=i(61570),C=i(45806),I=i(38976),T=i(6550),E=i(44788),w=i(75756),R=i(97135),_=i(47939),S=i(97304),A=i(51034),L=i(86070);const N="activation-trigger-mme",U=({episodeUri:e,showUri:t,isLocked:i,isPlaying:s,isPlayDisabled:a,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o,size:c="large"})=>{const d=(0,A.c)();if((0,S.V)())return(0,L.jsx)(_.R,{size:c,onClick:o,isPlaying:s,disabled:a,locked:i,ariaPlayLabel:n,ariaPauseLabel:r});const u=(0,L.jsx)(R.N,{showUri:t,enabled:i,renderInline:!1,children:(0,L.jsx)(_.R,{size:c,onClick:o,isPlaying:s,disabled:a,locked:i,ariaPlayLabel:n,ariaPauseLabel:r})});return d?(0,L.jsx)(w.k,{id:N,targetURI:(0,l.o_h)(e),fadeOut:!0,children:u}):u};var D=i(91593),M=i(95948),F=i(29761),B=i(71589),O=i(61647),q=i(26945),z=i(97485),$=i(85105),H=i(66312),G=i(29618);const W="ZDeijYE6qPzPqT9vG_2w",Q="qEoBuparvnBwiHsPzwEj",K="azmMKgbEFsGjSUnw2Knc",V="oDljdc6tgUKxTeQMyh0D",Y="eCpSFybAW4xJNfuGDJY3",Z="aTeXTpJi_WmakpodeGxX",X="kZWs1d_TjX2JQgmtx90y",J="JCSifKpPc54eqcTYBj5Q",ee="FlK1APGRiu5DTwm_0kix",te="ahQLeD18bYXcFRWkL_vg",ie="l6peddfW1BiAnd1a_mF3",se="Xkg0O12dNVwomjL8dzm4",ae="OexEjZt7Kf7pFUW701v8",ne="jAY3diSzPfk19oswf8_y",re="F3BJWbXwGSqNOwZHInLz",oe="YjVCpFaOT3LCR64t8jTN",le="Q7HlO_WHb9N8aK8bgOjG",ce="xTENSk0_RmQ8qEeEuhnE",de="qH2Mpq2icGtfNZfwIhiW",ue="W4580vs00yDqFNs7363B",pe="H1jMR2c5kT6qQ7lmTqpF",me=({episode:e,onPlayEpisode:t,isPlaying:i,isActive:a,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,spec:d})=>{const{uri:u,playedState:p,contentRating:m,playability:h}=e,w=(0,z.s)(),R=(0,y.wA)(),[_]=(0,O.S)(1e4,(e=>e?.item?.uri===u)),S=(0,q.o)((e=>e?.duration)),{badges:A}=(0,G.b)({contentRating:m?.label}),N=(0,s.useCallback)((e=>{!h.playable&&A.nineteen&&(e.stopPropagation(),R((0,x.Tf)(u||"")))}),[u,h.playable,A.nineteen,R]),W=(0,s.useCallback)((()=>{const e=d.contextMenuButtonFactory().hitUiReveal();w.logInteraction(e)}),[w,d]),Q=(0,s.useCallback)(((e,t)=>{(0,F.Qv)(t,d.downloadButtonFactory(),w,u)}),[w,d,u]),K=(0,E.d$)(),{spec:V,logger:Z}=(0,$.r)(g.e,{data:{uri:u}});(0,s.useEffect)((()=>{K&&Z.logImpression(V.impression())}),[K,Z,V]);const X=(0,s.useCallback)((e=>{const t=d.saveButtonFactory();w.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u})),e&&K&&Z.logInteraction(V.hitAddToPlaylist({itemToBeAdded:u,playlist:B.Xn}))}),[w,d,u,K,Z,V]),J=!l&&!e.playability.playable,ee=c.Ru.get("tracklist.a11y.play",e.name,e.podcast?.name),te=c.Ru.get("tracklist.a11y.pause",e.name,e.podcast?.name),ie=e.podcast?.uri,se=(0,M.j)(),ae=(0,T.v)(e.uri),ne=!l;return(0,L.jsxs)(b.E,{backgroundColor:o,children:[(0,L.jsxs)("div",{className:Y,children:[(0,L.jsx)(D.P,{episode:e,showVideoBadge:!0}),(0,L.jsx)(H.j,{fullyPlayed:n,durationMs:a&&S?S:e.duration.milliseconds,releaseDate:e.releaseDate,resumePositionMs:p.playPositionMilliseconds,isPlaying:i,position:a&&_||void 0})]}),(0,L.jsxs)(v.S,{children:[(0,L.jsx)("div",{onClick:N,children:(0,L.jsx)(U,{episodeUri:e.uri,showUri:ie,isLocked:l,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:i,isPlayDisabled:J,playButtonPlayLabel:ee,playButtonPauseLabel:te,size:se})}),(0,L.jsx)(j.e,{uri:e.uri,onClick:Q,size:se,canDownload:ne,condensed:!0}),ae?(0,L.jsx)(I.g,{uri:e.uri,size:se}):(0,L.jsx)(P.b,{uri:e.uri,size:se,onClick:X,condensed:!0}),(0,L.jsx)(f.b,{onShow:W,menu:(0,L.jsx)(C.b,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:ie,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,L.jsx)(k.e,{label:c.Ru.get("more.label.context",e.name),size:se})})]})]})};var he=i(97500),ye=i.n(he),ge=i(69568),xe=i(93182),be=i(6600),ve=i(26626),je=i(59856),ke=i(15293),Pe=i(50175),fe=i(19157),Ce=i(30658),Ie=i(69479);const Te=ve.ui.EPISODE_PAGE,Ee=({leavebehinds:e,uri:t,seeAllPath:i})=>{const a=(0,s.useMemo)((()=>e.slice(0,Pe.un)),[e]);return(0,L.jsx)(xe.o,{leavebehinds:a,surface:Te,uri:t,seeAllButton:e.length>Pe.un?(0,L.jsx)(be.J,{leavebehinds:e,surface:Te,uri:t,pathname:i,state:{uri:t}}):null})};function we(e){const t=(0,fe.L)(),i=(0,l.o_h)(e.uri)?.id,a=(0,ke.c)(i),{data:n,error:r,getLeavebehinds:o}=(0,je.A)({surface:Te,uri:e.uri}),c=(d=t?.item.type,(0,Ce.Z)(d)===Ie.c.AD&&d===Ie.c.EPISODE);var d;(0,s.useEffect)((()=>{o()}),[o]),(0,s.useEffect)((()=>{c&&o()}),[c]);const u=(0,s.useMemo)((()=>n?(0,Pe.iT)(n,e.uri):[]),[n?.requestId]);return u.length<1||r?null:(0,L.jsx)(Ee,{uri:e.uri,leavebehinds:u,seeAllPath:a})}var Re=i(80902),_e=i(39629),Se=i(33100),Ae=i(14100),Le=i(60992);const Ne=({cardHeaderText:e,cardBodyText:t,buttonText:i,buttonTarget:s})=>(0,L.jsxs)("div",{className:J,children:[(0,L.jsxs)("div",{className:ee,children:[(0,L.jsx)(_e.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:e}),(0,L.jsx)(_e.E,{semanticColor:"textBase",children:t})]}),(0,L.jsx)(Le.$,{size:"small",colorSet:"invertedLight",href:(0,l.o_h)(s).toURLPath(!0),component:Re.v,children:i})]});var Ue=i(74929);const De=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:a,htmlDescription:n,onTimeStampClick:r,playability:o,showHeader:l=!0,spec:d})=>{const u=(0,z.s)(),p=(a||t)&&l,m=(0,s.useCallback)((e=>{const t=d.readMoreButtonFactory();u.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[d,u]),h=(0,Se.NC)(Ue.ZK8,{loadingValue:!1});return(0,L.jsxs)(L.Fragment,{children:[p&&(0,L.jsx)(_e.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:K,children:c.Ru.get("episode.description-title")}),t&&(0,L.jsx)(Ne,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),a&&(0,L.jsx)(Ae.N,{className:Q,onTimeStampClick:r,maxLines:4,onExpanded:m,content:(i||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:o.playable,enableAutomaticLinkification:h&&e&&!!n})]})};var Me=i(8335),Fe=i(78),Be=i(98870),Oe=i(48307),qe=i(46757),ze=i(84575),$e=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}($e||{});const He=s.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:i,spec:a}){const n=(0,z.s)(),[r,o]=(0,s.useState)($e.DESCRIPTION),l=(0,ze.SF)(),{ref:d,inView:u}=(0,Me.Wx)({threshold:[1],root:l.current,rootMargin:`-${qe.uC+1}px 100000px 0px 100000px`}),p=(0,s.useRef)(null),m=(0,s.useCallback)((e=>{p.current=e,d(e)}),[d]);return(0,s.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const i=e-qe.uC;t.scrollTop>i&&t.scrollTo({top:i})}),[l,r]),(0,L.jsx)(Fe.j,{list:(0,L.jsxs)(Be.L,{className:ye()(oe,{[le]:!u}),ref:m,children:[(0,L.jsx)(Oe.Y,{label:c.Ru.get("web-player.episode.description"),sentenceCase:!0,active:r===$e.DESCRIPTION,onClick:()=>{const e=a.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o($e.DESCRIPTION)},className:ye()(ce,{[te]:r===$e.DESCRIPTION})}),(0,L.jsx)(Oe.Y,{label:c.Ru.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===$e.TRANSCRIPT,onClick:()=>{const e=a.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o($e.TRANSCRIPT)},className:ye()(ce,{[te]:r===$e.TRANSCRIPT})})]}),children:null===e||r===$e.DESCRIPTION?t:i})}));var Ge=i(9229),We=i(3192),Qe=i(16467);const Ke=(0,s.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:i}){const{spec:s,logger:a}=(0,$.r)(Ge.c,{data:{uri:i}}),{isPlaying:n}=(0,We.P)({uri:i},{featureIdentifier:"episode"}),r=s.timestampLinkFactory();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:se,children:(0,L.jsx)(_e.E,{variant:"bodySmall",semanticColor:"textBase",children:c.Ru.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,s)=>{const o=`transcript-section-${s}`;return(0,L.jsxs)("div",{className:ie,children:[(0,L.jsx)("button",{className:ae,onClick:()=>{t(e.startMs,o),a.logInteraction(n?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:i}))},children:(0,L.jsx)(w.k,{id:o,targetURI:(0,l.o_h)(i),fadeOut:!0,children:(0,L.jsx)(_e.E,{variant:"marginalBold",semanticColor:"textSubdued",className:ne,children:(0,Qe.f)(e.startMs)})})}),e.content.map(((e,t)=>(0,L.jsx)(_e.E,{variant:"bodySmall",semanticColor:"textBase",className:re,dir:"auto",children:e},`transcript-text-${t}`)))]},o)}))]})}));var Ve=i(2391),Ye=i(22073),Ze=i(38281),Xe=i(86051),Je=i(56003),et=i(18709),tt=i(25099),it=i(47891),st=i(27619),at=i(66443),nt=i(53827),rt=i(65831),ot=i(83713),lt=i(40638),ct=i(82573),dt=i(23354),ut=i(1997),pt=i(15407),mt=i(41343);const ht=({children:e,index:t,ariaRowIndex:i,onTriggerPlay:a,isActive:n,uri:r,spec:o})=>{const l=(0,z.s)(),{pushPopSelected:c,toggleSelected:d,isSelected:u}=(0,s.useContext)(dt.m),p=(0,s.useRef)(null),m=(0,ut.W)(),h=(0,lt.YQ)((e=>{m({intent:"play",type:"double-click"});const t=l.logInteraction(o.doubleHitPlay({itemToBePlayed:r}));a(e,t)}),pt.d,{leading:!0,trailing:!1}),y=(0,s.useCallback)((e=>{d(t,e.shiftKey,e.ctrlKey||e.metaKey)}),[d,t]),g=(0,s.useCallback)((e=>{if(!p.current?.contains(e.target))return;const i="ArrowUp"===e.key?-1:1;["ArrowUp","ArrowDown"].includes(e.key)&&(e.shiftKey?c(t,i):d(t+i,!1,!1))}),[c,d,t]),x=u(t),b=x&&u(t-1),v=x&&u(t+1);return(0,L.jsx)(ct.$,{rowIndex:i,"aria-selected":x,children:(0,L.jsx)("div",{"data-testid":"tracklist-row",className:ye()(mt.A.trackListRow,mt.A.trackListRowGrid,{[mt.A.active]:n,[mt.A.selected]:x,[mt.A.isPreviousRowSelected]:b,[mt.A.isNextRowSelected]:v}),onDoubleClick:h,onClick:y,onKeyDown:g,ref:p,children:e})})};var yt=i(6787),gt=i(18940);const xt=({uri:e,title:t="",index:i,subtitle:a="",showName:n="",showUri:r="",duration:o=0,start:l,stop:d})=>{const{isActive:u,isPlaying:p,onClick:m}=(0,yt.L)({episodeUri:e,start:l,stop:d}),h=(0,s.useCallback)(((e,t)=>{m(t)}),[m]),{spec:y}=(0,$.r)(Ze.i,{data:{position:i,reason:"",uri:e}});return(0,L.jsx)(gt.pZ,{value:"row",index:i,children:(0,L.jsxs)(ht,{index:i,ariaRowIndex:i+1,onTriggerPlay:h,isActive:u,spec:y,uri:e,children:[(0,L.jsxs)(at.U,{ariaColIndex:0,children:[(0,L.jsx)(tt.$,{uri:e,playAriaLabel:c.Ru.get("tracklist.a11y.play",a,n),onClick:h,isPlaying:p,isActive:u,spec:y,children:(0,L.jsx)(it.a,{children:(0,L.jsx)(Ye.M,{className:mt.A.talkIcon,"aria-hidden":!0})})}),(0,L.jsxs)(et.l,{children:[(0,L.jsx)(ot.p,{titleText:t,children:t}),(0,L.jsx)(rt.p,{children:a})]})]}),(0,L.jsx)(nt.o,{ariaColIndex:1,children:(0,L.jsx)(Xe.g,{uri:r,name:n,spec:y,children:(0,L.jsx)("span",{dir:"auto",children:n})})}),(0,L.jsx)(st.l,{ariaColIndex:2,children:(0,L.jsx)(Je.P,{duration:o,className:mt.A.talkSegmentDuration})})]})})};var bt=i(92627),vt=i(2742),jt=i(8454),kt=i(73693),Pt=i(8413),ft=i(97959),Ct=i(3668),It=i(77336);const Tt="HRApv65revEcL42QzRjJ",Et="HbJqPqSmOY5H3lLnQVzD",wt="DBcCnhHVt7coNqp3wMB4",Rt=({episodeUri:e,index:t,duration:i,start:a,stop:n,name:r,uri:o,artists:l,album:d,playable:u})=>{const{isActive:p,isPlaying:m,onClick:h}=(0,yt.L)({episodeUri:e,start:a,stop:n}),y=(0,s.useCallback)(((e,t)=>{u&&h(t)}),[h,u]),{spec:g}=(0,$.r)(Ze.i,{data:{position:t,reason:"",uri:o}});return(0,L.jsx)(gt.pZ,{value:"row",index:t,children:(0,L.jsx)(jt.t,{trigger:"right-click",action:"open",menu:(0,L.jsx)(kt.P,{uri:o}),children:(0,L.jsxs)(Ct.w,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:y,isActive:p,isPlayable:u,spec:g,children:[(0,L.jsxs)(at.U,{ariaColIndex:0,children:[(0,L.jsx)(tt.$,{uri:o,playAriaLabel:c.Ru.get("tracklist.a11y.play",r,l?.[0].name),onClick:y,isPlaying:m,isActive:p,spec:g,children:(0,L.jsx)(it.a,{children:(0,L.jsx)("img",{className:Et,src:d.image,alt:d.name})})}),(0,L.jsxs)(et.l,{children:[(0,L.jsx)(ot.p,{titleText:r,children:r}),(0,L.jsx)(rt.p,{children:(0,L.jsx)(Pt.l,{artists:l,spec:g})})]})]}),(0,L.jsx)(nt.o,{ariaColIndex:1,children:(0,L.jsx)(Xe.g,{uri:d.uri,name:d.name,spec:g,children:d.name})}),(0,L.jsxs)(st.l,{ariaColIndex:2,children:[(0,L.jsx)(It.d,{uri:o,spec:g}),(0,L.jsx)(Je.P,{duration:i}),(0,L.jsx)(ft.Y,{spec:g,menu:(0,L.jsx)(kt.P,{uri:o,artists:l}),label:c.Ru.get("more.label.track",r,l?.[0].name)})]})]})})})};var _t=i(5710),St=i(99983);function At(e,t,i){return e.reduce(((e,s,a)=>((a>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===s.type?e.push(function(e,t,i){return{type:"MUSIC",index:t,uri:i.uri,episodeUri:e,start:i.start,stop:i.stop,duration:i.duration,name:i.track.name,artists:i.track.artists,album:i.track.album,playable:i.track.playable}}(i,a,s)):"TALK"===s.type&&e.push(function(e,t,i){return{type:"TALK",index:t,uri:e,title:i.title,subtitle:i.subtitle,start:i.start,stop:i.stop,duration:i.duration,showUri:i.show.uri,showName:i.show.name}}(i,a,s)),e)),[])}const Lt=({uri:e,segmentCount:t})=>{const i=(0,_t.o)(),a=(0,s.useCallback)((async(s,a)=>{const n=Math.ceil(s/2);try{return{items:At(await i.getSegments(e,n,a),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,i,e]),n=(0,s.useCallback)((t=>{switch(t.type){case"SPACER":return(0,L.jsx)("div",{className:wt},t.id);case"MUSIC":return(0,L.jsx)(Rt,{...t},`${e}-${t.index}`);case"TALK":return(0,L.jsx)(xt,{...t},`${e}-${t.index}`);default:return(0,St.d)(t)}}),[e]),r=(0,s.useCallback)((e=>({uri:"MUSIC"===e.type?e.uri:""})),[]),o=c.Ru.get("music_and_talk.in_this_episode");return(0,L.jsxs)("div",{children:[(0,L.jsx)(_e.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Tt,children:o}),(0,L.jsx)(bt.S4,{ariaLabel:o,hasHeaderRow:!0,rowPlaceholder:Ve.qq,columns:[vt.$.TITLE_AND_ARTIST,vt.$.ALBUM_OR_SHOW,vt.$.DURATION],renderRow:n,fetchTracks:a,resolveItem:r,limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})},Nt=(0,s.lazy)((async()=>{const{CommentsList:e}=await Promise.all([i.e(5499),i.e(2023),i.e(4483)]).then(i.bind(i,49035));return{default:e}}));var Ut=i(82444),Dt=i(35524),Mt=i(64254),Ft=i(98474),Bt=i(86851);const Ot=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:a,hasMusicAndTalkSegments:n,htmlDescription:r,onDescriptionTimestampClick:o,onTranscriptTimestampClick:l,playability:d,segmentCount:u,showUrl:p,transcript:m,uri:h,spec:y})=>{const g=(0,z.s)(),x=(0,Ut.d)(),b=(0,s.useMemo)((()=>y.descriptionSectionFactory()),[y]),v=(0,s.useMemo)((()=>b.trackListFactory()),[b]),[j,k]=(0,s.useState)(null),P=(0,s.useCallback)((async e=>{const t=await(0,Ft.Q)(e);k(t)}),[]);(0,s.useEffect)((()=>{m&&m.length>0&&P(m[0].cdnUrl)}),[P,m]);const f=(0,Mt.y)(),C=l=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(De,{hasDescription:a,contentInformation:t,onTimeStampClick:o,description:i,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:d,showHeader:l,spec:b}),n&&(0,L.jsx)(Bt.r,{spec:v,children:(0,L.jsx)(Lt,{segmentCount:u,uri:h})}),p&&(0,L.jsx)(ge.n,{size:"small",className:V,href:p,component:Re.v,onClick:()=>{g.logInteraction(b.allEpisodesLinkFactory().hitUiNavigate({destination:p}))},children:c.Ru.get("episode.see_all_episodes")}),x&&(0,L.jsx)(s.Suspense,{fallback:null,children:(0,L.jsx)("div",{className:ye()(de,{[ue]:f===Dt.E.LARGE}),children:(0,L.jsx)(Nt,{uri:h,className:pe})})}),(0,L.jsx)(we,{uri:h})]}),I=m&&m?.length>0&&d.playable;return(0,L.jsx)(L.Fragment,{children:I?(0,L.jsx)(He,{transcriptSections:j,descriptionContent:C(!1),transcriptContent:(0,L.jsx)(Ke,{transcriptSections:j||[],onTimeStampClick:l,episodeUri:h}),spec:y}):C(!0)})};var qt=i(42738),zt=i(3364),$t=i(90502),Ht=i(22923),Gt=i(11738),Wt=i(50498),Qt=i(56721),Kt=i(97650),Vt=i(65047),Yt=i(83332),Zt=i(79462),Xt=i(20934),Jt=i(8065),ei=i(15652);const ti=({coverArt:e,name:t})=>{const i=(0,Mt.y)(),s=i===Dt.E.SMALL||i===Dt.E.XSMALL;return(0,L.jsx)(Jt.b,{images:e,type:Ie.c.EPISODE,shape:Jt.u.ROUNDED_CORNERS,title:t,size:s?ei.Qe.SIZE_20:ei.Qe.SIZE_24,className:Z})};var ii=i(67721);const si=({episode:e,isFullyPlayed:t,setIsFullyPlayed:i,onPlayEpisode:a,isPlaying:n,isLocked:r,backgroundColor:o,spec:d})=>{const{uri:u,name:p,sharingInfo:m,playedState:h,episodeType:y,releaseDate:g,coverArt:x}=e,b=(0,z.s)(),v=function(e,t,i,s,a){const n=t===ii.I_.Episode;return(0,Xt.hD)(e,s,i,a)?(0,L.jsx)(Xt.Ih,{isMusicAndTalk:n}):n?c.Ru.get("type.showEpisode"):c.Ru.get("type.podcastEpisode")}(u,y||ii.I_.Unknown,h.playPositionMilliseconds,function(e){return e?.replace(/T.*/,"")||""}(g?.isoString),h.state===ii._w.Completed),j=e.podcast?.uri,k=function(e){const t=(0,l.o_h)(e);return`/show/${(0,l.cEw)(t?.id||"")}`}(j),P=(0,s.useCallback)((()=>{b.logInteraction(d.podcastLinkFactory().hitUiNavigate({destination:k}))}),[b,k,d]),f=e.podcast?.coverArt,I=!!(f&&f.length===x.length&&x.every(((e,t)=>e.url===f[t].url))),T=!r&&!e.playability.playable,E=c.Ru.get("tracklist.a11y.play",e.name,e.podcast?.name),w=c.Ru.get("tracklist.a11y.pause",e.name,e.podcast?.name),R=(0,L.jsx)(C.b,{uri:u,sharingInfo:m,showUri:j,contextUri:u,isPlayed:t,onMarkAsPlayed:i});return(0,L.jsxs)(zt.z,{backgroundColor:o,children:[(0,L.jsxs)(Gt.h,{children:[(0,L.jsx)(U,{episodeUri:e.uri,showUri:j,isLocked:r,onClick:()=>{a(h.playPositionMilliseconds)},isPlaying:n,isPlayDisabled:T,playButtonPlayLabel:E,playButtonPauseLabel:w,size:"medium"}),(0,L.jsx)(qt.h,{menu:R,children:(0,L.jsx)(Wt.X,{text:p,dragUri:u,dragLabel:p})})]}),!I&&(0,L.jsx)($t.X,{children:(0,L.jsx)(qt.h,{menu:R,children:(0,L.jsx)(Qt.b,{loading:"eager",name:p,images:x,placeholderType:"episode",shape:Qt.u.SQUARE})})}),(0,L.jsxs)(Ht.Y,{children:[(0,L.jsx)(Kt.B,{children:v}),(0,L.jsx)(qt.h,{menu:R,children:(0,L.jsx)(Yt.mm,{dragUri:u,dragLabel:p,scaleAtMinWidth:Yt.tw,className:W,children:(0,L.jsx)("span",{"data-testid":"episodeTitle",children:p})})}),(0,L.jsx)(qt.h,{menu:R,children:(0,L.jsxs)(Zt.N,{to:k,onClick:P,className:X,children:[I&&(0,L.jsx)(ti,{name:p,coverArt:x}),(0,L.jsx)(Vt.g,{children:(0,L.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})]})})]})]})};var ai=i(20924);var ni=i(23293),ri=i(39066),oi=i(58361),li=i(36962),ci=i(26698),di=i(70117),ui=i(4437),pi=i(40354),mi=i(67323),hi=i(70171),yi=i(67300),gi=i(32971),xi=i(86779);const bi=({episode:e})=>{const{uri:t,episodeType:i,description:n,htmlDescription:o,podcastSubscription:c,segmentsCount:m,podcast:y,contentInformation:g,coverArt:x}=e,{spec:b,logger:v}=(0,$.r)(r.g,{data:{uri:t}}),j=(0,li.n)(),k=(0,s.useMemo)((()=>b.headerFactory()),[b]),P=(0,s.useMemo)((()=>b.actionBarFactory()),[b]),{isActive:f,isPlaying:C}=(0,mi.te)(t),{isFullyPlayed:I,setIsFullyPlayed:T}=(0,hi.e)({uri:t,isPlaying:C,durationMs:e.duration.milliseconds,episodePlaybackState:e.playedState?.state}),E=(0,pi.z)(),w=void 0!==m&&m>0,R=(0,S.V)(),{triggerPlay:_,togglePlay:U,isActive:D}=(0,We.P)({uri:t,...j?{}:{pages:[{items:[{type:Ie.c.EPISODE,uri:t,uid:null,provider:null}]}]}},{featureIdentifier:"episode"}),M=x.at(0)?.url,F=(0,di.H)(M||null),B=(0,q.o)((e=>e?.isPaused??void 0)),O=(0,A.c)(),z=c.isPaywalled&&!c.isUserSubscribed,H=f||D,G=e?{name:e.name,uri:e.uri,mediaTypes:e.mediaTypes,audio:{items:e.audio.items.map((e=>({url:e.url})))}}:null,W=y?{name:y.name,uri:y.uri,trailer:y.trailer,showTypes:y.showTypes}:null,Q=(0,ci.C)(G,W),K=(0,s.useCallback)(((e,t,s,a)=>{const n=()=>{B?(a?.("resume"),E.resume({featureIdentifier:"episode"})):(a?.("pause"),E.pause({featureIdentifier:"episode"}))};if(!z)if(i===ii.I_.Episode&&O)u.h.set((()=>({triggerId:s||N,triggerAction:null})));else if(D&&!t)R?n():U({loggingParams:a?.()});else if(f&&!t)n();else{const t=a?.("play");R?Q({seekTo:e,loggingParams:t}):_({seekTo:e,loggingParams:t})}}),[z,i,O,f,D,R,B,E,U,Q,_]),V=(0,s.useCallback)((e=>{K(e,!1,void 0,(e=>{const i=b.actionBarFactory().playButtonFactory();let s;return s="pause"===e||C?i.hitPause({itemToBePaused:t}):"resume"===e||H?i.hitResume({itemToBeResumed:t}):i.hitPlay({itemToBePlayed:t}),v.logInteraction(s)}))}),[K,H,C,v,b,t]),Y=(0,s.useCallback)((e=>{K(e,!0,void 0,(()=>v.logInteraction(b.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[K,v,b,t]),Z=(0,s.useCallback)(((e,t)=>{K(e,!0,t)}),[K]),[X,J]=(0,a.ok)();(e=>{const t=(0,ai.g)(),[i]=(0,a.ok)(),n=e.gatedEntityRelations?.entitiesWithValueProps.at(0),r=(0,l.o_h)(n?.fallbackNavigation?.uri),o=n?.uri,c=i.has("si");(0,s.useEffect)((()=>{if(!c||!o)return;let i;e.hasGatedEntityRelationAccess&&e.uri!==o?i=(0,l.o_h)(o)?.toURLPath(!0):!e.hasGatedEntityRelationAccess&&r&&(i=r.toURLPath(!0)),i&&t(i,{replace:!0})}),[r,c,t,o,e.hasGatedEntityRelationAccess,e.uri])})(e),(0,s.useEffect)((()=>{if(e&&!H&&X.has("t")){const t=X.get("t")||"0",i=1e3*parseInt(t,10);i<=e.duration.milliseconds&&(X.delete("t"),J(X,{replace:!0}),K(i,!0))}}),[e,K,H,X,J]);const ee=!!n||!!o,te=e.podcast?.uri,ie=(0,l.o_h)(te)?.toURLPath(!0);return(0,L.jsxs)("section",{"data-testid":"episode",children:[(0,L.jsx)(d.Q,{children:(0,xi.L$)({episodeOrChapterName:e.name,showOrAudiobookName:e.podcast?.name??"",type:"Podcast"})}),(0,L.jsx)(h.c,{artistOrShow:e.podcast?.name,title:e.name,uri:t,entityType:h.p.EPISODE}),(0,L.jsx)(si,{episode:e,onPlayEpisode:V,isPlaying:C,isFullyPlayed:I,setIsFullyPlayed:T,backgroundColor:F,spec:k,isLocked:z}),(0,L.jsx)(me,{episode:e,onPlayEpisode:V,isPlaying:C,isActive:H,isFullyPlayed:I,setIsFullyPlayed:T,backgroundColor:F,isLocked:z,spec:P}),(0,L.jsxs)("div",{className:"contentSpacing",children:[(0,L.jsx)(ni.q,{gatedEntityRelations:e.gatedEntityRelations,upsellExplanation:e.upsellExplanation,hasAccess:e.hasGatedEntityRelationAccess,showValueProps:!1,showCoverArt:!1}),(0,L.jsx)(Ot,{transcript:e.transcript,hasDescription:ee,contentInformation:g,onDescriptionTimestampClick:Y,onTranscriptTimestampClick:Z,description:e.description,areHTMLDescriptionsEnabled:!0,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegments:w,segmentCount:m,uri:e.uri,showUrl:ie,spec:b}),O&&(0,L.jsx)(p.W,{uri:t})]})]})},vi=s.memo((function(){const{episodeId:e=""}=(0,n.g)(),t=(0,l.iMK)(e).toURI(),i=(0,yi.d)(t);return i?.isError||!i?.episodeOrChapter?(0,L.jsx)(m.LoadingPage,{hasError:i?.isError||!1,errorMessage:c.Ru.get("error.not_found.title.podcast")}):(0,gi.Gr)(i.episodeOrChapter)?(0,L.jsx)(ri.$,{to:(0,l.o_h)(i.episodeOrChapter.book?.uri).toURLPath(!0)}):(0,L.jsx)(s.Suspense,{fallback:null,children:(0,L.jsx)(oi.u,{pageId:o.$h.PODCAST_EPISODE,uri:t,children:(0,L.jsx)(ui.d,{dynamicColors:i.episodeOrChapter.dynamicColors,children:(0,L.jsx)(bi,{episode:i.episodeOrChapter})})})})}))},81640:(e,t,i)=>{i.d(t,{W:()=>G});var s=i(97500),a=i.n(s),n=i(76082),r=i(87579),o=i(57826),l=i(48692),c=i(37007);const d=Spicetify.GraphQL.Definitions["internalLinkRecommenderEpisode"]=new l.l("internalLinkRecommenderEpisode","query","5146a0312a2366520b9b43c3b5dd9e54c5b802bd74de3e0bd05f3c6800825c9f",null);var u=i(85236),p=i(30758),m=i(62411),h=i(71581),y=i(75756),g=i(42738),x=i(45806),b=i(82832),v=i(52662),j=i(97135),k=i(29398),P=i(97304),f=i(26698),C=i(48653),I=i(34719),T=i(32639),E=i(18940),w=i(64254),R=i(3192),_=i(61647),S=i(67721),A=i(29618),L=i(86070);const N=e=>`activation-trigger-mme-${e}`,U=p.memo((function({index:e=-1,audio:t,contentInformation:i,coverArt:s,contentRatingLabel:a,description:r,mediaTypes:o,releaseDate:l,name:c,playable:d,playedState:u,podcastSubscription:U,sharingInfo:D,showName:M,showTrailer:F,showTypes:B,showUri:O,totalMilliseconds:q,type:z,uri:$}){const H=u.playPositionMilliseconds,G=(0,p.useRef)(null),[W,Q]=(0,p.useState)(u.state===S._w.Completed),{draggable:K,onDragStart:V}=(0,k.P)(),Y=(0,P.V)(),Z=(0,w.y)(),X=(0,m.wA)(),{isActive:J,isPlaying:ee,togglePlay:te}=(0,R.P)({uri:$},{featureIdentifier:"episode"}),[ie]=(0,_.S)(1e4,(e=>e?.item?.uri===$));(0,p.useEffect)((()=>{ee&&(G.current=ie)}),[ee,ie]),(0,p.useEffect)((()=>{!ee&&G.current&&q<=G.current&&Q(!0)}),[ee,q]);const se=(0,p.useCallback)((e=>{e||(G.current=0),Q(e)}),[]),ae={uri:O,name:M,trailer:F,showTypes:B},ne=(0,f.C)({audio:t,name:c,uri:$,mediaTypes:o,coverArt:{sources:s}},ae),re=(0,p.useCallback)((()=>{z!==S.I_.Episode?Y?ne():te():v.h.set((()=>({triggerId:N($),triggerAction:null})))}),[z,Y,$,ne,te]),oe=U?.isPaywalled??!1,le=U?.isUserSubscribed??!1,ce=oe&&!le,de=oe&&Y,{badges:ue}=(0,A.b)({contentRating:a,isPaywalled:oe}),pe=(0,p.useCallback)((()=>X((0,h.Tf)(O))),[O,X]),me=(0,p.useCallback)((e=>{let t=e;return(ce||de)&&(t=(0,L.jsx)(j.N,{enabled:!0,showUri:O,children:t})),!d&&ue.nineteen&&(t=(0,L.jsx)("div",{onClick:e=>{e.stopPropagation(),pe()},children:e})),t=(0,L.jsx)(y.k,{id:N($),targetURI:(0,n.o_h)($),children:t}),t}),[ce,de,d,ue.nineteen,$,O,pe]);return(0,L.jsx)(E.pZ,{value:"row",index:e,children:(0,L.jsx)(g.h,{menu:(0,L.jsx)(x.b,{uri:$,showUri:O,sharingInfo:D,isPlayed:W,onMarkAsPlayed:se}),children:(0,L.jsx)(b.k,{requestId:void 0,index:e,uri:$,size:Z,images:s||[],name:c,showName:M,description:r,isPlayable:d||ce,fullyPlayed:W,durationMs:q,releaseDate:l,resumePositionMs:G.current??H,draggable:K,handleDragStart:e=>{if(e.target!==e.currentTarget)return;V(e,{itemUris:[$],dragLabelText:`${c} â€¢ ${M}`,contextUri:O})},handlePlaybackClick:re,isCurrentlyPlaying:J,isPaywalled:oe,isUserSubscribed:le,isPlaying:ee,position:ee?ie:void 0,episodeSharingInfo:D,onMarkAsPlayed:se,contentInformation:i,showUri:O,mediaTypes:o??void 0,badges:(0,L.jsxs)(L.Fragment,{children:[ue.explicit&&(0,L.jsx)(C.U,{}),ue.paid&&(0,L.jsx)(I.y,{}),ue.nineteen&&(0,L.jsx)(T.q,{size:16})]}),playButtonWrapper:me})})})}));var D=i(46156),M=i(69479);var F=i(97614),B=i(89467);const O="GgMHVmfXNzteIydSWMIA",q="GcupflQsYyy0IMOsCeD1",z="A4FqrLbXeENogU0IRaPn",$="YCYs0Gv5B5ctDN0f5Zby",H=({uri:e,isFullPage:t=!1})=>{const{data:i}=(s={uri:e},(0,c.I)(d,s,o));var s,o;const l=i?.seoRecommendedEpisode.totalCount,u=i?.seoRecommendedEpisode.items,p=function(e){return(e||[]).filter((e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(e.data)))}(u),m=t?p:p.slice(0,5);if(0===l)return null;const h=(0,n.o_h)(e)?.id,y=`spotify:app:episode:${h}:more-like-this`;return(0,L.jsxs)("section",{className:a()(O,{[q]:!t}),"data-testid":"episode-list",children:[(0,L.jsx)(F.k,{title:r.Ru.get("internal-link-recommender.more-episodes-like-this"),showSeeAll:!t,seeAllUri:y}),m.map((({data:e},t)=>{const i=(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Podcast"===e.__typename;var t})(e.podcastV2.data)?e.podcastV2.data:null;return i?e&&(0,L.jsxs)("div",{className:$,children:[(0,L.jsx)("hr",{className:z,"aria-hidden":!0}),(0,L.jsx)(U,{index:t,audio:e.audio,contentInformation:e.contentInformation,contentRatingLabel:e.contentRating?.label,coverArt:e.coverArt?e.coverArt.sources:void 0,description:e.description,releaseDate:e.releaseDate,mediaTypes:e.mediaTypes,name:e.name,playable:e.playability.playable,playedState:e.playedState,podcastSubscription:(0,B.Wx)(e.restrictions,e.playability),sharingInfo:e.sharingInfo,showTrailer:(s=i.trailerV2?.data,s&&(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(s)?{type:M.c.EPISODE,uri:s.uri,name:s.name,coverArt:s.coverArt?.sources||[],audio:s.audio,audioPreview:(0,D.xh)(s),sharingInfo:s.sharingInfo,duration:{milliseconds:s.duration.totalMilliseconds},contentRating:s.contentRating,mediaTypes:s.mediaTypes}:null),showName:i.name,showTypes:i.showTypes,showUri:i.uri,totalMilliseconds:e.duration.totalMilliseconds,type:e.type,uri:e.uri},`${e.uri}/${t}`)]},`${t}${e.uri}`):null;var s}))]})},G=e=>{const t=(0,u.D)({entityType:M.c.EPISODE,componentType:"list",uri:e.uri});return(0,L.jsx)(o.s,{onError:t,children:(0,L.jsx)(H,{...e})})}},91593:(e,t,i)=>{i.d(t,{P:()=>s.P});var s=i(1046)},93182:(e,t,i)=>{i.d(t,{o:()=>T});var s=i(30758),a=i(39629),n=i(68437),r=i(90238),o=i(36585),l=i(87579),c=i(24732),d=i(59082),u=i(12686),p=i(99939),m=i(60992),h=i(65271),y=i(79462);const g="c5Ml9BbBuUEHjNkcSwZA";var x=i(86070);const b="70px",v=({adId:e,advertiser:t,tagline:i,displayImage:s,buttonMessage:a,cardOnClick:n,buttonOnClick:r,clickthroughUrl:o})=>(0,x.jsx)(y.N,{to:(0,h.H)(o),className:g,"data-testid":"leavebehind",children:(0,x.jsx)(c.v,{onClick:n,onClickHint:l.Ru.get("ad-formats.learnMore"),layout:"wide",variant:"tinted",id:e,size:"xl",title:(0,x.jsx)(d.d,{weight:"bold",variant:"ballad",lineClamp:1,"data-testid":"leavebehind-advertiser",children:t}),subtitle:(0,x.jsx)(u.j,{as:"div",lineClamp:2,"data-testid":"leavebehind-tagline",children:i}),media:(0,x.jsx)(p.C,{"data-testid":"leavebehind-image",src:s.src,alt:s.alt,imageHeight:b,imageWidth:b,size:"xl"}),trailing:(0,x.jsx)(m.$,{onClick:()=>{r&&r()},"data-testid":"leavebehind-button",colorSet:"invertedLight",size:"small","aria-label":l.Ru.get("ad-formats.learnMore"),children:a})})});var j=i(26626),k=i(50175),P=i(75263),f=i(30767);const C="zlUJfROzFEOsEDWL7ucP",I="Fxvq1Fw7XQdGRDvYokRg",T=({leavebehinds:e,seeAllButton:t,surface:i,uri:c})=>{const d=(0,f.vh)(),u=(0,P.w)(P.P),[p,m]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{e&&e.length>0&&p!==e[0].requestId&&c&&(e.forEach(((e,t)=>{e.uri===c&&(e.trackingEvents?.viewed.forEach((async t=>{try{await u(t)}catch(s){const a=s;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:a.message,http_error_code:422,surface:(0,j.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e.lineitemId,ad_content_origin:(0,k.Zl)(i)}))}})),d.send((0,o.x)({leavebehind_lineitem_id:e.lineitemId,leavebehind_request_id:e.requestId,event:"event_viewed",event_reason:`viewed_on_${(0,j.Fh)(i).toLowerCase()}`,surface:(0,j.Fh)(i),surface_position:t+1,uri:c})))})),m(e[0].requestId))}),[d,u,e,c,i,p]);const h=({eventReason:e,lineitemId:t,requestId:s,trackingEvents:a,surfacePosition:n})=>{((e,t)=>{t?.forEach((async t=>{try{await u(t)}catch(s){const a=s;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:a.name,http_error_code:422,surface:(0,j.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e,ad_content_origin:(0,k.Zl)(i)}))}}))})(t,a),d.send((0,o.x)({leavebehind_lineitem_id:t,leavebehind_request_id:s,event:"event_clicked",event_reason:e,surface:(0,j.Fh)(i),surface_position:n,uri:c}))};return(0,x.jsxs)("section",{"data-testid":"leavebehinds-wrapper",children:[(0,x.jsxs)("div",{className:I,children:[(0,x.jsx)(a.E,{as:"h2",semanticColor:"textBase",variant:"titleSmall",paddingBottom:(0,n.po)("tighter"),"data-testid":"leavebehinds-title",children:l.Ru.get("podcast-ads.recent_ads")}),t]}),(0,x.jsx)("div",{className:C,"data-testid":"leavebehinds-list-wrapper",children:e.map(((e,t)=>(0,x.jsx)(v,{...e,buttonOnClick:()=>{h({eventReason:"button_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})},cardOnClick:()=>{h({eventReason:"card_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})}},e.adId)))})]})}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map